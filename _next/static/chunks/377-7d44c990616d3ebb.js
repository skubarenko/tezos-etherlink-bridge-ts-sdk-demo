"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[377],{35809:function(e,t,s){s.d(t,{L:function(){return n}});var r=s(3827),a=s(64090),i=s(89521);let n=(0,a.memo)(e=>{let t=e.iconSize||32,s=e.iconClassName||"mr-2";return(0,r.jsxs)("span",{className:(0,i.Nn)("inline-flex items-center justify-center text-nowrap",e.className),children:[(0,r.jsx)("img",{src:e.token.iconUrl,alt:e.token.name,width:t,height:t,className:(0,i.Nn)("inline rounded-full",s)}),e.showName?(0,r.jsxs)("span",{className:"inline-flex flex-col overflow-hidden",children:[(0,r.jsx)("span",{className:"overflow-hidden overflow-ellipsis",children:e.token.ticker}),(0,r.jsx)("span",{className:"text-sm overflow-hidden overflow-ellipsis",children:e.token.name})]}):(0,r.jsx)("span",{className:"overflow-hidden overflow-ellipsis",children:e.token.ticker})]})})},8377:function(e,t,s){s.d(t,{Gv:function(){return U}});var r,a,i=s(3827),n=s(64090);(r=a||(a={}))[r.Pending=0]="Pending",r[r.Created=1]="Created",r[r.Sealed=2]="Sealed",r[r.Finished=3]="Finished",r[r.Failed=4]="Failed";let l=Symbol.dispose;class d{getCurrentTheme(){return this.ensureThemeIsValid(localStorage.getItem(d.localStorageKey))}setCurrentTheme(e){let t=this.ensureThemeIsValid(e),s="system"===t,r=s?this.darkSystemThemeMatchMediaQueryList.matches:"dark"===t;return document.documentElement.classList.toggle(d.rootElementDarkModeClassName,r),this.updateThirdPartyThemes(r),s?localStorage.removeItem(d.localStorageKey):localStorage.setItem(d.localStorageKey,t),document.documentElement.classList.toggle(d.rootElementDarkModeClassName,r),this.updateThirdPartyThemes(r),t}setNextTheme(e){return this.setCurrentTheme(this.getNextTheme(e||this.getCurrentTheme()))}getNextTheme(e){switch(e){case"system":return"light";case"light":return"dark";case"dark":return"system"}}ensureThemeIsValid(e){return"system"===e||"light"===e||"dark"===e?e:"system"}updateThirdPartyThemes(e){}[l](){this.darkSystemThemeMatchMediaQueryList.removeEventListener("change",this.onMediaQueryListChange)}constructor(){this.onMediaQueryListChange=e=>{this.updateThirdPartyThemes(e.matches)},this.darkSystemThemeMatchMediaQueryList=window.matchMedia("(prefers-color-scheme: dark)"),this.darkSystemThemeMatchMediaQueryList.addEventListener("change",this.onMediaQueryListChange),this.setCurrentTheme(this.getCurrentTheme())}}d.localStorageKey="theme",d.rootElementDarkModeClassName="dark";class o{addHandler(e){this.handlers.add(e),this.startInternalTimerIfNeeded()}removeHandler(e){let t=this.handlers.delete(e);return this.stopInternalTimerIfNeeded(),t}removeAllHandler(){this.handlers.clear()}startInternalTimer(){this.stopInternalTimer(),this.internalTimerId=setTimeout(()=>{this.internalTimerId=setInterval(this.internalTimerHandler,1e3)},1e3-new Date().getMilliseconds())}stopInternalTimer(){clearInterval(this.internalTimerId),clearTimeout(this.internalTimerId),this.internalTimerId=void 0}startInternalTimerIfNeeded(){!this.internalTimerId&&this.handlers.size&&this.startInternalTimer()}stopInternalTimerIfNeeded(){this.internalTimerId&&!this.handlers.size&&this.stopInternalTimer()}constructor(){this.handlers=new Set,this.internalTimerId=void 0,this.internalTimerHandler=()=>{let e=new Date;for(let t of this.handlers)t(e)}}}class c{addHandler(e,t){this.handlers.set(t,e),this.startInternalTimerIfNeeded(),t(this.getEstimatedTime(new Date,e))}removeHandler(e){let t=this.handlers.delete(e);return this.stopInternalTimerIfNeeded(),t}removeAllHandler(){this.handlers.clear()}startInternalTimer(){this.syncedTimer.addHandler(this.internalTimerHandler)}stopInternalTimer(){this.syncedTimer.removeHandler(this.internalTimerHandler)}startInternalTimerIfNeeded(){this.handlers.size&&this.startInternalTimer()}stopInternalTimerIfNeeded(){this.handlers.size||this.stopInternalTimer()}getEstimatedTime(e,t){let s,r;let a=e.getTime(),i=t.getTime();a<=i?(r=i-a,s=!1):(r=a-i,s=!0);let n=Math.floor(r/1e3),l=Math.floor(n/60),d=Math.floor(l/60),o=Math.floor(d/24);return d-=24*o,l=l-1440*o-60*d,n=n-86400*o-3600*d-60*l,{currentDate:e,targetDate:t,isDelayed:s,days:o,hours:d,minutes:l,seconds:n}}constructor(){this.handlers=new Map,this.syncedTimer=new o,this.internalTimerHandler=e=>{for(let[t,s]of this.handlers)t(this.getEstimatedTime(e,s))}}}var m=s(89521);let h=new c,u=e=>{let t="".concat(m.sG.padStart(e.hours.toString(),2,"0"),":").concat(m.sG.padStart(e.minutes.toString(),2,"0"),":").concat(m.sG.padStart(e.seconds.toString(),2,"0"));return e.days&&(t="".concat(e.days," days ").concat(t)),e.isDelayed&&(t="delayed for "+t),t},p=e=>{let[t,s]=(0,n.useState)(),r=(0,n.useMemo)(()=>new Date(e.estimatedTimestamp),[e.estimatedTimestamp]);return(0,n.useEffect)(()=>{let e=e=>{s(u(e))};return h.addHandler(r,e),()=>{h.removeHandler(e)}},[r]),t?(0,i.jsx)("span",{children:t}):null},x=e=>(0,i.jsxs)("span",{className:e.className,children:[(0,i.jsx)("span",{children:"Estimated to Sealed: "}),(0,i.jsx)(p,{estimatedTimestamp:e.estimatedTimestamp})]}),k=(0,n.memo)(e=>e.isDeposit||e.status!==a.Created?null:(0,i.jsx)(x,{estimatedTimestamp:e.estimatedNextStatusTimestamp,className:e.className}));var v=s(39643),T=s(48707);let g=(0,n.memo)(e=>{let t=e.segments[e.segments.length-1];return(0,i.jsxs)("div",{className:"flex justify-between items-center",children:[(0,i.jsx)(T.f,{isTezos:e.isDeposit}),(0,i.jsxs)("div",{className:"flex-grow flex justify-between items-center ml-2",children:[e.segments.map((e,t)=>(0,i.jsxs)(n.Fragment,{children:[t>0&&(0,i.jsx)("div",{className:"flex-none h-2 w-2 rotate-45 ".concat(e.backgroundColorCssClass," ").concat(e.isPulse?"animate-progress":"")}),(0,i.jsx)("hr",{className:"w-full border-dotted border-t-2 ".concat(e.borderColorCssClass," ").concat(e.isPulse?"animate-progress":"")})]},t)),t&&(0,i.jsx)(v.Z,{width:18,height:18,className:"flex-none -ml-2 ".concat(t.textColorCssClass," ").concat(t.isPulse?"animate-progress":"")})]}),(0,i.jsx)(T.f,{isTezos:!e.isDeposit})]})});var f=s(91705);let y=e=>{let{showArrowIcon:t,...s}=e;return(0,i.jsxs)("a",{...s,target:"_blank",rel:"noreferrer",className:"".concat((0,m.Nn)("flex items-center dark:text-violet-300 dark:hover:text-violet-400",s.className)),children:[s.children,(null==t||t)&&(0,i.jsx)(f.Z,{className:"inline h-4 w-4 ml-1 -mb-0.5"})]})};var C=s(73983);let j=e=>{if(!e.rollupData||!e.rollupData.commitment||!e.rollupData.proof)return null;let t="".concat(C.v.bridge.smartRollupNodeBaseUrl,"/global/block/head/helpers/proofs/outbox/").concat(e.rollupData.outboxMessageLevel,"/messages?index=").concat(e.rollupData.outboxMessageIndex);return(0,i.jsx)(y,{href:t,children:"Rollup Data"})},b=e=>(0,i.jsxs)("div",{className:"mt-4 -mb-4 -mx-4 pt-4 pl-4 pb-2 rounded-b-xl overflow-hidden dark:text-red-100 dark:bg-red-900",children:[(0,i.jsx)("h3",{className:"text-lg font-medium mb-2",children:"Error, please try again"}),e.message]});var N=s(20703);let w=e=>"https://services.tzkt.io/v1/avatars/"+e,S=(0,n.memo)(e=>{let t=e.width||24,s=e.height||24;return(0,i.jsx)(N.default,{width:t,height:s,className:"inline w-6 h-6 mr-0.5 rounded-full",src:w(e.address),alt:"Avatar of the ".concat(e.address," address")})}),z=n.memo(e=>{var t;let s=null===(t=e.displayShort)||void 0===t||t,r=e.displayShortFirstPart||6,a=e.displayShortLastPart||4;return(0,i.jsx)(y,{href:m.Yz.getExplorerUrl(e.value,e.type,e.explorer),className:"font-mono",children:(0,i.jsx)("span",{children:s?m.sG.getShortText(e.value,r,a):e.value})})});var I=s(35809),D=s(24370),H=s(59588);let E={backgroundColorCssClass:"dark:bg-cyan-500",borderColorCssClass:"dark:border-cyan-500",textColorCssClass:"dark:text-cyan-500",isPulse:!0},L={backgroundColorCssClass:"dark:bg-green-600",borderColorCssClass:"dark:border-green-600",textColorCssClass:"dark:text-green-600",isPulse:!1},M={backgroundColorCssClass:"dark:bg-red-600",borderColorCssClass:"dark:border-red-600",textColorCssClass:"dark:text-red-600",isPulse:!1},P=(e,t)=>{let s=t===a.Failed?M:void 0,r=[s||(t===a.Pending?E:L)];return e||r.push(s||(t<a.Sealed?E:L)),r.push(s||(t<a.Finished?E:L)),r},A={[a.Pending]:{title:"Pending",backgroundColorCssClass:"dark:bg-cyan-700"},[a.Created]:{title:"Created",backgroundColorCssClass:"dark:bg-cyan-700"},[a.Sealed]:{title:"Sealed",backgroundColorCssClass:"dark:bg-cyan-700"},[a.Finished]:{title:"Completed",backgroundColorCssClass:"dark:bg-green-700"},[a.Failed]:{title:"Failed",backgroundColorCssClass:"dark:bg-red-800"}},F=e=>{let t,s,r,l;let[d,o]=(0,n.useState)(!1),c=(0,n.useMemo)(()=>P(e.isDeposit,e.status),[e.isDeposit,e.status]),h=e.onFinishWithdrawing,u=(0,n.useCallback)(()=>{o(!0),h().catch(m.Bi).finally(()=>o(!1))},[h]);return e.isDeposit?(t=e.tezosOperationHash,s=e.etherlinkOperationHash,r=e.tezosOperationTimestamp,l=e.etherlinkOperationTimestamp):(t=e.etherlinkOperationHash,s=e.tezosOperationHash,r=e.etherlinkOperationTimestamp,l=e.tezosOperationTimestamp),(0,i.jsxs)("div",{className:"flex flex-col w-full max-w-xl p-4 my-4 rounded-xl overflow-hidden dark:text-gray-100 dark:bg-slate-800",children:[(0,i.jsxs)("div",{className:"flex justify-between items-center text-lg",children:[(0,i.jsx)("div",{className:"flex items-center",children:e.token&&(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("span",{className:"mr-1.5",children:m.S9.convertTokensRawAmountToAmount(e.amount,e.token.decimals)}),"native"!==e.token.type?(0,i.jsx)(y,{href:m.Yz.getTokenExplorerUrl(e.token),showArrowIcon:!1,children:(0,i.jsx)(I.L,{token:e.token,iconSize:17,iconClassName:"mr-0.5 -mt-0.5"})}):(0,i.jsx)(I.L,{token:e.token,iconSize:17,iconClassName:"mr-0.5 -mt-0.5"})]})}),(0,i.jsx)("div",{className:"-mt-4 -mr-4 pt-4 pr-2 pb-2 pl-2 w-32 rounded-bl-xl text-center ".concat(A[e.status].backgroundColorCssClass),children:A[e.status].title})]}),(0,i.jsx)("div",{className:"mt-6",children:(0,i.jsx)(g,{isDeposit:e.isDeposit,segments:c})}),(0,i.jsxs)("div",{className:"flex justify-between items-center mt-2",children:[(0,i.jsxs)("div",{className:"flex items-center",children:[(0,i.jsx)(S,{address:e.sourceAddress}),(0,i.jsx)(z,{type:H.LinkType.Address,value:e.sourceAddress})]}),(0,i.jsxs)("div",{className:"flex items-center",children:[(0,i.jsx)(S,{address:e.receiverAddress}),(0,i.jsx)(z,{type:H.LinkType.Address,value:e.receiverAddress})]})]}),(0,i.jsxs)("div",{className:"flex justify-between items-center mt-4",children:[t&&(0,i.jsx)(z,{type:H.LinkType.Operation,value:t,displayShortFirstPart:8,displayShortLastPart:5}),s?(0,i.jsx)(z,{type:H.LinkType.Operation,value:s,displayShortFirstPart:8,displayShortLastPart:5}):(0,i.jsx)(j,{rollupData:e.rollupData})]}),(0,i.jsxs)("div",{className:"flex justify-between items-center mt-1 text-sm",children:[r&&(0,i.jsx)("span",{children:new Date(r).toLocaleString()}),l?(0,i.jsx)("span",{children:new Date(l).toLocaleString()}):e.estimatedNextStatusTimestamp&&(0,i.jsx)(k,{isDeposit:e.isDeposit,status:e.status,estimatedNextStatusTimestamp:e.estimatedNextStatusTimestamp,className:"text-right"})]}),e.status===a.Sealed&&(0,i.jsx)("div",{className:"flex justify-center items-center",children:(0,i.jsx)("button",{className:"w-full mt-4 h-12 rounded-lg select-none cursor-pointer  dark:bg-blue-700 dark:hover:bg-blue-800 disabled:cursor-default disabled:opacity-70",onClick:u,disabled:d,children:(0,i.jsxs)("span",{className:"flex justify-center items-center",children:[d&&(0,i.jsx)(D.x,{className:"animate-spin h-5 w-5 mr-2 text-white"}),(0,i.jsx)("span",{children:"Complete Withdraw"})]})})}),e.error&&(0,i.jsx)(b,{message:e.error})]})};var O=s(56842),W=s(6143);let K={[O.hj.Pending]:a.Pending,[O.hj.Created]:a.Created,[O.hj.Sealed]:a.Sealed,[O.hj.Finished]:a.Finished,[O.hj.Failed]:a.Failed},U=e=>{let{bridgeTokenTransfer:t,onFinishWithdrawing:s}=e,r=t.kind===O.gu.Deposit,a=r?t.tezosOperation:t.etherlinkOperation,l=t.status===O.hj.Sealed?t.rollupData:void 0,d=r||t.status!==O.hj.Created?void 0:t.rollupData.estimatedOutboxMessageExecutionTimestamp,o=t.tezosOperation,c=t.etherlinkOperation,[h,u]=(0,n.useState)();(0,n.useEffect)(()=>u(void 0),[t.status]);let p=(0,n.useCallback)(()=>(u(void 0),t.status===O.hj.Sealed?s(t).catch(e=>{m.el.isUserAbortedWalletError(e)||u((0,m.e$)(e))}):Promise.resolve()),[t,s]);return(0,i.jsx)(F,{isDeposit:r,amount:a.amount,token:(0,W.uk)(a.token,r),status:K[t.status],sourceAddress:t.source,receiverAddress:t.receiver,tezosOperationHash:null==o?void 0:o.hash,tezosOperationTimestamp:null==o?void 0:o.timestamp,etherlinkOperationHash:null==c?void 0:c.hash,etherlinkOperationTimestamp:null==c?void 0:c.timestamp,rollupData:l,estimatedNextStatusTimestamp:d,error:h,onFinishWithdrawing:p})}},6143:function(e,t,s){s.d(t,{uk:function(){return m},c3:function(){return d},OB:function(){return l},bX:function(){return n},TV:function(){return o}});var r={src:"/_next/static/media/ctez.76dc7655.png"},a={src:"/_next/static/media/fxhash.adc967f1.png"},i={src:"/_next/static/media/xtz.7960d41d.png"};let n=[{tezos:{type:"native",name:"Tezos",ticker:"XTZ",decimals:6,iconUrl:i.src,ticketHelperContractAddress:"KT1DWVsu4Jtu2ficZ1qtNheGPunm5YVniegT"},etherlink:{type:"native",name:"Tezos",ticker:"XTZ",decimals:18,iconUrl:i.src}},{tezos:{type:"fa1.2",name:"Ctez",ticker:"CTEZ",address:"KT1LpdETWYvPWCQTR2FEW6jE6dVqJqxYjdeW",decimals:0,iconUrl:r.src,ticketerContractAddress:"KT1RvSp4yDKUABqWmv3pKGE9fA6iCGy7bqGh",ticketHelperContractAddress:"KT1DHLWJorW9WB6ztkx1XcoaJKWXeTu9yoR1"},etherlink:{type:"erc20",name:"Ctez",ticker:"CTEZ",address:"0x87dcBf128677ba36E79D47dAf4eb4e51610e0150",decimals:0,iconUrl:r.src}},{tezos:{type:"fa2",name:"fxhash, token: 42",ticker:"FXHASH_42",address:"KT195Eb8T524v5VJ99ZzH2wpnPfQ2wJfMi6h",tokenId:"42",decimals:0,iconUrl:a.src,ticketerContractAddress:"KT1VybveLaWhpQHKph28WcGwSy1ud22KSEan",ticketHelperContractAddress:"KT1DNtHLr9T9zksZjZvQwgtx5XJwrW9wzETB"},etherlink:{type:"erc20",name:"fxhash, token: 42",ticker:"FXHASH_42",address:"0xcB5d40c6B1bdf5Cd51b3801351b0A68D101a561b",decimals:0,iconUrl:a.src}}],l=n[0].tezos,d=n[0].etherlink,o=n.reduce((e,t)=>(e.push(t.tezos),e.push(t.etherlink),e),[]),c={};for(let e of n)"native"===e.tezos.type?(c.native||(c.native={}),c.native.tezos=e.tezos):(c[e.tezos.type]||(c[e.tezos.type]={}),"fa1.2"===e.tezos.type?c[e.tezos.type][e.tezos.address]=e.tezos:(c[e.tezos.type][e.tezos.address]||(c[e.tezos.type][e.tezos.address]={}),c[e.tezos.type][e.tezos.address][e.tezos.tokenId]=e.tezos)),"native"===e.etherlink.type?(c.native||(c.native={}),c.native.etherlink=e.etherlink):(c[e.etherlink.type]||(c[e.etherlink.type]={}),"erc20"===e.etherlink.type&&(c[e.etherlink.type][e.etherlink.address]=e.etherlink));let m=(e,t)=>{var s,r,a,i,n;return"native"===e.type?t?null===(s=c[e.type])||void 0===s?void 0:s.tezos:null===(r=c[e.type])||void 0===r?void 0:r.etherlink:e.address?"fa1.2"===e.type||"erc20"===e.type?null===(a=c[e.type])||void 0===a?void 0:a[e.address]:"fa2"===e.type&&e.tokenId?null===(n=c[e.type])||void 0===n?void 0:null===(i=n[e.address])||void 0===i?void 0:i[e.tokenId]:void 0:void 0}}}]);