(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[892],{62968:function(e,t,n){Promise.resolve().then(n.bind(n,71216))},71216:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return c}});var r=n(3827),s=n(56842),a=n(64090),i=n(87167),o=n(24370),l=n(85021);function c(){let e=(0,l.bp)(),t=null==e?void 0:e.tokenBridge,{tokenTransfers:n,dispatch:c}=(0,l.SH)(),{address:d}=(0,l.Mw)(),{address:u}=(0,l.EP)(),[f,m]=(0,a.useState)(!0),h=(0,a.useMemo)(()=>[...n.values()].sort((e,t)=>{let n=s.P6.getInitialOperation(e);return s.P6.getInitialOperation(t).timestamp.localeCompare(n.timestamp)}),[n]),p=(0,a.useCallback)(e=>{let n=s.P6.getInitialOperationHash(e);console.log("Token Transfer Updated",n,e.kind,e.status),c({type:"added-or-updated",payload:e}),e.status===s.hj.Finished&&(console.log("Unsubscribe from the ".concat(n," token transfer")),null==t||t.stream.unsubscribeFromTokenTransfer(e))},[t,c]);(0,a.useEffect)(()=>{if(!t||!(d||u))return;let e=d&&u?[d,u]:d||u,n=async()=>{let n=await t.data.getAccountTokenTransfers(e);c({type:"loaded",payload:n}),m(!1),n.forEach(e=>{e.status!==s.hj.Finished&&t.stream.subscribeToTokenTransfer(e)})};return t.addEventListener("tokenTransferUpdated",p),m(!0),n(),t.stream.subscribeToAccountTokenTransfers(e),()=>{t.removeEventListener("tokenTransferUpdated",p),t.stream.unsubscribeFromAllSubscriptions()}},[t,d,u,c,p]);let k=(0,a.useCallback)(async e=>{if(!t)return;let n=await t.finishWithdraw(e);await n.finishWithdrawOperation.confirmation()},[t]);return(0,r.jsx)("main",{className:"flex flex-col items-center pt-6",children:f||!h.length?(0,r.jsx)("div",{className:"flex items-center text-lg mt-10",children:f?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(o.x,{className:"animate-spin h-5 w-5 mr-2 text-white"}),(0,r.jsx)("span",{children:"Loading transfers..."})]}):(0,r.jsx)("span",{children:"No transfers"})}):h.map(e=>(0,r.jsx)(i.Gv,{bridgeTokenTransfer:e,onFinishWithdrawing:k},s.P6.getInitialOperationHash(e)))})}},39643:function(e,t,n){"use strict";var r=n(64090);let s=r.forwardRef(function(e,t){let{title:n,titleId:s,...a}=e;return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":s},a),n?r.createElement("title",{id:s},n):null,r.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m8.25 4.5 7.5 7.5-7.5 7.5"}))});t.Z=s}},function(e){e.O(0,[283,660,227,181,129,971,69,744],function(){return e(e.s=62968)}),_N_E=e.O()}]);