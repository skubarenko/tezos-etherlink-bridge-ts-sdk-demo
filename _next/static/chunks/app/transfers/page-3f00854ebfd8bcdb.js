(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[892],{62968:function(e,t,n){Promise.resolve().then(n.bind(n,71216))},71216:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return l}});var a=n(3827),r=n(56842),s=n(64090),i=n(59074),o=n(24370),d=n(85021);function l(){let e=(0,d.bp)(),t=null==e?void 0:e.tokenBridge,{tokenTransfers:n,dispatch:l}=(0,d.SH)(),{address:c}=(0,d.Mw)(),{address:u}=(0,d.EP)(),[f,p]=(0,s.useState)(!0),m=(0,s.useMemo)(()=>[...n.values()].sort((e,t)=>{let n=r.P6.getInitialOperation(e);return r.P6.getInitialOperation(t).timestamp.localeCompare(n.timestamp)}),[n]),h=(0,s.useCallback)(e=>{console.log("Token Transfer Created or Updated",r.P6.getInitialOperationHash(e),e.kind,e.status),l({type:"added-or-updated",payload:e})},[l]);(0,s.useEffect)(()=>{if(!t||!(c||u)){p(!1),l({type:"cleared"});return}let e=c&&u?[c,u]:c||u,n=async()=>{l({type:"loaded",payload:await t.data.getAccountTokenTransfers(e)}),p(!1)};return t.addEventListener("tokenTransferCreated",h),t.addEventListener("tokenTransferUpdated",h),p(!0),n(),t.stream.subscribeToAccountTokenTransfers(e),()=>{t.removeEventListener("tokenTransferCreated",h),t.removeEventListener("tokenTransferUpdated",h),t.stream.unsubscribeFromAllSubscriptions()}},[t,c,u,l,h]);let k=(0,s.useCallback)(async e=>{if(!t)return;let n=await t.finishWithdraw(e);await n.finishWithdrawOperation.confirmation()},[t]);return(0,a.jsx)("main",{className:"flex flex-col items-center md:mt-6",children:f||!m.length?(0,a.jsx)("div",{className:"flex items-center text-lg mt-10",children:f?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(o.x,{className:"animate-spin h-5 w-5 mr-2 text-white"}),(0,a.jsx)("span",{children:"Loading transfers..."})]}):(0,a.jsx)("span",{children:"No transfers"})}):m.map(e=>(0,a.jsx)(i.Gv,{bridgeTokenTransfer:e,onFinishWithdrawing:k},r.P6.getInitialOperationHash(e)))})}}},function(e){e.O(0,[283,663,579,212,544,74,971,69,744],function(){return e(e.s=62968)}),_N_E=e.O()}]);