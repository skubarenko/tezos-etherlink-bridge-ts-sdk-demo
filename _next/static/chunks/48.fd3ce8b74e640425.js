(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[48],{97378:function(e,t,n){"use strict";let r,i;n.d(t,{O:function(){return f}});var o=n(1937),s=n(24227),a=n(99980),c=n(23663).Buffer;class l extends s.BP{async init(){this.subscribeToMessages().catch(console.error)}async listenForEncryptedMessage(e,t){if(this.activeListeners.has(e))return;let n=async(n,r)=>{try{let i=await this.decryptMessage(e,n.encryptedPayload);t(i,r)}catch(e){}};this.activeListeners.set(e,n)}async sendMessage(e,t){let n=await this.encryptMessage(t.publicKey,e),r=null==t?void 0:t.extensionId,i={target:o.wc.EXTENSION,encryptedPayload:n,targetId:r};s.Zv.postMessage(i,s.Zv.location.origin)}async listenForChannelOpening(e){let t=async t=>{var n,r;if(t.source!==s.Zv||t.origin!==s.Zv.location.origin)return;let i=null==t?void 0:null===(n=t.data)||void 0===n?void 0:n.message;if(i&&i.target===o.wc.PAGE&&await this.isChannelOpenMessage(i)){let n=c.from(i.payload,"hex");if(n.length>=a.Cd+a.S6)try{let i=JSON.parse(await (0,a.a8)(n,this.keyPair.publicKey,this.keyPair.secretKey));e(new o.RO(i.id,i.name,i.publicKey,i.version,await (0,s.I2)(i.publicKey),null==t?void 0:null===(r=t.data)||void 0===r?void 0:r.sender.id))}catch(e){}}};s.Zv.addEventListener("message",t)}async sendPairingRequest(e){let t={target:o.wc.EXTENSION,payload:await new s.ei().serialize(await this.getPairingRequestInfo()),targetId:e};s.Zv.postMessage(t,s.Zv.location.origin)}async isChannelOpenMessage(e){return"object"==typeof e&&e.hasOwnProperty("payload")}async subscribeToMessages(){s.Zv.addEventListener("message",e=>{if(e.source===s.Zv&&e.origin===s.Zv.location.origin&&"object"==typeof e&&e){let t=e.data;t.message&&t.message.target===o.wc.PAGE&&this.activeListeners.forEach(e=>{e(t.message,{origin:o.aP.EXTENSION,id:t.sender.id||""})})}})}constructor(...e){super(...e),this.activeListeners=new Map}}let u=new s.Yd("PostMessageTransport"),d=!1,h=e=>{i||(i=[]),i.some(t=>t.id===e.id)||(i.push(e),s.Zv.postMessage("extensionsUpdated",s.Zv.location.origin))};class f extends s.J7{static async isAvailable(){return new Promise(e=>{let t=n=>{let r=n.data;r&&"pong"===r.payload&&(e(!0),s.Zv.removeEventListener("message",t))};s.Zv.addEventListener("message",t);let n={target:o.wc.EXTENSION,payload:"ping"};s.Zv.postMessage(n,s.Zv.location.origin)})}static async getAvailableExtensions(){return r||i||(i=[],r=new Promise(e=>{f.listenForExtensions(),setTimeout(()=>{e(null!=i?i:[])},1e3)}).finally(()=>{r=void 0}))}static listenForExtensions(){if(d)return;s.Zv.addEventListener("message",e=>{if(e.source!==s.Zv||e.origin!==s.Zv.location.origin)return;let t=e.data,n=t.sender;t&&"pong"===t.payload&&n&&(u.log("getAvailableExtensions",'extension "'.concat(n.name,'" is available'),n),h(n))});let e={target:o.wc.EXTENSION,payload:"ping"};s.Zv.postMessage(e,s.Zv.location.origin),d=!0}async connect(){if(u.log("connect"),this._isConnected!==o.ki.NOT_CONNECTED)return;this._isConnected=o.ki.CONNECTING;let e=await this.getPeers();e.length>0&&(u.log("connect","connecting to ".concat(e.length," peers")),Promise.all(e.map(async e=>this.listen(e.publicKey))).catch(e=>u.error("connect",e))),await this.startOpenChannelListener(),await super.connect()}async startOpenChannelListener(){}async getPairingRequestInfo(){return this.client.getPairingRequestInfo()}async listen(e){u.log("listen",e),await this.client.listenForEncryptedMessage(e,(e,t)=>{let n={origin:o.aP.EXTENSION,id:t.id};this.notifyListeners(e,n).catch(e=>{throw e})}).catch(e=>{throw e})}constructor(e,t,n,r){super(e,new l(e,t),new s.Ou(n,r)),this.type=o.Fl.POST_MESSAGE}}f.getAvailableExtensions()},57084:function(e,t){"use strict";function n(e,t,n){if(n>e.length)throw Error("invalid RLP (safeSlice): end slice of Uint8Array out-of-bounds");return e.slice(t,n)}function r(e){if(0===e[0])throw Error("invalid RLP: extra zeros");return s(function(e){let t="";for(let n=0;n<e.length;n++)t+=o[e[n]];return t}(e))}function i(e,t){if(e<56)return Uint8Array.from([e+t]);let n=l(e),r=l(t+55+n.length/2);return Uint8Array.from(a(r+n))}t.yH=void 0;let o=Array.from({length:256},(e,t)=>t.toString(16).padStart(2,"0"));function s(e){let t=Number.parseInt(e,16);if(Number.isNaN(t))throw Error("Invalid byte sequence");return t}function a(e){if("string"!=typeof e)throw TypeError("hexToBytes: expected string, got "+typeof e);if(e.length%2)throw Error("hexToBytes: received invalid unpadded hex");let t=new Uint8Array(e.length/2);for(let n=0;n<t.length;n++){let r=2*n;t[n]=s(e.slice(r,r+2))}return t}function c(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];if(1===t.length)return t[0];let r=t.reduce((e,t)=>e+t.length,0),i=new Uint8Array(r);for(let e=0,n=0;e<t.length;e++){let r=t[e];i.set(r,n),n+=r.length}return i}function l(e){if(e<0)throw Error("Invalid integer as argument, must be unsigned!");let t=e.toString(16);return t.length%2?"0".concat(t):t}function u(e){return e.length>=2&&"0"===e[0]&&"x"===e[1]}function d(e){if(e instanceof Uint8Array)return e;if("string"==typeof e){var t;return u(e)?a((t="string"!=typeof e?e:u(e)?e.slice(2):e).length%2?"0".concat(t):t):new TextEncoder().encode(e)}if("number"==typeof e||"bigint"==typeof e)return e?a(l(e)):Uint8Array.from([]);if(null==e)return Uint8Array.from([]);throw Error("toBytes: received unsupported type "+typeof e)}t.yH={encode:function e(t){if(Array.isArray(t)){let n=[],r=0;for(let i=0;i<t.length;i++){let o=e(t[i]);n.push(o),r+=o.length}return c(i(r,192),...n)}let n=d(t);return 1===n.length&&n[0]<128?n:c(i(n.length,128),n)},decode:function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(null==e||0===e.length)return Uint8Array.from([]);let i=function e(t){let i,o,s,a,c;let l=[],u=t[0];if(u<=127)return{data:t.slice(0,1),remainder:t.slice(1)};if(u<=183){if(i=u-127,s=128===u?Uint8Array.from([]):n(t,1,i),2===i&&s[0]<128)throw Error("invalid RLP encoding: invalid prefix, single byte < 0x80 are not prefixed");return{data:s,remainder:t.slice(i)}}if(u<=191){if(o=u-182,t.length-1<o)throw Error("invalid RLP: not enough bytes for string length");if((i=r(n(t,1,o)))<=55)throw Error("invalid RLP: expected string length to be greater than 55");return{data:s=n(t,o,i+o),remainder:t.slice(i+o)}}if(u<=247){for(a=n(t,1,i=u-191);a.length;)c=e(a),l.push(c.data),a=c.remainder;return{data:l,remainder:t.slice(i)}}{if((i=r(n(t,1,o=u-246)))<56)throw Error("invalid RLP: encoded list too short");let s=o+i;if(s>t.length)throw Error("invalid RLP: total length is larger than the data");for(a=n(t,o,s);a.length;)c=e(a),l.push(c.data),a=c.remainder;return{data:l,remainder:t.slice(s)}}}(d(e));if(t)return i;if(0!==i.remainder.length)throw Error("invalid RLP: remainder must be zero");return i.data}}},27645:function(e,t,n){"use strict";let r;n.d(t,{kx:function(){return nv}});var i,o,s,a,c,l,u,d,h,f,p,m,g,v,y={};n.r(y),n.d(y,{hasBrowserEnv:function(){return eE},hasStandardBrowserEnv:function(){return eb},hasStandardBrowserWebWorkerEnv:function(){return ew}});var E=n(24227),b=n(75388);function w(e,t){return function(){return e.apply(t,arguments)}}let{toString:T}=Object.prototype,{getPrototypeOf:_}=Object,A=(i=Object.create(null),e=>{let t=T.call(e);return i[t]||(i[t]=t.slice(8,-1).toLowerCase())}),R=e=>(e=e.toLowerCase(),t=>A(t)===e),S=e=>t=>typeof t===e,{isArray:P}=Array,I=S("undefined"),O=R("ArrayBuffer"),C=S("string"),x=S("function"),N=S("number"),k=e=>null!==e&&"object"==typeof e,L=e=>{if("object"!==A(e))return!1;let t=_(e);return(null===t||t===Object.prototype||null===Object.getPrototypeOf(t))&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)},B=R("Date"),D=R("File"),M=R("Blob"),U=R("FileList"),H=R("URLSearchParams");function F(e,t){let n,r,{allOwnKeys:i=!1}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(null!=e){if("object"!=typeof e&&(e=[e]),P(e))for(n=0,r=e.length;n<r;n++)t.call(null,e[n],n,e);else{let r;let o=i?Object.getOwnPropertyNames(e):Object.keys(e),s=o.length;for(n=0;n<s;n++)r=o[n],t.call(null,e[r],r,e)}}}function G(e,t){let n;t=t.toLowerCase();let r=Object.keys(e),i=r.length;for(;i-- >0;)if(t===(n=r[i]).toLowerCase())return n;return null}let j="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:window,q=e=>!I(e)&&e!==j,K=(o="undefined"!=typeof Uint8Array&&_(Uint8Array),e=>o&&e instanceof o),W=R("HTMLFormElement"),z=(e=>{let{hasOwnProperty:t}=e;return(e,n)=>t.call(e,n)})(Object.prototype),V=R("RegExp"),Z=(e,t)=>{let n=Object.getOwnPropertyDescriptors(e),r={};F(n,(n,i)=>{let o;!1!==(o=t(n,i,e))&&(r[i]=o||n)}),Object.defineProperties(e,r)},Y="abcdefghijklmnopqrstuvwxyz",Q="0123456789",X={DIGIT:Q,ALPHA:Y,ALPHA_DIGIT:Y+Y.toUpperCase()+Q},J=R("AsyncFunction");var $={isArray:P,isArrayBuffer:O,isBuffer:function(e){return null!==e&&!I(e)&&null!==e.constructor&&!I(e.constructor)&&x(e.constructor.isBuffer)&&e.constructor.isBuffer(e)},isFormData:e=>{let t;return e&&("function"==typeof FormData&&e instanceof FormData||x(e.append)&&("formdata"===(t=A(e))||"object"===t&&x(e.toString)&&"[object FormData]"===e.toString()))},isArrayBufferView:function(e){return"undefined"!=typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(e):e&&e.buffer&&O(e.buffer)},isString:C,isNumber:N,isBoolean:e=>!0===e||!1===e,isObject:k,isPlainObject:L,isUndefined:I,isDate:B,isFile:D,isBlob:M,isRegExp:V,isFunction:x,isStream:e=>k(e)&&x(e.pipe),isURLSearchParams:H,isTypedArray:K,isFileList:U,forEach:F,merge:function e(){let{caseless:t}=q(this)&&this||{},n={},r=(r,i)=>{let o=t&&G(n,i)||i;L(n[o])&&L(r)?n[o]=e(n[o],r):L(r)?n[o]=e({},r):P(r)?n[o]=r.slice():n[o]=r};for(let e=0,t=arguments.length;e<t;e++)arguments[e]&&F(arguments[e],r);return n},extend:function(e,t,n){let{allOwnKeys:r}=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};return F(t,(t,r)=>{n&&x(t)?e[r]=w(t,n):e[r]=t},{allOwnKeys:r}),e},trim:e=>e.trim?e.trim():e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,""),stripBOM:e=>(65279===e.charCodeAt(0)&&(e=e.slice(1)),e),inherits:(e,t,n,r)=>{e.prototype=Object.create(t.prototype,r),e.prototype.constructor=e,Object.defineProperty(e,"super",{value:t.prototype}),n&&Object.assign(e.prototype,n)},toFlatObject:(e,t,n,r)=>{let i,o,s;let a={};if(t=t||{},null==e)return t;do{for(o=(i=Object.getOwnPropertyNames(e)).length;o-- >0;)s=i[o],(!r||r(s,e,t))&&!a[s]&&(t[s]=e[s],a[s]=!0);e=!1!==n&&_(e)}while(e&&(!n||n(e,t))&&e!==Object.prototype);return t},kindOf:A,kindOfTest:R,endsWith:(e,t,n)=>{e=String(e),(void 0===n||n>e.length)&&(n=e.length),n-=t.length;let r=e.indexOf(t,n);return -1!==r&&r===n},toArray:e=>{if(!e)return null;if(P(e))return e;let t=e.length;if(!N(t))return null;let n=Array(t);for(;t-- >0;)n[t]=e[t];return n},forEachEntry:(e,t)=>{let n;let r=(e&&e[Symbol.iterator]).call(e);for(;(n=r.next())&&!n.done;){let r=n.value;t.call(e,r[0],r[1])}},matchAll:(e,t)=>{let n;let r=[];for(;null!==(n=e.exec(t));)r.push(n);return r},isHTMLForm:W,hasOwnProperty:z,hasOwnProp:z,reduceDescriptors:Z,freezeMethods:e=>{Z(e,(t,n)=>{if(x(e)&&-1!==["arguments","caller","callee"].indexOf(n))return!1;if(x(e[n])){if(t.enumerable=!1,"writable"in t){t.writable=!1;return}t.set||(t.set=()=>{throw Error("Can not rewrite read-only method '"+n+"'")})}})},toObjectSet:(e,t)=>{let n={};return(e=>{e.forEach(e=>{n[e]=!0})})(P(e)?e:String(e).split(t)),n},toCamelCase:e=>e.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(e,t,n){return t.toUpperCase()+n}),noop:()=>{},toFiniteNumber:(e,t)=>Number.isFinite(e=+e)?e:t,findKey:G,global:j,isContextDefined:q,ALPHABET:X,generateString:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:16,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:X.ALPHA_DIGIT,n="",{length:r}=t;for(;e--;)n+=t[Math.random()*r|0];return n},isSpecCompliantForm:function(e){return!!(e&&x(e.append)&&"FormData"===e[Symbol.toStringTag]&&e[Symbol.iterator])},toJSONObject:e=>{let t=Array(10),n=(e,r)=>{if(k(e)){if(t.indexOf(e)>=0)return;if(!("toJSON"in e)){t[r]=e;let i=P(e)?[]:{};return F(e,(e,t)=>{let o=n(e,r+1);I(o)||(i[t]=o)}),t[r]=void 0,i}}return e};return n(e,0)},isAsyncFn:J,isThenable:e=>e&&(k(e)||x(e))&&x(e.then)&&x(e.catch)};function ee(e,t,n,r,i){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=Error().stack,this.message=e,this.name="AxiosError",t&&(this.code=t),n&&(this.config=n),r&&(this.request=r),i&&(this.response=i)}$.inherits(ee,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:$.toJSONObject(this.config),code:this.code,status:this.response&&this.response.status?this.response.status:null}}});let et=ee.prototype,en={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(e=>{en[e]={value:e}}),Object.defineProperties(ee,en),Object.defineProperty(et,"isAxiosError",{value:!0}),ee.from=(e,t,n,r,i,o)=>{let s=Object.create(et);return $.toFlatObject(e,s,function(e){return e!==Error.prototype},e=>"isAxiosError"!==e),ee.call(s,e.message,t,n,r,i),s.cause=e,s.name=e.name,o&&Object.assign(s,o),s};var er=n(23663).Buffer;function ei(e){return $.isPlainObject(e)||$.isArray(e)}function eo(e){return $.endsWith(e,"[]")?e.slice(0,-2):e}function es(e,t,n){return e?e.concat(t).map(function(e,t){return e=eo(e),!n&&t?"["+e+"]":e}).join(n?".":""):t}let ea=$.toFlatObject($,{},null,function(e){return/^is[A-Z]/.test(e)});var ec=function(e,t,n){if(!$.isObject(e))throw TypeError("target must be an object");t=t||new FormData;let r=(n=$.toFlatObject(n,{metaTokens:!0,dots:!1,indexes:!1},!1,function(e,t){return!$.isUndefined(t[e])})).metaTokens,i=n.visitor||l,o=n.dots,s=n.indexes,a=(n.Blob||"undefined"!=typeof Blob&&Blob)&&$.isSpecCompliantForm(t);if(!$.isFunction(i))throw TypeError("visitor must be a function");function c(e){if(null===e)return"";if($.isDate(e))return e.toISOString();if(!a&&$.isBlob(e))throw new ee("Blob is not supported. Use a Buffer instead.");return $.isArrayBuffer(e)||$.isTypedArray(e)?a&&"function"==typeof Blob?new Blob([e]):er.from(e):e}function l(e,n,i){let a=e;if(e&&!i&&"object"==typeof e){if($.endsWith(n,"{}"))n=r?n:n.slice(0,-2),e=JSON.stringify(e);else{var l;if($.isArray(e)&&(l=e,$.isArray(l)&&!l.some(ei))||($.isFileList(e)||$.endsWith(n,"[]"))&&(a=$.toArray(e)))return n=eo(n),a.forEach(function(e,r){$.isUndefined(e)||null===e||t.append(!0===s?es([n],r,o):null===s?n:n+"[]",c(e))}),!1}}return!!ei(e)||(t.append(es(i,n,o),c(e)),!1)}let u=[],d=Object.assign(ea,{defaultVisitor:l,convertValue:c,isVisitable:ei});if(!$.isObject(e))throw TypeError("data must be an object");return!function e(n,r){if(!$.isUndefined(n)){if(-1!==u.indexOf(n))throw Error("Circular reference detected in "+r.join("."));u.push(n),$.forEach(n,function(n,o){!0===(!($.isUndefined(n)||null===n)&&i.call(t,n,$.isString(o)?o.trim():o,r,d))&&e(n,r?r.concat(o):[o])}),u.pop()}}(e),t};function el(e){let t={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\x00"};return encodeURIComponent(e).replace(/[!'()~]|%20|%00/g,function(e){return t[e]})}function eu(e,t){this._pairs=[],e&&ec(e,this,t)}let ed=eu.prototype;function eh(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function ef(e,t,n){let r;if(!t)return e;let i=n&&n.encode||eh,o=n&&n.serialize;if(r=o?o(t,n):$.isURLSearchParams(t)?t.toString():new eu(t,n).toString(i)){let t=e.indexOf("#");-1!==t&&(e=e.slice(0,t)),e+=(-1===e.indexOf("?")?"?":"&")+r}return e}ed.append=function(e,t){this._pairs.push([e,t])},ed.toString=function(e){let t=e?function(t){return e.call(this,t,el)}:el;return this._pairs.map(function(e){return t(e[0])+"="+t(e[1])},"").join("&")};class ep{use(e,t,n){return this.handlers.push({fulfilled:e,rejected:t,synchronous:!!n&&n.synchronous,runWhen:n?n.runWhen:null}),this.handlers.length-1}eject(e){this.handlers[e]&&(this.handlers[e]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(e){$.forEach(this.handlers,function(t){null!==t&&e(t)})}constructor(){this.handlers=[]}}var em={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},eg="undefined"!=typeof URLSearchParams?URLSearchParams:eu,ev="undefined"!=typeof FormData?FormData:null,ey="undefined"!=typeof Blob?Blob:null;let eE="undefined"!=typeof document,eb=(s="undefined"!=typeof navigator&&navigator.product,eE&&0>["ReactNative","NativeScript","NS"].indexOf(s)),ew="undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&"function"==typeof self.importScripts;var eT={...y,isBrowser:!0,classes:{URLSearchParams:eg,FormData:ev,Blob:ey},protocols:["http","https","file","blob","url","data"]},e_=function(e){if($.isFormData(e)&&$.isFunction(e.entries)){let t={};return $.forEachEntry(e,(e,n)=>{!function e(t,n,r,i){let o=t[i++];if("__proto__"===o)return!0;let s=Number.isFinite(+o),a=i>=t.length;return(o=!o&&$.isArray(r)?r.length:o,a)?$.hasOwnProp(r,o)?r[o]=[r[o],n]:r[o]=n:(r[o]&&$.isObject(r[o])||(r[o]=[]),e(t,n,r[o],i)&&$.isArray(r[o])&&(r[o]=function(e){let t,n;let r={},i=Object.keys(e),o=i.length;for(t=0;t<o;t++)r[n=i[t]]=e[n];return r}(r[o]))),!s}($.matchAll(/\w+|\[(\w*)]/g,e).map(e=>"[]"===e[0]?"":e[1]||e[0]),n,t,0)}),t}return null};let eA={transitional:em,adapter:["xhr","http"],transformRequest:[function(e,t){let n;let r=t.getContentType()||"",i=r.indexOf("application/json")>-1,o=$.isObject(e);if(o&&$.isHTMLForm(e)&&(e=new FormData(e)),$.isFormData(e))return i?JSON.stringify(e_(e)):e;if($.isArrayBuffer(e)||$.isBuffer(e)||$.isStream(e)||$.isFile(e)||$.isBlob(e))return e;if($.isArrayBufferView(e))return e.buffer;if($.isURLSearchParams(e))return t.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),e.toString();if(o){if(r.indexOf("application/x-www-form-urlencoded")>-1){var s,a;return(s=e,a=this.formSerializer,ec(s,new eT.classes.URLSearchParams,Object.assign({visitor:function(e,t,n,r){return eT.isNode&&$.isBuffer(e)?(this.append(t,e.toString("base64")),!1):r.defaultVisitor.apply(this,arguments)}},a))).toString()}if((n=$.isFileList(e))||r.indexOf("multipart/form-data")>-1){let t=this.env&&this.env.FormData;return ec(n?{"files[]":e}:e,t&&new t,this.formSerializer)}}return o||i?(t.setContentType("application/json",!1),function(e,t,n){if($.isString(e))try{return(0,JSON.parse)(e),$.trim(e)}catch(e){if("SyntaxError"!==e.name)throw e}return(0,JSON.stringify)(e)}(e)):e}],transformResponse:[function(e){let t=this.transitional||eA.transitional,n=t&&t.forcedJSONParsing,r="json"===this.responseType;if(e&&$.isString(e)&&(n&&!this.responseType||r)){let n=t&&t.silentJSONParsing;try{return JSON.parse(e)}catch(e){if(!n&&r){if("SyntaxError"===e.name)throw ee.from(e,ee.ERR_BAD_RESPONSE,this,null,this.response);throw e}}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:eT.classes.FormData,Blob:eT.classes.Blob},validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};$.forEach(["delete","get","head","post","put","patch"],e=>{eA.headers[e]={}});let eR=$.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]);var eS=e=>{let t,n,r;let i={};return e&&e.split("\n").forEach(function(e){r=e.indexOf(":"),t=e.substring(0,r).trim().toLowerCase(),n=e.substring(r+1).trim(),!t||i[t]&&eR[t]||("set-cookie"===t?i[t]?i[t].push(n):i[t]=[n]:i[t]=i[t]?i[t]+", "+n:n)}),i};let eP=Symbol("internals");function eI(e){return e&&String(e).trim().toLowerCase()}function eO(e){return!1===e||null==e?e:$.isArray(e)?e.map(eO):String(e)}let eC=e=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(e.trim());function ex(e,t,n,r,i){if($.isFunction(r))return r.call(this,t,n);if(i&&(t=n),$.isString(t)){if($.isString(r))return -1!==t.indexOf(r);if($.isRegExp(r))return r.test(t)}}class eN{set(e,t,n){let r=this;function i(e,t,n){let i=eI(t);if(!i)throw Error("header name must be a non-empty string");let o=$.findKey(r,i);o&&void 0!==r[o]&&!0!==n&&(void 0!==n||!1===r[o])||(r[o||t]=eO(e))}let o=(e,t)=>$.forEach(e,(e,n)=>i(e,n,t));return $.isPlainObject(e)||e instanceof this.constructor?o(e,t):$.isString(e)&&(e=e.trim())&&!eC(e)?o(eS(e),t):null!=e&&i(t,e,n),this}get(e,t){if(e=eI(e)){let n=$.findKey(this,e);if(n){let e=this[n];if(!t)return e;if(!0===t)return function(e){let t;let n=Object.create(null),r=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;for(;t=r.exec(e);)n[t[1]]=t[2];return n}(e);if($.isFunction(t))return t.call(this,e,n);if($.isRegExp(t))return t.exec(e);throw TypeError("parser must be boolean|regexp|function")}}}has(e,t){if(e=eI(e)){let n=$.findKey(this,e);return!!(n&&void 0!==this[n]&&(!t||ex(this,this[n],n,t)))}return!1}delete(e,t){let n=this,r=!1;function i(e){if(e=eI(e)){let i=$.findKey(n,e);i&&(!t||ex(n,n[i],i,t))&&(delete n[i],r=!0)}}return $.isArray(e)?e.forEach(i):i(e),r}clear(e){let t=Object.keys(this),n=t.length,r=!1;for(;n--;){let i=t[n];(!e||ex(this,this[i],i,e,!0))&&(delete this[i],r=!0)}return r}normalize(e){let t=this,n={};return $.forEach(this,(r,i)=>{let o=$.findKey(n,i);if(o){t[o]=eO(r),delete t[i];return}let s=e?i.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(e,t,n)=>t.toUpperCase()+n):String(i).trim();s!==i&&delete t[i],t[s]=eO(r),n[s]=!0}),this}concat(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return this.constructor.concat(this,...t)}toJSON(e){let t=Object.create(null);return $.forEach(this,(n,r)=>{null!=n&&!1!==n&&(t[r]=e&&$.isArray(n)?n.join(", "):n)}),t}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(e=>{let[t,n]=e;return t+": "+n}).join("\n")}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(e){return e instanceof this?e:new this(e)}static concat(e){for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];let i=new this(e);return n.forEach(e=>i.set(e)),i}static accessor(e){let t=(this[eP]=this[eP]={accessors:{}}).accessors,n=this.prototype;function r(e){let r=eI(e);t[r]||(!function(e,t){let n=$.toCamelCase(" "+t);["get","set","has"].forEach(r=>{Object.defineProperty(e,r+n,{value:function(e,n,i){return this[r].call(this,t,e,n,i)},configurable:!0})})}(n,e),t[r]=!0)}return $.isArray(e)?e.forEach(r):r(e),this}constructor(e){e&&this.set(e)}}function ek(e,t){let n=this||eA,r=t||n,i=eN.from(r.headers),o=r.data;return $.forEach(e,function(e){o=e.call(n,o,i.normalize(),t?t.status:void 0)}),i.normalize(),o}function eL(e){return!!(e&&e.__CANCEL__)}function eB(e,t,n){ee.call(this,null==e?"canceled":e,ee.ERR_CANCELED,t,n),this.name="CanceledError"}eN.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]),$.reduceDescriptors(eN.prototype,(e,t)=>{let{value:n}=e,r=t[0].toUpperCase()+t.slice(1);return{get:()=>n,set(e){this[r]=e}}}),$.freezeMethods(eN),$.inherits(eB,ee,{__CANCEL__:!0});var eD=eT.hasStandardBrowserEnv?{write(e,t,n,r,i,o){let s=[e+"="+encodeURIComponent(t)];$.isNumber(n)&&s.push("expires="+new Date(n).toGMTString()),$.isString(r)&&s.push("path="+r),$.isString(i)&&s.push("domain="+i),!0===o&&s.push("secure"),document.cookie=s.join("; ")},read(e){let t=document.cookie.match(RegExp("(^|;\\s*)("+e+")=([^;]*)"));return t?decodeURIComponent(t[3]):null},remove(e){this.write(e,"",Date.now()-864e5)}}:{write(){},read:()=>null,remove(){}};function eM(e,t){return e&&!/^([a-z][a-z\d+\-.]*:)?\/\//i.test(t)?t?e.replace(/\/?\/$/,"")+"/"+t.replace(/^\/+/,""):e:t}var eU=eT.hasStandardBrowserEnv?function(){let e;let t=/(msie|trident)/i.test(navigator.userAgent),n=document.createElement("a");function r(e){let r=e;return t&&(n.setAttribute("href",r),r=n.href),n.setAttribute("href",r),{href:n.href,protocol:n.protocol?n.protocol.replace(/:$/,""):"",host:n.host,search:n.search?n.search.replace(/^\?/,""):"",hash:n.hash?n.hash.replace(/^#/,""):"",hostname:n.hostname,port:n.port,pathname:"/"===n.pathname.charAt(0)?n.pathname:"/"+n.pathname}}return e=r(window.location.href),function(t){let n=$.isString(t)?r(t):t;return n.protocol===e.protocol&&n.host===e.host}}():function(){return!0},eH=function(e,t){let n;let r=Array(e=e||10),i=Array(e),o=0,s=0;return t=void 0!==t?t:1e3,function(a){let c=Date.now(),l=i[s];n||(n=c),r[o]=a,i[o]=c;let u=s,d=0;for(;u!==o;)d+=r[u++],u%=e;if((o=(o+1)%e)===s&&(s=(s+1)%e),c-n<t)return;let h=l&&c-l;return h?Math.round(1e3*d/h):void 0}};function eF(e,t){let n=0,r=eH(50,250);return i=>{let o=i.loaded,s=i.lengthComputable?i.total:void 0,a=o-n,c=r(a);n=o;let l={loaded:o,total:s,progress:s?o/s:void 0,bytes:a,rate:c||void 0,estimated:c&&s&&o<=s?(s-o)/c:void 0,event:i};l[t?"download":"upload"]=!0,e(l)}}let eG={http:null,xhr:"undefined"!=typeof XMLHttpRequest&&function(e){return new Promise(function(t,n){let r,i,o=e.data,s=eN.from(e.headers).normalize(),{responseType:a,withXSRFToken:c}=e;function l(){e.cancelToken&&e.cancelToken.unsubscribe(r),e.signal&&e.signal.removeEventListener("abort",r)}if($.isFormData(o)){if(eT.hasStandardBrowserEnv||eT.hasStandardBrowserWebWorkerEnv)s.setContentType(!1);else if(!1!==(i=s.getContentType())){let[e,...t]=i?i.split(";").map(e=>e.trim()).filter(Boolean):[];s.setContentType([e||"multipart/form-data",...t].join("; "))}}let u=new XMLHttpRequest;if(e.auth){let t=e.auth.username||"",n=e.auth.password?unescape(encodeURIComponent(e.auth.password)):"";s.set("Authorization","Basic "+btoa(t+":"+n))}let d=eM(e.baseURL,e.url);function h(){if(!u)return;let r=eN.from("getAllResponseHeaders"in u&&u.getAllResponseHeaders());!function(e,t,n){let r=n.config.validateStatus;!n.status||!r||r(n.status)?e(n):t(new ee("Request failed with status code "+n.status,[ee.ERR_BAD_REQUEST,ee.ERR_BAD_RESPONSE][Math.floor(n.status/100)-4],n.config,n.request,n))}(function(e){t(e),l()},function(e){n(e),l()},{data:a&&"text"!==a&&"json"!==a?u.response:u.responseText,status:u.status,statusText:u.statusText,headers:r,config:e,request:u}),u=null}if(u.open(e.method.toUpperCase(),ef(d,e.params,e.paramsSerializer),!0),u.timeout=e.timeout,"onloadend"in u?u.onloadend=h:u.onreadystatechange=function(){u&&4===u.readyState&&(0!==u.status||u.responseURL&&0===u.responseURL.indexOf("file:"))&&setTimeout(h)},u.onabort=function(){u&&(n(new ee("Request aborted",ee.ECONNABORTED,e,u)),u=null)},u.onerror=function(){n(new ee("Network Error",ee.ERR_NETWORK,e,u)),u=null},u.ontimeout=function(){let t=e.timeout?"timeout of "+e.timeout+"ms exceeded":"timeout exceeded",r=e.transitional||em;e.timeoutErrorMessage&&(t=e.timeoutErrorMessage),n(new ee(t,r.clarifyTimeoutError?ee.ETIMEDOUT:ee.ECONNABORTED,e,u)),u=null},eT.hasStandardBrowserEnv&&(c&&$.isFunction(c)&&(c=c(e)),c||!1!==c&&eU(d))){let t=e.xsrfHeaderName&&e.xsrfCookieName&&eD.read(e.xsrfCookieName);t&&s.set(e.xsrfHeaderName,t)}void 0===o&&s.setContentType(null),"setRequestHeader"in u&&$.forEach(s.toJSON(),function(e,t){u.setRequestHeader(t,e)}),$.isUndefined(e.withCredentials)||(u.withCredentials=!!e.withCredentials),a&&"json"!==a&&(u.responseType=e.responseType),"function"==typeof e.onDownloadProgress&&u.addEventListener("progress",eF(e.onDownloadProgress,!0)),"function"==typeof e.onUploadProgress&&u.upload&&u.upload.addEventListener("progress",eF(e.onUploadProgress)),(e.cancelToken||e.signal)&&(r=t=>{u&&(n(!t||t.type?new eB(null,e,u):t),u.abort(),u=null)},e.cancelToken&&e.cancelToken.subscribe(r),e.signal&&(e.signal.aborted?r():e.signal.addEventListener("abort",r)));let f=function(e){let t=/^([-+\w]{1,25})(:?\/\/|:)/.exec(e);return t&&t[1]||""}(d);if(f&&-1===eT.protocols.indexOf(f)){n(new ee("Unsupported protocol "+f+":",ee.ERR_BAD_REQUEST,e));return}u.send(o||null)})}};$.forEach(eG,(e,t)=>{if(e){try{Object.defineProperty(e,"name",{value:t})}catch(e){}Object.defineProperty(e,"adapterName",{value:t})}});let ej=e=>"- ".concat(e),eq=e=>$.isFunction(e)||null===e||!1===e;var eK={getAdapter:e=>{let t,n;let{length:r}=e=$.isArray(e)?e:[e],i={};for(let o=0;o<r;o++){let r;if(n=t=e[o],!eq(t)&&void 0===(n=eG[(r=String(t)).toLowerCase()]))throw new ee("Unknown adapter '".concat(r,"'"));if(n)break;i[r||"#"+o]=n}if(!n){let e=Object.entries(i).map(e=>{let[t,n]=e;return"adapter ".concat(t," ")+(!1===n?"is not supported by the environment":"is not available in the build")});throw new ee("There is no suitable adapter to dispatch the request "+(r?e.length>1?"since :\n"+e.map(ej).join("\n"):" "+ej(e[0]):"as no adapter specified"),"ERR_NOT_SUPPORT")}return n},adapters:eG};function eW(e){if(e.cancelToken&&e.cancelToken.throwIfRequested(),e.signal&&e.signal.aborted)throw new eB(null,e)}function ez(e){return eW(e),e.headers=eN.from(e.headers),e.data=ek.call(e,e.transformRequest),-1!==["post","put","patch"].indexOf(e.method)&&e.headers.setContentType("application/x-www-form-urlencoded",!1),eK.getAdapter(e.adapter||eA.adapter)(e).then(function(t){return eW(e),t.data=ek.call(e,e.transformResponse,t),t.headers=eN.from(t.headers),t},function(t){return!eL(t)&&(eW(e),t&&t.response&&(t.response.data=ek.call(e,e.transformResponse,t.response),t.response.headers=eN.from(t.response.headers))),Promise.reject(t)})}let eV=e=>e instanceof eN?e.toJSON():e;function eZ(e,t){t=t||{};let n={};function r(e,t,n){return $.isPlainObject(e)&&$.isPlainObject(t)?$.merge.call({caseless:n},e,t):$.isPlainObject(t)?$.merge({},t):$.isArray(t)?t.slice():t}function i(e,t,n){return $.isUndefined(t)?$.isUndefined(e)?void 0:r(void 0,e,n):r(e,t,n)}function o(e,t){if(!$.isUndefined(t))return r(void 0,t)}function s(e,t){return $.isUndefined(t)?$.isUndefined(e)?void 0:r(void 0,e):r(void 0,t)}function a(n,i,o){return o in t?r(n,i):o in e?r(void 0,n):void 0}let c={url:o,method:o,data:o,baseURL:s,transformRequest:s,transformResponse:s,paramsSerializer:s,timeout:s,timeoutMessage:s,withCredentials:s,withXSRFToken:s,adapter:s,responseType:s,xsrfCookieName:s,xsrfHeaderName:s,onUploadProgress:s,onDownloadProgress:s,decompress:s,maxContentLength:s,maxBodyLength:s,beforeRedirect:s,transport:s,httpAgent:s,httpsAgent:s,cancelToken:s,socketPath:s,responseEncoding:s,validateStatus:a,headers:(e,t)=>i(eV(e),eV(t),!0)};return $.forEach(Object.keys(Object.assign({},e,t)),function(r){let o=c[r]||i,s=o(e[r],t[r],r);$.isUndefined(s)&&o!==a||(n[r]=s)}),n}let eY="1.6.7",eQ={};["object","boolean","number","function","string","symbol"].forEach((e,t)=>{eQ[e]=function(n){return typeof n===e||"a"+(t<1?"n ":" ")+e}});let eX={};eQ.transitional=function(e,t,n){function r(e,t){return"[Axios v"+eY+"] Transitional option '"+e+"'"+t+(n?". "+n:"")}return(n,i,o)=>{if(!1===e)throw new ee(r(i," has been removed"+(t?" in "+t:"")),ee.ERR_DEPRECATED);return t&&!eX[i]&&(eX[i]=!0,console.warn(r(i," has been deprecated since v"+t+" and will be removed in the near future"))),!e||e(n,i,o)}};var eJ={assertOptions:function(e,t,n){if("object"!=typeof e)throw new ee("options must be an object",ee.ERR_BAD_OPTION_VALUE);let r=Object.keys(e),i=r.length;for(;i-- >0;){let o=r[i],s=t[o];if(s){let t=e[o],n=void 0===t||s(t,o,e);if(!0!==n)throw new ee("option "+o+" must be "+n,ee.ERR_BAD_OPTION_VALUE);continue}if(!0!==n)throw new ee("Unknown option "+o,ee.ERR_BAD_OPTION)}},validators:eQ};let e$=eJ.validators;class e0{async request(e,t){try{return await this._request(e,t)}catch(e){if(e instanceof Error){let t;Error.captureStackTrace?Error.captureStackTrace(t={}):t=Error();let n=t.stack?t.stack.replace(/^.+\n/,""):"";e.stack?n&&!String(e.stack).endsWith(n.replace(/^.+\n.+\n/,""))&&(e.stack+="\n"+n):e.stack=n}throw e}}_request(e,t){let n,r;"string"==typeof e?(t=t||{}).url=e:t=e||{};let{transitional:i,paramsSerializer:o,headers:s}=t=eZ(this.defaults,t);void 0!==i&&eJ.assertOptions(i,{silentJSONParsing:e$.transitional(e$.boolean),forcedJSONParsing:e$.transitional(e$.boolean),clarifyTimeoutError:e$.transitional(e$.boolean)},!1),null!=o&&($.isFunction(o)?t.paramsSerializer={serialize:o}:eJ.assertOptions(o,{encode:e$.function,serialize:e$.function},!0)),t.method=(t.method||this.defaults.method||"get").toLowerCase();let a=s&&$.merge(s.common,s[t.method]);s&&$.forEach(["delete","get","head","post","put","patch","common"],e=>{delete s[e]}),t.headers=eN.concat(a,s);let c=[],l=!0;this.interceptors.request.forEach(function(e){("function"!=typeof e.runWhen||!1!==e.runWhen(t))&&(l=l&&e.synchronous,c.unshift(e.fulfilled,e.rejected))});let u=[];this.interceptors.response.forEach(function(e){u.push(e.fulfilled,e.rejected)});let d=0;if(!l){let e=[ez.bind(this),void 0];for(e.unshift.apply(e,c),e.push.apply(e,u),r=e.length,n=Promise.resolve(t);d<r;)n=n.then(e[d++],e[d++]);return n}r=c.length;let h=t;for(d=0;d<r;){let e=c[d++],t=c[d++];try{h=e(h)}catch(e){t.call(this,e);break}}try{n=ez.call(this,h)}catch(e){return Promise.reject(e)}for(d=0,r=u.length;d<r;)n=n.then(u[d++],u[d++]);return n}getUri(e){return ef(eM((e=eZ(this.defaults,e)).baseURL,e.url),e.params,e.paramsSerializer)}constructor(e){this.defaults=e,this.interceptors={request:new ep,response:new ep}}}$.forEach(["delete","get","head","options"],function(e){e0.prototype[e]=function(t,n){return this.request(eZ(n||{},{method:e,url:t,data:(n||{}).data}))}}),$.forEach(["post","put","patch"],function(e){function t(t){return function(n,r,i){return this.request(eZ(i||{},{method:e,headers:t?{"Content-Type":"multipart/form-data"}:{},url:n,data:r}))}}e0.prototype[e]=t(),e0.prototype[e+"Form"]=t(!0)});class e1{throwIfRequested(){if(this.reason)throw this.reason}subscribe(e){if(this.reason){e(this.reason);return}this._listeners?this._listeners.push(e):this._listeners=[e]}unsubscribe(e){if(!this._listeners)return;let t=this._listeners.indexOf(e);-1!==t&&this._listeners.splice(t,1)}static source(){let e;return{token:new e1(function(t){e=t}),cancel:e}}constructor(e){let t;if("function"!=typeof e)throw TypeError("executor must be a function.");this.promise=new Promise(function(e){t=e});let n=this;this.promise.then(e=>{if(!n._listeners)return;let t=n._listeners.length;for(;t-- >0;)n._listeners[t](e);n._listeners=null}),this.promise.then=e=>{let t;let r=new Promise(e=>{n.subscribe(e),t=e}).then(e);return r.cancel=function(){n.unsubscribe(t)},r},e(function(e,r,i){n.reason||(n.reason=new eB(e,r,i),t(n.reason))})}}let e2={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(e2).forEach(e=>{let[t,n]=e;e2[n]=t});let e3=function e(t){let n=new e0(t),r=w(e0.prototype.request,n);return $.extend(r,e0.prototype,n,{allOwnKeys:!0}),$.extend(r,n,null,{allOwnKeys:!0}),r.create=function(n){return e(eZ(t,n))},r}(eA);e3.Axios=e0,e3.CanceledError=eB,e3.CancelToken=e1,e3.isCancel=eL,e3.VERSION=eY,e3.toFormData=ec,e3.AxiosError=ee,e3.Cancel=e3.CanceledError,e3.all=function(e){return Promise.all(e)},e3.spread=function(e){return function(t){return e.apply(null,t)}},e3.isAxiosError=function(e){return $.isObject(e)&&!0===e.isAxiosError},e3.mergeConfig=eZ,e3.AxiosHeaders=eN,e3.formToJSON=e=>e_($.isHTMLForm(e)?new FormData(e):e),e3.getAdapter=eK.getAdapter,e3.HttpStatusCode=e2,e3.default=e3;var e4=n(99980);(h||(h={})).TEXT="m.text";class e5{static from(e){if(e9(e))return new e5(e.content.msgtype,e.sender,e.content.body,e.origin_server_ts)}constructor(e,t,n,r){this.type=e,this.sender=t,this.content=n,this.timestamp=r}}let e6=e=>"m.room.create"===e.type&&e.content instanceof Object&&"creator"in e.content,e8=e=>"m.room.member"===e.type&&e.content instanceof Object&&"membership"in e.content&&"join"===e.content.membership,e7=e=>"m.room.message"===e.type,e9=e=>e7(e)&&e.content instanceof Object&&"msgtype"in e.content&&e.content.msgtype===h.TEXT;(a=f||(f={}))[a.UNKNOWN=0]="UNKNOWN",a[a.JOINED=1]="JOINED",a[a.INVITED=2]="INVITED",a[a.LEFT=3]="LEFT";class te{static fromSync(e){var t,n,r;if(!e)return[];function i(e,t){return Object.entries(e).map(e=>{let[n,r]=e;return t(n,r)})}return[...i(null!==(t=e.join)&&void 0!==t?t:{},te.fromJoined),...i(null!==(n=e.invite)&&void 0!==n?n:{},te.fromInvited),...i(null!==(r=e.leave)&&void 0!==r?r:{},te.fromLeft)]}static from(e,t){return"string"==typeof e?new te(e,t||f.UNKNOWN):void 0!==t?new te(e.id,t,e.members,e.messages):e}static merge(e,t){return t&&t.id===e.id?new te(e.id,e.status,[...t.members,...e.members].filter((e,t,n)=>n.indexOf(e)===t),[...t.messages,...e.messages]):te.from(e)}static fromJoined(e,t){let n=[...t.state.events,...t.timeline.events],r=te.getMembersFromEvents(n),i=te.getMessagesFromEvents(n);return new te(e,f.JOINED,r,i)}static fromInvited(e,t){let n=te.getMembersFromEvents(t.invite_state.events);return new te(e,f.INVITED,n)}static fromLeft(e,t){let n=[...t.state.events,...t.timeline.events],r=te.getMembersFromEvents(n),i=te.getMessagesFromEvents(n);return new te(e,f.LEFT,r,i)}static getMembersFromEvents(e){return te.getUniqueEvents(e.filter(e=>e6(e)||e8(e))).map(e=>e.sender).filter((e,t,n)=>n.indexOf(e)===t)}static getMessagesFromEvents(e){return te.getUniqueEvents(e.filter(e7)).map(e=>e5.from(e)).filter(Boolean)}static getUniqueEvents(e){let t={},n=[];return e.forEach((e,r)=>{let i=e.event_id;void 0!==i&&i in t||(void 0!==i&&(t[i]=r),n.push(e))}),n}constructor(e,t=f.UNKNOWN,n=[],r=[]){this.id=e,this.status=t,this.members=n,this.messages=r}}var tt=n(1937);let tn=["syncToken","rooms"];class tr{get(e){return this.state[e]}getRoom(e){let t=te.from(e,f.UNKNOWN);return this.state.rooms[t.id]||t}async update(e){await this.waitReady();let t=Object.assign({},this.state);this.setState(e),this.updateStorage(e),this.notifyListeners(t,this.state,e)}onStateChanged(e){for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];n.length>0?n.forEach(t=>{this.onStateChangedListeners.set(t,e)}):this.onStateChangedListeners.set("all",e)}async waitReady(){return this.waitReadyPromise}async initFromStorage(){let e=await this.storage.get(tt.Qt.MATRIX_PRESERVED_STATE);this.setState(e)}prepareData(e){let t=["rooms"].some(t=>void 0!==e[t])?JSON.parse(JSON.stringify(e)):e;return Object.values(t.rooms||{}).forEach(e=>{e.messages=[]}),t}updateStorage(e){if(Object.entries(e).filter(e=>{let[t,n]=e;return tn.includes(t)&&!!n}).length>0){let e={};tn.forEach(t=>{e[t]=this.state[t]}),this.storage.set(tt.Qt.MATRIX_PRESERVED_STATE,this.prepareData(e))}}setState(e){this.state={isRunning:e.isRunning||this.state.isRunning,userId:e.userId||this.state.userId,deviceId:e.deviceId||this.state.deviceId,txnNo:e.txnNo||this.state.txnNo,accessToken:e.accessToken||this.state.accessToken,syncToken:e.syncToken||this.state.syncToken,pollingTimeout:e.pollingTimeout||this.state.pollingTimeout,pollingRetries:e.pollingRetries||this.state.pollingRetries,rooms:this.mergeRooms(this.state.rooms,e.rooms)}}mergeRooms(e,t){if(!t)return e;let n=Array.isArray(t)?t:Object.values(t),r=Object.assign({},e);return n.forEach(t=>{r[t.id]=te.merge(t,e[t.id])}),r}notifyListeners(e,t,n){let r=this.onStateChangedListeners.get("all");r&&r(e,t,n),(0,e4.XP)(n).filter(e=>void 0!==n[e]).forEach(r=>{let i=this.onStateChangedListeners.get(r);i&&i(e,t,n)})}constructor(e){this.state={isRunning:!1,userId:void 0,deviceId:void 0,txnNo:0,accessToken:void 0,syncToken:void 0,pollingTimeout:void 0,pollingRetries:0,rooms:{}},this.onStateChangedListeners=new Map,this.storage=e,this.waitReadyPromise=new Promise(async(e,t)=>{try{await this.initFromStorage(),e()}catch(e){t(e)}})}}let ti=new E.Yd("MatrixHttpClient");class to{async get(e,t,n){return this.send("GET",e,n,t)}async post(e,t,n,r){return this.send("POST",e,n,r,t)}async put(e,t,n,r){return this.send("PUT",e,n,r,t)}async cancelAllRequests(){return this.cancelTokenSource.cancel("Manually cancelled")}async send(e,t,n,r,i){let o;let s=n?this.getHeaders(n):void 0,a=r?this.getParams(r):void 0;try{o=await e3.request({method:e,url:t,baseURL:this.apiUrl("/_matrix/client/r0"),headers:s,data:i,params:a,cancelToken:this.cancelTokenSource.token})}catch(e){throw ti.error("send",e.code,e.message,e.response.data),e.response.data}return o.data}getHeaders(e){let t={},n=[];if(e.accessToken&&n.push(["Authorization","Bearer ".concat(e.accessToken)]),0!==n.length){for(let[e,r]of n)t[e]=r;return t}}getParams(e){if(!e)return;let t=Object.assign(e,{});return(0,e4.XP)(t).forEach(e=>void 0===t[e]&&delete t[e]),t}apiUrl(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return[this.baseUrl.endsWith("/")?this.baseUrl.substr(0,this.baseUrl.length-1):this.baseUrl,...t.map(e=>e.startsWith("/")?e.substr(1):e)].join("/")}constructor(e){this.baseUrl=e,this.cancelTokenSource=e3.CancelToken.source()}}class ts{async createRoom(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.httpClient.post("/createRoom",t,{accessToken:e})}async inviteToRoom(e,t,n){return n.status!==f.JOINED&&n.status!==f.UNKNOWN?Promise.reject("User is not a member of room ".concat(n.id,".")):this.httpClient.post("/rooms/".concat(encodeURIComponent(n.id),"/invite"),{user_id:t},{accessToken:e})}async joinRoom(e,t){return t.status===f.JOINED?Promise.resolve({room_id:t.id}):this.httpClient.post("/rooms/".concat(encodeURIComponent(t.id),"/join"),{},{accessToken:e})}async getJoinedRooms(e){return this.httpClient.get("/joined_rooms",void 0,{accessToken:e})}constructor(e){this.httpClient=e}}class ta{async login(e,t,n){return this.httpClient.post("/login",{type:"m.login.password",identifier:{type:"m.id.user",user:e},password:t,device_id:n})}constructor(e){this.httpClient=e}}class tc{async sync(e,t){return this.withCache("sync",()=>this.httpClient.get("/sync",{timeout:t?t.pollingTimeout:void 0,since:t?t.syncToken:void 0},{accessToken:e}))}async sendMessage(e,t,n,r){return new Promise((i,o)=>this.scheduleEvent({accessToken:e,roomId:t,type:"m.room.message",content:n,txnId:r,onSuccess:i,onError:o}))}scheduleEvent(e){this.sendEvent(e)}async sendEvent(e){let{roomId:t,type:n,txnId:r,content:i,accessToken:o}=e;try{let s=await this.httpClient.put("/rooms/".concat(encodeURIComponent(t),"/send/").concat(n,"/").concat(encodeURIComponent(r)),i,{accessToken:o});e.onSuccess(s)}catch(t){e.onError(t)}}withCache(e,t){let n=this.cachedPromises.get(e);return n||(n=t().finally(()=>{this.cachedPromises.delete(e)}),this.cachedPromises.set(e,n)),n}constructor(e){this.cachedPromises=new Map,this.httpClient=e}}class tl{on(e,t){return"object"!=typeof this.events[e]&&(this.events[e]=[]),this.events[e].push(t),()=>this.removeListener(e,t)}removeListener(e,t){if("object"!=typeof this.events[e])return;if(!t){this.events[e]=[];return}let n=this.events[e].indexOf(t);n>-1&&this.events[e].splice(n,1)}removeAllListeners(){Object.keys(this.events).forEach(e=>this.events[e].splice(0,this.events[e].length))}emit(e){for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];"object"==typeof this.events[e]&&[...this.events[e]].forEach(e=>e.apply(this,n))}once(e,t){var n=this;let r=this.on(e,function(){for(var e=arguments.length,i=Array(e),o=0;o<e;o++)i[o]=arguments[o];r(),t.apply(n,i)});return r}constructor(){this.events={}}}(c=p||(p={})).INVITE="invite",c.MESSAGE="message";class tu extends tl{onStateChanged(e,t,n){for(let e of(0,e4.XP)(p))this.emitIfEvent(p[e],n)}emitIfEvent(e,t){let n=this.eventEmitProviders.get(e);if(n){let[r,i]=n();r(t)&&i(e,t)}}emitClientEvent(e,t,n){this.emit(e,{type:e,content:t,timestamp:n})}isInvite(e){return!!e.rooms&&e.rooms.some(e=>e.status===f.INVITED)}emitInvite(e,t){t.rooms.filter(e=>e.status===f.INVITED).map(e=>[e.id,e.members]).forEach(t=>{let[n,r]=t;this.emitClientEvent(e,{roomId:n,members:r})})}isMessage(e){return!!e.rooms&&e.rooms.some(e=>e.messages.length>0)}emitMessage(e,t){t.rooms.filter(e=>e.messages.length>0).map(e=>e.messages.map(t=>[e.id,t,t.timestamp])).reduce((e,t)=>e.concat(t),[]).forEach(t=>{let[n,r,i]=t;this.emitClientEvent(e,{roomId:n,message:r},i)})}constructor(...e){super(...e),this.eventEmitProviders=new Map([[p.INVITE,()=>[this.isInvite,this.emitInvite.bind(this)]],[p.MESSAGE,()=>[this.isMessage,this.emitMessage.bind(this)]]])}}let td=new E.Yd("MatrixClient");class th{static create(e){let t=new tr(e.storage),n=new tu,r=new to(e.baseUrl);return new th(t,n,new ta(r),new ts(r),new tc(r),r)}get joinedRooms(){return new Promise(async e=>{await this.isConnected(),e(Object.values(this.store.get("rooms")).filter(e=>e.status===f.JOINED))})}get invitedRooms(){return new Promise(async e=>{await this.isConnected(),e(Object.values(this.store.get("rooms")).filter(e=>e.status===f.INVITED))})}get leftRooms(){return new Promise(async e=>{await this.isConnected(),e(Object.values(this.store.get("rooms")).filter(e=>e.status===f.LEFT))})}async start(e){let t=await this.userService.login(e.id,e.password,e.deviceId);await this.store.update({accessToken:t.access_token});let n=new Promise(async(e,t)=>{await this.poll(0,async t=>{this.store.get("isRunning")||e(),await this.store.update({isRunning:!0,syncToken:t.next_batch,pollingTimeout:3e4,pollingRetries:0,rooms:te.fromSync(t.rooms)})},async e=>{this.store.get("isRunning")||t(e),await this.store.update({isRunning:!1,pollingRetries:this.store.get("pollingRetries")+1})})});return n.then(()=>{this._isReady.resolve()}).catch(console.error),n}async isConnected(){return this._isReady.promise}async stop(){return td.log("MATRIX CLIENT STOPPED"),this.isActive=!1,this._isReady=new e4.$H,this.httpClient.cancelAllRequests()}subscribe(e,t){this.eventEmitter.on(e,t)}unsubscribe(e,t){t&&this.eventEmitter.removeListener(e,t)}unsubscribeAll(e){this.eventEmitter.removeListener(e)}async getRoomById(e){return await this.isConnected(),this.store.getRoom(e)}async createTrustedPrivateRoom(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return await this.isConnected(),this.requiresAuthorization("createRoom",async e=>(await this.roomService.createRoom(e,{room_version:"5",invite:t,preset:"public_chat",is_direct:!0})).room_id)}async inviteToRooms(e){for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];await this.isConnected(),await this.requiresAuthorization("invite",t=>Promise.all(n.map(n=>{let r=this.store.getRoom(n);this.roomService.inviteToRoom(t,e,r).catch(e=>td.warn("inviteToRooms",e))})))}async joinRooms(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];await this.isConnected(),await this.requiresAuthorization("join",e=>Promise.all(t.map(t=>{let n=this.store.getRoom(t);return this.roomService.joinRoom(e,n)})))}async sendTextMessage(e,t){await this.isConnected(),await this.requiresAuthorization("send",async n=>{let r=await this.createTxnId();return this.eventService.sendMessage(n,e,{msgtype:"m.text",body:t},r)})}async poll(e,t,n){let r=this.store,i=this.sync.bind(this),o=async(s,a)=>{let c=0;try{let e=await i();t(e)}catch(e){n(e),c=r.get("pollingRetries"),this.isActive&&td.log("Retry syncing... ".concat(c," retries so far"))}finally{this.isActive?setTimeout(async()=>{await o(s,a)},c>3?5e3+e:e):a(Error("Syncing stopped manually."))}};return new Promise(o)}async sync(){return this.requiresAuthorization("sync",async e=>this.eventService.sync(e,{pollingTimeout:this.store.get("pollingTimeout"),syncToken:this.store.get("syncToken")}))}async requiresAuthorization(e,t){let n=this.store.get("accessToken");return n?t(n):Promise.reject("".concat(e," requires authorization but no access token has been provided."))}async createTxnId(){let e=new Date().getTime(),t=this.store.get("txnNo");return await this.store.update({txnNo:t+1}),"m".concat(e,".").concat(t)}constructor(e,t,n,r,i,o){this.isActive=!0,this._isReady=new e4.$H,this.store=e,this.eventEmitter=t,this.userService=n,this.roomService=r,this.eventService=i,this.httpClient=o,this.store.onStateChanged((e,t,n)=>{this.eventEmitter.onStateChanged(e,t,n)},"rooms")}}var tf=n(40106),tp=n(39798),tm=n(23663).Buffer;let tg=new E.Yd("P2PCommunicationClient"),tv={[tt.gr.EUROPE_WEST]:["beacon-node-1.diamond.papers.tech","beacon-node-1.sky.papers.tech","beacon-node-2.sky.papers.tech","beacon-node-1.hope.papers.tech","beacon-node-1.hope-2.papers.tech","beacon-node-1.hope-3.papers.tech","beacon-node-1.hope-4.papers.tech","beacon-node-1.hope-5.papers.tech"],[tt.gr.NORTH_AMERICA_EAST]:["beacon-node-1.beacon-server-1.papers.tech"],[tt.gr.NORTH_AMERICA_WEST]:["beacon-node-1.beacon-server-2.papers.tech"],[tt.gr.ASIA_EAST]:["beacon-node-1.beacon-server-3.papers.tech"],[tt.gr.AUSTRALIA]:["beacon-node-1.beacon-server-4.papers.tech"]},ty=e=>new Promise(t=>setTimeout(t,e));class tE extends E.cs{async getPairingRequestInfo(){let e=new tt.y7(await (0,e4.qs)(),this.name,await this.getPublicKey(),E.jX,(await this.getRelayServer()).server);return this.iconUrl&&(e.icon=this.iconUrl),this.appUrl&&(e.appUrl=this.appUrl),e}async getPairingResponseInfo(e){let t=new tt.X6(e.id,this.name,await this.getPublicKey(),e.version,(await this.getRelayServer()).server);return this.iconUrl&&(t.icon=this.iconUrl),this.appUrl&&(t.appUrl=this.appUrl),t}async findBestRegionAndGetServer(){if(this.selectedRegion){var e;return null===(e=this.relayServer)||void 0===e?void 0:e.promiseResult}let t=Object.keys(this.ENABLED_RELAY_SERVERS),n=[],r=new e4.$H,i=0,o=new e4.$H;t.forEach(e=>{var t,s=this;let a=null!==(t=this.ENABLED_RELAY_SERVERS[e])&&void 0!==t?t:[];if(0===a.length)return;i+=2;let c=function(){let t=!(arguments.length>0)||void 0===arguments[0]||arguments[0],a=Date.now();Promise.race([s.getBeaconInfo(u),o.promise]).then(o=>{"boolean"!=typeof o&&(n.push({time:Date.now()-a,server:u,region:e,result:o}),n.length>=i&&r.resolve(void 0),t||c(!0))})},l=Math.floor(Math.random()*a.length),u=a[l];c(!1)}),await Promise.race([r.promise,ty(1e3)]);let s=0;for(;n.length<=0;){if(s>=100)throw Error("No server responded.");await ty(50),s++}o.resolve(!0);let a=n.reduce((e,t)=>e.time<t.time?e:t);return this.selectedRegion=a.region,{server:a.server,timestamp:a.result.timestamp}}async getRelayServer(){if(this.relayServer){let e=await this.relayServer.promise;if(Date.now()-e.localTimestamp<6e4)return{server:e.server,timestamp:e.timestamp};let t=await this.getBeaconInfo(e.server);return this.relayServer.resolve({server:e.server,timestamp:t.timestamp,localTimestamp:new Date().getTime()}),{server:e.server,timestamp:t.timestamp}}this.relayServer=new e4.$H;let e=await this.storage.get(tt.Qt.MATRIX_SELECTED_NODE);if(e&&e.length>0){let t=await this.getBeaconInfo(e);return this.relayServer.resolve({server:e,timestamp:t.timestamp,localTimestamp:new Date().getTime()}),{server:e,timestamp:t.timestamp}}let t=await this.findBestRegionAndGetServer();if(!t)throw Error("No servers found");return this.storage.set(tt.Qt.MATRIX_SELECTED_NODE,t.server).catch(e=>tg.log(e)),this.relayServer.resolve({server:t.server,timestamp:t.timestamp,localTimestamp:new Date().getTime()}),{server:t.server,timestamp:t.timestamp}}async getBeaconInfo(e){return e3.get("https://".concat(e,"/_synapse/client/beacon/info")).then(e=>({region:e.data.region,known_servers:e.data.known_servers,timestamp:Math.floor(e.data.timestamp)}))}async tryJoinRooms(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;try{await (await this.client.promise).joinRooms(e)}catch(n){t<=10&&"M_FORBIDDEN"===n.errcode?(tg.log("Retrying to join...",n),setTimeout(async()=>{await this.tryJoinRooms(e,t+1)},200)):tg.log("Failed to join after ".concat(t," tries."),n)}}async start(){var e,t;tg.log("start","starting client"),tg.log("start","connecting to server");let n=await this.getRelayServer(),r=th.create({baseUrl:"https://".concat(n.server),storage:this.storage});if(this.initialListener=async e=>{this.initialEvent&&this.initialEvent.timestamp&&e&&e.timestamp?this.initialEvent.timestamp<e.timestamp&&(this.initialEvent=e):this.initialEvent=e},r.subscribe(p.MESSAGE,this.initialListener),r.subscribe(p.INVITE,async e=>{let t;1===e.content.members.length&&(t=e.content.members[0]),await this.tryJoinRooms(e.content.roomId),t&&(await this.updateRelayServer(t),await this.updatePeerRoom(t,e.content.roomId))}),!n.timestamp)throw Error("No timestamp received from relay server");let i=Math.floor(n.timestamp),o="login:".concat(Math.floor(i/300));tg.log("start","login ".concat(o,", ").concat(await this.getPublicKeyHash()," on ").concat(n.server));let s=(0,tf.hash)((0,tp.cv)(o),32),a=null!==(e=this.keyPair.secretKey)&&void 0!==e?e:this.keyPair.privateKey,c=(0,b.Xx)(a,s);try{await r.start({id:await this.getPublicKeyHash(),password:"ed:".concat((0,e4.NC)(c),":").concat(await this.getPublicKey()),deviceId:(0,e4.NC)(this.keyPair.publicKey)})}catch(e){if(tg.error("start","Could not log in, retrying"),await this.reset(),!this.selectedRegion)throw Error("No region selected.");if(this.loginCounter<=(null!==(t=this.ENABLED_RELAY_SERVERS[this.selectedRegion])&&void 0!==t?t:[]).length){this.loginCounter++,this.start();return}throw tg.error("start","Tried to log in to every known beacon node, but no login was successful."),Error("Could not connect to any beacon nodes. Try again later.")}tg.log("start","login successful, client is ready"),this.client.resolve(r)}async stop(){tg.log("stop","stopping client"),this.client.isResolved()&&await (await this.client.promise).stop().catch(e=>tg.error(e)),await this.reset()}async reset(){tg.log("reset","resetting connection"),await this.storage.delete(tt.Qt.MATRIX_PEER_ROOM_IDS).catch(e=>tg.log(e)),await this.storage.delete(tt.Qt.MATRIX_PRESERVED_STATE).catch(e=>tg.log(e)),await this.storage.delete(tt.Qt.MATRIX_SELECTED_NODE).catch(e=>tg.log(e)),this.relayServer=void 0,this.client=new e4.$H,this.initialEvent=void 0,this.initialListener=void 0}async listenForEncryptedMessage(e,t){if(this.activeListeners.has(e))return;tg.log("listenForEncryptedMessage","start listening for encrypted messages from publicKey ".concat(e));let n=await this.createCryptoBoxServer(e,this.keyPair),r=async r=>{if(this.isTextMessage(r.content)&&await this.isSender(r,e)){let i;await this.updateRelayServer(r.content.message.sender),await this.updatePeerRoom(r.content.message.sender,r.content.roomId);try{i=tm.from(r.content.message.content,"hex")}catch(e){}if(i&&i.length>=e4.Cd+e4.S6)try{let r=await (0,e4.b8)(i,n.receive);tg.log("listenForEncryptedMessage","received a message from ".concat(e),r),t(r)}catch(e){}}};this.activeListeners.set(e,r),(await this.client.promise).subscribe(p.MESSAGE,r);let i=this.initialEvent;i&&i.timestamp&&new Date().getTime()-i.timestamp<3e5?(tg.log("listenForEncryptedMessage","Handling previous event"),await r(i)):tg.log("listenForEncryptedMessage","No previous event found");let o=this.initialListener;o&&(await this.client.promise).unsubscribe(p.MESSAGE,o),this.initialListener=void 0,this.initialEvent=void 0}async unsubscribeFromEncryptedMessage(e){let t=this.activeListeners.get(e);t&&((await this.client.promise).unsubscribe(p.MESSAGE,t),this.activeListeners.delete(e))}async unsubscribeFromEncryptedMessages(){(await this.client.promise).unsubscribeAll(p.MESSAGE),this.activeListeners.clear()}async sendMessage(e,t){let n=await this.createCryptoBoxClient(t.publicKey,this.keyPair),r=await (0,e4.vx)(tm.from(t.publicKey,"hex")),i=(0,e4.yk)(r,t.relayServer),o=await this.getRelevantRoom(i);await this.waitForJoin(o);let s=await (0,e4.rk)(e,n.send);tg.log("sendMessage","sending encrypted message",t.publicKey,o,e),(await this.client.promise).sendTextMessage(o,s).catch(async e=>{if("M_FORBIDDEN"===e.errcode){tg.log("sendMessage","M_FORBIDDEN",o,e),await this.deleteRoomIdFromRooms(o);let t=await this.getRelevantRoom(i);tg.log("sendMessage","Old room deleted, new room created",t),(await this.client.promise).sendTextMessage(t,s).catch(async e=>{tg.log("sendMessage","inner error",t,e)})}else tg.log("sendMessage","unexpected error",e)})}async updatePeerRoom(e,t){tg.log("updatePeerRoom",e,t);let n=e.split(":");if(n.length<2||!n[0].startsWith("@"))throw Error("Invalid sender");let r=await this.storage.get(tt.Qt.MATRIX_PEER_ROOM_IDS),i=r[e];i===t&&tg.debug("updatePeerRoom","rooms are the same, not updating"),tg.debug("updatePeerRoom","current room",i,"new room",t),i&&i[1]&&(tg.log("updatePeerRoom",'adding room "'.concat(i[1],'" to ignored array')),this.ignoredRooms.push(i[1])),r[e]=t,await this.storage.set(tt.Qt.MATRIX_PEER_ROOM_IDS,r)}async deleteRoomIdFromRooms(e){let t=Object.entries(await this.storage.get(tt.Qt.MATRIX_PEER_ROOM_IDS)).filter(t=>t[1]!==e).reduce((e,t)=>({...e,[t[0]]:t[1]}),{});await this.storage.set(tt.Qt.MATRIX_PEER_ROOM_IDS,t),this.ignoredRooms.push(e)}async listenForChannelOpening(e){tg.debug("listenForChannelOpening"),(await this.client.promise).subscribe(p.MESSAGE,async t=>{if(this.isTextMessage(t.content)&&await this.isChannelOpenMessage(t.content)){tg.log("listenForChannelOpening","channel opening received, trying to decrypt",JSON.stringify(t)),await this.updateRelayServer(t.content.message.sender),await this.updatePeerRoom(t.content.message.sender,t.content.roomId);let n=t.content.message.content.split(":"),r=tm.from(n[n.length-1],"hex");if(r.length>=e4.Cd+e4.S6)try{let t=JSON.parse(await (0,e4.a8)(r,this.keyPair.publicKey,this.keyPair.secretKey));tg.log("listenForChannelOpening","channel opening received and decrypted",JSON.stringify(t)),e({...t,senderId:await (0,E.I2)(t.publicKey)})}catch(e){}}})}async waitForJoin(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=await (await this.client.promise).getRoomById(e);if(tg.log("waitForJoin","Currently ".concat(n.members.length," members, we need at least 2")),!(n.members.length>=2)){if(t<=200)return tg.log("Waiting for join... Try: ".concat(t)),new Promise(n=>{setTimeout(()=>{n(this.waitForJoin(e,t+1))},100*(t>50?10:1))});throw Error("No one joined after ".concat(t," tries."))}}async sendPairingResponse(e){tg.log("sendPairingResponse");let t=await (0,e4.vx)(tm.from(e.publicKey,"hex")),n=(0,e4.yk)(t,e.relayServer),r=await (await this.client.promise).createTrustedPrivateRoom(n);tg.debug("sendPairingResponse",'Connecting to room "'.concat(r,'"')),await this.updatePeerRoom(n,r),await this.waitForJoin(r),tg.debug("sendPairingResponse","Successfully joined room.");let i=void 0===e.version?await this.getPublicKey():JSON.stringify(await this.getPairingResponseInfo(e));tg.debug("sendPairingResponse","Sending pairing response",i);let o=["@channel-open",n,await this.encryptMessageAsymmetric(e.publicKey,i)].join(":");(await this.client.promise).sendTextMessage(r,o).catch(async e=>{if("M_FORBIDDEN"===e.errcode){tg.log("sendPairingResponse","M_FORBIDDEN",r,e),await this.deleteRoomIdFromRooms(r);let t=await this.getRelevantRoom(n);tg.log("sendPairingResponse","Old room deleted, new room created",t),(await this.client.promise).sendTextMessage(t,o).catch(async e=>{tg.log("sendPairingResponse","inner error",t,e)})}else tg.log("sendPairingResponse","unexpected error",e)})}isTextMessage(e){return e.message.type===h.TEXT}async updateRelayServer(e){tg.log("updateRelayServer",e);let t=e.split(":");if(t.length<2||!t[0].startsWith("@"))throw Error("Invalid sender");let n=t.shift(),r=t.join(":"),i=localStorage.getItem("beacon:communication-peers-dapp")?new E.Ou(this.storage,tt.Qt.TRANSPORT_P2P_PEERS_DAPP):new E.Ou(this.storage,tt.Qt.TRANSPORT_P2P_PEERS_WALLET),o=(await i.getPeers()).map(async e=>{"@".concat(await (0,e4.vx)(tm.from(e.publicKey,"hex")))===n&&e.relayServer!==r&&(e.relayServer=r,await i.addPeer(e))});await Promise.all(o)}async isChannelOpenMessage(e){return e.message.content.startsWith("@channel-open:@".concat(await (0,e4.vx)(tm.from(await this.getPublicKey(),"hex"))))}async isSender(e,t){return e.content.message.sender.startsWith("@".concat(await (0,e4.vx)(tm.from(t,"hex"))))}async getRelevantRoom(e){let t=await this.storage.get(tt.Qt.MATRIX_PEER_ROOM_IDS),n=t[e];if(!n){tg.log("getRelevantRoom","No room found for peer ".concat(e,", checking joined ones."));let r=await this.getRelevantJoinedRoom(e);n=r.id,t[e]=r.id,await this.storage.set(tt.Qt.MATRIX_PEER_ROOM_IDS,t)}return tg.log("getRelevantRoom","Using room ".concat(n)),n}async getRelevantJoinedRoom(e){let t;let n=await (await this.client.promise).joinedRooms;tg.log("checking joined rooms",n,e);let r=n.filter(e=>!this.ignoredRooms.some(t=>e.id===t)).filter(t=>t.members.some(t=>t===e));if(0===r.length||this.ignoredRooms.length>0){tg.log("getRelevantJoinedRoom","no relevant rooms found, creating new one");let n=await (await this.client.promise).createTrustedPrivateRoom(e);t=await (await this.client.promise).getRoomById(n),tg.log("getRelevantJoinedRoom","waiting for other party to join room: ".concat(t.id)),await this.waitForJoin(n),tg.log("getRelevantJoinedRoom","new room created and peer invited: ".concat(t.id))}else t=r[0],tg.log("getRelevantJoinedRoom","channel already open, reusing room ".concat(t.id));return t}constructor(e,t,n,r,i,o,s){super(t),this.client=new e4.$H,this.activeListeners=new Map,this.ignoredRooms=[],this.loginCounter=0,this.name=e,this.replicationCount=n,this.storage=r,this.iconUrl=o,this.appUrl=s,tg.log("constructor","P2PCommunicationClient created"),this.ENABLED_RELAY_SERVERS=tv,i&&(this.ENABLED_RELAY_SERVERS={...tv,...i})}}let tb=new E.Yd("P2PTransport");class tw extends E.J7{static async isAvailable(){return Promise.resolve(!0)}async connect(){if(this._isConnected!==tt.ki.NOT_CONNECTED)return;tb.log("connect"),this._isConnected=tt.ki.CONNECTING,await this.client.start();let e=await this.getPeers();return e.length>0&&(tb.log("connect","connecting to ".concat(e.length," peers")),Promise.all(e.map(async e=>this.listen(e.publicKey))).catch(e=>tb.error("connect",e))),await this.startOpenChannelListener(),super.connect()}async disconnect(){return await this.client.stop(),super.disconnect()}async startOpenChannelListener(){}async getPairingRequestInfo(){return this.client.getPairingRequestInfo()}async listen(e){await this.client.listenForEncryptedMessage(e,t=>{let n={origin:tt.aP.P2P,id:e};this.notifyListeners(t,n).catch(e=>{throw e})}).catch(e=>{throw e})}constructor(e,t,n,r,i,o,s){super(e,new tE(e,t,1,n,r,o,s),new E.Ou(n,i)),this.type=tt.Fl.P2P}}var tT=n(97378),t_=n(3248),tA=n(78110);let tR=e=>e.length>=12?"".concat(e.substr(0,5),"...").concat(e.substr(-5)):e,tS=new E.Yd("BeaconEvents");(l=m||(m={})).PERMISSION_REQUEST_SENT="PERMISSION_REQUEST_SENT",l.PERMISSION_REQUEST_SUCCESS="PERMISSION_REQUEST_SUCCESS",l.PERMISSION_REQUEST_ERROR="PERMISSION_REQUEST_ERROR",l.PROOF_OF_EVENT_CHALLENGE_REQUEST_SENT="PROOF_OF_EVENT_CHALLENGE_REQUEST_SENT",l.PROOF_OF_EVENT_CHALLENGE_REQUEST_SUCCESS="PROOF_OF_EVENT_CHALLENGE_REQUEST_SUCCESS",l.PROOF_OF_EVENT_CHALLENGE_REQUEST_ERROR="PROOF_OF_EVENT_CHALLENGE_REQUEST_ERROR",l.OPERATION_REQUEST_SENT="OPERATION_REQUEST_SENT",l.OPERATION_REQUEST_SUCCESS="OPERATION_REQUEST_SUCCESS",l.OPERATION_REQUEST_ERROR="OPERATION_REQUEST_ERROR",l.SIGN_REQUEST_SENT="SIGN_REQUEST_SENT",l.SIGN_REQUEST_SUCCESS="SIGN_REQUEST_SUCCESS",l.SIGN_REQUEST_ERROR="SIGN_REQUEST_ERROR",l.BROADCAST_REQUEST_SENT="BROADCAST_REQUEST_SENT",l.BROADCAST_REQUEST_SUCCESS="BROADCAST_REQUEST_SUCCESS",l.BROADCAST_REQUEST_ERROR="BROADCAST_REQUEST_ERROR",l.ACKNOWLEDGE_RECEIVED="ACKNOWLEDGE_RECEIVED",l.LOCAL_RATE_LIMIT_REACHED="LOCAL_RATE_LIMIT_REACHED",l.NO_PERMISSIONS="NO_PERMISSIONS",l.ACTIVE_ACCOUNT_SET="ACTIVE_ACCOUNT_SET",l.ACTIVE_TRANSPORT_SET="ACTIVE_TRANSPORT_SET",l.SHOW_PREPARE="SHOW_PREPARE",l.HIDE_UI="HIDE_UI",l.INVALID_ACTIVE_ACCOUNT_STATE="INVALID_ACTIVE_ACCOUNT_STATE",l.PAIR_INIT="PAIR_INIT",l.PAIR_SUCCESS="PAIR_SUCCESS",l.CHANNEL_CLOSED="CHANNEL_CLOSED",l.INTERNAL_ERROR="INTERNAL_ERROR",l.UNKNOWN="UNKNOWN";let tP=async e=>{let t;let n=[];if(e.walletInfo.deeplink&&("web"===e.walletInfo.type||"mobile"===e.walletInfo.type&&(0,t_.tq)(window)||"desktop"===e.walletInfo.type&&!(0,t_.tq)(window))){let n=e.walletInfo.deeplink;t=async()=>{let e=document.createElement("a");e.setAttribute("rel","noopener"),e.setAttribute("href",n),e.setAttribute("target","_blank"),e.dispatchEvent(new MouseEvent("click",{view:window,bubbles:!0,cancelable:!0}))}}n.push({text:"No answer from your wallet received yet. Please make sure the wallet is open.",isBold:!0}),n.push({text:"Wallet not receiving request?",actionText:"Reset Connection",actionCallback:async()=>{await (0,t_.yg)();let t=e.extraInfo.resetCallback;t&&(tS.log("showSentToast","resetCallback invoked"),await t())}}),(0,t_.eS)({body:"Request sent to\xa0 {{wallet}}",walletInfo:e.walletInfo,state:"loading",actions:n,openWalletAction:t}).catch(e=>console.error(e))},tI=async e=>{(0,t_.eS)({body:"Awaiting confirmation in\xa0 {{wallet}}",state:"acknowledge",walletInfo:e.walletInfo}).catch(e=>console.error(e))},tO=async e=>{let t=e.walletInfo?"Preparing Request for\xa0 {{wallet}}...":"Preparing Request...";(0,t_.eS)({body:t,state:"prepare",walletInfo:e.walletInfo}).catch(e=>console.error(e))},tC=async e=>{e?(e.includes("alert")&&await (0,t_.ys)(),e.includes("toast")&&await (0,t_.yg)()):await (0,t_.yg)()},tx=async()=>{await (0,t_.qR)({title:"No Permission",body:"Please allow the wallet to handle this type of request."})},tN=async()=>{await (0,t_.qR)({title:"Invalid state",body:"No subscription found for the received active account."})},tk=async(e,t)=>{let n=e.errorResponse.errorType?E.o8.getError(e.errorResponse.errorType,e.errorResponse.errorData):new E.hh,r=[{text:n.title,isBold:!0}];if(e.errorResponse.errorType===tt.$l.TRANSACTION_INVALID_ERROR&&e.errorResponse.errorData){var i,o,s,a,c,l;let u=e.errorResponse.errorData,d=e.errorMessages,h=!1;if((null===(i=u[0])||void 0===i?void 0:i.contract_handle)&&d&&(null==d?void 0:d[u[0].contract_handle])){let e=null!==(l=null===(s=u[1])||void 0===s?void 0:null===(o=s.with)||void 0===o?void 0:o.int)&&void 0!==l?l:null===(c=u[1])||void 0===c?void 0:null===(a=c.with)||void 0===a?void 0:a.string,t=null==d?void 0:d[u[0].contract_handle];e&&(null==t?void 0:t[e])&&(r.push({text:null==t?void 0:t[e],isBold:!0}),h=!0)}h||r.push({text:n.description}),r.push({text:"",actionText:"Show Details",actionCallback:async()=>{await (0,t_.yg)(),await (0,t_.qR)({title:n.title,body:n.fullDescription.description,data:n.fullDescription.data,buttons:t})}})}await (0,t_.eS)({body:"{{wallet}}\xa0 has returned an error",timer:e.errorResponse.errorType===tt.$l.ABORTED_ERROR?5e3:void 0,state:"finished",walletInfo:e.walletInfo,actions:r})},tL=async()=>{(0,t_.qR)({title:"Error",body:"Rate limit reached. Please slow down",buttons:[{text:"Done",style:"outline"}],timer:3e3}).catch(e=>console.error(e))},tB=async()=>{await (0,t_.ys)()},tD=async()=>{await (0,t_.qR)({title:"Channel closed",body:"Your peer has closed the connection.",buttons:[{text:"Done",style:"outline"}],timer:1500})},tM=async e=>{var t;let n=[...null!==(t=e.buttons)&&void 0!==t?t:[]];n.push({text:"Done",style:"outline"});let r={title:"Internal Error",body:e.text,buttons:n};await (0,t_.qR)(r)},tU=async e=>{tS.log("showPairAlert");let t={title:"Choose your preferred wallet",body:"<p></p>",pairingPayload:{p2pSyncCode:e.p2pPeerInfo,walletConnectSyncCode:e.walletConnectPeerInfo,postmessageSyncCode:e.postmessagePeerInfo,networkType:e.networkType},closeButtonCallback:e.abortedHandler,disclaimerText:e.disclaimerText,analytics:e.analytics,featuredWallets:e.featuredWallets};await (0,t_.qR)(t)},tH=async e=>{let{output:t}=e;await (0,t_.eS)({body:"{{wallet}}\xa0 has granted permission",timer:5e3,walletInfo:e.walletInfo,state:"finished",actions:[{text:"Address",actionText:tR(t.address),isBold:!0},{text:"Network",actionText:"".concat(t.network.type)},{text:"Permissions",actionText:t.scopes.join(", ")}]})},tF=async e=>{let{output:t}=e;await (0,t_.eS)({body:"{{wallet}}\xa0 has ".concat(t.isAccepted?"accepted":"refused"," the challenge"),timer:5e3,walletInfo:e.walletInfo,state:"finished",actions:[{text:"Challenge Id",actionText:t.dAppChallengeId}]})},tG=async e=>{let{account:t,output:n,blockExplorer:r}=e;await (0,t_.eS)({body:"{{wallet}}\xa0 successfully submitted operation",timer:5e3,state:"finished",walletInfo:e.walletInfo,actions:[{text:tR(n.transactionHash),isBold:!0,actionText:"Open Blockexplorer",actionLogo:"external",actionCallback:async()=>{let e=await r.getTransactionLink(n.transactionHash,t.network);window.open(e,"_blank","noopener"),await (0,t_.yg)()}}]})},tj=async e=>{let t=e.output;await (0,t_.eS)({body:"{{wallet}}\xa0 successfully signed payload",timer:5e3,state:"finished",walletInfo:e.walletInfo,actions:[{text:"Signature: ".concat(tR(t.signature)),actionText:"Copy to clipboard",actionCallback:async()=>{navigator.clipboard.writeText(t.signature).then(()=>{tS.log("showSignSuccessAlert","Copying to clipboard was successful!")},e=>{tS.error("showSignSuccessAlert","Could not copy text to clipboard: ",e)}),await (0,t_.yg)()}}]})},tq=async e=>{let{network:t,output:n,blockExplorer:r}=e;await (0,t_.eS)({body:"{{wallet}}\xa0 successfully injected operation",timer:5e3,state:"finished",walletInfo:e.walletInfo,actions:[{text:tR(n.transactionHash),isBold:!0,actionText:"Open Blockexplorer",actionLogo:"external",actionCallback:async()=>{let e=await r.getTransactionLink(n.transactionHash,t);window.open(e,"_blank","noopener"),await (0,t_.yg)()}}]})},tK=()=>async()=>{},tW={[m.PERMISSION_REQUEST_SENT]:tP,[m.PERMISSION_REQUEST_SUCCESS]:tH,[m.PERMISSION_REQUEST_ERROR]:tk,[m.PROOF_OF_EVENT_CHALLENGE_REQUEST_SENT]:tP,[m.PROOF_OF_EVENT_CHALLENGE_REQUEST_SUCCESS]:tF,[m.PROOF_OF_EVENT_CHALLENGE_REQUEST_ERROR]:tk,[m.OPERATION_REQUEST_SENT]:tP,[m.OPERATION_REQUEST_SUCCESS]:tG,[m.OPERATION_REQUEST_ERROR]:tk,[m.SIGN_REQUEST_SENT]:tP,[m.SIGN_REQUEST_SUCCESS]:tj,[m.SIGN_REQUEST_ERROR]:tk,[m.BROADCAST_REQUEST_SENT]:tP,[m.BROADCAST_REQUEST_SUCCESS]:tq,[m.BROADCAST_REQUEST_ERROR]:tk,[m.ACKNOWLEDGE_RECEIVED]:tI,[m.LOCAL_RATE_LIMIT_REACHED]:tL,[m.NO_PERMISSIONS]:tx,[m.ACTIVE_ACCOUNT_SET]:tK(),[m.ACTIVE_TRANSPORT_SET]:tK(),[m.INVALID_ACTIVE_ACCOUNT_STATE]:tN,[m.SHOW_PREPARE]:tO,[m.HIDE_UI]:tC,[m.PAIR_INIT]:tU,[m.PAIR_SUCCESS]:tB,[m.CHANNEL_CLOSED]:tD,[m.INTERNAL_ERROR]:tM,[m.UNKNOWN]:tK()};class tz{async on(e,t){let n=this.callbackMap[e]||[];n.push(t),this.callbackMap[e]=n}async emit(e,t,n){let r=this.callbackMap[e];r&&r.length>0&&r.forEach(async r=>{try{await r(t,n)}catch(t){tS.error("error handling event ".concat(e),t)}})}overrideDefaults(e){Object.keys(e).forEach(t=>{let n=e[t];n&&(this.callbackMap[t]=[n.handler])})}setAllHandlers(e){Object.keys(this.callbackMap).forEach(t=>{this.callbackMap[t]=[],e?this.callbackMap[t].push(e):this.callbackMap[t].push(function(){for(var e=arguments.length,n=Array(e),r=0;r<e;r++)n[r]=arguments[r];tS.log(t,...n)})})}constructor(e={},t){this.callbackMap={[m.PERMISSION_REQUEST_SENT]:[tW.PERMISSION_REQUEST_SENT],[m.PERMISSION_REQUEST_SUCCESS]:[tW.PERMISSION_REQUEST_SUCCESS],[m.PERMISSION_REQUEST_ERROR]:[tW.PERMISSION_REQUEST_ERROR],[m.PROOF_OF_EVENT_CHALLENGE_REQUEST_SENT]:[tW.PERMISSION_REQUEST_SENT],[m.PROOF_OF_EVENT_CHALLENGE_REQUEST_SUCCESS]:[tW.PROOF_OF_EVENT_CHALLENGE_REQUEST_SUCCESS],[m.PROOF_OF_EVENT_CHALLENGE_REQUEST_ERROR]:[tW.PROOF_OF_EVENT_CHALLENGE_REQUEST_ERROR],[m.OPERATION_REQUEST_SENT]:[tW.OPERATION_REQUEST_SENT],[m.OPERATION_REQUEST_SUCCESS]:[tW.OPERATION_REQUEST_SUCCESS],[m.OPERATION_REQUEST_ERROR]:[tW.OPERATION_REQUEST_ERROR],[m.SIGN_REQUEST_SENT]:[tW.SIGN_REQUEST_SENT],[m.SIGN_REQUEST_SUCCESS]:[tW.SIGN_REQUEST_SUCCESS],[m.SIGN_REQUEST_ERROR]:[tW.SIGN_REQUEST_ERROR],[m.BROADCAST_REQUEST_SENT]:[tW.BROADCAST_REQUEST_SENT],[m.BROADCAST_REQUEST_SUCCESS]:[tW.BROADCAST_REQUEST_SUCCESS],[m.BROADCAST_REQUEST_ERROR]:[tW.BROADCAST_REQUEST_ERROR],[m.ACKNOWLEDGE_RECEIVED]:[tW.ACKNOWLEDGE_RECEIVED],[m.LOCAL_RATE_LIMIT_REACHED]:[tW.LOCAL_RATE_LIMIT_REACHED],[m.NO_PERMISSIONS]:[tW.NO_PERMISSIONS],[m.ACTIVE_ACCOUNT_SET]:[tW.ACTIVE_ACCOUNT_SET],[m.ACTIVE_TRANSPORT_SET]:[tW.ACTIVE_TRANSPORT_SET],[m.INVALID_ACTIVE_ACCOUNT_STATE]:[tW.INVALID_ACTIVE_ACCOUNT_STATE],[m.SHOW_PREPARE]:[tW.SHOW_PREPARE],[m.HIDE_UI]:[tW.HIDE_UI],[m.PAIR_INIT]:[tW.PAIR_INIT],[m.PAIR_SUCCESS]:[tW.PAIR_SUCCESS],[m.CHANNEL_CLOSED]:[tW.CHANNEL_CLOSED],[m.INTERNAL_ERROR]:[tW.INTERNAL_ERROR],[m.UNKNOWN]:[tW.UNKNOWN]},t&&this.setAllHandlers(),this.overrideDefaults(e)}}let tV={[tt.e3.BlockchainRequest]:{sent:m.UNKNOWN,success:m.UNKNOWN,error:m.UNKNOWN},[tt.e3.BlockchainResponse]:{sent:m.UNKNOWN,success:m.UNKNOWN,error:m.UNKNOWN},[tt.e3.PermissionRequest]:{sent:m.PERMISSION_REQUEST_SENT,success:m.PERMISSION_REQUEST_SUCCESS,error:m.PERMISSION_REQUEST_ERROR},[tt.e3.PermissionResponse]:{sent:m.UNKNOWN,success:m.UNKNOWN,error:m.UNKNOWN},[tt.e3.ProofOfEventChallengeRequest]:{sent:m.PROOF_OF_EVENT_CHALLENGE_REQUEST_SENT,success:m.PROOF_OF_EVENT_CHALLENGE_REQUEST_SUCCESS,error:m.PROOF_OF_EVENT_CHALLENGE_REQUEST_ERROR},[tt.e3.ProofOfEventChallengeResponse]:{sent:m.UNKNOWN,success:m.UNKNOWN,error:m.UNKNOWN},[tt.e3.ProofOfEventChallengeRecorded]:{sent:m.UNKNOWN,success:m.UNKNOWN,error:m.UNKNOWN},[tt.e3.OperationRequest]:{sent:m.OPERATION_REQUEST_SENT,success:m.OPERATION_REQUEST_SUCCESS,error:m.OPERATION_REQUEST_ERROR},[tt.e3.OperationResponse]:{sent:m.UNKNOWN,success:m.UNKNOWN,error:m.UNKNOWN},[tt.e3.SignPayloadRequest]:{sent:m.SIGN_REQUEST_SENT,success:m.SIGN_REQUEST_SUCCESS,error:m.SIGN_REQUEST_ERROR},[tt.e3.SignPayloadResponse]:{sent:m.UNKNOWN,success:m.UNKNOWN,error:m.UNKNOWN},[tt.e3.BroadcastRequest]:{sent:m.BROADCAST_REQUEST_SENT,success:m.BROADCAST_REQUEST_SUCCESS,error:m.BROADCAST_REQUEST_ERROR},[tt.e3.BroadcastResponse]:{sent:m.UNKNOWN,success:m.UNKNOWN,error:m.UNKNOWN},[tt.e3.ChangeAccountRequest]:{sent:m.UNKNOWN,success:m.UNKNOWN,error:m.UNKNOWN},[tt.e3.Acknowledge]:{sent:m.UNKNOWN,success:m.UNKNOWN,error:m.UNKNOWN},[tt.e3.Disconnect]:{sent:m.UNKNOWN,success:m.UNKNOWN,error:m.UNKNOWN},[tt.e3.Error]:{sent:m.UNKNOWN,success:m.UNKNOWN,error:m.UNKNOWN}};class tZ{async getLinkForNetwork(e){return this.rpcUrls[e.type]}constructor(e){this.rpcUrls=e}}class tY extends tZ{async getAddressLink(e,t){let n=await this.getLinkForNetwork(t);return"".concat(n,"/").concat(e)}async getTransactionLink(e,t){let n=await this.getLinkForNetwork(t);return"".concat(n,"/").concat(e)}constructor(e={[tt.td.MAINNET]:"https://tzkt.io",[tt.td.GHOSTNET]:"https://ghostnet.tzkt.io",[tt.td.WEEKLYNET]:"https://weeklynet.tzkt.io",[tt.td.DAILYNET]:"https://dailynet.tzkt.io",[tt.td.DELPHINET]:"https://delphinet.tzkt.io",[tt.td.EDONET]:"https://edonet.tzkt.io",[tt.td.FLORENCENET]:"https://florencenet.tzkt.io",[tt.td.GRANADANET]:"https://granadanet.tzkt.io",[tt.td.HANGZHOUNET]:"https://hangzhounet.tzkt.io",[tt.td.ITHACANET]:"https://ithacanet.tzkt.io",[tt.td.JAKARTANET]:"https://jakartanet.tzkt.io",[tt.td.KATHMANDUNET]:"https://kathmandunet.tzkt.io",[tt.td.LIMANET]:"https://limanet.tzkt.io",[tt.td.MUMBAINET]:"https://mumbainet.tzkt.io",[tt.td.NAIROBINET]:"https://nairobinet.tzkt.io",[tt.td.OXFORDNET]:"https://oxfordnet.tzkt.io",[tt.td.CUSTOM]:"https://oxfordnet.tzkt.io"}){super(e),this.rpcUrls=e}}let tQ=new E.Yd("DappPostMessageTransport");class tX extends tT.O{async startOpenChannelListener(){return this.client.listenForChannelOpening(async e=>{tQ.log("connect","received PostMessagePairingResponse",e),await this.addPeer(e),this._isConnected=tt.ki.CONNECTED,this.newPeerListener&&(this.newPeerListener(e),this.newPeerListener=void 0)})}async listenForNewPeer(e){tQ.log("listenForNewPeer"),this.newPeerListener=e}async stopListeningForNewPeers(){tQ.log("stopListeningForNewPeers"),this.newPeerListener=void 0}constructor(e,t,n){super(e,t,n,tt.Qt.TRANSPORT_POSTMESSAGE_PEERS_DAPP)}}let tJ=new E.Yd("DappP2PTransport");class t$ extends tw{async startOpenChannelListener(){return this.client.listenForChannelOpening(async e=>{tJ.log("listenForNewPeer","new publicKey",e.publicKey),await this.addPeer(e),this._isConnected=tt.ki.CONNECTED,this.newPeerListener&&(this.newPeerListener(e),this.newPeerListener=void 0)})}async listenForNewPeer(e){tJ.log("listenForNewPeer"),this.newPeerListener=e}async stopListeningForNewPeers(){tJ.log("stopListeningForNewPeers"),this.newPeerListener=void 0}constructor(e,t,n,r,i,o){super(e,t,n,r,tt.Qt.TRANSPORT_P2P_PEERS_DAPP,i,o)}}var t0=n(70947),t1=n(86006);class t2 extends Error{constructor(e,t,n,r){super(),this.name="InvalidReceivedSessionNamespace",this.messageWc=e,this.codeWc=t,this.data=r;let i="".concat(t,": ").concat(e,".");this.message=r?"incomplete"===n?" ".concat(i,' "').concat(r,'" is missing in the session namespace.'):" ".concat(i,' "').concat(r,'" is invalid.'):i}}class t3 extends Error{constructor(){super("Not connected, no active session"),this.name="NotConnected"}}class t4 extends Error{constructor(e){super(e),this.name="InvalidSession"}}class t5 extends Error{constructor(e){super('Required permission scope were not granted for "'.concat(e,'"')),this.name="MissingRequiredScope",this.requiredScopes=e}}class t6 extends Error{constructor(){super('Please specify the active network using the "setActiveNetwork" method.'),this.name="ActiveNetworkUnspecified"}}class t8 extends Error{constructor(){super('Please specify the active account using the "setActiveAccount" method.'),this.name="ActiveAccountUnspecified"}}class t7 extends Error{constructor(e,t){super('No permission. The combinaison "'.concat(e,'" and "').concat(t,'" is not part of the active session.')),this.name="InvalidNetworkOrAccount",this.network=e,this.pkh=t}}let t9="tezos",ne=new E.Yd("WalletConnectCommunicationClient");(u=g||(g={})).GET_ACCOUNTS="tezos_getAccounts",u.OPERATION_REQUEST="tezos_send",u.SIGN="tezos_sign",(d=v||(v={})).CHAIN_CHANGED="chainChanged",d.ACCOUNTS_CHANGED="accountsChanged",d.REQUEST_ACKNOWLEDGED="requestAcknowledged";class nt extends E.cs{static getInstance(e){return nt.instance||(nt.instance=new nt(e)),nt.instance}async listenForEncryptedMessage(e,t){if(this.activeListeners.has(e))return;let n=async e=>{t(e)};this.activeListeners.set(e,n)}async listenForChannelOpening(e){let t=async t=>{e(t)};this.channelOpeningListeners.set("channelOpening",t)}async unsubscribeFromEncryptedMessages(){}async unsubscribeFromEncryptedMessage(e){}checkWalletReadiness(e){var t;null===(t=this.signClient)||void 0===t||t.core.pairing.ping({topic:e}).then(()=>{if(this.messageIds.length)this.acknowledgeRequest(this.messageIds[0]);else{let e=this.eventHandlers.get("WC_ACK_NOTIFICATION");e&&e("pending")}}).catch(e=>ne.error(e.message))}async sendMessage(e,t){let n=new E.ei,r=await n.deserialize(e);if(r)switch(this.messageIds.unshift(r.id),r.type){case tt.e3.PermissionRequest:this.requestPermissions(r);break;case tt.e3.OperationRequest:this.sendOperations(r);break;case tt.e3.SignPayloadRequest:this.signPayload(r);break;default:return}}async fetchAccounts(e,t){return(await this.getSignClient()).request({topic:e,chainId:t,request:{method:g.GET_ACCOUNTS,params:{}}})}async notifyListenersWithPermissionResponse(e,t){var n,r,i,o,s,a;let c;if((null===(n=e.sessionProperties)||void 0===n?void 0:n.pubkey)&&(null===(r=e.sessionProperties)||void 0===r?void 0:r.algo)&&(null===(i=e.sessionProperties)||void 0===i?void 0:i.address))c=null===(o=e.sessionProperties)||void 0===o?void 0:o.pubkey,ne.log('[requestPermissions]: Have pubkey in sessionProperties, skipping "get_accounts" call',e.sessionProperties);else{let n=this.getTezosNamespace(e.namespaces).accounts[0].split(":",3)[2];if(n.startsWith("edpk"))c=n;else{if(t.type!==this.wcOptions.network)throw Error("Network in permission request is not the same as preferred network!");let n=await this.fetchAccounts(e.topic,"".concat(t9,":").concat(t.type));if(!n||n.length<1)throw Error("No account shared by wallet");if(n.some(e=>!e.pubkey))throw Error("Public Key in `tezos_getAccounts` is empty!");c=null===(s=n[0])||void 0===s?void 0:s.pubkey}}if(!c)throw Error("Public Key in `tezos_getAccounts` is empty!");let l={type:tt.e3.PermissionResponse,appMetadata:{senderId:e.pairingTopic,name:e.peer.metadata.name,icon:e.peer.metadata.icons[0]},publicKey:c,network:t,scopes:[tt.UW.SIGN,tt.UW.OPERATION_REQUEST],id:null!==(a=this.messageIds.pop())&&void 0!==a?a:"",walletType:"implicit"};this.notifyListeners(e.pairingTopic,l)}async requestPermissions(e){if(ne.log("#### Requesting permissions"),!this.getPermittedMethods().includes(g.GET_ACCOUNTS))throw new t5(g.GET_ACCOUNTS);if(this.activeAccount)try{await this.openSession()}catch(e){ne.error(e.message);return}this.setDefaultAccountAndNetwork(),this.notifyListenersWithPermissionResponse(this.getSession(),e.network)}async signPayload(e){let t=await this.getSignClient(),n=this.getSession();if(!this.getPermittedMethods().includes(g.SIGN))throw new t5(g.SIGN);let r=this.getActiveNetwork(),i=await this.getPKH();this.validateNetworkAndAccount(r,i),this.checkWalletReadiness(n.pairingTopic),t.request({topic:n.topic,chainId:"".concat(t9,":").concat(r),request:{method:g.SIGN,params:{account:i,payload:e.payload}}}).then(t=>{let r={type:tt.e3.SignPayloadResponse,signingType:e.signingType,signature:null==t?void 0:t.signature,id:this.messageIds.pop()};this.notifyListeners(n.pairingTopic,r),this.session&&this.messageIds.length&&this.checkWalletReadiness(this.session.pairingTopic)}).catch(async()=>{let e={type:tt.e3.Error,id:this.messageIds.pop(),errorType:tt.$l.ABORTED_ERROR};this.notifyListeners(n.pairingTopic,e),this.session&&this.messageIds.length&&this.checkWalletReadiness(this.session.pairingTopic)})}async sendOperations(e){let t=await this.getSignClient(),n=this.getSession();if(!this.getPermittedMethods().includes(g.OPERATION_REQUEST))throw new t5(g.OPERATION_REQUEST);let r=this.getActiveNetwork(),i=await this.getPKH();this.validateNetworkAndAccount(r,i),this.checkWalletReadiness(n.pairingTopic),t.request({topic:n.topic,chainId:"".concat(t9,":").concat(r),request:{method:g.OPERATION_REQUEST,params:{account:i,operations:e.operationDetails}}}).then(e=>{var t,r,i,o;let s={type:tt.e3.OperationResponse,transactionHash:null!==(i=null!==(r=null!==(t=e.operationHash)&&void 0!==t?t:e.transactionHash)&&void 0!==r?r:e.hash)&&void 0!==i?i:"",id:null!==(o=this.messageIds.pop())&&void 0!==o?o:""};this.notifyListeners(n.pairingTopic,s),this.session&&this.messageIds.length&&this.checkWalletReadiness(this.session.pairingTopic)}).catch(async()=>{let e={type:tt.e3.Error,id:this.messageIds.pop(),errorType:tt.$l.ABORTED_ERROR};this.notifyListeners(n.pairingTopic,e),this.session&&this.messageIds.length&&this.checkWalletReadiness(this.session.pairingTopic)})}async init(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=await this.getSignClient();e&&await this.closePairings();let n=t.session.getAll();if(n&&n.length>0){this.session=n[0],this.setDefaultAccountAndNetwork();return}let{uri:r,topic:i}=await t.core.pairing.create();return t.core.pairing.ping({topic:i}).then(async()=>{await t.core.pairing.activate({topic:i});try{let e=await this.openSession(i),t=new tt.oO(i,e.peer.metadata.name,e.peer.publicKey,"3",i,e.peer.metadata.name);this.channelOpeningListeners.forEach(e=>{e(t)})}catch(t){ne.error(t.message);let e=this.eventHandlers.get("CLOSE_ALERT");e&&e(tt.Fl.WALLETCONNECT);return}}),{uri:r,topic:i}}async close(){await this.closePairings()}subscribeToSessionEvents(e){e.on("session_event",e=>{e.params.event.name===v.REQUEST_ACKNOWLEDGED&&this.messageIds.length&&this.acknowledgeRequest(this.messageIds[0])}),e.on("session_update",t=>{this.session=e.session.get(t.topic),this.updateActiveAccount(t.params.namespaces),this.notifyListenersWithPermissionResponse(this.session,{type:this.wcOptions.network})}),e.on("session_delete",t=>{this.disconnect(e,{type:"session",topic:t.topic})}),e.on("session_expire",t=>{this.disconnect(e,{type:"session",topic:t.topic})}),e.core.pairing.events.on("pairing_delete",t=>{this.disconnect(e,{type:"pairing",topic:t.topic})}),e.core.pairing.events.on("pairing_expire",t=>{this.disconnect(e,{type:"pairing",topic:t.topic})})}async acknowledgeRequest(e){let t=this.getSession(),n={type:tt.e3.Acknowledge,id:e};this.notifyListeners(t.pairingTopic,n)}async updateActiveAccount(e){try{let n=this.getTezosNamespace(e).accounts;if(1===n.length){let e;let[r,i,o]=n[0].split(":",3),s=this.getSession();if(this.activeNetwork=i,o.startsWith("edpk"))e=o,this.activeAccount=await (0,e4.EJ)(e);else{var t;this.activeAccount=o;let n=await this.fetchAccounts(s.topic,"".concat(t9,":").concat(i));e=null==n?void 0:null===(t=n.find(e=>{let{address:t}=e;return o===t}))||void 0===t?void 0:t.pubkey}if(!e)throw Error("Public key for the new account not provided");this.notifyListeners(s.pairingTopic,{id:await (0,e4.qs)(),type:tt.e3.ChangeAccountRequest,publicKey:e,network:{type:i},scopes:[tt.UW.SIGN,tt.UW.OPERATION_REQUEST],walletType:"implicit"})}}catch(e){}}async disconnect(e,t){let n;if("session"===t.type&&(n=await this.onSessionClosed(e,t.topic)),"pairing"===t.type&&(n=await this.onPairingClosed(e,t.topic)),!this.activeAccount){let e=this.eventHandlers.get("RESET_STATE");e&&e(tt.Fl.WALLETCONNECT)}n&&(this.notifyListeners(n.pairingTopic,{id:await (0,e4.qs)(),type:tt.e3.Disconnect}),this.clearState())}async onPairingClosed(e,t){var n;let r=(null===(n=this.session)||void 0===n?void 0:n.pairingTopic)===t?this.session:e.session.getAll().find(e=>e.pairingTopic===t);if(r){try{await e.disconnect({topic:r.topic,reason:{code:-1,message:"Pairing deleted"}})}catch(e){ne.warn(e)}return r}}async onSessionClosed(e,t){if(this.session&&this.session.topic===t){try{await e.core.pairing.disconnect({topic:this.session.pairingTopic})}catch(e){ne.warn(e.message)}return this.session}}async getPairingRequestInfo(){let e="",t="";try{var n;let{uri:r,topic:i}=null!==(n=await this.init(!0))&&void 0!==n?n:{uri:"",topic:""};e=r,t=i}catch(e){console.warn(e.message)}return new tt.Vb(t,"WalletConnect",await (0,e4.qs)(),E.jX,await (0,e4.qs)(),e)}async closePairings(){var e;await this.closeSessions();let t=await this.getSignClient(),n=null!==(e=t.pairing.getAll())&&void 0!==e?e:[];n.length&&await Promise.allSettled(n.map(e=>t.core.pairing.disconnect({topic:e.topic}))),await this.storage.resetState()}async closeSessions(){var e;let t=await this.getSignClient(),n=null!==(e=t.session.getAll())&&void 0!==e?e:[];n.length&&await Promise.allSettled(n.map(e=>t.disconnect({topic:e.topic,reason:{code:0,message:"Force new connection"}}))),this.clearState()}async openSession(e){var t,n,r,i;let o=await this.getSignClient(),s={networks:[this.wcOptions.network],events:[],methods:[g.GET_ACCOUNTS,g.OPERATION_REQUEST,g.SIGN]},a={networks:[this.wcOptions.network],events:[v.REQUEST_ACKNOWLEDGED],methods:[]},c={requiredNamespaces:{[t9]:this.permissionScopeParamsToNamespaces(s)},optionalNamespaces:{[t9]:this.permissionScopeParamsToNamespaces(a)},pairingTopic:null!=e?e:null===(t=o.core.pairing.getPairings()[0])||void 0===t?void 0:t.topic};this.checkWalletReadiness(c.pairingTopic);let{approval:l}=await o.connect(c);try{let e=await l();(null==e?void 0:e.controller)!==(null===(n=this.session)||void 0===n?void 0:n.controller)&&(this.activeAccount&&this.closeActiveSession(this.activeAccount),this.session=void 0),this.session=null!==(r=this.session)&&void 0!==r?r:e,this.validateReceivedNamespace(s,this.session.namespaces)}catch(t){if(ne.error(t.message),0===this.activeListeners.size){let e=this.eventHandlers.get("WC_ACK_NOTIFICATION");e&&e("error")}else{let t=null!=e?e:null===(i=o.core.pairing.getPairings()[0])||void 0===i?void 0:i.topic,n={type:tt.e3.Error,id:this.messageIds.pop(),errorType:tt.$l.ABORTED_ERROR};this.notifyListeners(t,n)}}if(this.session)return this.session;throw new t4("No session set.")}permissionScopeParamsToNamespaces(e){var t;return{chains:e.networks.map(e=>"".concat(t9,":").concat(e)),methods:e.methods,events:null!==(t=e.events)&&void 0!==t?t:[]}}validateReceivedNamespace(e,t){if(t[t9])this.validateMethods(e.methods,t[t9].methods),e.events&&this.validateEvents(e.events,t.tezos.events),this.validateAccounts(e.networks,t[t9].accounts);else throw this.clearState(),new t2("All namespaces must be approved",(0,t1.D6)("USER_REJECTED").code,"incomplete","tezos")}validateMethods(e,t){let n=[];if(e.forEach(e=>{t.includes(e)||n.push(e)}),n.length>0)throw this.clearState(),new t2("All methods must be approved",(0,t1.D6)("USER_REJECTED_METHODS").code,"incomplete",n)}validateEvents(e,t){let n=[];if(e.forEach(e=>{t.includes(e)||n.push(e)}),n.length>0)throw this.clearState(),new t2("All events must be approved",(0,t1.D6)("USER_REJECTED_EVENTS").code,"incomplete",n)}validateAccounts(e,t){if(0===t.length)throw this.clearState(),new t2("Accounts must not be empty",(0,t1.D6)("USER_REJECTED_CHAINS").code,"incomplete");let n=[],r=[],i=[],o=[];if(t.forEach(e=>{let t=e.split(":");3!==t.length&&r.push(e),t[0]!==t9&&o.push(e);let i=t[1];n.includes(i)||n.push(i)}),r.length>0)throw this.clearState(),new t2("Accounts must be CAIP-10 compliant",(0,t1.D6)("USER_REJECTED_CHAINS").code,"invalid",r);if(o.length>0)throw this.clearState(),new t2("Accounts must be defined in matching namespace",(0,t1.D6)("UNSUPPORTED_ACCOUNTS").code,"invalid",o);if(e.forEach(e=>{n.includes(e)||i.push(e)}),i.length>0)throw this.clearState(),new t2("All chains must have at least one account",(0,t1.D6)("USER_REJECTED_CHAINS").code,"incomplete",i)}async closeActiveSession(e){var t;try{this.validateNetworkAndAccount(this.getActiveNetwork(),e)}catch(e){ne.error(e.message);return}let n=this.getSession();await (null===(t=this.signClient)||void 0===t?void 0:t.disconnect({topic:n.topic,reason:{code:0,message:"Force new connection"}}))}validateNetworkAndAccount(e,t){if(!this.getTezosNamespace().accounts.includes("".concat(t9,":").concat(e,":").concat(t)))throw new t7(e,t)}getActiveNetwork(){if(!this.activeNetwork)throw this.getSession(),new t6;return this.activeNetwork}setDefaultAccountAndNetwork(){let e=this.getAccounts();e.length&&(this.activeAccount=e[0]);let t=this.getNetworks();t.length&&(this.activeNetwork=t[0])}getAccounts(){return this.getTezosNamespace().accounts.map(e=>e.split(":")[2])}getNetworks(){return this.getPermittedNetwork()}getTezosNamespace(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.getSession().namespaces;if(t9 in e)return e[t9];throw new t4("Tezos not found in namespaces")}getPermittedMethods(){return this.getTezosRequiredNamespace().methods}getPermittedNetwork(){return this.getTezosRequiredNamespace().chains.map(e=>e.split(":")[1])}getTezosRequiredNamespace(){return{chains:["".concat(t9,":").concat(this.wcOptions.network)],events:[],methods:["tezos_getAccounts","tezos_send","tezos_sign"]}}async notifyListeners(e,t){let n={...t,version:"2",senderId:e},r=new E.ei,i=await r.serialize(n);this.activeListeners.forEach(e=>{e(i)})}currentSession(){return this.session}async getSignClient(){return void 0===this.signClient&&(this.signClient=await t0.TN.init(this.wcOptions.opts),this.subscribeToSessionEvents(this.signClient)),this.signClient}getSession(){if(!this.session)throw new t3;return this.session}async getPKH(){if(!this.activeAccount)throw this.getSession(),new t8;return this.activeAccount}clearState(){this.session=void 0,this.activeAccount=void 0,this.activeNetwork=void 0}constructor(e){super(),this.activeListeners=new Map,this.channelOpeningListeners=new Map,this.storage=new E.mE,this.messageIds=[],this.wcOptions=e,this.getSignClient()}}class nn extends E.J7{static async isAvailable(){return Promise.resolve(!0)}async connect(){if(this._isConnected!==tt.ki.NOT_CONNECTED)return;this._isConnected=tt.ki.CONNECTING,await this.client.init();let e=await this.getPeers();return e.length>0&&e.map(async e=>this.listen(e.publicKey)),await this.startOpenChannelListener(),super.connect()}async hasPairings(){var e,t;return!!await this.client.storage.hasPairings()||!!(null===(t=this.client.signClient)||void 0===t?void 0:null===(e=t.pairing.getAll())||void 0===e?void 0:e.length)}async hasSessions(){var e,t;return!!await this.client.storage.hasSessions()||!!(null===(t=this.client.signClient)||void 0===t?void 0:null===(e=t.session.getAll())||void 0===e?void 0:e.length)}async closeActiveSession(e){await this.hasPairings()&&await this.hasPairings()?await this.client.closeActiveSession(e.address):await this.disconnect()}async getPeers(){let e=nt.getInstance(this.wcOptions).currentSession();return e?[{senderId:e.peer.publicKey,extensionId:e.peer.metadata.name,id:e.peer.publicKey,type:"walletconnect-pairing-response",name:"peer",publicKey:e.peer.publicKey,version:"first"}]:[]}async disconnect(){return await this.client.close(),super.disconnect()}async startOpenChannelListener(){}getPairingRequestInfo(){return this.client.getPairingRequestInfo()}async listen(e){await this.client.listenForEncryptedMessage(e,t=>{let n={origin:tt.aP.WALLETCONNECT,id:e};this.notifyListeners(t,n).catch(e=>{throw e})}).catch(e=>{throw e})}constructor(e,t,n,r,i){super(e,nt.getInstance(i),new E.Ou(n,r)),this.wcOptions=i}}let nr=new E.Yd("DappWalletConnectTransport");class ni extends nn{async listenForNewPeer(e){this.newPeerListener=e}async stopListeningForNewPeers(){nr.log("stopListeningForNewPeers"),this.newPeerListener=void 0}constructor(e,t,n,r){super(e,t,n,tt.Qt.TRANSPORT_WALLETCONNECT_PEERS_DAPP,r),this.client.listenForChannelOpening(async e=>{await this.addPeer(e),this._isConnected=tt.ki.CONNECTED,this.newPeerListener&&(this.newPeerListener(e),this.newPeerListener=void 0)})}}var no=n(23663).Buffer;let ns=new E.Yd("DAppClient");class na extends E.KU{async initInternalTransports(){var e,t;let n=await this.keyPair;if(this.postMessageTransport||this.p2pTransport||this.walletConnectTransport)return;this.postMessageTransport=new tX(this.name,n,this.storage),await this.addListener(this.postMessageTransport),this.p2pTransport=new t$(this.name,n,this.storage,this.matrixNodes,this.iconUrl,this.appUrl),await this.addListener(this.p2pTransport);let r={projectId:this.wcProjectId,relayUrl:this.wcRelayUrl,metadata:{name:this.name,description:null!==(e=this.description)&&void 0!==e?e:"",url:null!==(t=this.appUrl)&&void 0!==t?t:"",icons:this.iconUrl?[this.iconUrl]:[]}};this.walletConnectTransport=new ni(this.name,n,this.storage,{network:this.network.type,opts:r}),this.initEvents(),await this.addListener(this.walletConnectTransport)}initEvents(){this.walletConnectTransport&&(this.walletConnectTransport.setEventHandler("CLOSE_ALERT",this.hideUI.bind(this,["alert"])),this.walletConnectTransport.setEventHandler("RESET_STATE",this.channelClosedHandler.bind(this)),this.walletConnectTransport.setEventHandler("WC_ACK_NOTIFICATION",this.wcToastHandler.bind(this)))}async wcToastHandler(e){let t=await (async()=>{try{return await this.getWalletInfo()}catch(e){return{name:"wallet"}}})();await this.events.emit(m.HIDE_UI,["alert"]),"pending"===e?this.events.emit(m.ACKNOWLEDGE_RECEIVED,{message:{},extraInfo:{},walletInfo:t}):this.events.emit(m.PERMISSION_REQUEST_ERROR,{errorResponse:{errorType:tt.$l.ABORTED_ERROR},walletInfo:t})}async channelClosedHandler(e){let t=await this.transport;e&&t.type!==e||(await this.events.emit(m.CHANNEL_CLOSED),this.setActiveAccount(void 0),await this.destroy())}async destroy(){await super.destroy()}async init(e){if(this._initPromise)return this._initPromise;try{await this.activeAccountLoaded}catch(e){}return this._initPromise=new Promise(async t=>{if(e)await this.addListener(e),t(await super.init(e));else if(this._transport.isSettled())await (await this.transport).connect(),t(await super.init(await this.transport));else{let e=await this.getActiveAccount(),n=()=>{this.postMessageTransport&&this.postMessageTransport.stopListeningForNewPeers().catch(console.error),this.p2pTransport&&this.p2pTransport.stopListeningForNewPeers().catch(console.error),this.walletConnectTransport&&this.walletConnectTransport.stopListeningForNewPeers().catch(console.error)};if(await this.initInternalTransports(),!this.postMessageTransport||!this.p2pTransport||!this.walletConnectTransport)return;if(this.postMessageTransport.connect().then().catch(console.error),e&&e.origin){let n=e.origin.type;n===tt.aP.EXTENSION?t(await super.init(this.postMessageTransport)):n===tt.aP.P2P?t(await super.init(this.p2pTransport)):n===tt.aP.WALLETCONNECT&&t(await super.init(this.walletConnectTransport))}else{let e=this.p2pTransport,r=this.postMessageTransport,i=this.walletConnectTransport;r.listenForNewPeer(e=>{ns.log("init","postmessage transport peer connected",e),this.analytics.track("event","DAppClient","Extension connected",{peerName:e.name}),this.events.emit(m.PAIR_SUCCESS,e).catch(e=>console.warn(e)),this.setActivePeer(e).catch(console.error),this.setTransport(this.postMessageTransport).catch(console.error),n(),t(tt.Fl.POST_MESSAGE)}).catch(console.error),e.listenForNewPeer(e=>{ns.log("init","p2p transport peer connected",e),this.analytics.track("event","DAppClient","Beacon Wallet connected",{peerName:e.name}),this.events.emit(m.PAIR_SUCCESS,e).catch(e=>console.warn(e)),this.setActivePeer(e).catch(console.error),this.setTransport(this.p2pTransport).catch(console.error),n(),t(tt.Fl.P2P)}).catch(console.error),i.listenForNewPeer(e=>{ns.log("init","walletconnect transport peer connected",e),this.analytics.track("event","DAppClient","WalletConnect Wallet connected",{peerName:e.name}),this.events.emit(m.PAIR_SUCCESS,e).catch(e=>console.warn(e)),this.setActivePeer(e).catch(console.error),this.setTransport(this.walletConnectTransport).catch(console.error),n(),t(tt.Fl.WALLETCONNECT)}).catch(console.error),tT.O.getAvailableExtensions().then(async e=>{this.analytics.track("event","DAppClient","Extensions detected",{extensions:e})}).catch(e=>{this._initPromise=void 0,console.error(e)}),this.events.emit(m.PAIR_INIT,{p2pPeerInfo:()=>(e.connect().then().catch(console.error),e.getPairingRequestInfo()),postmessagePeerInfo:()=>r.getPairingRequestInfo(),walletConnectPeerInfo:()=>i.getPairingRequestInfo(),networkType:this.network.type,abortedHandler:async()=>{ns.log("init","ABORTED"),await Promise.all([r.disconnect(),i.disconnect()]),this._initPromise=void 0},disclaimerText:this.disclaimerText,analytics:this.analytics,featuredWallets:this.featuredWallets}).catch(e=>console.warn(e))}}}),this._initPromise}async getActiveAccount(){return this._activeAccount.promise}async isInvalidState(e){let t=await this._activeAccount.promise;return!!t&&(null==t?void 0:t.address)!==e.address&&!this.isGetActiveAccountHandled}async setActiveAccount(e){if(e&&this._activeAccount.isSettled()&&await this.isInvalidState(e)){await this.destroy(),await this.setActiveAccount(void 0),await this.events.emit(m.INVALID_ACTIVE_ACCOUNT_STATE);return}if(!e&&this._activeAccount.isResolved()&&await this.getActiveAccount()){let e=await this.transport,t=await this.getActiveAccount();if(!e||!t)return;e instanceof nn&&await e.closeActiveSession(t)}if(this._activeAccount.isSettled()?this._activeAccount=e4.$H.resolve(e):this._activeAccount.resolve(e),e){let t=e.origin.type;await this.initInternalTransports(),t===tt.aP.EXTENSION?await this.setTransport(this.postMessageTransport):t===tt.aP.P2P?await this.setTransport(this.p2pTransport):t===tt.aP.WALLETCONNECT&&await this.setTransport(this.walletConnectTransport);let n=await this.getPeer(e);await this.setActivePeer(n)}else await this.setActivePeer(void 0),await this.setTransport(void 0);await this.storage.set(tt.Qt.ACTIVE_ACCOUNT,e?e.accountIdentifier:void 0),await this.events.emit(m.ACTIVE_ACCOUNT_SET,e)}clearActiveAccount(){return this.setActiveAccount()}async setColorMode(e){return(0,t_.qj)(e)}async getColorMode(){return(0,t_.Fg)()}async getAppMetadata(){return this.getOwnAppMetadata()}async showPrepare(){let e=await (async()=>{try{return await this.getWalletInfo()}catch(e){return}})();await this.events.emit(m.SHOW_PREPARE,{walletInfo:e})}async hideUI(e,t){if(await this.events.emit(m.HIDE_UI,["alert","toast"]),e.includes("alert")){var n,r,i,o;let e=await this.transport;t&&e.type!==t?t===tt.Fl.WALLETCONNECT?null===(i=this.walletConnectTransport)||void 0===i||i.disconnect():null===(o=this.postMessageTransport)||void 0===o||o.disconnect():(await Promise.all([null===(n=this.postMessageTransport)||void 0===n?void 0:n.disconnect(),null===(r=this.walletConnectTransport)||void 0===r?void 0:r.disconnect()]),this._initPromise=void 0)}}async removeAccount(e){let t=super.removeAccount(e),n=await this.getActiveAccount();return n&&n.accountIdentifier===e&&await this.setActiveAccount(void 0),t}async removeAllAccounts(){await super.removeAllAccounts(),await this.setActiveAccount(void 0)}async removePeer(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=await this.transport,r=n.removePeer(e);return await this.removeAccountsForPeers([e]),t&&await this.sendDisconnectToPeer(e,n),r}async removeAllPeers(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=await this.transport,n=await t.getPeers(),r=t.removeAllPeers();if(await this.removeAccountsForPeers(n),e){let e=n.map(e=>this.sendDisconnectToPeer(e,t));await Promise.all(e)}return r}async subscribeToEvent(e,t){e===m.ACTIVE_ACCOUNT_SET&&(this.isGetActiveAccountHandled=!0),await this.events.on(e,t)}async checkPermissions(e){if([tt.e3.PermissionRequest,tt.e3.ProofOfEventChallengeRequest,tt.e3.ProofOfEventChallengeRecorded].includes(e))return!0;let t=await this.getActiveAccount();if(!t)throw await this.sendInternalError("No active account set!");let n=t.scopes;switch(e){case tt.e3.OperationRequest:return n.includes(tt.UW.OPERATION_REQUEST);case tt.e3.SignPayloadRequest:return n.includes(tt.UW.SIGN);case tt.e3.BroadcastRequest:return!0;default:return!1}}async sendNotification(e,t,n,r){var i,o,s;let a=await this.getActiveAccount();if(!a||a&&!a.scopes.includes(tt.UW.NOTIFICATION)&&!a.notification)throw Error("notification permissions not given");if(!(null===(i=a.notification)||void 0===i?void 0:i.token))throw Error("No AccessToken");let c=null===(o=a.notification)||void 0===o?void 0:o.apiUrl;if(!c)throw Error("No Push URL set");return this.sendNotificationWithAccessToken({url:c,recipient:a.address,title:e,body:t,payload:n,protocolIdentifier:r,accessToken:null===(s=a.notification)||void 0===s?void 0:s.token})}addBlockchain(e){this.blockchains.set(e.identifier,e),e.getWalletLists().then(e=>{(0,t_.wr)(e.desktopList),(0,t_.ah)(e.extensionList),(0,t_.Ry)(e.webList),(0,t_.B4)(e.iOSList)})}removeBlockchain(e){this.blockchains.delete(e)}async permissionRequest(e){ns.log("permissionRequest",e);let t=this.blockchains.get(e.blockchainIdentifier);if(!t)throw Error('Blockchain "'.concat(e.blockchainIdentifier,'" not supported by dAppClient'));let n={...e,type:tt.e3.PermissionRequest,blockchainData:{...e.blockchainData,appMetadata:await this.getOwnAppMetadata()}};ns.log("REQUESTION PERMIMISSION V3","xxx",n);let{message:r,connectionInfo:i}=await this.makeRequestV3(n).catch(async e=>{throw Error("TODO")});ns.log("RESPONSE V3",r,i);let o=await t.getAccountInfosFromPermissionResponse(r.message),s={accountIdentifier:o[0].accountId,senderId:r.senderId,origin:{type:i.origin,id:i.id},address:o[0].address,publicKey:o[0].publicKey,scopes:r.message.blockchainData.scopes,connectedAt:new Date().getTime(),chainData:r.message.blockchainData};return await this.accountManager.addAccount(s),await this.setActiveAccount(s),await t.handleResponse({request:n,account:s,output:r,blockExplorer:this.blockExplorer,connectionContext:i,walletInfo:await this.getWalletInfo()}),await this.notifySuccess(n,{account:s,output:{address:o[0].address,network:{type:tt.td.MAINNET},scopes:[tt.UW.OPERATION_REQUEST]},blockExplorer:this.blockExplorer,connectionContext:i,walletInfo:await this.getWalletInfo()}),r.message}async request(e){ns.log("request",e);let t=this.blockchains.get(e.blockchainIdentifier);if(!t)throw Error('Blockchain "'.concat(t,'" not supported by dAppClient'));await t.validateRequest(e);let n=await this.getActiveAccount();if(!n)throw await this.sendInternalError("No active account!");let r={...e,type:tt.e3.BlockchainRequest,accountId:n.accountIdentifier},{message:i,connectionInfo:o}=await this.makeRequestV3(r).catch(async e=>{throw console.error(e),Error("TODO")});return await t.handleResponse({request:r,account:n,output:i,blockExplorer:this.blockExplorer,connectionContext:o,walletInfo:await this.getWalletInfo()}),i.message}async requestPermissions(e){var t;(null==e?void 0:e.network)!==void 0&&this.network.type!==(null==e?void 0:null===(t=e.network)||void 0===t?void 0:t.type)&&console.error("[BEACON] The network specified in the DAppClient constructor does not match the network set in the permission request. Please set the network in the constructor. Setting it during the Permission Request is deprecated.");let n={appMetadata:await this.getOwnAppMetadata(),type:tt.e3.PermissionRequest,network:this.network,scopes:e&&e.scopes?e.scopes:[tt.UW.OPERATION_REQUEST,tt.UW.SIGN]};this.analytics.track("event","DAppClient","Permission requested");let{message:r,connectionInfo:i}=await this.makeRequest(n).catch(async e=>{throw await this.handleRequestError(n,e)});ns.log("requestPermissions","######## MESSAGE #######"),ns.log("requestPermissions",r);let o=await this.onNewAccount(r,i);ns.log("requestPermissions","######## ACCOUNT INFO #######"),ns.log("requestPermissions",JSON.stringify(o)),await this.accountManager.addAccount(o),await this.setActiveAccount(o);let s={...r,walletKey:o.walletKey,address:o.address,accountInfo:o};return await this.notifySuccess(n,{account:o,output:s,blockExplorer:this.blockExplorer,connectionContext:i,walletInfo:await this.getWalletInfo()}),this.analytics.track("event","DAppClient","Permission received",{address:o.address}),s}async requestProofOfEventChallenge(e){let t=await this.getActiveAccount();if(!t)throw Error("Please request permissions before doing a proof of event challenge");if("abstracted_account"!==t.walletType&&"proof_of_event"!==t.verificationType)throw Error("This wallet is not an abstracted account and thus cannot perform proof of event");let n={type:tt.e3.ProofOfEventChallengeRequest,contractAddress:t.address,...e},{message:r,connectionInfo:i}=await this.makeRequest(n).catch(async e=>{throw await this.handleRequestError(n,e)});return this.analytics.track("event","DAppClient","Proof of event challenge ".concat(r.isAccepted?"accepted":"refused"),{address:t.address}),r.isAccepted&&await this.recordProofOfEventChallenge(e),await this.notifySuccess(n,{account:t,output:r,blockExplorer:this.blockExplorer,connectionContext:i,walletInfo:await this.getWalletInfo()}),r}async recordProofOfEventChallenge(e){if(!await this.getActiveAccount())throw Error("Active account is undefined. Please request permissions before recording a proof of event challenge");let t={type:tt.e3.ProofOfEventChallengeRecorded,dAppChallengeId:e.dAppChallengeId,success:!0,errorMessage:""};await this.makeRequest(t,!0).catch(async e=>{throw await this.handleRequestError(t,e)})}async requestSignPayload(e){if(!e.payload)throw await this.sendInternalError("Payload must be provided");let t=await this.getActiveAccount();if(!t)throw await this.sendInternalError("No active account!");let n=e.payload;if("string"!=typeof n)throw Error("Payload must be a string");let r=(()=>{switch(e.signingType){case tt.Jr.OPERATION:if(!n.startsWith("03"))throw Error('When using signing type "OPERATION", the payload must start with prefix "03"');return tt.Jr.OPERATION;case tt.Jr.MICHELINE:if(!n.startsWith("05"))throw Error('When using signing type "MICHELINE", the payload must start with prefix "05"');return tt.Jr.MICHELINE;case tt.Jr.RAW:default:return tt.Jr.RAW}})();this.analytics.track("event","DAppClient","Signature requested");let i={type:tt.e3.SignPayloadRequest,signingType:r,payload:n,sourceAddress:e.sourceAddress||t.address},{message:o,connectionInfo:s}=await this.makeRequest(i).catch(async e=>{throw await this.handleRequestError(i,e)});return await this.notifySuccess(i,{account:t,output:o,connectionContext:s,walletInfo:await this.getWalletInfo()}),this.analytics.track("event","DAppClient","Signature response"),o}async requestOperation(e){if(!e.operationDetails)throw await this.sendInternalError("Operation details must be provided");let t=await this.getActiveAccount();if(!t)throw await this.sendInternalError("No active account!");let n={type:tt.e3.OperationRequest,network:t.network||this.network,operationDetails:e.operationDetails,sourceAddress:t.address||""};this.analytics.track("event","DAppClient","Operation requested");let{message:r,connectionInfo:i}=await this.makeRequest(n).catch(async e=>{throw await this.handleRequestError(n,e)});return await this.notifySuccess(n,{account:t,output:r,blockExplorer:this.blockExplorer,connectionContext:i,walletInfo:await this.getWalletInfo()}),this.analytics.track("event","DAppClient","Operation response"),r}async requestBroadcast(e){var t;if(!e.signedTransaction)throw await this.sendInternalError("Signed transaction must be provided");void 0!==e.network&&this.network.type!==(null===(t=e.network)||void 0===t?void 0:t.type)&&console.error("[BEACON] The network specified in the DAppClient constructor does not match the network set in the broadcast request. Please set the network in the constructor. Setting it during the Broadcast Request is deprecated.");let n={type:tt.e3.BroadcastRequest,network:this.network,signedTransaction:e.signedTransaction};this.analytics.track("event","DAppClient","Broadcast requested");let{message:r,connectionInfo:i}=await this.makeRequest(n).catch(async e=>{throw await this.handleRequestError(n,e)});return await this.notifySuccess(n,{network:this.network,output:r,blockExplorer:this.blockExplorer,connectionContext:i,walletInfo:await this.getWalletInfo()}),this.analytics.track("event","DAppClient","Broadcast response"),r}async setActivePeer(e){this._activePeer.isSettled()?this._activePeer=e4.$H.resolve(e):this._activePeer.resolve(e),e&&(await this.initInternalTransports(),"postmessage-pairing-response"===e.type?await this.setTransport(this.postMessageTransport):"p2p-pairing-response"===e.type&&await this.setTransport(this.p2pTransport))}async setTransport(e){e||(this._initPromise=void 0);let t=super.setTransport(e);return await this.events.emit(m.ACTIVE_TRANSPORT_SET,e),t}async sendInternalError(e){throw await this.events.emit(m.INTERNAL_ERROR,{text:e}),Error(e)}async removeAccountsForPeers(e){let t=e.map(e=>e.senderId);return this.removeAccountsForPeerIds(t)}async removeAccountsForPeerIds(e){let t=(await this.accountManager.getAccounts()).filter(t=>e.includes(t.senderId)).map(e=>e.accountIdentifier);await this.accountManager.removeAccounts(t);let n=await this.getActiveAccount();n&&t.includes(n.accountIdentifier)&&await this.setActiveAccount(void 0)}async handleRequestError(e,t){if(ns.error("handleRequestError","error response",t),t.errorType){let n=[];if(t.errorType===tt.$l.NO_PRIVATE_KEY_FOUND_ERROR){let t=async()=>{let t;if(e.sourceAddress&&e.network){let n=await (0,E.Nn)(e.sourceAddress,e.network);(t=await this.getAccount(n))&&await this.removeAccount(t.accountIdentifier)}};n.push({text:"Remove account",actionCallback:t})}let r=await this.getPeer(),i=await this.getActiveAccount();throw e.type===tt.e3.PermissionRequest&&await this.getActiveAccount()===void 0&&(this._initPromise=void 0,this.postMessageTransport=void 0,this.p2pTransport=void 0,this.walletConnectTransport=void 0,await this.setTransport(),await this.setActivePeer()),this.events.emit(tV[e.type].error,{errorResponse:t,walletInfo:await this.getWalletInfo(r,i),errorMessages:this.errorMessages},n).catch(e=>ns.error("handleRequestError",e)),E.o8.getError(t.errorType,t.errorData)}throw t}async notifySuccess(e,t){this.events.emit(tV[e.type].success,t).catch(e=>console.warn(e))}async getWalletInfoFromStorage(){return await this.storage.get(tt.Qt.LAST_SELECTED_WALLET)}async getWalletInfo(e,t){var n,r,i,o,s;let a,c,l;let u=t||await this.getActiveAccount(),d=e||await this.getPeer(u);u&&(a=await this.appMetadataManager.getAppMetadata(u.senderId)),a||(a={name:null!==(r=null!==(n=null==d?void 0:d.name)&&void 0!==n?n:await this.getWalletInfoFromStorage())&&void 0!==r?r:"",icon:null==d?void 0:d.icon});let h=(e,t)=>!!e&&!!t&&e.toLowerCase()===t.toLowerCase(),f=e=>e.split(/[_\s]+/)[0],p=[...(0,t_.aC)(),...(0,t_.eT)(),...(0,t_.If)(),...(0,t_.fU)()].filter(e=>{var t;return h(f(e.key),f(null!==(t=null==a?void 0:a.name)&&void 0!==t?t:"wallet"))}),m=p.find(e=>e.universalLink),g=p.find(e=>e.links),v=p.find(e=>e.downloadLink),y=p.find(e=>e.id);if((0,t_.jU)(window)&&g?(c=g,l="web"):(0,t_.nI)(window)&&v?(c=v,l="desktop"):(0,t_.jU)(window)&&y?(c=y,l="extension"):m&&(c=m,l="mobile"),c){let e;return c.hasOwnProperty("links")?e=c.links[null!==(i=null==u?void 0:u.network.type)&&void 0!==i?i:this.network.type]:c.hasOwnProperty("deepLink")&&(e=c.deepLink),{name:null!==(o=null==c?void 0:c.name)&&void 0!==o?o:a.name,icon:null!==(s=null==c?void 0:c.logo)&&void 0!==s?s:a.icon,deeplink:e,type:l}}return a}async getPeer(e){let t;if(e){var n,r,i,o,s,a;ns.log("getPeer","We have an account",e);let c=[...null!==(o=await (null===(n=this.postMessageTransport)||void 0===n?void 0:n.getPeers()))&&void 0!==o?o:[],...null!==(s=await (null===(r=this.p2pTransport)||void 0===r?void 0:r.getPeers()))&&void 0!==s?s:[],...null!==(a=await (null===(i=this.walletConnectTransport)||void 0===i?void 0:i.getPeers()))&&void 0!==a?a:[]];ns.log("getPeer","Found peers",c,e),(t=c.find(t=>t.senderId===e.senderId))||(t=c.find(t=>t.extensionId===e.origin.id))}else t=await this._activePeer.promise,ns.log("getPeer","Active peer",t);return t}async makeRequest(e,t){var n,r,i;let o;let s=await (0,e4.qs)();this._initPromise&&this.isInitPending&&(await Promise.all([null===(n=this.postMessageTransport)||void 0===n?void 0:n.disconnect(),null===(r=this.walletConnectTransport)||void 0===r?void 0:r.disconnect()]),this._initPromise=void 0,this.hideUI(["toast"])),ns.time(!0,s),ns.log("makeRequest","starting"),this.isInitPending=!0,await this.init(),this.isInitPending=!1,ns.timeLog(s,"init done"),ns.log("makeRequest","after init");let a=await this.transport;if(a instanceof nn&&await this.getActiveAccount()&&!await a.hasPairings()&&!await a.hasSessions())throw await this.channelClosedHandler(a.type),Error("No active pairing nor session found");if(await this.addRequestAndCheckIfRateLimited())throw this.events.emit(m.LOCAL_RATE_LIMIT_REACHED).catch(e=>console.warn(e)),Error("rate limit reached");if(!await this.checkPermissions(e.type))throw this.events.emit(m.NO_PERMISSIONS).catch(e=>console.warn(e)),Error("No permissions to send this request to wallet!");if(!this.beaconId)throw await this.sendInternalError("BeaconID not defined");let c={id:s,version:"2",senderId:await (0,E.I2)(await this.beaconId),...e};t||(o=new e4.$H,this.addOpenRequest(c.id,o));let l=await new E.ei().serialize(c),u=await this.getActiveAccount(),d=await this.getPeer(u),h=await this.getWalletInfo(d,u);ns.log("makeRequest","sending message",c),ns.timeLog("makeRequest",s,"sending");try{await a.send(l,d)}catch(e){throw this.events.emit(m.INTERNAL_ERROR,{text:"Unable to send message. If this problem persists, please reset the connection and pair your wallet again.",buttons:[{text:"Reset Connection",actionCallback:async()=>{await (0,t_.yg)(),this.disconnect()}}]}),ns.timeLog("makeRequest",s,"send error"),e}return ns.timeLog("makeRequest",s,"sent"),this.events.emit(tV[e.type].sent,{walletInfo:{...h,name:null!==(i=h.name)&&void 0!==i?i:"Wallet"},extraInfo:{resetCallback:async()=>{this.disconnect()}}}).catch(e=>console.warn(e)),null==o?void 0:o.promise}async makeRequestV3(e){var t,n,r;this._initPromise&&this.isInitPending&&(await Promise.all([null===(t=this.postMessageTransport)||void 0===t?void 0:t.disconnect(),null===(n=this.walletConnectTransport)||void 0===n?void 0:n.disconnect()]),this._initPromise=void 0,this.hideUI(["toast"]));let i=await (0,e4.qs)();if(ns.time(!0,i),ns.log("makeRequest","starting"),this.isInitPending=!0,await this.init(),this.isInitPending=!1,ns.timeLog("makeRequest",i,"init done"),ns.log("makeRequest","after init"),await this.addRequestAndCheckIfRateLimited())throw this.events.emit(m.LOCAL_RATE_LIMIT_REACHED).catch(e=>console.warn(e)),Error("rate limit reached");let o=await this.transport;if(o instanceof nn&&await this.getActiveAccount()&&!await o.hasPairings()&&!await o.hasSessions())throw await this.channelClosedHandler(o.type),Error("No active pairing nor session found");if(!this.beaconId)throw await this.sendInternalError("BeaconID not defined");let s={id:i,version:"3",senderId:await (0,E.I2)(await this.beaconId),message:e},a=new e4.$H;this.addOpenRequest(s.id,a);let c=await new E.ei().serialize(s),l=await this.getActiveAccount(),u=await this.getPeer(l),d=await this.getWalletInfo(u,l);ns.log("makeRequest","sending message",s),ns.timeLog("makeRequest",i,"sending");try{await o.send(c,u)}catch(e){throw this.events.emit(m.INTERNAL_ERROR,{text:"Unable to send message. If this problem persists, please reset the connection and pair your wallet again.",buttons:[{text:"Reset Connection",actionCallback:async()=>{await (0,t_.yg)(),this.disconnect()}}]}),ns.timeLog("makeRequest",i,"send error"),e}ns.timeLog("makeRequest",i,"sent");let h=e.type;return this.events.emit(tV[h].sent,{walletInfo:{...d,name:null!==(r=d.name)&&void 0!==r?r:"Wallet"},extraInfo:{resetCallback:async()=>{this.disconnect()}}}).catch(e=>console.warn(e)),a.promise}async disconnect(){this.postMessageTransport=void 0,this.p2pTransport=void 0,this.walletConnectTransport=void 0,await Promise.all([this.clearActiveAccount(),(await this.transport).disconnect()])}addOpenRequest(e,t){ns.log("addOpenRequest",this.name,"adding request ".concat(e," and waiting for answer")),this.openRequests.set(e,t)}async sendNotificationWithAccessToken(e){let{url:t,recipient:n,title:r,body:i,payload:o,protocolIdentifier:s,accessToken:a}=e,c=new Date().toISOString(),l=await this.keyPair,u=l.publicKey,d=no.from(new Uint8Array([13,15,37,217])),h=tA.encode(no.concat([d,no.from(u)])),f=["Tezos Signed Message: ",n,r,i,c,o].join(" "),p=(0,e4.NC)(f),m="0501"+p.length.toString(16).padStart(8,"0")+p,g=await (0,e4.l)(m,{secretKey:no.from(l.secretKey)});return(await e3.post("".concat(t,"/send"),{recipient:n,title:r,body:i,timestamp:c,payload:o,accessToken:a,protocolIdentifier:s,sender:{name:this.name,publicKey:h,signature:g}})).data}async onNewAccount(e,t){var n,r;let i=e.publicKey||e.pubkey||e.pubKey,o=i?await (0,e4.S9)(i):void 0;if(!o&&!e.address)throw Error("PublicKey or Address must be defined");let s=null!==(n=e.address)&&void 0!==n?n:await (0,e4.EJ)(o);if(!(0,e4.At)(s))throw Error('Invalid address: "'.concat(s,'"'));if("abstracted_account"===e.walletType&&s.substring(0,3)!==e4.zF)throw Error('Invalid abstracted account address "'.concat(s,'", it should be a ').concat(e4.zF," address"));ns.log("######## MESSAGE #######"),ns.log("onNewAccount",e);let a=await this.storage.get(tt.Qt.LAST_SELECTED_WALLET),c={accountIdentifier:await (0,E.Nn)(s,e.network),senderId:e.senderId,origin:{type:t.origin,id:t.id},walletKey:a,address:s,publicKey:o,network:e.network,scopes:e.scopes,threshold:e.threshold,notification:e.notification,connectedAt:new Date().getTime(),walletType:null!==(r=e.walletType)&&void 0!==r?r:"implicit",verificationType:e.verificationType,..."proof_of_event"===e.verificationType?{hasVerifiedChallenge:!1}:{}};return ns.log("accountInfo","######## ACCOUNT INFO #######"),ns.log("accountInfo",c),await this.accountManager.addAccount(c),await this.setActiveAccount(c),c}constructor(e){var t,n,r,i,o,s,a,c;super({storage:e&&e.storage?e.storage:new E.mM,...e}),this.events=new tz,this.isGetActiveAccountHandled=!1,this.openRequests=new Map,this._activeAccount=new e4.$H,this._activePeer=new e4.$H,this.isInitPending=!1,this.blockchains=new Map,this.description=e.description,this.wcProjectId=(null===(t=e.walletConnectOptions)||void 0===t?void 0:t.projectId)||"24469fd0a06df227b6e5f7dc7de0ff4f",this.wcRelayUrl=null===(n=e.walletConnectOptions)||void 0===n?void 0:n.relayUrl,this.featuredWallets=e.featuredWallets,this.events=new tz(e.eventHandlers,null!==(r=e.disableDefaultEvents)&&void 0!==r&&r),this.blockExplorer=null!==(i=e.blockExplorer)&&void 0!==i?i:new tY,this.network=null!==(s=e.network)&&void 0!==s?s:{type:null!==(o=e.preferredNetwork)&&void 0!==o?o:tt.td.MAINNET},(0,t_.qj)(null!==(a=e.colorMode)&&void 0!==a?a:tt.UX.LIGHT),this.disclaimerText=e.disclaimerText,this.errorMessages=null!==(c=e.errorMessages)&&void 0!==c?c:{},this.appMetadataManager=new E.iC(this.storage),this.storage.subscribeToStorageChanged(async e=>{if("storageCleared"===e.eventType)this.setActiveAccount(void 0);else if("entryModified"===e.eventType&&e.key===this.storage.getPrefixedKey(tt.Qt.ACTIVE_ACCOUNT)){let t=e.newValue;if(t&&"undefined"!==t){let e=await this.getAccount(t);this.setActiveAccount(e)}else this.setActiveAccount(void 0)}}),this.activeAccountLoaded=this.storage.get(tt.Qt.ACTIVE_ACCOUNT).then(async e=>{if(e){let t=await this.accountManager.getAccount(e);return await this.setActiveAccount(t),t}await this.setActiveAccount(void 0)}).catch(async e=>{await this.setActiveAccount(void 0),console.error(e)}),this.handleResponse=async(e,t)=>{var n,r,i,o,s,a,c,l;let u=this.openRequests.get(e.id);if(ns.log("### openRequest ###",u),ns.log("handleResponse","Received message",e,t),ns.log("### message ###",JSON.stringify(e)),ns.log("### connectionInfo ###",t),"3"===e.version){if(u&&(null===(n=e.message)||void 0===n?void 0:n.type)===tt.e3.Acknowledge)this.analytics.track("event","DAppClient","Acknowledge received from Wallet"),ns.log("handleResponse","acknowledge message received for ".concat(e.id)),ns.timeLog("handleResponse",e.id,"acknowledge"),this.events.emit(m.ACKNOWLEDGE_RECEIVED,{message:e.message,extraInfo:{},walletInfo:await this.getWalletInfo()}).catch(console.error);else if(u){let n=e.message.blockchainData.appMetadata;(null===(r=e.message)||void 0===r?void 0:r.type)===tt.e3.PermissionResponse&&n&&await this.appMetadataManager.addAppMetadata(n),ns.timeLog("handleResponse",e.id,"response"),ns.time(!1,e.id),(null===(i=e.message)||void 0===i?void 0:i.type)===tt.e3.Error?u.reject(e.message):u.resolve({message:e,connectionInfo:t}),this.openRequests.delete(e.id)}else if((null===(o=e.message)||void 0===o?void 0:o.type)===tt.e3.Disconnect){this.analytics.track("event","DAppClient","Disconnect received from Wallet");let n=t.origin===tt.aP.P2P?this.p2pTransport:t.origin===tt.aP.WALLETCONNECT?this.walletConnectTransport:null!==(a=this.postMessageTransport)&&void 0!==a?a:await this.transport;if(n){let t=(await n.getPeers()).find(t=>t.senderId===e.senderId);t&&await n.removePeer(t),await this.removeAccountsForPeerIds([e.senderId]),await this.events.emit(m.CHANNEL_CLOSED)}}else(null===(s=e.message)||void 0===s?void 0:s.type)===tt.e3.ChangeAccountRequest?await this.onNewAccount(e.message,t):ns.error("handleResponse","no request found for id ",e.id,e)}else if(u&&e.type===tt.e3.Acknowledge)ns.log("handleResponse","acknowledge message received for ".concat(e.id)),this.analytics.track("event","DAppClient","Acknowledge received from Wallet"),ns.timeLog("handleResponse",e.id,"acknowledge"),this.events.emit(m.ACKNOWLEDGE_RECEIVED,{message:e,extraInfo:{},walletInfo:await this.getWalletInfo()}).catch(console.error);else if(u)e.type===tt.e3.PermissionResponse&&e.appMetadata&&await this.appMetadataManager.addAppMetadata(e.appMetadata),ns.timeLog("handleResponse",e.id,"response"),ns.time(!1,e.id),e.type===tt.e3.Error||e.errorType?u.reject(e):u.resolve({message:e,connectionInfo:t}),this.openRequests.delete(e.id);else if(e.type===tt.e3.Disconnect||(null==e?void 0:null===(c=e.typedMessage)||void 0===c?void 0:c.type)===tt.e3.Disconnect){this.analytics.track("event","DAppClient","Disconnect received from Wallet");let n=t.origin===tt.aP.P2P?this.p2pTransport:t.origin===tt.aP.WALLETCONNECT?this.walletConnectTransport:null!==(l=this.postMessageTransport)&&void 0!==l?l:await this.transport;if(n){let t=(await n.getPeers()).find(t=>t.senderId===e.senderId);t&&await n.removePeer(t),await this.removeAccountsForPeerIds([e.senderId]),await this.events.emit(m.CHANNEL_CLOSED)}}else e.type===tt.e3.ChangeAccountRequest?await this.onNewAccount(e,t):ns.error("handleResponse","no request found for id ",e.id,e)},this.activeAccountLoaded.then(e=>{e&&"p2p"!==e.origin.type&&this.init()})}}let nc=(e,t)=>(r&&t&&(r.disconnect(),r=void 0),r||r||(r=new na(e)),r);var nl=n(91813),nu=n(2240),nd=n.n(nu),nh=n(19497),nf=n(75410);function np(e,t,n,r){return new(n||(n=Promise))(function(i,o){function s(e){try{c(r.next(e))}catch(e){o(e)}}function a(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):((t=e.value)instanceof n?t:new n(function(e){e(t)})).then(s,a)}c((r=r.apply(e,t||[])).next())})}"function"==typeof SuppressedError&&SuppressedError;class nm extends nl.sO{constructor(){super(),this.name="BeaconWalletNotInitialized",this.message='BeaconWallet needs to be initialized by calling `await BeaconWallet.requestPermissions({network: {type: "chosen_network"}})` first.'}}class ng extends nl.sO{constructor(e){super(),this.requiredScopes=e,this.name="MissingRequiredScopes",this.message="Required permissions scopes: ".concat(e.join(",")," were not granted.")}}class nv{validateRequiredScopesOrFail(e,t){let n=new Set(t);for(let t of e)n.has(t)&&n.delete(t);if(n.size>0)throw new ng(Array.from(n))}requestPermissions(e){return np(this,void 0,void 0,function*(){yield this.client.requestPermissions(e)})}getPKH(){return np(this,void 0,void 0,function*(){let e=yield this.client.getActiveAccount();if(!e)throw new nm;return e.address})}getPK(){var e;return np(this,void 0,void 0,function*(){let t=yield this.client.getActiveAccount();if(!t)throw new nm;return null!==(e=t.publicKey)&&void 0!==e?e:""})}mapTransferParamsToWalletParams(e){return np(this,void 0,void 0,function*(){let t;yield this.client.showPrepare();try{t=yield e()}catch(e){throw yield this.client.hideUI(["alert"]),e}return this.removeDefaultParams(t,(yield(0,nh.qm)(this.formatParameters(t))))})}mapIncreasePaidStorageWalletParams(e){return np(this,void 0,void 0,function*(){let t;yield this.client.showPrepare();try{t=yield e()}catch(e){throw yield this.client.hideUI(["alert"]),e}return this.removeDefaultParams(t,(yield(0,nh.S$)(this.formatParameters(t))))})}mapOriginateParamsToWalletParams(e){return np(this,void 0,void 0,function*(){let t;yield this.client.showPrepare();try{t=yield e()}catch(e){throw yield this.client.hideUI(["alert"]),e}return this.removeDefaultParams(t,(yield(0,nh.fx)(this.formatParameters(t))))})}mapDelegateParamsToWalletParams(e){return np(this,void 0,void 0,function*(){let t;yield this.client.showPrepare();try{t=yield e()}catch(e){throw yield this.client.hideUI(["alert"]),e}return this.removeDefaultParams(t,(yield(0,nh.Vy)(this.formatParameters(t))))})}formatParameters(e){return e.fee&&(e.fee=e.fee.toString()),e.storageLimit&&(e.storageLimit=e.storageLimit.toString()),e.gasLimit&&(e.gasLimit=e.gasLimit.toString()),e}removeDefaultParams(e,t){return e.fee||delete t.fee,e.storageLimit||delete t.storage_limit,e.gasLimit||delete t.gas_limit,t}sendOperations(e){return np(this,void 0,void 0,function*(){let t=yield this.client.getActiveAccount();if(!t)throw new nm;let n=t.scopes;this.validateRequiredScopesOrFail(n,[tt.UW.OPERATION_REQUEST]);let{transactionHash:r}=yield this.client.requestOperation({operationDetails:e});return r})}disconnect(){return np(this,void 0,void 0,function*(){yield this.client.destroy()})}clearActiveAccount(){return np(this,void 0,void 0,function*(){yield this.client.setActiveAccount()})}sign(e,t){return np(this,void 0,void 0,function*(){let n=(0,nf.Yu)(e);void 0!==t&&(n=(0,nf.dd)(t,n));let r=(0,nf.Cw)(nd()(n)),i=this.getSigningType(t);if(i!==tt.Jr.OPERATION)throw new nl.s("Taquito Beacon Wallet currently only supports signing operations, not ".concat(i));let{signature:o}=yield this.client.requestSignPayload({payload:r,signingType:i});return o})}getSigningType(e){if(!e||0===e.length)return tt.Jr.RAW;if(1===e.length){if(5===e[0])return tt.Jr.MICHELINE;if(3===e[0])return tt.Jr.OPERATION}throw Error("Invalid watermark ".concat(JSON.stringify(e)))}constructor(e){this.client=nc(e)}}},36582:function(e,t,n){"use strict";n.d(t,{MU:function(){return i},jN:function(){return h},mk:function(){return l}});var r,i,o,s=n(91813),a=n(49079);"function"==typeof SuppressedError&&SuppressedError;class c extends s.F7{constructor(e,t,n){super(),this.method=e,this.url=t,this.cause=n,this.name="HttpRequestFailed",this.message="".concat(e," ").concat(t," ").concat(String(n))}}class l extends s.F7{constructor(e,t,n,r,i){super(),this.message=e,this.status=t,this.statusText=n,this.body=r,this.url=i,this.name="HttpResponseError"}}class u extends s.F7{constructor(e,t){super(),this.timeout=e,this.url=t,this.name="HttpTimeoutError",this.message="HTTP request timeout of ".concat(e,"ms exceeded")}}(r=i||(i={}))[r.CONTINUE=100]="CONTINUE",r[r.SWITCHING_PROTOCOLS=101]="SWITCHING_PROTOCOLS",r[r.PROCESSING=102]="PROCESSING",r[r.OK=200]="OK",r[r.CREATED=201]="CREATED",r[r.ACCEPTED=202]="ACCEPTED",r[r.NON_AUTHORITATIVE_INFORMATION=203]="NON_AUTHORITATIVE_INFORMATION",r[r.NO_CONTENT=204]="NO_CONTENT",r[r.RESET_CONTENT=205]="RESET_CONTENT",r[r.PARTIAL_CONTENT=206]="PARTIAL_CONTENT",r[r.MULTI_STATUS=207]="MULTI_STATUS",r[r.ALREADY_REPORTED=208]="ALREADY_REPORTED",r[r.IM_USED=226]="IM_USED",r[r.MULTIPLE_CHOICES=300]="MULTIPLE_CHOICES",r[r.MOVED_PERMANENTLY=301]="MOVED_PERMANENTLY",r[r.FOUND=302]="FOUND",r[r.SEE_OTHER=303]="SEE_OTHER",r[r.NOT_MODIFIED=304]="NOT_MODIFIED",r[r.USE_PROXY=305]="USE_PROXY",r[r.SWITCH_PROXY=306]="SWITCH_PROXY",r[r.TEMPORARY_REDIRECT=307]="TEMPORARY_REDIRECT",r[r.PERMANENT_REDIRECT=308]="PERMANENT_REDIRECT",r[r.BAD_REQUEST=400]="BAD_REQUEST",r[r.UNAUTHORIZED=401]="UNAUTHORIZED",r[r.PAYMENT_REQUIRED=402]="PAYMENT_REQUIRED",r[r.FORBIDDEN=403]="FORBIDDEN",r[r.NOT_FOUND=404]="NOT_FOUND",r[r.METHOD_NOT_ALLOWED=405]="METHOD_NOT_ALLOWED",r[r.NOT_ACCEPTABLE=406]="NOT_ACCEPTABLE",r[r.PROXY_AUTHENTICATION_REQUIRED=407]="PROXY_AUTHENTICATION_REQUIRED",r[r.REQUEST_TIMEOUT=408]="REQUEST_TIMEOUT",r[r.CONFLICT=409]="CONFLICT",r[r.GONE=410]="GONE",r[r.LENGTH_REQUIRED=411]="LENGTH_REQUIRED",r[r.PRECONDITION_FAILED=412]="PRECONDITION_FAILED",r[r.PAYLOAD_TOO_LARGE=413]="PAYLOAD_TOO_LARGE",r[r.URI_TOO_LONG=414]="URI_TOO_LONG",r[r.UNSUPPORTED_MEDIA_TYPE=415]="UNSUPPORTED_MEDIA_TYPE",r[r.RANGE_NOT_SATISFIABLE=416]="RANGE_NOT_SATISFIABLE",r[r.EXPECTATION_FAILED=417]="EXPECTATION_FAILED",r[r.I_AM_A_TEAPOT=418]="I_AM_A_TEAPOT",r[r.MISDIRECTED_REQUEST=421]="MISDIRECTED_REQUEST",r[r.UNPROCESSABLE_ENTITY=422]="UNPROCESSABLE_ENTITY",r[r.LOCKED=423]="LOCKED",r[r.FAILED_DEPENDENCY=424]="FAILED_DEPENDENCY",r[r.UPGRADE_REQUIRED=426]="UPGRADE_REQUIRED",r[r.PRECONDITION_REQUIRED=428]="PRECONDITION_REQUIRED",r[r.TOO_MANY_REQUESTS=429]="TOO_MANY_REQUESTS",r[r.REQUEST_HEADER_FIELDS_TOO_LARGE=431]="REQUEST_HEADER_FIELDS_TOO_LARGE",r[r.UNAVAILABLE_FOR_LEGAL_REASONS=451]="UNAVAILABLE_FOR_LEGAL_REASONS",r[r.INTERNAL_SERVER_ERROR=500]="INTERNAL_SERVER_ERROR",r[r.NOT_IMPLEMENTED=501]="NOT_IMPLEMENTED",r[r.BAD_GATEWAY=502]="BAD_GATEWAY",r[r.SERVICE_UNAVAILABLE=503]="SERVICE_UNAVAILABLE",r[r.GATEWAY_TIMEOUT=504]="GATEWAY_TIMEOUT",r[r.HTTP_VERSION_NOT_SUPPORTED=505]="HTTP_VERSION_NOT_SUPPORTED",r[r.VARIANT_ALSO_NEGOTIATES=506]="VARIANT_ALSO_NEGOTIATES",r[r.INSUFFICIENT_STORAGE=507]="INSUFFICIENT_STORAGE",r[r.LOOP_DETECTED=508]="LOOP_DETECTED",r[r.NOT_EXTENDED=510]="NOT_EXTENDED",r[r.NETWORK_AUTHENTICATION_REQUIRED=511]="NETWORK_AUTHENTICATION_REQUIRED";let d=null==globalThis?void 0:globalThis.fetch;void 0!==a&&(null===(o=null==a?void 0:a.versions)||void 0===o?void 0:o.node)&&(d=n(86630));class h{serialize(e){if(!e)return"";let t=[];for(let n in e)if(e.hasOwnProperty(n)&&void 0!==e[n]){let r="function"==typeof e[n].toJSON?e[n].toJSON():e[n];if(null===r){t.push(encodeURIComponent(n));continue}if(Array.isArray(r)){r.forEach(e=>{t.push(encodeURIComponent(n)+"="+encodeURIComponent(e))});continue}t.push(encodeURIComponent(n)+"="+encodeURIComponent(r))}let n=t.join("&");return n?"?".concat(n):""}createRequest(e,t){var n,r,i,o;let{url:s,method:a,timeout:h=this.timeout,query:f,headers:p={},json:m=!0}=e;return n=this,r=void 0,i=void 0,o=function*(){let e=s+this.serialize(f);p["Content-Type"]||(p["Content-Type"]="application/json");let n=new AbortController,r=setTimeout(()=>n.abort(),h);try{let r=yield d(e,{method:a,headers:p,body:JSON.stringify(t),signal:n.signal});if(void 0===r)throw Error("Response is undefined");if(r.status>=400){let t=yield r.text();throw new l("Http error response: (".concat(r.status,") ").concat(t),r.status,r.statusText,t,e)}if(m)return r.json();return r.text()}catch(t){if(t instanceof Error&&"AbortError"===t.name)throw new u(h,e);if(t instanceof l)throw t;throw new c(String(a),e,t)}finally{clearTimeout(r)}},new(i||(i=Promise))(function(e,t){function s(e){try{c(o.next(e))}catch(e){t(e)}}function a(e){try{c(o.throw(e))}catch(e){t(e)}}function c(t){var n;t.done?e(t.value):((n=t.value)instanceof i?n:new i(function(e){e(n)})).then(s,a)}c((o=o.apply(n,r||[])).next())})}constructor(e=3e4){this.timeout=e}}},23914:function(e,t,n){"use strict";n.d(t,{P$:function(){return eV}});var r,i,o,s,a=n(75410),c=n(91813),l=n(22840),u=n(23663).Buffer;let d=e=>e.reduce((e,t)=>e+t.toString(16).padStart(2,"0"),""),h=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:8;return e.toString(16).padStart(t,"0")};(r=o||(o={})).SECRET="secret",r.RAW="raw",r.TZ1="tz1",r.BRANCH="branch",r.ZARITH="zarith",r.PUBLIC_KEY="public_key",r.PKH="pkh",r.PKH_ARR="pkhArr",r.DELEGATE="delegate",r.SCRIPT="script",r.BALLOT_STATEMENT="ballotStmt",r.PROPOSAL="proposal",r.PROPOSAL_ARR="proposalArr",r.INT32="int32",r.INT16="int16",r.PARAMETERS="parameters",r.ADDRESS="address",r.SMART_CONTRACT_ADDRESS="smart_contract_address",r.SMART_ROLLUP_ADDRESS="smart_rollup_address",r.SMART_ROLLUP_COMMITMENT_HASH="smart_rollup_commitment_hash",r.VALUE="value",r.PADDED_BYTES="padded_bytes",r.SMART_ROLLUP_MESSAGE="smart_rollup_message",r.MANAGER="manager",r.BLOCK_PAYLOAD_HASH="blockPayloadHash",r.ENTRYPOINT="entrypoint",r.OPERATION="operation",r.OP_ACTIVATE_ACCOUNT="activate_account",r.OP_DELEGATION="delegation",r.OP_TRANSACTION="transaction",r.OP_ORIGINATION="origination",r.OP_BALLOT="ballot",r.OP_FAILING_NOOP="failing_noop",r.OP_ATTESTATION="attestation",r.OP_ENDORSEMENT="endorsement",r.OP_SEED_NONCE_REVELATION="seed_nonce_revelation",r.OP_REVEAL="reveal",r.OP_PROPOSALS="proposals",r.OP_REGISTER_GLOBAL_CONSTANT="register_global_constant",r.OP_TRANSFER_TICKET="transfer_ticket",r.BURN_LIMIT="burn_limit",r.OP_INCREASE_PAID_STORAGE="increase_paid_storage",r.OP_UPDATE_CONSENSUS_KEY="update_consensus_key",r.OP_DRAIN_DELEGATE="drain_delegate",r.DEPOSITS_LIMIT="deposits_limit",r.OP_SET_DEPOSITS_LIMIT="set_deposits_limit",r.OP_SMART_ROLLUP_ORIGINATE="smart_rollup_originate",r.PVM_KIND="pvm_kind",r.OP_SMART_ROLLUP_ADD_MESSAGES="smart_rollup_add_messages",r.OP_SMART_ROLLUP_EXECUTE_OUTBOX_MESSAGE="smart_rollup_execute_outbox_message";let f={"00":"parameter","01":"storage","02":"code","03":"False","04":"Elt","05":"Left","06":"None","07":"Pair","08":"Right","09":"Some","0a":"True","0b":"Unit","0c":"PACK","0d":"UNPACK","0e":"BLAKE2B","0f":"SHA256",10:"SHA512",11:"ABS",12:"ADD",13:"AMOUNT",14:"AND",15:"BALANCE",16:"CAR",17:"CDR",18:"CHECK_SIGNATURE",19:"COMPARE","1a":"CONCAT","1b":"CONS","1c":"CREATE_ACCOUNT","1d":"CREATE_CONTRACT","1e":"IMPLICIT_ACCOUNT","1f":"DIP",20:"DROP",21:"DUP",22:"EDIV",23:"EMPTY_MAP",24:"EMPTY_SET",25:"EQ",26:"EXEC",27:"FAILWITH",28:"GE",29:"GET","2a":"GT","2b":"HASH_KEY","2c":"IF","2d":"IF_CONS","2e":"IF_LEFT","2f":"IF_NONE",30:"INT",31:"LAMBDA",32:"LE",33:"LEFT",34:"LOOP",35:"LSL",36:"LSR",37:"LT",38:"MAP",39:"MEM","3a":"MUL","3b":"NEG","3c":"NEQ","3d":"NIL","3e":"NONE","3f":"NOT",40:"NOW",41:"OR",42:"PAIR",43:"PUSH",44:"RIGHT",45:"SIZE",46:"SOME",47:"SOURCE",48:"SENDER",49:"SELF","4a":"STEPS_TO_QUOTA","4b":"SUB","4c":"SWAP","4d":"TRANSFER_TOKENS","4e":"SET_DELEGATE","4f":"UNIT",50:"UPDATE",51:"XOR",52:"ITER",53:"LOOP_LEFT",54:"ADDRESS",55:"CONTRACT",56:"ISNAT",57:"CAST",58:"RENAME",59:"bool","5a":"contract","5b":"int","5c":"key","5d":"key_hash","5e":"lambda","5f":"list",60:"map",61:"big_map",62:"nat",63:"option",64:"or",65:"pair",66:"set",67:"signature",68:"string",69:"bytes","6a":"mutez","6b":"timestamp","6c":"unit","6d":"operation","6e":"address","6f":"SLICE",70:"DIG",71:"DUG",72:"EMPTY_BIG_MAP",73:"APPLY",74:"chain_id",75:"CHAIN_ID",76:"LEVEL",77:"SELF_ADDRESS",78:"never",79:"NEVER","7a":"UNPAIR","7b":"VOTING_POWER","7c":"TOTAL_VOTING_POWER","7d":"KECCAK","7e":"SHA3","7f":"PAIRING_CHECK",80:"bls12_381_g1",81:"bls12_381_g2",82:"bls12_381_fr",83:"sapling_state",84:"sapling_transaction_deprecated",85:"SAPLING_EMPTY_STATE",86:"SAPLING_VERIFY_UPDATE",87:"ticket",88:"TICKET_DEPRECATED",89:"READ_TICKET","8a":"SPLIT_TICKET","8b":"JOIN_TICKETS","8c":"GET_AND_UPDATE","8d":"chest","8e":"chest_key","8f":"OPEN_CHEST",90:"VIEW",91:"view",92:"constant",93:"SUB_MUTEZ",94:"tx_rollup_l2_address",95:"MIN_BLOCK_TIME",96:"sapling_transaction",97:"EMIT",98:"Lambda_rec",99:"LAMBDA_REC","9a":"TICKET","9b":"BYTES","9c":"NAT"},p=(()=>{let e={};return Object.keys(f).forEach(t=>{e[f[t]]=t}),e})(),m={4:"activate_account",107:"reveal",110:"delegation",108:"transaction",109:"origination",6:"ballot",21:"attestation",1:"seed_nonce_revelation",5:"proposals",111:"register_global_constant",158:"transfer_ticket",112:"set_deposits_limit",113:"increase_paid_storage",114:"update_consensus_key",9:"drain_delegate",200:"smart_rollup_originate",201:"smart_rollup_add_messages",206:"smart_rollup_execute_outbox_message",17:"failing_noop"},g=(()=>{let e={};return Object.keys(m).forEach(t=>{let n="string"==typeof t?parseInt(t,10):t;e[m[n]]=h(n,2)}),e})(),v={"00":"default","01":"root","02":"do","03":"set_delegate","04":"remove_delegate","05":"deposit","06":"stake","07":"unstake","08":"finalize_unstake","09":"set_delegate_parameters"},y=(()=>{let e={};return Object.keys(v).forEach(t=>{e[v[t]]=t}),e})();class E extends c.Yy{constructor(e,t){super(),this.operation=e,this.errorDetail=t,this.name="InvalidOperationSchemaError",this.message="Invalid operation content recevied",t&&(this.message+=" ".concat(t,"."))}}class b extends c.Yy{constructor(e){super(),this.entrypoint=e,this.name="OversizedEntryPointError",this.message='Invalid entrypoint length "'.concat(e.length,'", maximum length is "').concat(31,'".')}}class w extends c.Yy{constructor(e){super(),this.ballotValue=e,this.name="InvalidBallotValueError",this.message='Invalid ballot value "'.concat(e,'" expecting one of the following: "yay", "nay", "pass".')}}class T extends c.Yy{constructor(e){super(),this.ballotValue=e,this.name="DecodeBallotValueError",this.message='Invalid ballot value "'.concat(e,'", cannot be decoded.')}}class _ extends c.Yy{constructor(e){super(),this.value=e,this.name="UnexpectedMichelsonValueError",this.message='Invalid Michelson value "'.concat(e,'", unalbe to encode.')}}class A extends c.Yy{constructor(e){super(),this.message=e,this.name="OperationDecodingError"}}class R extends c.Yy{constructor(e){super(),this.message=e,this.name="OperationEncodingError"}}class S extends c.Yy{constructor(e){super(),this.op=e,this.name="UnsupportedOperationError",this.message='Unsupported operation "'.concat(e,'", can submit an issue on our github for feature request.')}}class P extends c.Yy{constructor(e){super(),this.pvm=e,this.name="UnsupportedPvmKindError",this.message='Invalid Pvm kind "'.concat(e,'" expecting either "arith" or "wasm_2_0_0".')}}class I extends c.Yy{constructor(e){super(),this.pvm=e,this.name="DecodePvmKindError",this.message='Invalid Pvm kind "'.concat(e,'", cannot be decoded.')}}class O extends c.Yy{constructor(e,t){super(),this.address=e,this.errorDetail=t,this.name="InvalidSmartRollupAddress",this.message='Invalid smart rollup address "'.concat(e,'"'),t&&(this.message+=" ".concat(t,"."))}}class C extends c.Yy{constructor(e,t){super(),this.hash=e,this.errorDetail=t,this.name="InvalidSmartRollupCommitmentHashError",this.message='Invalid smart rollup commitment hash "'.concat(e,'"'),t&&(this.message+=" ".concat(t,"."))}}class x{static fromHexString(e){let t=e.toLowerCase();if(/^(([a-f]|\d){2})*$/.test(t))return new x(new Uint8Array((t.match(/([a-z]|\d){2}/g)||[]).map(e=>parseInt(e,16))));throw new c.mu(t)}consume(e){let t=this.arr.subarray(this.offset,this.offset+e);return this.offset+=e,t}get(e){return this.arr[this.offset+e]}length(){return this.arr.length-this.offset}slice(e,t){return new x(this.arr.slice(e,t))}constructor(e,t=0){this.arr=e,this.offset=t}}let N=e=>"prim"in e,k=e=>"bytes"in e&&"string"==typeof e.bytes,L=e=>"string"in e&&"string"==typeof e.string,B=e=>"int"in e&&"string"==typeof e.int,D=e=>{if(Array.isArray(e)){let t=e.map(e=>D(e)).join(""),n=t.length/2;return"02".concat(h(n)).concat(t)}if(N(e))return z(e);if(k(e))return F(e);if(L(e))return j(e);if(B(e))return K(e);throw new _(JSON.stringify(e))},M=e=>{let t=e.consume(1);switch(t[0]){case 10:return G(e);case 1:return q(e);case 0:return W(e);case 2:{let t=new x(U(e)),n=[];for(;t.length()>0;)n.push(M(t));return n}default:return V(e,t)}},U=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:4,n=e.consume(t),r=parseInt(u.from(n).toString("hex"),16);return e.consume(r)},H=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:4,n=[],r=e;for(;r.length();){let e=r.consume(t),i=parseInt(u.from(e).toString("hex"),16);n.push(r.consume(i)),r=r.slice(i+t)}return n},F=e=>{if(!/^([A-Fa-f0-9]{2})*$/.test(e.bytes))throw new c.mu(e.bytes);let t=e.bytes.length/2;return"0a".concat(h(t)).concat(e.bytes)},G=e=>{let t=U(e);return{bytes:u.from(t).toString("hex")}},j=e=>{let t=u.from(e.string,"utf8").toString("hex"),n=t.length/2;return"01".concat(h(n)).concat(t)},q=e=>{let t=U(e);return{string:u.from(t).toString("utf8")}},K=e=>{let{int:t}=e,n=new l.O(t,10),r="-"===n.toString(2)[0]?"1":"0",i=n.toString(2).replace(/-/g,""),o=i.length<=6?6:(i.length-6)%7?i.length+7-(i.length-6)%7:i.length,s=i.padStart(o,"0").match(/\d{6,7}/g).reverse();s[0]=r+s[0];let a=s.map((e,t)=>parseInt((t===s.length-1?"0":"1")+e,2).toString(16).padStart(2,"0"));return"00".concat(a.join(""))},W=e=>{let t=e.consume(1)[0],n=[];for(;128&t;)n.push(t),t=e.consume(1)[0];n.push(t);let r=!!(64&n[0]);n[0]=127&n[0];let i=n.map((e,t)=>e.toString(2).slice(0===t?-6:-7).padStart(0===t?6:7,"0")).reverse(),o=new l.O(i.join(""),2);return r&&(o=o.times(-1)),{int:o.toFixed()}},z=e=>{let t=+Array.isArray(e.annots),n=Array.isArray(e.args)?e.args.length:0,r=h(Math.min(2*n+t+3,9),2),i=p[e.prim],o=(e.args||[]).map(e=>D(e)).join(""),s=Array.isArray(e.annots)?Q(e.annots):"";return("LAMBDA"===e.prim||"LAMBDA_REC"===e.prim)&&n&&(o=h(o.length/2)+o+h(0)),("pair"===e.prim||"Pair"===e.prim)&&n>2&&(o=""===s?h(o.length/2)+o+h(0):h(o.length/2)+o),"view"===e.prim&&e.args&&(o=h(o.length/2)+o+h(0)),"".concat(r).concat(i).concat(o).concat(s)},V=(e,t)=>{let n,r;let i=(t[0]-3)%2==1,o=Math.floor((t[0]-3)/2),s=e.consume(1)[0].toString(16).padStart(2,"0"),a={prim:f[s]};if(("LAMBDA"===f[s]||"LAMBDA_REC"===f[s])&&e.consume(4),"view"===f[s])return 0!=o?Z(e,a):a;("pair"===f[s]||"Pair"===f[s])&&o>2&&(n=Y(e),o=0,r=X(e));let c=Array(o).fill(0).map(()=>M(e));return("LAMBDA"===f[s]||"LAMBDA_REC"===f[s])&&e.consume(4),n?a.args=n:c.length&&(a.args=c),r&&""!==r[0]?a.annots=r:i&&(a.annots=X(e)),a},Z=(e,t)=>(e.consume(4),t.args=[,,,,].fill(0).map(()=>M(e)),e.consume(4),t),Y=e=>{let t=new x(U(e)),n=[];for(;t.length()>0;)n.push(M(t));return n},Q=e=>{let t=e.map(e=>u.from(e,"utf8").toString("hex")).join("20"),n=t.length/2;return"".concat(h(n)).concat(t)},X=e=>{let t=e.consume(4),n=parseInt(u.from(t).toString("hex"),16),r=e.consume(n);return u.from(r).toString("hex").split("20").map(e=>u.from(e,"hex").toString("utf8"))},J=e=>t=>(0,a.Cw)(u.from((0,a.sA)(t,a.O4[e]))),$=e=>t=>{let n=t.consume(a.r9[e]);return(0,a.kM)(n,a.O4[e])},ee=$(a.oT.TZ1),et=$(a.oT.B),en=e=>{let t=e.consume(1);return 0===t[0]?$(a.oT.TZ1)(e):1===t[0]?$(a.oT.TZ2)(e):2===t[0]?$(a.oT.TZ3)(e):void 0},er=J(a.oT.B),ei=J(a.oT.TZ1),eo=e=>e?"ff":"00",es=e=>J(a.oT.P)(e),ea=e=>$(a.oT.P)(e),ec=e=>255===e.consume(1)[0],el=e=>{switch(e.substring(0,3)){case a.oT.TZ1:return"00"+J(a.oT.TZ1)(e);case a.oT.TZ2:return"01"+J(a.oT.TZ2)(e);case a.oT.TZ3:return"02"+J(a.oT.TZ3)(e);case a.oT.TZ4:return"03"+J(a.oT.TZ4)(e);default:throw new a.Wo(e,(0,a.f4)(a.nd.NO_PREFIX_MATCHED)+' expecting one for the following "'.concat(a.oT.TZ1,'", "').concat(a.oT.TZ2,'", "').concat(a.oT.TZ3,'" or "').concat(a.oT.TZ4,'".'))}},eu=e=>{let t=[],n=new l.Z(e,10);if(n.isNaN())throw TypeError("Invalid zarith number ".concat(e));for(;;){if(n.lt(128)){n.lt(16)&&t.push("0"),t.push(n.toString(16));break}{let e=n.mod(128);n=(n=n.minus(e)).dividedBy(128),e=e.plus(128),t.push(e.toString(16))}}return t.join("")},ed=e=>{let t=0;for(;t<e.length()&&(128&e.get(t))!=0;)t+=1;let n=new l.Z(0);for(let r=t;r>=0;r-=1){let t=127&e.get(r);n=(n=n.multipliedBy(128)).plus(t)}return e.consume(t+1),new l.Z(n).toString()},eh=e=>{let t=h(e.consume(1)[0],2);if(t in v)return v[t];{let t=U(e,1),n=u.from(t).toString("utf8");if(n.length>31)throw new b(n);return n}},ef=e=>{if(e in y)return"".concat(y[e]);if(e.length>31)throw new b(e);return"ff".concat(D({string:e}).slice(8))},ep=J(a.oT.VH),em=$(a.oT.VH),eg={branch:o.BRANCH,contents:[o.OPERATION]},ev={pkh:o.TZ1,secret:o.SECRET},ey={source:o.PKH,fee:o.ZARITH,counter:o.ZARITH,gas_limit:o.ZARITH,storage_limit:o.ZARITH,public_key:o.PUBLIC_KEY},eE={source:o.PKH,fee:o.ZARITH,counter:o.ZARITH,gas_limit:o.ZARITH,storage_limit:o.ZARITH,delegate:o.DELEGATE},eb={source:o.PKH,fee:o.ZARITH,counter:o.ZARITH,gas_limit:o.ZARITH,storage_limit:o.ZARITH,amount:o.ZARITH,destination:o.ADDRESS,parameters:o.PARAMETERS},ew={source:o.PKH,fee:o.ZARITH,counter:o.ZARITH,gas_limit:o.ZARITH,storage_limit:o.ZARITH,balance:o.ZARITH,delegate:o.DELEGATE,script:o.SCRIPT},eT={source:o.PKH,period:o.INT32,proposal:o.PROPOSAL,ballot:o.BALLOT_STATEMENT},e_={slot:o.INT16,level:o.INT32,round:o.INT32,block_payload_hash:o.BLOCK_PAYLOAD_HASH},eA={slot:o.INT16,level:o.INT32,round:o.INT32,block_payload_hash:o.BLOCK_PAYLOAD_HASH},eR={level:o.INT32,nonce:o.RAW},eS={source:o.PKH,period:o.INT32,proposals:o.PROPOSAL_ARR},eP={source:o.PKH,fee:o.ZARITH,counter:o.ZARITH,gas_limit:o.ZARITH,storage_limit:o.ZARITH,value:o.VALUE},eI={source:o.PKH,fee:o.ZARITH,counter:o.ZARITH,gas_limit:o.ZARITH,storage_limit:o.ZARITH,ticket_contents:o.VALUE,ticket_ty:o.VALUE,ticket_ticketer:o.ADDRESS,ticket_amount:o.ZARITH,destination:o.ADDRESS,entrypoint:o.ENTRYPOINT},eO={source:o.PKH,fee:o.ZARITH,counter:o.ZARITH,gas_limit:o.ZARITH,storage_limit:o.ZARITH,amount:o.ZARITH,destination:o.SMART_CONTRACT_ADDRESS},eC={source:o.PKH,fee:o.ZARITH,counter:o.ZARITH,gas_limit:o.ZARITH,storage_limit:o.ZARITH,pk:o.PUBLIC_KEY},ex={consensus_key:o.PKH,delegate:o.PKH,destination:o.PKH},eN={source:o.PKH,fee:o.ZARITH,counter:o.ZARITH,gas_limit:o.ZARITH,storage_limit:o.ZARITH,limit:o.DEPOSITS_LIMIT},ek={source:o.PKH,fee:o.ZARITH,counter:o.ZARITH,gas_limit:o.ZARITH,storage_limit:o.ZARITH,pvm_kind:o.PVM_KIND,kernel:o.PADDED_BYTES,parameters_ty:o.VALUE,whitelist:o.PKH_ARR},eL={source:o.PKH,fee:o.ZARITH,counter:o.ZARITH,gas_limit:o.ZARITH,storage_limit:o.ZARITH,message:o.SMART_ROLLUP_MESSAGE},eB={source:o.PKH,fee:o.ZARITH,counter:o.ZARITH,gas_limit:o.ZARITH,storage_limit:o.ZARITH,rollup:o.SMART_ROLLUP_ADDRESS,cemented_commitment:o.SMART_ROLLUP_COMMITMENT_HASH,output_proof:o.PADDED_BYTES},eD={arbitrary:o.PADDED_BYTES},eM=e=>t=>n=>Object.keys(t).reduce((r,i)=>{let o=t[i];if(!(n&&Array.isArray(o)))return r+(0,e[o])(n[i]);{let t=e[o[0]],s=n[i];if(!Array.isArray(s))throw new R('Invalid operation value "'.concat(JSON.stringify(s),'" of key "').concat(i,", expected value to be Array."));return r+s.reduce((e,n)=>e+t(n),"")}},""),eU=e=>t=>n=>Object.keys(t).reduce((r,i)=>{let o=t[i];if(Array.isArray(o)){let t=e[o[0]],s=[],a=n.length();for(;n.length()>0;)if(s.push(t(n)),a===n.length())throw new A("Unable to decode value");return Object.assign(Object.assign({},r),{[i]:s})}{let t=(0,e[o])(n);return void 0!==t?Object.assign(Object.assign({},r),{[i]:t}):Object.assign({},r)}},{}),eH={[o.SECRET]:e=>d(e.consume(20)),[o.RAW]:e=>d(e.consume(32)),[o.TZ1]:ee,[o.BRANCH]:et,[o.ZARITH]:ed,[o.PUBLIC_KEY]:e=>{switch(e.consume(1)[0]){case 0:return $(a.oT.EDPK)(e);case 1:return $(a.oT.SPPK)(e);case 2:return $(a.oT.P2PK)(e);default:throw new a.$$(e.toString(),(0,a.f4)(a.nd.NO_PREFIX_MATCHED))}},[o.PKH]:en,[o.PKH_ARR]:e=>{if(!ec(e))return;let t=[];for(e.consume(4);e.length()>0;)t.push(en(e));return t},[o.DELEGATE]:e=>{if(ec(e))return en(e)},[o.INT32]:e=>{let t=e.consume(4),n=0;for(let e=0;e<t.length;e++)n|=t[e]<<(t.length-(e+1))*8;return n},[o.SCRIPT]:e=>{let t=U(e),n=U(e);return{code:M(new x(t)),storage:M(new x(n))}},[o.BALLOT_STATEMENT]:e=>{let t=e.consume(1);switch(t[0]){case 0:return"yay";case 1:return"nay";case 2:return"pass";default:throw new T(t[0].toString())}},[o.PROPOSAL]:ea,[o.PROPOSAL_ARR]:e=>{let t=[];for(e.consume(4);e.length()>0;)t.push(ea(e));return t},[o.PARAMETERS]:e=>{if(0!==e.consume(1)[0])return{entrypoint:eh(e),value:M(new x(U(e)))}},[o.ADDRESS]:e=>{switch(e.consume(1)[0]){case 0:return en(e);case 1:{let t=$(a.oT.KT1)(e);return e.consume(1),t}default:throw new c.bS(e.toString(),": Unable to decode.")}},[o.SMART_ROLLUP_ADDRESS]:e=>{let t=$(a.oT.SR1)(e);if(t.substring(0,3)!==a.oT.SR1)throw new O(t,(0,a.f4)(a.nd.NO_PREFIX_MATCHED)+" expecting prefix '".concat(a.oT.SR1,"'."));return t},[o.SMART_CONTRACT_ADDRESS]:e=>{if(1===e.consume(1)[0]){let t=$(a.oT.KT1)(e);return e.consume(1),t}throw new c.JH(e.toString(),(0,a.f4)(a.nd.NO_PREFIX_MATCHED))},[o.SMART_ROLLUP_COMMITMENT_HASH]:e=>{let t=$(a.oT.SRC1)(e);if(t.substring(0,4)!==a.oT.SRC1)throw new C(t,(0,a.f4)(a.nd.NO_PREFIX_MATCHED)+" expecting prefix '".concat(a.oT.SRC1,"'"));return t},[o.VALUE]:e=>M(new x(U(e))),[o.INT16]:e=>{let t=e.consume(2),n=0;for(let e=0;e<t.length;e++)n|=t[e]<<(t.length-(e+1))*8;return n},[o.BLOCK_PAYLOAD_HASH]:em,[o.ENTRYPOINT]:e=>{let t=U(e);return u.from(t).toString("utf8")},[o.BURN_LIMIT]:e=>{let t=e.consume(1);if("00"!==u.from(t).toString("hex"))return ed(e)},[o.DEPOSITS_LIMIT]:e=>{let t=e.consume(1);if("00"!==u.from(t).toString("hex"))return ed(e)},[o.PVM_KIND]:e=>{let t=e.consume(1);switch(t[0]){case 0:return"arith";case 1:return"wasm_2_0_0";case 2:return"riscv";default:throw new I(t[0].toString())}},[o.PADDED_BYTES]:e=>{let t=U(e);return u.from(t).toString("hex")},[o.SMART_ROLLUP_MESSAGE]:e=>H(new x(U(e))).map(e=>u.from(e).toString("hex"))};eH[o.OPERATION]=e=>{let t=e.consume(1),n=m[t[0]];if(void 0===n)throw new S(t[0].toString());let r=eH[n](e);if("object"!=typeof r)throw new A("Invalid operation, cannot be decoded.");return Object.assign({kind:n},r)},eH[o.OP_ACTIVATE_ACCOUNT]=e=>eU(eH)(ev)(e),eH[o.OP_FAILING_NOOP]=e=>eU(eH)(eD)(e),eH[o.OP_DELEGATION]=e=>eU(eH)(eE)(e),eH[o.OP_TRANSACTION]=e=>eU(eH)(eb)(e),eH[o.OP_ORIGINATION]=e=>eU(eH)(ew)(e),eH[o.OP_BALLOT]=e=>eU(eH)(eT)(e),eH[o.OP_ATTESTATION]=e=>eU(eH)(e_)(e),eH[o.OP_ENDORSEMENT]=e=>eU(eH)(eA)(e),eH[o.OP_SEED_NONCE_REVELATION]=e=>eU(eH)(eR)(e),eH[o.OP_PROPOSALS]=e=>eU(eH)(eS)(e),eH[o.OP_REVEAL]=e=>eU(eH)(ey)(e),eH[o.OP_REGISTER_GLOBAL_CONSTANT]=e=>eU(eH)(eP)(e),eH[o.OP_TRANSFER_TICKET]=e=>eU(eH)(eI)(e),eH[o.OP_INCREASE_PAID_STORAGE]=e=>eU(eH)(eO)(e),eH[o.OP_UPDATE_CONSENSUS_KEY]=e=>eU(eH)(eC)(e),eH[o.OP_DRAIN_DELEGATE]=e=>eU(eH)(ex)(e),eH[o.OP_SMART_ROLLUP_ORIGINATE]=e=>eU(eH)(ek)(e),eH[o.OP_SMART_ROLLUP_ADD_MESSAGES]=e=>eU(eH)(eL)(e),eH[o.OP_SMART_ROLLUP_EXECUTE_OUTBOX_MESSAGE]=e=>eU(eH)(eB)(e),eH[o.MANAGER]=eU(eH)(eg),eH[o.OP_SET_DEPOSITS_LIMIT]=e=>eU(eH)(eN)(e);let eF={[o.SECRET]:e=>e,[o.RAW]:e=>e,[o.TZ1]:ei,[o.BRANCH]:er,[o.ZARITH]:eu,[o.PUBLIC_KEY]:e=>{switch(e.substring(0,4)){case a.oT.EDPK:return"00"+J(a.oT.EDPK)(e);case a.oT.SPPK:return"01"+J(a.oT.SPPK)(e);case a.oT.P2PK:return"02"+J(a.oT.P2PK)(e);default:throw new a.$$(e,(0,a.f4)(a.nd.NO_PREFIX_MATCHED)+" expecting one of the following '".concat(a.oT.EDPK,"', '").concat(a.oT.SPPK,"', '").concat(a.oT.P2PK,"' or '").concat(a.oT.BLPK,"'."))}},[o.PKH]:el,[o.PKH_ARR]:e=>{if(!e)return eo(!1);if(0===e.length)return eo(!0)+h(0);let t=e.reduce((e,t)=>e+el(t),"");return eo(!0)+h(t.length/2)+t},[o.DELEGATE]:e=>e?eo(!0)+el(e):eo(!1),[o.SCRIPT]:e=>{let t=D(e.code),n=D(e.storage);return"".concat(h(t.length/2,8)).concat(t).concat(h(n.length/2,8)).concat(n)},[o.BALLOT_STATEMENT]:e=>{switch(e){case"yay":return"00";case"nay":return"01";case"pass":return"02";default:throw new w(e)}},[o.PROPOSAL]:es,[o.PROPOSAL_ARR]:e=>h(32*e.length)+e.map(e=>es(e)).join(""),[o.INT32]:e=>{let t=parseInt(String(e),10),n=[];for(let e=0;e<4;e++){let r=(4-(e+1))*8;n.push((t&255<<r)>>r)}return u.from(n).toString("hex")},[o.PARAMETERS]:e=>{if(!e||"default"===e.entrypoint&&"prim"in e.value&&"Unit"===e.value.prim)return"00";let t=ef(e.entrypoint),n=D(e.value),r=(n.length/2).toString(16).padStart(8,"0");return"ff".concat(t).concat(r).concat(n)},[o.ADDRESS]:e=>{switch(e.substring(0,3)){case a.oT.TZ1:case a.oT.TZ2:case a.oT.TZ3:case a.oT.TZ4:return"00"+el(e);case a.oT.KT1:return"01"+J(a.oT.KT1)(e)+"00";default:throw new c.bS(e,(0,a.f4)(a.nd.NO_PREFIX_MATCHED)+" expecting one of the following prefix '".concat(a.oT.TZ1,"', ").concat(a.oT.TZ2,"', '").concat(a.oT.TZ3,"', '").concat(a.oT.TZ4,"' or '").concat(a.oT.KT1,"'."))}},[o.SMART_ROLLUP_ADDRESS]:e=>{if(e.substring(0,3)!==a.oT.SR1)throw new O(e,(0,a.f4)(a.nd.NO_PREFIX_MATCHED)+" expecting prefix '".concat(a.oT.SR1,"'."));return J(a.oT.SR1)(e)},[o.SMART_CONTRACT_ADDRESS]:e=>{if(e.substring(0,3)===a.oT.KT1)return"01"+J(a.oT.KT1)(e)+"00";throw new c.JH(e,(0,a.f4)(a.nd.NO_PREFIX_MATCHED)+" expecting prefix '".concat(a.oT.KT1,"'."))},[o.SMART_ROLLUP_COMMITMENT_HASH]:e=>{if(e.substring(0,4)===a.oT.SRC1)return J(a.oT.SRC1)(e);throw new C(e,(0,a.f4)(a.nd.NO_PREFIX_MATCHED)+" expecting prefix '".concat(a.oT.SRC1,"'"))},[o.VALUE]:e=>{let t=D(e);return"".concat(h(t.length/2)).concat(t)},[o.INT16]:e=>{let t=parseInt(String(e),10),n=[];for(let e=0;e<2;e++){let r=(2-(e+1))*8;n.push((t&255<<r)>>r)}return u.from(n).toString("hex")},[o.BLOCK_PAYLOAD_HASH]:ep,[o.ENTRYPOINT]:e=>"".concat(D({string:e}).slice(2)),[o.BURN_LIMIT]:e=>e?"ff".concat(eu(e)):"00",[o.DEPOSITS_LIMIT]:e=>e?"ff".concat(eu(e)):"00",[o.PVM_KIND]:e=>{switch(e){case"arith":return"00";case"wasm_2_0_0":return"01";case"riscv":return"02";default:throw new P(e)}},[o.PADDED_BYTES]:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:8;return"".concat(h(e.length/2,t)).concat(e)},[o.SMART_ROLLUP_MESSAGE]:e=>{let t=e.reduce((e,t)=>e+"".concat(h(t.length/2)).concat(t),"");return"".concat(h(t.length/2)).concat(t)}};eF[o.OPERATION]=e=>{if(!(e.kind in eF)||!(e.kind in g))throw new c.p(e.kind);return g[e.kind]+eF[e.kind](e)},eF[o.OP_ACTIVATE_ACCOUNT]=e=>eM(eF)(ev)(e),eF[o.OP_DELEGATION]=e=>eM(eF)(eE)(e),eF[o.OP_TRANSACTION]=e=>eM(eF)(eb)(e),eF[o.OP_ORIGINATION]=e=>eM(eF)(ew)(e),eF[o.OP_BALLOT]=e=>eM(eF)(eT)(e),eF[o.OP_ATTESTATION]=e=>eM(eF)(e_)(e),eF[o.OP_ENDORSEMENT]=e=>eM(eF)(eA)(e),eF[o.OP_SEED_NONCE_REVELATION]=e=>eM(eF)(eR)(e),eF[o.OP_PROPOSALS]=e=>eM(eF)(eS)(e),eF[o.OP_REVEAL]=e=>eM(eF)(ey)(e),eF[o.OP_REGISTER_GLOBAL_CONSTANT]=e=>eM(eF)(eP)(e),eF[o.OP_TRANSFER_TICKET]=e=>eM(eF)(eI)(e),eF[o.OP_INCREASE_PAID_STORAGE]=e=>eM(eF)(eO)(e),eF[o.OP_UPDATE_CONSENSUS_KEY]=e=>eM(eF)(eC)(e),eF[o.OP_DRAIN_DELEGATE]=e=>eM(eF)(ex)(e),eF[o.OP_SMART_ROLLUP_ORIGINATE]=e=>eM(eF)(ek)(e),eF[o.OP_SMART_ROLLUP_ADD_MESSAGES]=e=>eM(eF)(eL)(e),eF[o.OP_SMART_ROLLUP_EXECUTE_OUTBOX_MESSAGE]=e=>eM(eF)(eB)(e),eF[o.MANAGER]=eM(eF)(eg),eF[o.OP_SET_DEPOSITS_LIMIT]=e=>eM(eF)(eN)(e),eF[o.OP_FAILING_NOOP]=e=>eM(eF)(eD)(e);let eG={activate_account:ev,reveal:ey,delegation:eE,transaction:eb,origination:ew,ballot:eT,attestation:e_,endorsement:eA,seed_nonce_revelation:eR,proposals:eS,register_global_constant:eP,transfer_ticket:eI,increase_paid_storage:eO,update_consensus_key:eC,drain_delegate:ex,set_deposits_limit:eN,smart_rollup_originate:ek,smart_rollup_add_messages:eL,smart_rollup_execute_outbox_message:eB,failing_noop:eD},ej=(e,t)=>t.filter(t=>!e.includes(t)),eq=(e,t)=>e.filter(e=>e!==t),eK=e=>Object.keys(eG).includes(e),eW=e=>{let t=e.kind;return ej(eq(Object.keys(e),"kind"),Object.keys(eG[t]))};(i=s||(s={})).Pt24m4xi="Pt24m4xiPbLDhVgVfABUjirbmda3yohdN82Sp9FeuAXJ4eV9otd",i.PsBABY5H="PsBABY5HQTSkA4297zNHfsZNKtxULfL18y95qb3m53QJiXGmrbU",i.PsBabyM1="PsBabyM1eUXZseaJdmXFApDSBqj8YBfwELoxZHHW77EMcAbbwAS",i.PsCARTHA="PsCARTHAGazKbHtnKfLzQg3kms52kSRpgnDY982a9oYsSXRLQEb",i.PsDELPH1="PsDELPH1Kxsxt8f9eWbxQeRxkjfbxoqM52jvs5Y5fBxWWh4ifpo",i.PtEdo2Zk="PtEdo2ZkT9oKpimTah6x2embF25oss54njMuPzkJTEi5RqfdZFA",i.PsFLorena="PsFLorenaUUuikDWvMDr6fGBRG8kt3e3D3fHoXK1j1BFRxeSH4i",i.PtGRANADs="PtGRANADsDU8R9daYKAgWnQYAJ64omN1o3KMGVCykShA97vQbvV",i.PtHangz2="PtHangz2aRngywmSRGGvrcTyMbbdpWdpFKuS4uMWxg2RaH9i1qx",i.Psithaca2="Psithaca2MLRFYargivpo7YvUr7wUDqyxrdhC5CQq78mRvimz6A",i.PtJakart2="PtJakart2xVj7pYXJBXrqHgd82rdkLey5ZeeGwDgPp9rhQUbSqY",i.PtKathman="PtKathmankSpLLDALzWw7CGD2j2MtyveTwboEYokqUCP4a1LxMg",i.PtLimaPtL="PtLimaPtLMwfNinJi9rCfDPWea8dFgTZ1MeJ9f1m2SRic6ayiwW",i.PtMumbaii="PtMumbaiiFFEGbew1rRjzSPyzRbA51Tm3RVZL5suHPxSZYDhCEc",i.PtMumbai2="PtMumbai2TmsJHNGRkD8v8YDbtao7BLUC3wjASn1inAKLFCjaH1",i.PtNairobi="PtNairobiyssHuh87hEhfVBGCVrK3WnS8Z2FT4ymB5tAa4r1nQf",i.ProxfordY="ProxfordYmVfjWnRcgjWH36fW6PArwqykTFzotUxRs6gmTcZDuH",i.ProtoALpha="ProtoALphaALphaALphaALphaALphaALphaALphaALphaDdp3zK";let ez=s.ProxfordY;class eV{forge(e){let t=(0,a.lM)(e.branch);if(t!==a.nd.VALID)throw new c.L7(e.branch,(0,a.f4)(t));for(let t of e.contents){if(!eK(t.kind))throw new c.p(t.kind);let e=eW(t);if(1===e.length){if("delegation"===t.kind&&"delegate"===e[0]||"origination"===t.kind&&"delegate"===e[0])continue;if("transaction"===t.kind&&"parameters"===e[0])continue;if("set_deposits_limit"===t.kind&&"limit"===e[0])continue;else if("smart_rollup_originate"===t.kind&&"whitelist"===e[0])continue;else throw new E(t,'missing properties "'.concat(e.join(", "),'"'))}if(e.length>1)throw new E(t,'missing properties "'.concat(e.join(", "),'"'))}return Promise.resolve(this.codec.encoder(e).toLowerCase())}parse(e){return Promise.resolve(this.codec.decoder(e))}constructor(e=ez){var t;this.protocolHash=e,this.codec=(t=o.MANAGER,this.protocolHash,{encoder:eF[t],decoder:e=>{let n=x.fromHexString(e);return eH[t](n)}})}}new eV},58657:function(e,t,n){"use strict";n.d(t,{Dl:function(){return N},Qg:function(){return _}});var r,i,o,s,a,c,l,u,d,h,f,p,m,g,v,y,E,b,w,T,_,A=n(36582),R=n(22840),S=n(75410),P=n(91813);function I(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&0>t.indexOf(r)&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols)for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)0>t.indexOf(r[i])&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n}function O(e,t,n,r){return new(n||(n=Promise))(function(i,o){function s(e){try{c(r.next(e))}catch(e){o(e)}}function a(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):((t=e.value)instanceof n?t:new n(function(e){e(t)})).then(s,a)}c((r=r.apply(e,t||[])).next())})}"function"==typeof SuppressedError&&SuppressedError;let C={block:"head"};function x(e,t){let n=Array.isArray(e);void 0===t&&(t=Object.keys(e));let r=n?[]:{};return t.forEach(t=>{let n;let i=e[t];if(void 0!==i){if(Array.isArray(i)){n=x(i),r[t]=n;return}n=new R.Z(i),r[t]=n}}),r}(r=f||(f={})).GET_BAKING_RIGHTS="getBakingRights",r.GET_BALLOTS="getBallots",r.GET_BALLOT_LIST="getBallotList",r.GET_BIG_MAP_KEY="getBigMapKey",r.GET_BIG_MAP_EXPR="getBigMapExpr",r.GET_BLOCK_HASH="getBlockHash",r.GET_BLOCK="getBlock",r.GET_BLOCK_HEADER="getBlockHeader",r.GET_BLOCK_METADATA="getBlockMetadata",r.GET_BALANCE="getBalance",r.GET_CHAIN_ID="getChainId",r.GET_CONSTANTS="getConstants",r.GET_CONTRACT="getContract",r.GET_CURRENT_PERIOD="getCurrentPeriod",r.GET_CURRENT_PROPOSAL="getCurrentProposal",r.GET_CURRENT_QUORUM="getCurrentQuorum",r.GET_DELEGATE="getDelegate",r.GET_DELEGATES="getDelegates",r.GET_VOTING_INFO="getVotingInfo",r.GET_ATTESTATION_RIGHTS="getAttestationRights",r.GET_ENDORSING_RIGHTS="getEndorsingRights",r.GET_ENTRYPOINTS="getEntrypoints",r.GET_LIVE_BLOCKS="getLiveBlocks",r.GET_MANAGER_KEY="getManagerKey",r.GET_NORMALIZED_SCRIPT="getNormalizedScript",r.GET_PROPOSALS="getProposals",r.GET_PROTOCOLS="getProtocols",r.GET_SAPLING_DIFF_BY_CONTRACT="getSaplingDiffByContract",r.GET_SAPLING_DIFF_BY_ID="getSaplingDiffById",r.GET_SCRIPT="getScript",r.GET_STORAGE="getStorage",r.GET_SUCCESSOR_PERIOD="getSuccessorPeriod",r.GET_VOTES_LISTINGS="getVotesListings",r.PACK_DATA="packData",r.GET_STORAGE_USED_SPACE="getStorageUsedSpace",r.GET_STORAGE_PAID_SPACE="getStoragePaidSpace",r.GET_TICKET_BALANCE="getTicketBalance",r.GET_ALL_TICKET_BALANCES="getAllTicketBalances",r.GET_PENDING_OPERATIONS="getPendingOperations",(p||(p={})).TOO_LARGE="too large",(i=m||(m={})).BAKING_BONUSES="baking bonuses",i.BAKING_REWARDS="baking rewards",i.BLOCK_FEES="block fees",i.BONDS="bonds",i.BOOTSTRAP="bootstrap",i.BURNED="burned",i.COMMITMENT="commitment",i.DELEGATE_DENOMINATOR="delegate_denominator",i.DELEGATOR_NUMERATOR="delegator_numerator",i.DEPOSITS="deposits",i.ENDORSING_REWARDS="endorsing rewards",i.INVOICE="invoice",i.LOST_ENDORSING_REWARDS="lost endorsing rewards",i.MINTED="minted",i.NONCE_REVELATION_REWARDS="nonce revelation rewards",i.PUNISHMENTS="punishments",i.SMART_ROLLUP_REFUTATION_PUNISHMENTS="smart_rollup_refutation_punishments",i.SMART_ROLLUP_REFUTATION_REWARDS="smart_rollup_refutation_rewards",i.STORAGE_FEES="storage fees",i.SUBSIDY="subsidy",i.UNSTAKED_DEPOSITS="unstaked_deposits",(o=g||(g={})).WASM2="wasm_2_0_0",o.ARITH="arith",o.RISCV="riscv",(s=v||(v={})).START="start",s.MOVE="move",(a=y||(y={})).INBOX_PROOF="inbox_proof",a.REVEAL_PROOF="reveal_proof",a.FIRST_INPUT="first_input",(c=E||(E={})).RAW_DATA_PROOF="raw_data_proof",c.METADATA_PROOF="metadata_proof",c.DAL_PAGE_PROOF="dal_page_proof",(l=b||(b={})).ONGOING="ongoing",l.ENDED="ended",(u=w||(w={})).LOSER="loser",u.DRAW="draw",(d=T||(T={})).CONFLICT_RESOLVED="conflict_resolved",d.TIMEOUT="timeout",(h=_||(_={})).ORIGINATION="origination",h.DELEGATION="delegation",h.REVEAL="reveal",h.TRANSACTION="transaction",h.ACTIVATION="activate_account",h.ATTESTATION="attestation",h.ENDORSEMENT="endorsement",h.PREATTESTATION="preattestation",h.PREENDORSEMENT="preendorsement",h.SET_DEPOSITS_LIMIT="set_deposits_limit",h.DOUBLE_PREATTESTATION_EVIDENCE="double_preattestation_evidence",h.DOUBLE_PREENDORSEMENT_EVIDENCE="double_preendorsement_evidence",h.ATTESTATION_WITH_SLOT="attestation_with_slot",h.ENDORSEMENT_WITH_SLOT="endorsement_with_slot",h.SEED_NONCE_REVELATION="seed_nonce_revelation",h.DOUBLE_ATTESTATION_EVIDENCE="double_attestation_evidence",h.DOUBLE_ENDORSEMENT_EVIDENCE="double_endorsement_evidence",h.DOUBLE_BAKING_EVIDENCE="double_baking_evidence",h.PROPOSALS="proposals",h.BALLOT="ballot",h.FAILING_NOOP="failing_noop",h.REGISTER_GLOBAL_CONSTANT="register_global_constant",h.TRANSFER_TICKET="transfer_ticket",h.INCREASE_PAID_STORAGE="increase_paid_storage",h.UPDATE_CONSENSUS_KEY="update_consensus_key",h.DRAIN_DELEGATE="drain_delegate",h.VDF_REVELATION="vdf_revelation",h.EVENT="event",h.TICKET_UPDATES="ticket_updates",h.SMART_ROLLUP_ORIGINATE="smart_rollup_originate",h.SMART_ROLLUP_ADD_MESSAGES="smart_rollup_add_messages",h.SMART_ROLLUP_EXECUTE_OUTBOX_MESSAGE="smart_rollup_execute_outbox_message",h.SMART_ROLLUP_PUBLISH="smart_rollup_publish",h.SMART_ROLLUP_CEMENT="smart_rollup_cement",h.SMART_ROLLUP_RECOVER_BOND="smart_rollup_recover_bond",h.SMART_ROLLUP_REFUTE="smart_rollup_refute",h.SMART_ROLLUP_TIMEOUT="smart_rollup_timeout";class N{createURL(e){let t=this.url;for(;t.endsWith("/");)t=t.slice(0,-1);return"".concat(t).concat(e)}validateAddress(e){let t=(0,S.YN)(e);if(t!==S.nd.VALID)throw new P.bS(e,(0,S.f4)(t))}validateContract(e){let t=(0,S.rY)(e);if(t!==S.nd.VALID)throw new P.JH(e,(0,S.f4)(t))}getBlockHash(){let{block:e}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:C;return O(this,void 0,void 0,function*(){return yield this.httpBackend.createRequest({url:this.createURL("/chains/".concat(this.chain,"/blocks/").concat(e,"/hash")),method:"GET"})})}getLiveBlocks(){let{block:e}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:C;return O(this,void 0,void 0,function*(){return yield this.httpBackend.createRequest({url:this.createURL("/chains/".concat(this.chain,"/blocks/").concat(e,"/live_blocks")),method:"GET"})})}getBalance(e){let{block:t}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:C;return O(this,void 0,void 0,function*(){this.validateAddress(e);let n=yield this.httpBackend.createRequest({url:this.createURL("/chains/".concat(this.chain,"/blocks/").concat(t,"/context/contracts/").concat(e,"/balance")),method:"GET"});return new R.Z(n)})}getStorage(e){let{block:t}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:C;return O(this,void 0,void 0,function*(){return this.validateContract(e),this.httpBackend.createRequest({url:this.createURL("/chains/".concat(this.chain,"/blocks/").concat(t,"/context/contracts/").concat(e,"/storage")),method:"GET"})})}getScript(e){let{block:t}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:C;return O(this,void 0,void 0,function*(){return this.validateContract(e),this.httpBackend.createRequest({url:this.createURL("/chains/".concat(this.chain,"/blocks/").concat(t,"/context/contracts/").concat(e,"/script")),method:"GET"})})}getNormalizedScript(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{unparsing_mode:"Readable"},{block:n}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:C;return O(this,void 0,void 0,function*(){return this.validateContract(e),this.httpBackend.createRequest({url:this.createURL("/chains/".concat(this.chain,"/blocks/").concat(n,"/context/contracts/").concat(e,"/script/normalized")),method:"POST"},t)})}getContract(e){let{block:t}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:C;return O(this,void 0,void 0,function*(){this.validateAddress(e);let n=yield this.httpBackend.createRequest({url:this.createURL("/chains/".concat(this.chain,"/blocks/").concat(t,"/context/contracts/").concat(e)),method:"GET"});return Object.assign(Object.assign({},n),{balance:new R.Z(n.balance)})})}getManagerKey(e){let{block:t}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:C;return O(this,void 0,void 0,function*(){return this.validateAddress(e),this.httpBackend.createRequest({url:this.createURL("/chains/".concat(this.chain,"/blocks/").concat(t,"/context/contracts/").concat(e,"/manager_key")),method:"GET"})})}getDelegate(e){let{block:t}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:C;return O(this,void 0,void 0,function*(){let n;this.validateAddress(e);try{n=yield this.httpBackend.createRequest({url:this.createURL("/chains/".concat(this.chain,"/blocks/").concat(t,"/context/contracts/").concat(e,"/delegate")),method:"GET"})}catch(e){if(e instanceof A.mk&&e.status===A.MU.NOT_FOUND)n=null;else throw e}return n})}getBigMapKey(e,t){let{block:n}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:C;return O(this,void 0,void 0,function*(){return this.validateAddress(e),this.httpBackend.createRequest({url:this.createURL("/chains/".concat(this.chain,"/blocks/").concat(n,"/context/contracts/").concat(e,"/big_map_get")),method:"POST"},t)})}getBigMapExpr(e,t){let{block:n}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:C;return O(this,void 0,void 0,function*(){return this.httpBackend.createRequest({url:this.createURL("/chains/".concat(this.chain,"/blocks/").concat(n,"/context/big_maps/").concat(e,"/").concat(t)),method:"GET"})})}getDelegates(e){let{block:t}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:C;return O(this,void 0,void 0,function*(){this.validateAddress(e);let n=yield this.httpBackend.createRequest({url:this.createURL("/chains/".concat(this.chain,"/blocks/").concat(t,"/context/delegates/").concat(e)),method:"GET"}),r=x(n,["balance","full_balance","current_frozen_deposits","frozen_deposits","frozen_balance","frozen_deposits_limit","staking_balance","delegated_balance","voting_power","total_delegated_stake","staking_denominator"]);return Object.assign(Object.assign(Object.assign({},n),r),{frozen_balance_by_cycle:n.frozen_balance_by_cycle?n.frozen_balance_by_cycle.map(e=>{var{deposit:t,deposits:n,fees:r,rewards:i}=e,o=I(e,["deposit","deposits","fees","rewards"]);let s=x({deposit:t,deposits:n,fees:r,rewards:i},["deposit","deposits","fees","rewards"]);return Object.assign(Object.assign({},o),{deposit:s.deposit,deposits:s.deposits,fees:s.fees,rewards:s.rewards})}):void 0})})}getVotingInfo(e){let{block:t}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:C;return O(this,void 0,void 0,function*(){return this.validateAddress(e),yield this.httpBackend.createRequest({url:this.createURL("/chains/".concat(this.chain,"/blocks/").concat(t,"/context/delegates/").concat(e,"/voting_info")),method:"GET"})})}getConstants(){let{block:e}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:C;return O(this,void 0,void 0,function*(){let t=yield this.httpBackend.createRequest({url:this.createURL("/chains/".concat(this.chain,"/blocks/").concat(e,"/context/constants")),method:"GET"}),n=x(t,["time_between_blocks","hard_gas_limit_per_operation","hard_gas_limit_per_block","proof_of_work_threshold","tokens_per_roll","seed_nonce_revelation_tip","block_security_deposit","endorsement_security_deposit","block_reward","endorsement_reward","cost_per_byte","hard_storage_limit_per_operation","test_chain_duration","baking_reward_per_endorsement","delay_per_missing_endorsement","minimal_block_delay","liquidity_baking_subsidy","cache_layout","baking_reward_fixed_portion","baking_reward_bonus_per_slot","endorsing_reward_per_slot","double_baking_punishment","delay_increment_per_round","tx_rollup_commitment_bond","vdf_difficulty","sc_rollup_stake_amount","minimal_stake"]);return Object.assign(Object.assign({},t),n)})}getBlock(){let{block:e,version:t}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:C;return O(this,void 0,void 0,function*(){let n={url:this.createURL("/chains/".concat(this.chain,"/blocks/").concat(e)),method:"GET"};return void 0!==t&&(n.query={version:t}),yield this.httpBackend.createRequest(n)})}getBlockHeader(){let{block:e}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:C;return O(this,void 0,void 0,function*(){return yield this.httpBackend.createRequest({url:this.createURL("/chains/".concat(this.chain,"/blocks/").concat(e,"/header")),method:"GET"})})}getBlockMetadata(){let{block:e,version:t}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:C;return O(this,void 0,void 0,function*(){let n={url:this.createURL("/chains/".concat(this.chain,"/blocks/").concat(e,"/metadata")),method:"GET"};return void 0!==t&&(n.query={version:t}),yield this.httpBackend.createRequest(n)})}getBakingRights(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{block:t}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:C;return O(this,void 0,void 0,function*(){return yield this.httpBackend.createRequest({url:this.createURL("/chains/".concat(this.chain,"/blocks/").concat(t,"/helpers/baking_rights")),method:"GET",query:e})})}getAttestationRights(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{block:t}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:C;return O(this,void 0,void 0,function*(){return yield this.httpBackend.createRequest({url:this.createURL("/chains/".concat(this.chain,"/blocks/").concat(t,"/helpers/attestation_rights")),method:"GET",query:e})})}getEndorsingRights(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{block:t}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:C;return O(this,void 0,void 0,function*(){return yield this.httpBackend.createRequest({url:this.createURL("/chains/".concat(this.chain,"/blocks/").concat(t,"/helpers/endorsing_rights")),method:"GET",query:e})})}getBallotList(){let{block:e}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:C;return O(this,void 0,void 0,function*(){return yield this.httpBackend.createRequest({url:this.createURL("/chains/".concat(this.chain,"/blocks/").concat(e,"/votes/ballot_list")),method:"GET"})})}getBallots(){let{block:e}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:C;return O(this,void 0,void 0,function*(){return x((yield this.httpBackend.createRequest({url:this.createURL("/chains/".concat(this.chain,"/blocks/").concat(e,"/votes/ballots")),method:"GET"})),["yay","nay","pass"])})}getCurrentProposal(){let{block:e}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:C;return O(this,void 0,void 0,function*(){return yield this.httpBackend.createRequest({url:this.createURL("/chains/".concat(this.chain,"/blocks/").concat(e,"/votes/current_proposal")),method:"GET"})})}getCurrentQuorum(){let{block:e}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:C;return O(this,void 0,void 0,function*(){return yield this.httpBackend.createRequest({url:this.createURL("/chains/".concat(this.chain,"/blocks/").concat(e,"/votes/current_quorum")),method:"GET"})})}getVotesListings(){let{block:e}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:C;return O(this,void 0,void 0,function*(){let t=yield this.httpBackend.createRequest({url:this.createURL("/chains/".concat(this.chain,"/blocks/").concat(e,"/votes/listings")),method:"GET"});return t.map(e=>(e.voting_power&&(e.voting_power=new R.Z(e.voting_power)),e)),t})}getProposals(){let{block:e}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:C;return O(this,void 0,void 0,function*(){let t=yield this.httpBackend.createRequest({url:this.createURL("/chains/".concat(this.chain,"/blocks/").concat(e,"/votes/proposals")),method:"GET"});return t.map(e=>e[1]=new R.Z(e[1])),t})}forgeOperations(e){let{block:t}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:C;return O(this,void 0,void 0,function*(){return this.httpBackend.createRequest({url:this.createURL("/chains/".concat(this.chain,"/blocks/").concat(t,"/helpers/forge/operations")),method:"POST"},e)})}injectOperation(e){return O(this,void 0,void 0,function*(){return this.httpBackend.createRequest({url:this.createURL("/injection/operation"),method:"POST"},e)})}preapplyOperations(e){let{block:t,version:n}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:C;return O(this,void 0,void 0,function*(){let r={url:this.createURL("/chains/".concat(this.chain,"/blocks/").concat(t,"/helpers/preapply/operations")),method:"POST"};return void 0!==n&&(r.query={version:n}),yield this.httpBackend.createRequest(r,e)})}getEntrypoints(e){let{block:t}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:C;return O(this,void 0,void 0,function*(){return this.validateContract(e),yield this.httpBackend.createRequest({url:this.createURL("/chains/".concat(this.chain,"/blocks/").concat(t,"/context/contracts/").concat(e,"/entrypoints")),method:"GET"})})}runOperation(e){let{block:t,version:n}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:C;return O(this,void 0,void 0,function*(){let r={url:this.createURL("/chains/".concat(this.chain,"/blocks/").concat(t,"/helpers/scripts/run_operation")),method:"POST"};return void 0!==n&&(r.query={version:n}),yield this.httpBackend.createRequest(r,e)})}simulateOperation(e){let{block:t,version:n}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:C;return O(this,void 0,void 0,function*(){let r={url:this.createURL("/chains/".concat(this.chain,"/blocks/").concat(t,"/helpers/scripts/simulate_operation")),method:"POST"};return void 0!==n&&(r.query={version:n}),yield this.httpBackend.createRequest(r,e)})}runCode(e){let{block:t}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:C;return O(this,void 0,void 0,function*(){return yield this.httpBackend.createRequest({url:this.createURL("/chains/".concat(this.chain,"/blocks/").concat(t,"/helpers/scripts/run_code")),method:"POST"},e)})}runScriptView(e,t){var{unparsing_mode:n="Readable"}=e,r=I(e,["unparsing_mode"]),i=(void 0===t?C:t).block;return O(this,void 0,void 0,function*(){return this.httpBackend.createRequest({url:this.createURL("/chains/".concat(this.chain,"/blocks/").concat(i,"/helpers/scripts/run_script_view")),method:"POST"},Object.assign({unparsing_mode:n},r))})}runView(e,t){var{unparsing_mode:n="Readable"}=e,r=I(e,["unparsing_mode"]),i=(void 0===t?C:t).block;return O(this,void 0,void 0,function*(){return this.httpBackend.createRequest({url:this.createURL("/chains/".concat(this.chain,"/blocks/").concat(i,"/helpers/scripts/run_view")),method:"POST"},Object.assign({unparsing_mode:n},r))})}getChainId(){return O(this,void 0,void 0,function*(){return this.httpBackend.createRequest({url:this.createURL("/chains/".concat(this.chain,"/chain_id")),method:"GET"})})}packData(e){let{block:t}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:C;return O(this,void 0,void 0,function*(){let n=yield this.httpBackend.createRequest({url:this.createURL("/chains/".concat(this.chain,"/blocks/").concat(t,"/helpers/scripts/pack_data")),method:"POST"},e),{gas:r}=n,i=I(n,["gas"]),o=r,s=new R.Z(r||"");return s.isNaN()||(o=s),Object.assign({gas:o},i)})}getRpcUrl(){return this.url}getCurrentPeriod(){let{block:e}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:C;return O(this,void 0,void 0,function*(){return yield this.httpBackend.createRequest({url:this.createURL("/chains/".concat(this.chain,"/blocks/").concat(e,"/votes/current_period")),method:"GET"})})}getSuccessorPeriod(){let{block:e}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:C;return O(this,void 0,void 0,function*(){return yield this.httpBackend.createRequest({url:this.createURL("/chains/".concat(this.chain,"/blocks/").concat(e,"/votes/successor_period")),method:"GET"})})}getSaplingDiffById(e){let{block:t}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:C;return O(this,void 0,void 0,function*(){return this.httpBackend.createRequest({url:this.createURL("/chains/".concat(this.chain,"/blocks/").concat(t,"/context/sapling/").concat(e,"/get_diff")),method:"GET"})})}getSaplingDiffByContract(e){let{block:t}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:C;return O(this,void 0,void 0,function*(){return this.httpBackend.createRequest({url:this.createURL("/chains/".concat(this.chain,"/blocks/").concat(t,"/context/contracts/").concat(e,"/single_sapling_get_diff")),method:"GET"})})}getProtocols(){let{block:e}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:C;return O(this,void 0,void 0,function*(){return this.httpBackend.createRequest({url:this.createURL("/chains/".concat(this.chain,"/blocks/").concat(e,"/protocols")),method:"GET"})})}getStorageUsedSpace(e){let{block:t}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:C;return O(this,void 0,void 0,function*(){return this.httpBackend.createRequest({url:this.createURL("/chains/".concat(this.chain,"/blocks/").concat(t,"/context/contracts/").concat(e,"/storage/used_space")),method:"GET"})})}getStoragePaidSpace(e){let{block:t}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:C;return O(this,void 0,void 0,function*(){return this.httpBackend.createRequest({url:this.createURL("/chains/".concat(this.chain,"/blocks/").concat(t,"/context/contracts/").concat(e,"/storage/paid_space")),method:"GET"})})}getTicketBalance(e,t){let{block:n}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:C;return O(this,void 0,void 0,function*(){return this.httpBackend.createRequest({url:this.createURL("/chains/".concat(this.chain,"/blocks/").concat(n,"/context/contracts/").concat(e,"/ticket_balance")),method:"POST"},t)})}getAllTicketBalances(e){let{block:t}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:C;return O(this,void 0,void 0,function*(){return this.httpBackend.createRequest({url:this.createURL("/chains/".concat(this.chain,"/blocks/").concat(t,"/context/contracts/").concat(e,"/all_ticket_balances")),method:"GET"})})}getPendingOperations(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return O(this,void 0,void 0,function*(){return this.httpBackend.createRequest({url:this.createURL("/chains/".concat(this.chain,"/mempool/pending_operations")),method:"GET",query:e})})}constructor(e,t="main",n=new A.jN){this.url=e,this.chain=t,this.httpBackend=n}}},68938:function(e,t){var n,r,i,o,s,a,c,l,u,d,h,f,p,m,g,v,y,E;(n="undefined"==typeof DO_NOT_EXPORT_CRC?t:{}).version="1.2.2",o=(i=function(e){var t=0,n=0,r=0,i="undefined"!=typeof Int32Array?new Int32Array(4096):Array(4096);for(r=0;256!=r;++r)i[r]=e[r];for(r=0;256!=r;++r)for(n=e[r],t=256+r;t<4096;t+=256)n=i[t]=n>>>8^e[255&n];var o=[];for(r=1;16!=r;++r)o[r-1]="undefined"!=typeof Int32Array?i.subarray(256*r,256*r+256):i.slice(256*r,256*r+256);return o}(r=function(){for(var e=0,t=Array(256),n=0;256!=n;++n)e=1&(e=1&(e=1&(e=1&(e=1&(e=1&(e=1&(e=1&(e=n)?-306674912^e>>>1:e>>>1)?-306674912^e>>>1:e>>>1)?-306674912^e>>>1:e>>>1)?-306674912^e>>>1:e>>>1)?-306674912^e>>>1:e>>>1)?-306674912^e>>>1:e>>>1)?-306674912^e>>>1:e>>>1)?-306674912^e>>>1:e>>>1,t[n]=e;return"undefined"!=typeof Int32Array?new Int32Array(t):t}()))[0],s=i[1],a=i[2],c=i[3],l=i[4],u=i[5],d=i[6],h=i[7],f=i[8],p=i[9],m=i[10],g=i[11],v=i[12],y=i[13],E=i[14],n.table=r,n.bstr=function(e,t){for(var n=-1^t,i=0,o=e.length;i<o;)n=n>>>8^r[(n^e.charCodeAt(i++))&255];return~n},n.buf=function(e,t){for(var n=-1^t,i=e.length-15,b=0;b<i;)n=E[e[b++]^255&n]^y[e[b++]^n>>8&255]^v[e[b++]^n>>16&255]^g[e[b++]^n>>>24]^m[e[b++]]^p[e[b++]]^f[e[b++]]^h[e[b++]]^d[e[b++]]^u[e[b++]]^l[e[b++]]^c[e[b++]]^a[e[b++]]^s[e[b++]]^o[e[b++]]^r[e[b++]];for(i+=15;b<i;)n=n>>>8^r[(n^e[b++])&255];return~n},n.str=function(e,t){for(var n=-1^t,i=0,o=e.length,s=0,a=0;i<o;)(s=e.charCodeAt(i++))<128?n=n>>>8^r[(n^s)&255]:s<2048?n=(n=n>>>8^r[(n^(192|s>>6&31))&255])>>>8^r[(n^(128|63&s))&255]:s>=55296&&s<57344?(s=(1023&s)+64,a=1023&e.charCodeAt(i++),n=(n=(n=(n=n>>>8^r[(n^(240|s>>8&7))&255])>>>8^r[(n^(128|s>>2&63))&255])>>>8^r[(n^(128|a>>6&15|(3&s)<<4))&255])>>>8^r[(n^(128|63&a))&255]):n=(n=(n=n>>>8^r[(n^(224|s>>12&15))&255])>>>8^r[(n^(128|s>>6&63))&255])>>>8^r[(n^(128|63&s))&255];return~n}},39152:function(e,t,n){"use strict";var r="undefined"!=typeof globalThis&&globalThis||"undefined"!=typeof self&&self||void 0!==n.g&&n.g,i=function(){function e(){this.fetch=!1,this.DOMException=r.DOMException}return e.prototype=r,new e}();(function(e){var t=void 0!==i&&i||"undefined"!=typeof self&&self||void 0!==t&&t,n={searchParams:"URLSearchParams"in t,iterable:"Symbol"in t&&"iterator"in Symbol,blob:"FileReader"in t&&"Blob"in t&&function(){try{return new Blob,!0}catch(e){return!1}}(),formData:"FormData"in t,arrayBuffer:"ArrayBuffer"in t};if(n.arrayBuffer)var r=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],o=ArrayBuffer.isView||function(e){return e&&r.indexOf(Object.prototype.toString.call(e))>-1};function s(e){if("string"!=typeof e&&(e=String(e)),/[^a-z0-9\-#$%&'*+.^_`|~!]/i.test(e)||""===e)throw TypeError('Invalid character in header field name: "'+e+'"');return e.toLowerCase()}function a(e){return"string"!=typeof e&&(e=String(e)),e}function c(e){var t={next:function(){var t=e.shift();return{done:void 0===t,value:t}}};return n.iterable&&(t[Symbol.iterator]=function(){return t}),t}function l(e){this.map={},e instanceof l?e.forEach(function(e,t){this.append(t,e)},this):Array.isArray(e)?e.forEach(function(e){this.append(e[0],e[1])},this):e&&Object.getOwnPropertyNames(e).forEach(function(t){this.append(t,e[t])},this)}function u(e){if(e.bodyUsed)return Promise.reject(TypeError("Already read"));e.bodyUsed=!0}function d(e){return new Promise(function(t,n){e.onload=function(){t(e.result)},e.onerror=function(){n(e.error)}})}function h(e){var t=new FileReader,n=d(t);return t.readAsArrayBuffer(e),n}function f(e){if(e.slice)return e.slice(0);var t=new Uint8Array(e.byteLength);return t.set(new Uint8Array(e)),t.buffer}function p(){return this.bodyUsed=!1,this._initBody=function(e){if(this.bodyUsed=this.bodyUsed,this._bodyInit=e,e){if("string"==typeof e)this._bodyText=e;else if(n.blob&&Blob.prototype.isPrototypeOf(e))this._bodyBlob=e;else if(n.formData&&FormData.prototype.isPrototypeOf(e))this._bodyFormData=e;else if(n.searchParams&&URLSearchParams.prototype.isPrototypeOf(e))this._bodyText=e.toString();else{var t;n.arrayBuffer&&n.blob&&(t=e)&&DataView.prototype.isPrototypeOf(t)?(this._bodyArrayBuffer=f(e.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer])):n.arrayBuffer&&(ArrayBuffer.prototype.isPrototypeOf(e)||o(e))?this._bodyArrayBuffer=f(e):this._bodyText=e=Object.prototype.toString.call(e)}}else this._bodyText="";!this.headers.get("content-type")&&("string"==typeof e?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):n.searchParams&&URLSearchParams.prototype.isPrototypeOf(e)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},n.blob&&(this.blob=function(){var e=u(this);if(e)return e;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(!this._bodyFormData)return Promise.resolve(new Blob([this._bodyText]));throw Error("could not read FormData body as blob")},this.arrayBuffer=function(){return this._bodyArrayBuffer?u(this)||(ArrayBuffer.isView(this._bodyArrayBuffer)?Promise.resolve(this._bodyArrayBuffer.buffer.slice(this._bodyArrayBuffer.byteOffset,this._bodyArrayBuffer.byteOffset+this._bodyArrayBuffer.byteLength)):Promise.resolve(this._bodyArrayBuffer)):this.blob().then(h)}),this.text=function(){var e,t,n,r=u(this);if(r)return r;if(this._bodyBlob)return e=this._bodyBlob,n=d(t=new FileReader),t.readAsText(e),n;if(this._bodyArrayBuffer)return Promise.resolve(function(e){for(var t=new Uint8Array(e),n=Array(t.length),r=0;r<t.length;r++)n[r]=String.fromCharCode(t[r]);return n.join("")}(this._bodyArrayBuffer));if(!this._bodyFormData)return Promise.resolve(this._bodyText);throw Error("could not read FormData body as text")},n.formData&&(this.formData=function(){return this.text().then(v)}),this.json=function(){return this.text().then(JSON.parse)},this}l.prototype.append=function(e,t){e=s(e),t=a(t);var n=this.map[e];this.map[e]=n?n+", "+t:t},l.prototype.delete=function(e){delete this.map[s(e)]},l.prototype.get=function(e){return e=s(e),this.has(e)?this.map[e]:null},l.prototype.has=function(e){return this.map.hasOwnProperty(s(e))},l.prototype.set=function(e,t){this.map[s(e)]=a(t)},l.prototype.forEach=function(e,t){for(var n in this.map)this.map.hasOwnProperty(n)&&e.call(t,this.map[n],n,this)},l.prototype.keys=function(){var e=[];return this.forEach(function(t,n){e.push(n)}),c(e)},l.prototype.values=function(){var e=[];return this.forEach(function(t){e.push(t)}),c(e)},l.prototype.entries=function(){var e=[];return this.forEach(function(t,n){e.push([n,t])}),c(e)},n.iterable&&(l.prototype[Symbol.iterator]=l.prototype.entries);var m=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];function g(e,t){if(!(this instanceof g))throw TypeError('Please use the "new" operator, this DOM object constructor cannot be called as a function.');var n,r,i=(t=t||{}).body;if(e instanceof g){if(e.bodyUsed)throw TypeError("Already read");this.url=e.url,this.credentials=e.credentials,t.headers||(this.headers=new l(e.headers)),this.method=e.method,this.mode=e.mode,this.signal=e.signal,i||null==e._bodyInit||(i=e._bodyInit,e.bodyUsed=!0)}else this.url=String(e);if(this.credentials=t.credentials||this.credentials||"same-origin",(t.headers||!this.headers)&&(this.headers=new l(t.headers)),this.method=(r=(n=t.method||this.method||"GET").toUpperCase(),m.indexOf(r)>-1?r:n),this.mode=t.mode||this.mode||null,this.signal=t.signal||this.signal,this.referrer=null,("GET"===this.method||"HEAD"===this.method)&&i)throw TypeError("Body not allowed for GET or HEAD requests");if(this._initBody(i),("GET"===this.method||"HEAD"===this.method)&&("no-store"===t.cache||"no-cache"===t.cache)){var o=/([?&])_=[^&]*/;o.test(this.url)?this.url=this.url.replace(o,"$1_="+new Date().getTime()):this.url+=(/\?/.test(this.url)?"&":"?")+"_="+new Date().getTime()}}function v(e){var t=new FormData;return e.trim().split("&").forEach(function(e){if(e){var n=e.split("="),r=n.shift().replace(/\+/g," "),i=n.join("=").replace(/\+/g," ");t.append(decodeURIComponent(r),decodeURIComponent(i))}}),t}function y(e,t){if(!(this instanceof y))throw TypeError('Please use the "new" operator, this DOM object constructor cannot be called as a function.');t||(t={}),this.type="default",this.status=void 0===t.status?200:t.status,this.ok=this.status>=200&&this.status<300,this.statusText=void 0===t.statusText?"":""+t.statusText,this.headers=new l(t.headers),this.url=t.url||"",this._initBody(e)}g.prototype.clone=function(){return new g(this,{body:this._bodyInit})},p.call(g.prototype),p.call(y.prototype),y.prototype.clone=function(){return new y(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new l(this.headers),url:this.url})},y.error=function(){var e=new y(null,{status:0,statusText:""});return e.type="error",e};var E=[301,302,303,307,308];y.redirect=function(e,t){if(-1===E.indexOf(t))throw RangeError("Invalid status code");return new y(null,{status:t,headers:{location:e}})},e.DOMException=t.DOMException;try{new e.DOMException}catch(t){e.DOMException=function(e,t){this.message=e,this.name=t;var n=Error(e);this.stack=n.stack},e.DOMException.prototype=Object.create(Error.prototype),e.DOMException.prototype.constructor=e.DOMException}function b(r,i){return new Promise(function(o,s){var c=new g(r,i);if(c.signal&&c.signal.aborted)return s(new e.DOMException("Aborted","AbortError"));var u=new XMLHttpRequest;function d(){u.abort()}u.onload=function(){var e,t,n={status:u.status,statusText:u.statusText,headers:(e=u.getAllResponseHeaders()||"",t=new l,e.replace(/\r?\n[\t ]+/g," ").split("\r").map(function(e){return 0===e.indexOf("\n")?e.substr(1,e.length):e}).forEach(function(e){var n=e.split(":"),r=n.shift().trim();if(r){var i=n.join(":").trim();t.append(r,i)}}),t)};n.url="responseURL"in u?u.responseURL:n.headers.get("X-Request-URL");var r="response"in u?u.response:u.responseText;setTimeout(function(){o(new y(r,n))},0)},u.onerror=function(){setTimeout(function(){s(TypeError("Network request failed"))},0)},u.ontimeout=function(){setTimeout(function(){s(TypeError("Network request failed"))},0)},u.onabort=function(){setTimeout(function(){s(new e.DOMException("Aborted","AbortError"))},0)},u.open(c.method,function(e){try{return""===e&&t.location.href?t.location.href:e}catch(t){return e}}(c.url),!0),"include"===c.credentials?u.withCredentials=!0:"omit"===c.credentials&&(u.withCredentials=!1),"responseType"in u&&(n.blob?u.responseType="blob":n.arrayBuffer&&c.headers.get("Content-Type")&&-1!==c.headers.get("Content-Type").indexOf("application/octet-stream")&&(u.responseType="arraybuffer")),!i||"object"!=typeof i.headers||i.headers instanceof l?c.headers.forEach(function(e,t){u.setRequestHeader(t,e)}):Object.getOwnPropertyNames(i.headers).forEach(function(e){u.setRequestHeader(e,a(i.headers[e]))}),c.signal&&(c.signal.addEventListener("abort",d),u.onreadystatechange=function(){4===u.readyState&&c.signal.removeEventListener("abort",d)}),u.send(void 0===c._bodyInit?null:c._bodyInit)})}b.polyfill=!0,t.fetch||(t.fetch=b,t.Headers=l,t.Request=g,t.Response=y),e.Headers=l,e.Request=g,e.Response=y,e.fetch=b})({}),i.fetch.ponyfill=!0,delete i.fetch.polyfill;var o=r.fetch?r:i;(t=o.fetch).default=o.fetch,t.fetch=o.fetch,t.Headers=o.Headers,t.Request=o.Request,t.Response=o.Response,e.exports=t},85190:function(e,t,n){"use strict";var r=n(49079);"undefined"!=typeof __nccwpck_require__&&(__nccwpck_require__.ab="//"),({189:function(){!function(e,t){if(!e.setImmediate){var n,i,o,s,a,c=1,l={},u=!1,d=e.document,h=Object.getPrototypeOf&&Object.getPrototypeOf(e);(h=h&&h.setTimeout?h:e,"[object process]"===({}).toString.call(e.process))?a=function(e){r.nextTick(function(){p(e)})}:function(){if(e.postMessage&&!e.importScripts){var t=!0,n=e.onmessage;return e.onmessage=function(){t=!1},e.postMessage("","*"),e.onmessage=n,t}}()?(n="setImmediate$"+Math.random()+"$",i=function(t){t.source===e&&"string"==typeof t.data&&0===t.data.indexOf(n)&&p(+t.data.slice(n.length))},e.addEventListener?e.addEventListener("message",i,!1):e.attachEvent("onmessage",i),a=function(t){e.postMessage(n+t,"*")}):e.MessageChannel?((o=new MessageChannel).port1.onmessage=function(e){p(e.data)},a=function(e){o.port2.postMessage(e)}):d&&"onreadystatechange"in d.createElement("script")?(s=d.documentElement,a=function(e){var t=d.createElement("script");t.onreadystatechange=function(){p(e),t.onreadystatechange=null,s.removeChild(t),t=null},s.appendChild(t)}):a=function(e){setTimeout(p,0,e)},h.setImmediate=function(e){"function"!=typeof e&&(e=Function(""+e));for(var t=Array(arguments.length-1),n=0;n<t.length;n++)t[n]=arguments[n+1];var r={callback:e,args:t};return l[c]=r,a(c),c++},h.clearImmediate=f}function f(e){delete l[e]}function p(e){if(u)setTimeout(p,0,e);else{var t=l[e];if(t){u=!0;try{!function(e){var t=e.callback,n=e.args;switch(n.length){case 0:t();break;case 1:t(n[0]);break;case 2:t(n[0],n[1]);break;case 3:t(n[0],n[1],n[2]);break;default:t.apply(void 0,n)}}(t)}finally{f(e),u=!1}}}}}("undefined"==typeof self?void 0===n.g?this:n.g:self)}})[189](),e.exports={}},86630:function(e,t,n){"use strict";var r="undefined"!=typeof self?self:window;e.exports=t=r.fetch,r.fetch&&(t.default=r.fetch.bind(r)),t.Headers=r.Headers,t.Request=r.Request,t.Response=r.Response},75945:function(e,t,n){"use strict";function r(e){this.mode=o.MODE_8BIT_BYTE,this.data=e,this.parsedData=[];for(var t=0,n=this.data.length;t<n;t++){var r=[],i=this.data.charCodeAt(t);i>65536?(r[0]=240|(1835008&i)>>>18,r[1]=128|(258048&i)>>>12,r[2]=128|(4032&i)>>>6,r[3]=128|63&i):i>2048?(r[0]=224|(61440&i)>>>12,r[1]=128|(4032&i)>>>6,r[2]=128|63&i):i>128?(r[0]=192|(1984&i)>>>6,r[1]=128|63&i):r[0]=i,this.parsedData.push(r)}this.parsedData=Array.prototype.concat.apply([],this.parsedData),this.parsedData.length!=this.data.length&&(this.parsedData.unshift(191),this.parsedData.unshift(187),this.parsedData.unshift(239))}function i(e,t){this.typeNumber=e,this.errorCorrectLevel=t,this.modules=null,this.moduleCount=0,this.dataCache=null,this.dataList=[]}r.prototype={getLength:function(e){return this.parsedData.length},write:function(e){for(var t=0,n=this.parsedData.length;t<n;t++)e.put(this.parsedData[t],8)}},i.prototype={addData:function(e){var t=new r(e);this.dataList.push(t),this.dataCache=null},isDark:function(e,t){if(e<0||this.moduleCount<=e||t<0||this.moduleCount<=t)throw Error(e+","+t);return this.modules[e][t]},getModuleCount:function(){return this.moduleCount},make:function(){this.makeImpl(!1,this.getBestMaskPattern())},makeImpl:function(e,t){this.moduleCount=4*this.typeNumber+17,this.modules=Array(this.moduleCount);for(var n=0;n<this.moduleCount;n++){this.modules[n]=Array(this.moduleCount);for(var r=0;r<this.moduleCount;r++)this.modules[n][r]=null}this.setupPositionProbePattern(0,0),this.setupPositionProbePattern(this.moduleCount-7,0),this.setupPositionProbePattern(0,this.moduleCount-7),this.setupPositionAdjustPattern(),this.setupTimingPattern(),this.setupTypeInfo(e,t),this.typeNumber>=7&&this.setupTypeNumber(e),null==this.dataCache&&(this.dataCache=i.createData(this.typeNumber,this.errorCorrectLevel,this.dataList)),this.mapData(this.dataCache,t)},setupPositionProbePattern:function(e,t){for(var n=-1;n<=7;n++)if(!(e+n<=-1)&&!(this.moduleCount<=e+n))for(var r=-1;r<=7;r++)t+r<=-1||this.moduleCount<=t+r||(0<=n&&n<=6&&(0==r||6==r)||0<=r&&r<=6&&(0==n||6==n)||2<=n&&n<=4&&2<=r&&r<=4?this.modules[e+n][t+r]=!0:this.modules[e+n][t+r]=!1)},getBestMaskPattern:function(){for(var e=0,t=0,n=0;n<8;n++){this.makeImpl(!0,n);var r=c.getLostPoint(this);(0==n||e>r)&&(e=r,t=n)}return t},createMovieClip:function(e,t,n){var r=e.createEmptyMovieClip(t,n);this.make();for(var i=0;i<this.modules.length;i++)for(var o=1*i,s=0;s<this.modules[i].length;s++){var a=1*s;this.modules[i][s]&&(r.beginFill(0,100),r.moveTo(a,o),r.lineTo(a+1,o),r.lineTo(a+1,o+1),r.lineTo(a,o+1),r.endFill())}return r},setupTimingPattern:function(){for(var e=8;e<this.moduleCount-8;e++)null==this.modules[e][6]&&(this.modules[e][6]=e%2==0);for(var t=8;t<this.moduleCount-8;t++)null==this.modules[6][t]&&(this.modules[6][t]=t%2==0)},setupPositionAdjustPattern:function(){for(var e=c.getPatternPosition(this.typeNumber),t=0;t<e.length;t++)for(var n=0;n<e.length;n++){var r=e[t],i=e[n];if(null==this.modules[r][i])for(var o=-2;o<=2;o++)for(var s=-2;s<=2;s++)-2==o||2==o||-2==s||2==s||0==o&&0==s?this.modules[r+o][i+s]=!0:this.modules[r+o][i+s]=!1}},setupTypeNumber:function(e){for(var t=c.getBCHTypeNumber(this.typeNumber),n=0;n<18;n++){var r=!e&&(t>>n&1)==1;this.modules[Math.floor(n/3)][n%3+this.moduleCount-8-3]=r}for(var n=0;n<18;n++){var r=!e&&(t>>n&1)==1;this.modules[n%3+this.moduleCount-8-3][Math.floor(n/3)]=r}},setupTypeInfo:function(e,t){for(var n=this.errorCorrectLevel<<3|t,r=c.getBCHTypeInfo(n),i=0;i<15;i++){var o=!e&&(r>>i&1)==1;i<6?this.modules[i][8]=o:i<8?this.modules[i+1][8]=o:this.modules[this.moduleCount-15+i][8]=o}for(var i=0;i<15;i++){var o=!e&&(r>>i&1)==1;i<8?this.modules[8][this.moduleCount-i-1]=o:i<9?this.modules[8][15-i-1+1]=o:this.modules[8][15-i-1]=o}this.modules[this.moduleCount-8][8]=!e},mapData:function(e,t){for(var n=-1,r=this.moduleCount-1,i=7,o=0,s=this.moduleCount-1;s>0;s-=2)for(6==s&&s--;;){for(var a=0;a<2;a++)if(null==this.modules[r][s-a]){var l=!1;o<e.length&&(l=(e[o]>>>i&1)==1),c.getMask(t,r,s-a)&&(l=!l),this.modules[r][s-a]=l,-1==--i&&(o++,i=7)}if((r+=n)<0||this.moduleCount<=r){r-=n,n=-n;break}}}},i.PAD0=236,i.PAD1=17,i.createData=function(e,t,n){for(var r=h.getRSBlocks(e,t),o=new f,s=0;s<n.length;s++){var a=n[s];o.put(a.mode,4),o.put(a.getLength(),c.getLengthInBits(a.mode,e)),a.write(o)}for(var l=0,s=0;s<r.length;s++)l+=r[s].dataCount;if(o.getLengthInBits()>8*l)throw Error("code length overflow. ("+o.getLengthInBits()+">"+8*l+")");for(o.getLengthInBits()+4<=8*l&&o.put(0,4);o.getLengthInBits()%8!=0;)o.putBit(!1);for(;!(o.getLengthInBits()>=8*l)&&(o.put(i.PAD0,8),!(o.getLengthInBits()>=8*l));)o.put(i.PAD1,8);return i.createBytes(o,r)},i.createBytes=function(e,t){for(var n=0,r=0,i=0,o=Array(t.length),s=Array(t.length),a=0;a<t.length;a++){var l=t[a].dataCount,u=t[a].totalCount-l;r=Math.max(r,l),i=Math.max(i,u),o[a]=Array(l);for(var h=0;h<o[a].length;h++)o[a][h]=255&e.buffer[h+n];n+=l;var f=c.getErrorCorrectPolynomial(u),p=new d(o[a],f.getLength()-1).mod(f);s[a]=Array(f.getLength()-1);for(var h=0;h<s[a].length;h++){var m=h+p.getLength()-s[a].length;s[a][h]=m>=0?p.get(m):0}}for(var g=0,h=0;h<t.length;h++)g+=t[h].totalCount;for(var v=Array(g),y=0,h=0;h<r;h++)for(var a=0;a<t.length;a++)h<o[a].length&&(v[y++]=o[a][h]);for(var h=0;h<i;h++)for(var a=0;a<t.length;a++)h<s[a].length&&(v[y++]=s[a][h]);return v};for(var o={MODE_NUMBER:1,MODE_ALPHA_NUM:2,MODE_8BIT_BYTE:4,MODE_KANJI:8},s={L:1,M:0,Q:3,H:2},a={PATTERN000:0,PATTERN001:1,PATTERN010:2,PATTERN011:3,PATTERN100:4,PATTERN101:5,PATTERN110:6,PATTERN111:7},c={PATTERN_POSITION_TABLE:[[],[6,18],[6,22],[6,26],[6,30],[6,34],[6,22,38],[6,24,42],[6,26,46],[6,28,50],[6,30,54],[6,32,58],[6,34,62],[6,26,46,66],[6,26,48,70],[6,26,50,74],[6,30,54,78],[6,30,56,82],[6,30,58,86],[6,34,62,90],[6,28,50,72,94],[6,26,50,74,98],[6,30,54,78,102],[6,28,54,80,106],[6,32,58,84,110],[6,30,58,86,114],[6,34,62,90,118],[6,26,50,74,98,122],[6,30,54,78,102,126],[6,26,52,78,104,130],[6,30,56,82,108,134],[6,34,60,86,112,138],[6,30,58,86,114,142],[6,34,62,90,118,146],[6,30,54,78,102,126,150],[6,24,50,76,102,128,154],[6,28,54,80,106,132,158],[6,32,58,84,110,136,162],[6,26,54,82,110,138,166],[6,30,58,86,114,142,170]],G15:1335,G18:7973,G15_MASK:21522,getBCHTypeInfo:function(e){for(var t=e<<10;c.getBCHDigit(t)-c.getBCHDigit(c.G15)>=0;)t^=c.G15<<c.getBCHDigit(t)-c.getBCHDigit(c.G15);return(e<<10|t)^c.G15_MASK},getBCHTypeNumber:function(e){for(var t=e<<12;c.getBCHDigit(t)-c.getBCHDigit(c.G18)>=0;)t^=c.G18<<c.getBCHDigit(t)-c.getBCHDigit(c.G18);return e<<12|t},getBCHDigit:function(e){for(var t=0;0!=e;)t++,e>>>=1;return t},getPatternPosition:function(e){return c.PATTERN_POSITION_TABLE[e-1]},getMask:function(e,t,n){switch(e){case a.PATTERN000:return(t+n)%2==0;case a.PATTERN001:return t%2==0;case a.PATTERN010:return n%3==0;case a.PATTERN011:return(t+n)%3==0;case a.PATTERN100:return(Math.floor(t/2)+Math.floor(n/3))%2==0;case a.PATTERN101:return t*n%2+t*n%3==0;case a.PATTERN110:return(t*n%2+t*n%3)%2==0;case a.PATTERN111:return(t*n%3+(t+n)%2)%2==0;default:throw Error("bad maskPattern:"+e)}},getErrorCorrectPolynomial:function(e){for(var t=new d([1],0),n=0;n<e;n++)t=t.multiply(new d([1,l.gexp(n)],0));return t},getLengthInBits:function(e,t){if(1<=t&&t<10)switch(e){case o.MODE_NUMBER:return 10;case o.MODE_ALPHA_NUM:return 9;case o.MODE_8BIT_BYTE:case o.MODE_KANJI:return 8;default:throw Error("mode:"+e)}else if(t<27)switch(e){case o.MODE_NUMBER:return 12;case o.MODE_ALPHA_NUM:return 11;case o.MODE_8BIT_BYTE:return 16;case o.MODE_KANJI:return 10;default:throw Error("mode:"+e)}else if(t<41)switch(e){case o.MODE_NUMBER:return 14;case o.MODE_ALPHA_NUM:return 13;case o.MODE_8BIT_BYTE:return 16;case o.MODE_KANJI:return 12;default:throw Error("mode:"+e)}else throw Error("type:"+t)},getLostPoint:function(e){for(var t=e.getModuleCount(),n=0,r=0;r<t;r++)for(var i=0;i<t;i++){for(var o=0,s=e.isDark(r,i),a=-1;a<=1;a++)if(!(r+a<0)&&!(t<=r+a))for(var c=-1;c<=1;c++)!(i+c<0)&&!(t<=i+c)&&(0!=a||0!=c)&&s==e.isDark(r+a,i+c)&&o++;o>5&&(n+=3+o-5)}for(var r=0;r<t-1;r++)for(var i=0;i<t-1;i++){var l=0;e.isDark(r,i)&&l++,e.isDark(r+1,i)&&l++,e.isDark(r,i+1)&&l++,e.isDark(r+1,i+1)&&l++,(0==l||4==l)&&(n+=3)}for(var r=0;r<t;r++)for(var i=0;i<t-6;i++)e.isDark(r,i)&&!e.isDark(r,i+1)&&e.isDark(r,i+2)&&e.isDark(r,i+3)&&e.isDark(r,i+4)&&!e.isDark(r,i+5)&&e.isDark(r,i+6)&&(n+=40);for(var i=0;i<t;i++)for(var r=0;r<t-6;r++)e.isDark(r,i)&&!e.isDark(r+1,i)&&e.isDark(r+2,i)&&e.isDark(r+3,i)&&e.isDark(r+4,i)&&!e.isDark(r+5,i)&&e.isDark(r+6,i)&&(n+=40);for(var u=0,i=0;i<t;i++)for(var r=0;r<t;r++)e.isDark(r,i)&&u++;return n+Math.abs(100*u/t/t-50)/5*10}},l={glog:function(e){if(e<1)throw Error("glog("+e+")");return l.LOG_TABLE[e]},gexp:function(e){for(;e<0;)e+=255;for(;e>=256;)e-=255;return l.EXP_TABLE[e]},EXP_TABLE:Array(256),LOG_TABLE:Array(256)},u=0;u<8;u++)l.EXP_TABLE[u]=1<<u;for(var u=8;u<256;u++)l.EXP_TABLE[u]=l.EXP_TABLE[u-4]^l.EXP_TABLE[u-5]^l.EXP_TABLE[u-6]^l.EXP_TABLE[u-8];for(var u=0;u<255;u++)l.LOG_TABLE[l.EXP_TABLE[u]]=u;function d(e,t){if(void 0==e.length)throw Error(e.length+"/"+t);for(var n=0;n<e.length&&0==e[n];)n++;this.num=Array(e.length-n+t);for(var r=0;r<e.length-n;r++)this.num[r]=e[r+n]}function h(e,t){this.totalCount=e,this.dataCount=t}function f(){this.buffer=[],this.length=0}d.prototype={get:function(e){return this.num[e]},getLength:function(){return this.num.length},multiply:function(e){for(var t=Array(this.getLength()+e.getLength()-1),n=0;n<this.getLength();n++)for(var r=0;r<e.getLength();r++)t[n+r]^=l.gexp(l.glog(this.get(n))+l.glog(e.get(r)));return new d(t,0)},mod:function(e){if(this.getLength()-e.getLength()<0)return this;for(var t=l.glog(this.get(0))-l.glog(e.get(0)),n=Array(this.getLength()),r=0;r<this.getLength();r++)n[r]=this.get(r);for(var r=0;r<e.getLength();r++)n[r]^=l.gexp(l.glog(e.get(r))+t);return new d(n,0).mod(e)}},h.RS_BLOCK_TABLE=[[1,26,19],[1,26,16],[1,26,13],[1,26,9],[1,44,34],[1,44,28],[1,44,22],[1,44,16],[1,70,55],[1,70,44],[2,35,17],[2,35,13],[1,100,80],[2,50,32],[2,50,24],[4,25,9],[1,134,108],[2,67,43],[2,33,15,2,34,16],[2,33,11,2,34,12],[2,86,68],[4,43,27],[4,43,19],[4,43,15],[2,98,78],[4,49,31],[2,32,14,4,33,15],[4,39,13,1,40,14],[2,121,97],[2,60,38,2,61,39],[4,40,18,2,41,19],[4,40,14,2,41,15],[2,146,116],[3,58,36,2,59,37],[4,36,16,4,37,17],[4,36,12,4,37,13],[2,86,68,2,87,69],[4,69,43,1,70,44],[6,43,19,2,44,20],[6,43,15,2,44,16],[4,101,81],[1,80,50,4,81,51],[4,50,22,4,51,23],[3,36,12,8,37,13],[2,116,92,2,117,93],[6,58,36,2,59,37],[4,46,20,6,47,21],[7,42,14,4,43,15],[4,133,107],[8,59,37,1,60,38],[8,44,20,4,45,21],[12,33,11,4,34,12],[3,145,115,1,146,116],[4,64,40,5,65,41],[11,36,16,5,37,17],[11,36,12,5,37,13],[5,109,87,1,110,88],[5,65,41,5,66,42],[5,54,24,7,55,25],[11,36,12],[5,122,98,1,123,99],[7,73,45,3,74,46],[15,43,19,2,44,20],[3,45,15,13,46,16],[1,135,107,5,136,108],[10,74,46,1,75,47],[1,50,22,15,51,23],[2,42,14,17,43,15],[5,150,120,1,151,121],[9,69,43,4,70,44],[17,50,22,1,51,23],[2,42,14,19,43,15],[3,141,113,4,142,114],[3,70,44,11,71,45],[17,47,21,4,48,22],[9,39,13,16,40,14],[3,135,107,5,136,108],[3,67,41,13,68,42],[15,54,24,5,55,25],[15,43,15,10,44,16],[4,144,116,4,145,117],[17,68,42],[17,50,22,6,51,23],[19,46,16,6,47,17],[2,139,111,7,140,112],[17,74,46],[7,54,24,16,55,25],[34,37,13],[4,151,121,5,152,122],[4,75,47,14,76,48],[11,54,24,14,55,25],[16,45,15,14,46,16],[6,147,117,4,148,118],[6,73,45,14,74,46],[11,54,24,16,55,25],[30,46,16,2,47,17],[8,132,106,4,133,107],[8,75,47,13,76,48],[7,54,24,22,55,25],[22,45,15,13,46,16],[10,142,114,2,143,115],[19,74,46,4,75,47],[28,50,22,6,51,23],[33,46,16,4,47,17],[8,152,122,4,153,123],[22,73,45,3,74,46],[8,53,23,26,54,24],[12,45,15,28,46,16],[3,147,117,10,148,118],[3,73,45,23,74,46],[4,54,24,31,55,25],[11,45,15,31,46,16],[7,146,116,7,147,117],[21,73,45,7,74,46],[1,53,23,37,54,24],[19,45,15,26,46,16],[5,145,115,10,146,116],[19,75,47,10,76,48],[15,54,24,25,55,25],[23,45,15,25,46,16],[13,145,115,3,146,116],[2,74,46,29,75,47],[42,54,24,1,55,25],[23,45,15,28,46,16],[17,145,115],[10,74,46,23,75,47],[10,54,24,35,55,25],[19,45,15,35,46,16],[17,145,115,1,146,116],[14,74,46,21,75,47],[29,54,24,19,55,25],[11,45,15,46,46,16],[13,145,115,6,146,116],[14,74,46,23,75,47],[44,54,24,7,55,25],[59,46,16,1,47,17],[12,151,121,7,152,122],[12,75,47,26,76,48],[39,54,24,14,55,25],[22,45,15,41,46,16],[6,151,121,14,152,122],[6,75,47,34,76,48],[46,54,24,10,55,25],[2,45,15,64,46,16],[17,152,122,4,153,123],[29,74,46,14,75,47],[49,54,24,10,55,25],[24,45,15,46,46,16],[4,152,122,18,153,123],[13,74,46,32,75,47],[48,54,24,14,55,25],[42,45,15,32,46,16],[20,147,117,4,148,118],[40,75,47,7,76,48],[43,54,24,22,55,25],[10,45,15,67,46,16],[19,148,118,6,149,119],[18,75,47,31,76,48],[34,54,24,34,55,25],[20,45,15,61,46,16]],h.getRSBlocks=function(e,t){var n=h.getRsBlockTable(e,t);if(void 0==n)throw Error("bad rs block @ typeNumber:"+e+"/errorCorrectLevel:"+t);for(var r=n.length/3,i=[],o=0;o<r;o++)for(var s=n[3*o+0],a=n[3*o+1],c=n[3*o+2],l=0;l<s;l++)i.push(new h(a,c));return i},h.getRsBlockTable=function(e,t){switch(t){case s.L:return h.RS_BLOCK_TABLE[(e-1)*4+0];case s.M:return h.RS_BLOCK_TABLE[(e-1)*4+1];case s.Q:return h.RS_BLOCK_TABLE[(e-1)*4+2];case s.H:return h.RS_BLOCK_TABLE[(e-1)*4+3];default:return}},f.prototype={get:function(e){return(this.buffer[Math.floor(e/8)]>>>7-e%8&1)==1},put:function(e,t){for(var n=0;n<t;n++)this.putBit((e>>>t-n-1&1)==1)},getLengthInBits:function(){return this.length},putBit:function(e){var t=Math.floor(this.length/8);this.buffer.length<=t&&this.buffer.push(0),e&&(this.buffer[t]|=128>>>this.length%8),this.length++}};var p=[[17,14,11,7],[32,26,20,14],[53,42,32,24],[78,62,46,34],[106,84,60,44],[134,106,74,58],[154,122,86,64],[192,152,108,84],[230,180,130,98],[271,213,151,119],[321,251,177,137],[367,287,203,155],[425,331,241,177],[458,362,258,194],[520,412,292,220],[586,450,322,250],[644,504,364,280],[718,560,394,310],[792,624,442,338],[858,666,482,382],[929,711,509,403],[1003,779,565,439],[1091,857,611,461],[1171,911,661,511],[1273,997,715,535],[1367,1059,751,593],[1465,1125,805,625],[1528,1190,868,658],[1628,1264,908,698],[1732,1370,982,742],[1840,1452,1030,790],[1952,1538,1112,842],[2068,1628,1168,898],[2188,1722,1228,958],[2303,1809,1283,983],[2431,1911,1351,1051],[2563,1989,1423,1093],[2699,2099,1499,1139],[2809,2213,1579,1219],[2953,2331,1663,1273]];function m(e){if(this.options={padding:4,width:256,height:256,typeNumber:4,color:"#000000",background:"#ffffff",ecl:"M"},"string"==typeof e&&(e={content:e}),e)for(var t in e)this.options[t]=e[t];if("string"!=typeof this.options.content)throw Error("Expected 'content' as string!");if(0===this.options.content.length)throw Error("Expected 'content' to be non-empty!");if(!(this.options.padding>=0))throw Error("Expected 'padding' value to be non-negative!");if(!(this.options.width>0)||!(this.options.height>0))throw Error("Expected 'width' or 'height' value to be higher than zero!");var n=this.options.content,r=function(e,t){for(var n,r=(n=encodeURI(e).toString().replace(/\%[0-9a-fA-F]{2}/g,"a")).length+(n.length!=e?3:0),i=1,o=0,s=0,a=p.length;s<=a;s++){var c=p[s];if(!c)throw Error("Content too long: expected "+o+" but got "+r);switch(t){case"L":o=c[0];break;case"M":o=c[1];break;case"Q":o=c[2];break;case"H":o=c[3];break;default:throw Error("Unknwon error correction level: "+t)}if(r<=o)break;i++}if(i>p.length)throw Error("Content too long");return i}(n,this.options.ecl),o=function(e){switch(e){case"L":return s.L;case"M":return s.M;case"Q":return s.Q;case"H":return s.H;default:throw Error("Unknwon error correction level: "+e)}}(this.options.ecl);this.qrcode=new i(r,o),this.qrcode.addData(n),this.qrcode.make()}m.prototype.svg=function(e){var t=this.options||{},n=this.qrcode.modules;void 0===e&&(e={container:t.container||"svg"});for(var r=void 0===t.pretty||!!t.pretty,i=r?"  ":"",o=r?"\r\n":"",s=t.width,a=t.height,c=n.length,l=s/(c+2*t.padding),u=a/(c+2*t.padding),d=void 0!==t.join&&!!t.join,h=void 0!==t.swap&&!!t.swap,f=void 0===t.xmlDeclaration||!!t.xmlDeclaration,p=void 0!==t.predefined&&!!t.predefined,m=p?i+'<defs><path id="qrmodule" d="M0 0 h'+u+" v"+l+' H0 z" style="fill:'+t.color+';shape-rendering:crispEdges;" /></defs>'+o:"",g=i+'<rect x="0" y="0" width="'+s+'" height="'+a+'" style="fill:'+t.background+';shape-rendering:crispEdges;"/>'+o,v="",y="",E=0;E<c;E++)for(var b=0;b<c;b++)if(n[b][E]){var w=b*l+t.padding*l,T=E*u+t.padding*u;if(h){var _=w;w=T,T=_}if(d){var A=l+w,R=u+T;w=Number.isInteger(w)?Number(w):w.toFixed(2),T=Number.isInteger(T)?Number(T):T.toFixed(2),A=Number.isInteger(A)?Number(A):A.toFixed(2),y+="M"+w+","+T+" V"+(R=Number.isInteger(R)?Number(R):R.toFixed(2))+" H"+A+" V"+T+" H"+w+" Z "}else p?v+=i+'<use x="'+w.toString()+'" y="'+T.toString()+'" href="#qrmodule" />'+o:v+=i+'<rect x="'+w.toString()+'" y="'+T.toString()+'" width="'+l+'" height="'+u+'" style="fill:'+t.color+';shape-rendering:crispEdges;"/>'+o}d&&(v=i+'<path x="0" y="0" style="fill:'+t.color+';shape-rendering:crispEdges;" d="'+y+'" />');var S="";switch(e.container){case"svg":f&&(S+='<?xml version="1.0" standalone="yes"?>'+o),S+='<svg xmlns="http://www.w3.org/2000/svg" version="1.1" width="'+s+'" height="'+a+'">'+o+(m+g+v)+"</svg>";break;case"svg-viewbox":f&&(S+='<?xml version="1.0" standalone="yes"?>'+o),S+='<svg xmlns="http://www.w3.org/2000/svg" version="1.1" viewBox="0 0 '+s+" "+a+'">'+o+(m+g+v)+"</svg>";break;case"g":S+='<g width="'+s+'" height="'+a+'">'+o+(m+g+v)+"</g>";break;default:S+=(m+g+v).replace(/^\s+/,"")}return S},m.prototype.save=function(e,t){var r=this.svg();"function"!=typeof t&&(t=function(e,t){});try{n(69951).writeFile(e,r,t)}catch(e){t(e)}},e.exports=m},31379:function(e,t,n){"use strict";n.d(t,{X:function(){return i}});var r=n(69703),i=function(e){function t(t){var n=e.call(this)||this;return n._value=t,n}return(0,r.__extends)(t,e),Object.defineProperty(t.prototype,"value",{get:function(){return this.getValue()},enumerable:!1,configurable:!0}),t.prototype._subscribe=function(t){var n=e.prototype._subscribe.call(this,t);return n.closed||t.next(this._value),n},t.prototype.getValue=function(){var e=this.hasError,t=this.thrownError,n=this._value;if(e)throw t;return this._throwIfClosed(),n},t.prototype.next=function(t){e.prototype.next.call(this,this._value=t)},t}(n(91179).x)},6216:function(e,t,n){"use strict";n.d(t,{y:function(){return u}});var r=n(31994),i=n(43122),o=n(23027),s=n(39638),a=n(78534),c=n(40366),l=n(70057),u=function(){function e(e){e&&(this._subscribe=e)}return e.prototype.lift=function(t){var n=new e;return n.source=this,n.operator=t,n},e.prototype.subscribe=function(e,t,n){var o,s=this,a=(o=e)&&o instanceof r.Lv||o&&(0,c.m)(o.next)&&(0,c.m)(o.error)&&(0,c.m)(o.complete)&&(0,i.Nn)(o)?e:new r.Hp(e,t,n);return(0,l.x)(function(){var e=s.operator,t=s.source;a.add(e?e.call(a,t):t?s._subscribe(a):s._trySubscribe(a))}),a},e.prototype._trySubscribe=function(e){try{return this._subscribe(e)}catch(t){e.error(t)}},e.prototype.forEach=function(e,t){var n=this;return new(t=d(t))(function(t,i){var o=new r.Hp({next:function(t){try{e(t)}catch(e){i(e),o.unsubscribe()}},error:i,complete:t});n.subscribe(o)})},e.prototype._subscribe=function(e){var t;return null===(t=this.source)||void 0===t?void 0:t.subscribe(e)},e.prototype[o.L]=function(){return this},e.prototype.pipe=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return(0===e.length?s.y:1===e.length?e[0]:function(t){return e.reduce(function(e,t){return t(e)},t)})(this)},e.prototype.toPromise=function(e){var t=this;return new(e=d(e))(function(e,n){var r;t.subscribe(function(e){return r=e},function(e){return n(e)},function(){return e(r)})})},e.create=function(t){return new e(t)},e}();function d(e){var t;return null!==(t=null!=e?e:a.v.Promise)&&void 0!==t?t:Promise}},88137:function(e,t,n){"use strict";n.d(t,{t:function(){return s}});var r=n(69703),i=n(91179),o=n(39639),s=function(e){function t(t,n,r){void 0===t&&(t=1/0),void 0===n&&(n=1/0),void 0===r&&(r=o.l);var i=e.call(this)||this;return i._bufferSize=t,i._windowTime=n,i._timestampProvider=r,i._buffer=[],i._infiniteTimeWindow=!0,i._infiniteTimeWindow=n===1/0,i._bufferSize=Math.max(1,t),i._windowTime=Math.max(1,n),i}return(0,r.__extends)(t,e),t.prototype.next=function(t){var n=this.isStopped,r=this._buffer,i=this._infiniteTimeWindow,o=this._timestampProvider,s=this._windowTime;!n&&(r.push(t),i||r.push(o.now()+s)),this._trimBuffer(),e.prototype.next.call(this,t)},t.prototype._subscribe=function(e){this._throwIfClosed(),this._trimBuffer();for(var t=this._innerSubscribe(e),n=this._infiniteTimeWindow,r=this._buffer.slice(),i=0;i<r.length&&!e.closed;i+=n?1:2)e.next(r[i]);return this._checkFinalizedStatuses(e),t},t.prototype._trimBuffer=function(){var e=this._bufferSize,t=this._timestampProvider,n=this._buffer,r=this._infiniteTimeWindow,i=(r?1:2)*e;if(e<1/0&&i<n.length&&n.splice(0,n.length-i),!r){for(var o=t.now(),s=0,a=1;a<n.length&&n[a]<=o;a+=2)s=a;s&&n.splice(0,s+1)}},t}(i.x)},91179:function(e,t,n){"use strict";n.d(t,{x:function(){return l}});var r=n(69703),i=n(6216),o=n(43122),s=(0,n(44514).d)(function(e){return function(){e(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"}}),a=n(56833),c=n(70057),l=function(e){function t(){var t=e.call(this)||this;return t.closed=!1,t.currentObservers=null,t.observers=[],t.isStopped=!1,t.hasError=!1,t.thrownError=null,t}return(0,r.__extends)(t,e),t.prototype.lift=function(e){var t=new u(this,this);return t.operator=e,t},t.prototype._throwIfClosed=function(){if(this.closed)throw new s},t.prototype.next=function(e){var t=this;(0,c.x)(function(){var n,i;if(t._throwIfClosed(),!t.isStopped){t.currentObservers||(t.currentObservers=Array.from(t.observers));try{for(var o=(0,r.__values)(t.currentObservers),s=o.next();!s.done;s=o.next())s.value.next(e)}catch(e){n={error:e}}finally{try{s&&!s.done&&(i=o.return)&&i.call(o)}finally{if(n)throw n.error}}}})},t.prototype.error=function(e){var t=this;(0,c.x)(function(){if(t._throwIfClosed(),!t.isStopped){t.hasError=t.isStopped=!0,t.thrownError=e;for(var n=t.observers;n.length;)n.shift().error(e)}})},t.prototype.complete=function(){var e=this;(0,c.x)(function(){if(e._throwIfClosed(),!e.isStopped){e.isStopped=!0;for(var t=e.observers;t.length;)t.shift().complete()}})},t.prototype.unsubscribe=function(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null},Object.defineProperty(t.prototype,"observed",{get:function(){var e;return(null===(e=this.observers)||void 0===e?void 0:e.length)>0},enumerable:!1,configurable:!0}),t.prototype._trySubscribe=function(t){return this._throwIfClosed(),e.prototype._trySubscribe.call(this,t)},t.prototype._subscribe=function(e){return this._throwIfClosed(),this._checkFinalizedStatuses(e),this._innerSubscribe(e)},t.prototype._innerSubscribe=function(e){var t=this,n=this.hasError,r=this.isStopped,i=this.observers;return n||r?o.Lc:(this.currentObservers=null,i.push(e),new o.w0(function(){t.currentObservers=null,(0,a.P)(i,e)}))},t.prototype._checkFinalizedStatuses=function(e){var t=this.hasError,n=this.thrownError,r=this.isStopped;t?e.error(n):r&&e.complete()},t.prototype.asObservable=function(){var e=new i.y;return e.source=this,e},t.create=function(e,t){return new u(e,t)},t}(i.y),u=function(e){function t(t,n){var r=e.call(this)||this;return r.destination=t,r.source=n,r}return(0,r.__extends)(t,e),t.prototype.next=function(e){var t,n;null===(n=null===(t=this.destination)||void 0===t?void 0:t.next)||void 0===n||n.call(t,e)},t.prototype.error=function(e){var t,n;null===(n=null===(t=this.destination)||void 0===t?void 0:t.error)||void 0===n||n.call(t,e)},t.prototype.complete=function(){var e,t;null===(t=null===(e=this.destination)||void 0===e?void 0:e.complete)||void 0===t||t.call(e)},t.prototype._subscribe=function(e){var t,n;return null!==(n=null===(t=this.source)||void 0===t?void 0:t.subscribe(e))&&void 0!==n?n:o.Lc},t}(l)},31994:function(e,t,n){"use strict";n.d(t,{Hp:function(){return v},Lv:function(){return f}});var r=n(69703),i=n(40366),o=n(43122),s=n(78534),a=n(30803),c=n(38265),l=u("C",void 0,void 0);function u(e,t,n){return{kind:e,value:t,error:n}}var d=n(4803),h=n(70057),f=function(e){function t(t){var n=e.call(this)||this;return n.isStopped=!1,t?(n.destination=t,(0,o.Nn)(t)&&t.add(n)):n.destination=b,n}return(0,r.__extends)(t,e),t.create=function(e,t,n){return new v(e,t,n)},t.prototype.next=function(e){this.isStopped?E(u("N",e,void 0),this):this._next(e)},t.prototype.error=function(e){this.isStopped?E(u("E",void 0,e),this):(this.isStopped=!0,this._error(e))},t.prototype.complete=function(){this.isStopped?E(l,this):(this.isStopped=!0,this._complete())},t.prototype.unsubscribe=function(){this.closed||(this.isStopped=!0,e.prototype.unsubscribe.call(this),this.destination=null)},t.prototype._next=function(e){this.destination.next(e)},t.prototype._error=function(e){try{this.destination.error(e)}finally{this.unsubscribe()}},t.prototype._complete=function(){try{this.destination.complete()}finally{this.unsubscribe()}},t}(o.w0),p=Function.prototype.bind;function m(e,t){return p.call(e,t)}var g=function(){function e(e){this.partialObserver=e}return e.prototype.next=function(e){var t=this.partialObserver;if(t.next)try{t.next(e)}catch(e){y(e)}},e.prototype.error=function(e){var t=this.partialObserver;if(t.error)try{t.error(e)}catch(e){y(e)}else y(e)},e.prototype.complete=function(){var e=this.partialObserver;if(e.complete)try{e.complete()}catch(e){y(e)}},e}(),v=function(e){function t(t,n,r){var o,a,c=e.call(this)||this;return(0,i.m)(t)||!t?o={next:null!=t?t:void 0,error:null!=n?n:void 0,complete:null!=r?r:void 0}:c&&s.v.useDeprecatedNextContext?((a=Object.create(t)).unsubscribe=function(){return c.unsubscribe()},o={next:t.next&&m(t.next,a),error:t.error&&m(t.error,a),complete:t.complete&&m(t.complete,a)}):o=t,c.destination=new g(o),c}return(0,r.__extends)(t,e),t}(f);function y(e){s.v.useDeprecatedSynchronousErrorHandling?(0,h.O)(e):(0,a.h)(e)}function E(e,t){var n=s.v.onStoppedNotification;n&&d.z.setTimeout(function(){return n(e,t)})}var b={closed:!0,next:c.Z,error:function(e){throw e},complete:c.Z}},43122:function(e,t,n){"use strict";n.d(t,{Lc:function(){return c},w0:function(){return a},Nn:function(){return l}});var r=n(69703),i=n(40366),o=(0,n(44514).d)(function(e){return function(t){e(this),this.message=t?t.length+" errors occurred during unsubscription:\n"+t.map(function(e,t){return t+1+") "+e.toString()}).join("\n  "):"",this.name="UnsubscriptionError",this.errors=t}}),s=n(56833),a=function(){var e;function t(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}return t.prototype.unsubscribe=function(){if(!this.closed){this.closed=!0;var e,t,n,s,a,c=this._parentage;if(c){if(this._parentage=null,Array.isArray(c))try{for(var l=(0,r.__values)(c),d=l.next();!d.done;d=l.next())d.value.remove(this)}catch(t){e={error:t}}finally{try{d&&!d.done&&(t=l.return)&&t.call(l)}finally{if(e)throw e.error}}else c.remove(this)}var h=this.initialTeardown;if((0,i.m)(h))try{h()}catch(e){a=e instanceof o?e.errors:[e]}var f=this._finalizers;if(f){this._finalizers=null;try{for(var p=(0,r.__values)(f),m=p.next();!m.done;m=p.next()){var g=m.value;try{u(g)}catch(e){a=null!=a?a:[],e instanceof o?a=(0,r.__spreadArray)((0,r.__spreadArray)([],(0,r.__read)(a)),(0,r.__read)(e.errors)):a.push(e)}}}catch(e){n={error:e}}finally{try{m&&!m.done&&(s=p.return)&&s.call(p)}finally{if(n)throw n.error}}}if(a)throw new o(a)}},t.prototype.add=function(e){var n;if(e&&e!==this){if(this.closed)u(e);else{if(e instanceof t){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=null!==(n=this._finalizers)&&void 0!==n?n:[]).push(e)}}},t.prototype._hasParent=function(e){var t=this._parentage;return t===e||Array.isArray(t)&&t.includes(e)},t.prototype._addParent=function(e){var t=this._parentage;this._parentage=Array.isArray(t)?(t.push(e),t):t?[t,e]:e},t.prototype._removeParent=function(e){var t=this._parentage;t===e?this._parentage=null:Array.isArray(t)&&(0,s.P)(t,e)},t.prototype.remove=function(e){var n=this._finalizers;n&&(0,s.P)(n,e),e instanceof t&&e._removeParent(this)},t.EMPTY=((e=new t).closed=!0,e),t}(),c=a.EMPTY;function l(e){return e instanceof a||e&&"closed"in e&&(0,i.m)(e.remove)&&(0,i.m)(e.add)&&(0,i.m)(e.unsubscribe)}function u(e){(0,i.m)(e)?e():e.unsubscribe()}},78534:function(e,t,n){"use strict";n.d(t,{v:function(){return r}});var r={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1}},97225:function(e,t,n){"use strict";n.d(t,{a:function(){return g}});var r=n(6216),i=Array.isArray,o=Object.getPrototypeOf,s=Object.prototype,a=Object.keys,c=n(24451),l=n(39638),u=n(69703),d=n(33627),h=Array.isArray,f=n(90714),p=n(33112),m=n(53605);function g(){for(var e,t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];var m=(0,f.yG)(t),g=(0,f.jO)(t),y=function(e){if(1===e.length){var t=e[0];if(i(t))return{args:t,keys:null};if(t&&"object"==typeof t&&o(t)===s){var n=a(t);return{args:n.map(function(e){return t[e]}),keys:n}}}return{args:e,keys:null}}(t),E=y.args,b=y.keys;if(0===E.length)return(0,c.D)([],m);var w=new r.y((void 0===(e=b?function(e){return b.reduce(function(t,n,r){return t[n]=e[r],t},{})}:l.y)&&(e=l.y),function(t){v(m,function(){for(var n=E.length,r=Array(n),i=n,o=n,s=function(n){v(m,function(){var s=(0,c.D)(E[n],m),a=!1;s.subscribe((0,p.x)(t,function(i){r[n]=i,!a&&(a=!0,o--),o||t.next(e(r.slice()))},function(){--i||t.complete()}))},t)},a=0;a<n;a++)s(a)},t)}));return g?w.pipe((0,d.U)(function(e){return h(e)?g.apply(void 0,(0,u.__spreadArray)([],(0,u.__read)(e))):g(e)})):w}function v(e,t,n){e?(0,m.f)(n,e,t):t()}},17788:function(e,t,n){"use strict";n.d(t,{z:function(){return a}});var r=n(73743),i=n(39638),o=n(90714),s=n(24451);function a(){for(var e,t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return(void 0===(e=1)&&(e=1/0),(0,r.z)(i.y,e))((0,s.D)(t,(0,o.yG)(t)))}},81092:function(e,t,n){"use strict";n.d(t,{P:function(){return o}});var r=n(6216),i=n(74357);function o(e){return new r.y(function(t){(0,i.Xf)(e()).subscribe(t)})}},29818:function(e,t,n){"use strict";n.d(t,{E:function(){return r}});var r=new(n(6216)).y(function(e){return e.complete()})},24451:function(e,t,n){"use strict";n.d(t,{D:function(){return b}});var r=n(74357),i=n(53605),o=n(43051),s=n(33112);function a(e,t){return void 0===t&&(t=0),(0,o.e)(function(n,r){n.subscribe((0,s.x)(r,function(n){return(0,i.f)(r,e,function(){return r.next(n)},t)},function(){return(0,i.f)(r,e,function(){return r.complete()},t)},function(n){return(0,i.f)(r,e,function(){return r.error(n)},t)}))})}function c(e,t){return void 0===t&&(t=0),(0,o.e)(function(n,r){r.add(e.schedule(function(){return n.subscribe(r)},t))})}var l=n(6216),u=n(86398),d=n(40366);function h(e,t){if(!e)throw Error("Iterable cannot be null");return new l.y(function(n){(0,i.f)(n,t,function(){var r=e[Symbol.asyncIterator]();(0,i.f)(n,t,function(){r.next().then(function(e){e.done?n.complete():n.next(e.value)})},0,!0)})})}var f=n(9161),p=n(22073),m=n(29400),g=n(63624),v=n(56196),y=n(5644),E=n(23321);function b(e,t){return t?function(e,t){if(null!=e){if((0,f.c)(e))return(0,r.Xf)(e).pipe(c(t),a(t));if((0,m.z)(e))return new l.y(function(n){var r=0;return t.schedule(function(){r===e.length?n.complete():(n.next(e[r++]),n.closed||this.schedule())})});if((0,p.t)(e))return(0,r.Xf)(e).pipe(c(t),a(t));if((0,v.D)(e))return h(e,t);if((0,g.T)(e))return new l.y(function(n){var r;return(0,i.f)(n,t,function(){r=e[u.h](),(0,i.f)(n,t,function(){var e,t,i;try{t=(e=r.next()).value,i=e.done}catch(e){n.error(e);return}i?n.complete():n.next(t)},0,!0)}),function(){return(0,d.m)(null==r?void 0:r.return)&&r.return()}});if((0,E.L)(e))return h((0,E.Q)(e),t)}throw(0,y.z)(e)}(e,t):(0,r.Xf)(e)}},74357:function(e,t,n){"use strict";n.d(t,{Xf:function(){return m}});var r=n(69703),i=n(29400),o=n(22073),s=n(6216),a=n(9161),c=n(56196),l=n(5644),u=n(63624),d=n(23321),h=n(40366),f=n(30803),p=n(23027);function m(e){if(e instanceof s.y)return e;if(null!=e){if((0,a.c)(e))return new s.y(function(t){var n=e[p.L]();if((0,h.m)(n.subscribe))return n.subscribe(t);throw TypeError("Provided object does not correctly implement Symbol.observable")});if((0,i.z)(e))return new s.y(function(t){for(var n=0;n<e.length&&!t.closed;n++)t.next(e[n]);t.complete()});if((0,o.t)(e))return new s.y(function(t){e.then(function(e){t.closed||(t.next(e),t.complete())},function(e){return t.error(e)}).then(null,f.h)});if((0,c.D)(e))return g(e);if((0,u.T)(e))return new s.y(function(t){var n,i;try{for(var o=(0,r.__values)(e),s=o.next();!s.done;s=o.next()){var a=s.value;if(t.next(a),t.closed)return}}catch(e){n={error:e}}finally{try{s&&!s.done&&(i=o.return)&&i.call(o)}finally{if(n)throw n.error}}t.complete()});if((0,d.L)(e))return g((0,d.Q)(e))}throw(0,l.z)(e)}function g(e){return new s.y(function(t){(function(e,t){var n,i,o,s;return(0,r.__awaiter)(this,void 0,void 0,function(){var a;return(0,r.__generator)(this,function(c){switch(c.label){case 0:c.trys.push([0,5,6,11]),n=(0,r.__asyncValues)(e),c.label=1;case 1:return[4,n.next()];case 2:if((i=c.sent()).done)return[3,4];if(a=i.value,t.next(a),t.closed)return[2];c.label=3;case 3:return[3,1];case 4:return[3,11];case 5:return o={error:c.sent()},[3,11];case 6:if(c.trys.push([6,,9,10]),!(i&&!i.done&&(s=n.return)))return[3,8];return[4,s.call(n)];case 7:c.sent(),c.label=8;case 8:return[3,10];case 9:if(o)throw o.error;return[7];case 10:return[7];case 11:return t.complete(),[2]}})})})(e,t).catch(function(e){return t.error(e)})})}},63791:function(e,t,n){"use strict";n.d(t,{C:function(){return o}});var r=n(6216),i=n(38265),o=new r.y(i.Z)},37808:function(e,t,n){"use strict";n.d(t,{of:function(){return o}});var r=n(90714),i=n(24451);function o(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=(0,r.yG)(e);return(0,i.D)(e,n)}},1458:function(e,t,n){"use strict";n.d(t,{w:function(){return o}});var r=n(6216),i=n(29818);function o(e,t,n){if(null==t&&(t=e,e=0),t<=0)return i.E;var o=t+e;return new r.y(n?function(t){var r=e;return n.schedule(function(){r<o?(t.next(r++),this.schedule()):t.complete()})}:function(t){for(var n=e;n<o&&!t.closed;)t.next(n++);t.complete()})}},81014:function(e,t,n){"use strict";n.d(t,{_:function(){return o}});var r=n(6216),i=n(40366);function o(e,t){var n=(0,i.m)(e)?e:function(){return e},o=function(e){return e.error(n())};return new r.y(t?function(e){return t.schedule(o,0,e)}:o)}},72467:function(e,t,n){"use strict";n.d(t,{H:function(){return a}});var r=n(6216),i=n(25043),o=n(73768),s=n(74677);function a(e,t,n){void 0===e&&(e=0),void 0===n&&(n=i.P);var a=-1;return null!=t&&((0,o.K)(t)?n=t:a=t),new r.y(function(t){var r=(0,s.q)(e)?+e-n.now():e;r<0&&(r=0);var i=0;return n.schedule(function(){t.closed||(t.next(i++),0<=a?this.schedule(void 0,a):t.complete())},r)})}},33112:function(e,t,n){"use strict";n.d(t,{x:function(){return i}});var r=n(69703);function i(e,t,n,r,i){return new o(e,t,n,r,i)}var o=function(e){function t(t,n,r,i,o,s){var a=e.call(this,t)||this;return a.onFinalize=o,a.shouldUnsubscribe=s,a._next=n?function(e){try{n(e)}catch(e){t.error(e)}}:e.prototype._next,a._error=i?function(e){try{i(e)}catch(e){t.error(e)}finally{this.unsubscribe()}}:e.prototype._error,a._complete=r?function(){try{r()}catch(e){t.error(e)}finally{this.unsubscribe()}}:e.prototype._complete,a}return(0,r.__extends)(t,e),t.prototype.unsubscribe=function(){var t;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){var n=this.closed;e.prototype.unsubscribe.call(this),n||null===(t=this.onFinalize)||void 0===t||t.call(this)}},t}(n(31994).Lv)},68074:function(e,t,n){"use strict";n.d(t,{K:function(){return function e(t){return(0,o.e)(function(n,o){var s,a=null,c=!1;a=n.subscribe((0,i.x)(o,void 0,void 0,function(i){s=(0,r.Xf)(t(i,e(t)(n))),a?(a.unsubscribe(),a=null,s.subscribe(o)):c=!0})),c&&(a.unsubscribe(),a=null,s.subscribe(o))})}}});var r=n(74357),i=n(33112),o=n(43051)},74294:function(e,t,n){"use strict";n.d(t,{b:function(){return o}});var r=n(73743),i=n(40366);function o(e,t){return(0,i.m)(t)?(0,r.z)(e,t,1):(0,r.z)(e,1)}},45698:function(e,t,n){"use strict";n.d(t,{x:function(){return s}});var r=n(39638),i=n(43051),o=n(33112);function s(e,t){return void 0===t&&(t=r.y),e=null!=e?e:a,(0,i.e)(function(n,r){var i,s=!0;n.subscribe((0,o.x)(r,function(n){var o=t(n);(s||!e(i,o))&&(s=!1,i=o,r.next(n))}))})}function a(e,t){return e===t}},81571:function(e,t,n){"use strict";n.d(t,{g:function(){return i}});var r=n(45698);function i(e,t){return(0,r.x)(function(n,r){return t?t(n[e],r[e]):n[e]===r[e]})}},47647:function(e,t,n){"use strict";n.d(t,{l:function(){return s}});var r=n(69703),i=n(17788),o=n(37808);function s(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return function(t){return(0,i.z)(t,o.of.apply(void 0,(0,r.__spreadArray)([],(0,r.__read)(e))))}}},96141:function(e,t,n){"use strict";n.d(t,{h:function(){return o}});var r=n(43051),i=n(33112);function o(e,t){return(0,r.e)(function(n,r){var o=0;n.subscribe((0,i.x)(r,function(n){return e.call(t,n,o++)&&r.next(n)}))})}},48614:function(e,t,n){"use strict";n.d(t,{P:function(){return c}});var r=(0,n(44514).d)(function(e){return function(){e(this),this.name="EmptyError",this.message="no elements in sequence"}}),i=n(96141),o=(n(29818),n(43051)),s=n(33112),a=n(39638);function c(e,t){var n=arguments.length>=2;return function(c){return c.pipe(e?(0,i.h)(function(t,n){return e(t,n,c)}):a.y,(0,o.e)(function(e,t){var n=0;e.subscribe((0,s.x)(t,function(e){++n<=1&&(t.next(e),1<=n&&t.complete())}))}),n?(0,o.e)(function(e,n){var r=!1;e.subscribe((0,s.x)(n,function(e){r=!0,n.next(e)},function(){r||n.next(t),n.complete()}))}):(0,o.e)(function(e,t){var n=!1;e.subscribe((0,s.x)(t,function(e){n=!0,t.next(e)},function(){return n?t.complete():t.error(new r)}))}))}}},33627:function(e,t,n){"use strict";n.d(t,{U:function(){return o}});var r=n(43051),i=n(33112);function o(e,t){return(0,r.e)(function(n,r){var o=0;n.subscribe((0,i.x)(r,function(n){r.next(e.call(t,n,o++))}))})}},73743:function(e,t,n){"use strict";n.d(t,{z:function(){return function e(t,n,l){return(void 0===l&&(l=1/0),(0,c.m)(n))?e(function(e,o){return(0,r.U)(function(t,r){return n(e,t,o,r)})((0,i.Xf)(t(e,o)))},l):("number"==typeof n&&(l=n),(0,o.e)(function(e,n){var r,o,c,u,d,h,f,p,m,g,v,y;return r=l,h=[],f=0,p=0,m=!1,g=function(){!m||h.length||f||n.complete()},v=function(e){return f<r?y(e):h.push(e)},y=function(e){c&&n.next(e),f++;var l=!1;(0,i.Xf)(t(e,p++)).subscribe((0,a.x)(n,function(e){null==o||o(e),c?v(e):n.next(e)},function(){l=!0},void 0,function(){if(l)try{for(f--;h.length&&f<r;)!function(){var e=h.shift();u?(0,s.f)(n,u,function(){return y(e)}):y(e)}();g()}catch(e){n.error(e)}}))},e.subscribe((0,a.x)(n,v,function(){m=!0,g()})),function(){null==d||d()}}))}}});var r=n(33627),i=n(74357),o=n(43051),s=n(53605),a=n(33112),c=n(40366)},25525:function(e,t,n){"use strict";n.d(t,{j:function(){return i}});var r=n(33627);function i(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=e.length;if(0===n)throw Error("list of properties cannot be empty.");return(0,r.U)(function(t){for(var r=t,i=0;i<n;i++){var o=null==r?void 0:r[e[i]];if(void 0===o)return;r=o}return r})}},1216:function(e,t,n){"use strict";n.d(t,{n:function(){return m}});var r=n(91179),i=n(69703),o=n(6216),s=n(43122),a=n(28240),c=n(33112),l=n(43051),u=function(e){function t(t,n){var r=e.call(this)||this;return r.source=t,r.subjectFactory=n,r._subject=null,r._refCount=0,r._connection=null,(0,l.A)(t)&&(r.lift=t.lift),r}return(0,i.__extends)(t,e),t.prototype._subscribe=function(e){return this.getSubject().subscribe(e)},t.prototype.getSubject=function(){var e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject},t.prototype._teardown=function(){this._refCount=0;var e=this._connection;this._subject=this._connection=null,null==e||e.unsubscribe()},t.prototype.connect=function(){var e=this,t=this._connection;if(!t){t=this._connection=new s.w0;var n=this.getSubject();t.add(this.source.subscribe((0,c.x)(n,void 0,function(){e._teardown(),n.complete()},function(t){e._teardown(),n.error(t)},function(){return e._teardown()}))),t.closed&&(this._connection=null,t=s.w0.EMPTY)}return t},t.prototype.refCount=function(){return(0,a.x)()(this)},t}(o.y),d=n(40366),h=n(74357),f={connector:function(){return new r.x}};function p(e,t){void 0===t&&(t=f);var n=t.connector;return(0,l.e)(function(t,r){var i=n();(0,h.Xf)(e(new o.y(function(e){return i.subscribe(e)}))).subscribe(r),r.add(t.subscribe(i))})}function m(e){return e?function(t){return p(e)(t)}:function(e){var t,n,i;return(t=new r.x,i=(0,d.m)(t)?t:function(){return t},(0,d.m)(n)?p(n,{connector:i}):function(e){return new u(e,i)})(e)}}},28240:function(e,t,n){"use strict";n.d(t,{x:function(){return o}});var r=n(43051),i=n(33112);function o(){return(0,r.e)(function(e,t){var n=null;e._refCount++;var r=(0,i.x)(t,void 0,void 0,void 0,function(){if(!e||e._refCount<=0||0<--e._refCount){n=null;return}var r=e._connection,i=n;n=null,r&&(!i||r===i)&&r.unsubscribe(),t.unsubscribe()});e.subscribe(r),r.closed||(n=e.connect())})}},89793:function(e,t,n){"use strict";n.d(t,{X:function(){return c}});var r=n(43051),i=n(33112),o=n(39638),s=n(72467),a=n(74357);function c(e){void 0===e&&(e=1/0);var t,n=(t=e&&"object"==typeof e?e:{count:e}).count,c=void 0===n?1/0:n,l=t.delay,u=t.resetOnSuccess,d=void 0!==u&&u;return c<=0?o.y:(0,r.e)(function(e,t){var n,r=0,o=function(){var u=!1;n=e.subscribe((0,i.x)(t,function(e){d&&(r=0),t.next(e)},void 0,function(e){if(r++<c){var d=function(){n?(n.unsubscribe(),n=null,o()):u=!0};if(null!=l){var h="number"==typeof l?(0,s.H)(l):(0,a.Xf)(l(e,r)),f=(0,i.x)(t,function(){f.unsubscribe(),d()},function(){t.complete()});h.subscribe(f)}else d()}else t.error(e)})),u&&(n.unsubscribe(),n=null,o())};o()})}},69887:function(e,t,n){"use strict";n.d(t,{B:function(){return c}});var r=n(69703),i=n(74357),o=n(91179),s=n(31994),a=n(43051);function c(e){void 0===e&&(e={});var t=e.connector,n=void 0===t?function(){return new o.x}:t,r=e.resetOnError,c=void 0===r||r,u=e.resetOnComplete,d=void 0===u||u,h=e.resetOnRefCountZero,f=void 0===h||h;return function(e){var t,r,o,u=0,h=!1,p=!1,m=function(){null==r||r.unsubscribe(),r=void 0},g=function(){m(),t=o=void 0,h=p=!1},v=function(){var e=t;g(),null==e||e.unsubscribe()};return(0,a.e)(function(e,a){u++,p||h||m();var y=o=null!=o?o:n();a.add(function(){0!=--u||p||h||(r=l(v,f))}),y.subscribe(a),!t&&u>0&&(t=new s.Hp({next:function(e){return y.next(e)},error:function(e){p=!0,m(),r=l(g,c,e),y.error(e)},complete:function(){h=!0,m(),r=l(g,d),y.complete()}}),(0,i.Xf)(e).subscribe(t))})(e)}}function l(e,t){for(var n=[],o=2;o<arguments.length;o++)n[o-2]=arguments[o];if(!0===t){e();return}if(!1!==t){var a=new s.Hp({next:function(){a.unsubscribe(),e()}});return(0,i.Xf)(t.apply(void 0,(0,r.__spreadArray)([],(0,r.__read)(n)))).subscribe(a)}}},5042:function(e,t,n){"use strict";n.d(t,{d:function(){return o}});var r=n(88137),i=n(69887);function o(e,t,n){var o,s,a,c,l=!1;return e&&"object"==typeof e?(c=void 0===(o=e.bufferSize)?1/0:o,t=void 0===(s=e.windowTime)?1/0:s,l=void 0!==(a=e.refCount)&&a,n=e.scheduler):c=null!=e?e:1/0,(0,i.B)({connector:function(){return new r.t(c,t,n)},resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:l})}},17282:function(e,t,n){"use strict";n.d(t,{O:function(){return s}});var r=n(17788),i=n(90714),o=n(43051);function s(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=(0,i.yG)(e);return(0,o.e)(function(t,i){(n?(0,r.z)(e,t,n):(0,r.z)(e,t)).subscribe(i)})}},92955:function(e,t,n){"use strict";n.d(t,{w:function(){return s}});var r=n(74357),i=n(43051),o=n(33112);function s(e,t){return(0,i.e)(function(n,i){var s=null,a=0,c=!1,l=function(){return c&&!s&&i.complete()};n.subscribe((0,o.x)(i,function(n){null==s||s.unsubscribe();var c=0,u=a++;(0,r.Xf)(e(n,u)).subscribe(s=(0,o.x)(i,function(e){return i.next(t?t(n,e,u,c++):e)},function(){s=null,l()}))},function(){c=!0,l()}))})}},58619:function(e,t,n){"use strict";n.d(t,{R:function(){return a}});var r=n(43051),i=n(33112),o=n(74357),s=n(38265);function a(e){return(0,r.e)(function(t,n){(0,o.Xf)(e).subscribe((0,i.x)(n,function(){return n.complete()},s.Z)),n.closed||t.subscribe(n)})}},99299:function(e,t,n){"use strict";n.d(t,{o:function(){return o}});var r=n(43051),i=n(33112);function o(e,t){return void 0===t&&(t=!1),(0,r.e)(function(n,r){var o=0;n.subscribe((0,i.x)(r,function(n){var i=e(n,o++);(i||t)&&r.next(n),i||r.complete()}))})}},27104:function(e,t,n){"use strict";n.d(t,{b:function(){return a}});var r=n(40366),i=n(43051),o=n(33112),s=n(39638);function a(e,t,n){var a=(0,r.m)(e)||t||n?{next:e,error:t,complete:n}:e;return a?(0,i.e)(function(e,t){null===(n=a.subscribe)||void 0===n||n.call(a);var n,r=!0;e.subscribe((0,o.x)(t,function(e){var n;null===(n=a.next)||void 0===n||n.call(a,e),t.next(e)},function(){var e;r=!1,null===(e=a.complete)||void 0===e||e.call(a),t.complete()},function(e){var n;r=!1,null===(n=a.error)||void 0===n||n.call(a,e),t.error(e)},function(){var e,t;r&&(null===(e=a.unsubscribe)||void 0===e||e.call(a)),null===(t=a.finalize)||void 0===t||t.call(a)}))}):s.y}},78885:function(e,t,n){"use strict";n.d(t,{V:function(){return d}});var r=n(25043),i=n(74677),o=n(43051),s=n(74357),a=n(44514),c=n(33112),l=n(53605),u=(0,a.d)(function(e){return function(t){void 0===t&&(t=null),e(this),this.message="Timeout has occurred",this.name="TimeoutError",this.info=t}});function d(e,t){var n=(0,i.q)(e)?{first:e}:"number"==typeof e?{each:e}:e,a=n.first,u=n.each,d=n.with,f=void 0===d?h:d,p=n.scheduler,m=void 0===p?null!=t?t:r.z:p,g=n.meta,v=void 0===g?null:g;if(null==a&&null==u)throw TypeError("No timeout provided.");return(0,o.e)(function(e,t){var n,r,i=null,o=0,d=function(e){r=(0,l.f)(t,m,function(){try{n.unsubscribe(),(0,s.Xf)(f({meta:v,lastValue:i,seen:o})).subscribe(t)}catch(e){t.error(e)}},e)};n=e.subscribe((0,c.x)(t,function(e){null==r||r.unsubscribe(),o++,t.next(i=e),u>0&&d(u)},void 0,void 0,function(){(null==r?void 0:r.closed)||null==r||r.unsubscribe(),i=null})),o||d(null!=a?"number"==typeof a?a:+a-m.now():u)})}function h(e){throw new u(e)}},25043:function(e,t,n){"use strict";n.d(t,{P:function(){return d},z:function(){return u}});var r=n(69703),i=function(e){function t(t,n){return e.call(this)||this}return(0,r.__extends)(t,e),t.prototype.schedule=function(e,t){return void 0===t&&(t=0),this},t}(n(43122).w0),o={setInterval:function(e,t){for(var n=[],i=2;i<arguments.length;i++)n[i-2]=arguments[i];var s=o.delegate;return(null==s?void 0:s.setInterval)?s.setInterval.apply(s,(0,r.__spreadArray)([e,t],(0,r.__read)(n))):setInterval.apply(void 0,(0,r.__spreadArray)([e,t],(0,r.__read)(n)))},clearInterval:function(e){var t=o.delegate;return((null==t?void 0:t.clearInterval)||clearInterval)(e)},delegate:void 0},s=n(56833),a=function(e){function t(t,n){var r=e.call(this,t,n)||this;return r.scheduler=t,r.work=n,r.pending=!1,r}return(0,r.__extends)(t,e),t.prototype.schedule=function(e,t){if(void 0===t&&(t=0),this.closed)return this;this.state=e;var n,r=this.id,i=this.scheduler;return null!=r&&(this.id=this.recycleAsyncId(i,r,t)),this.pending=!0,this.delay=t,this.id=null!==(n=this.id)&&void 0!==n?n:this.requestAsyncId(i,this.id,t),this},t.prototype.requestAsyncId=function(e,t,n){return void 0===n&&(n=0),o.setInterval(e.flush.bind(e,this),n)},t.prototype.recycleAsyncId=function(e,t,n){if(void 0===n&&(n=0),null!=n&&this.delay===n&&!1===this.pending)return t;null!=t&&o.clearInterval(t)},t.prototype.execute=function(e,t){if(this.closed)return Error("executing a cancelled action");this.pending=!1;var n=this._execute(e,t);if(n)return n;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))},t.prototype._execute=function(e,t){var n,r=!1;try{this.work(e)}catch(e){r=!0,n=e||Error("Scheduled action threw falsy error")}if(r)return this.unsubscribe(),n},t.prototype.unsubscribe=function(){if(!this.closed){var t=this.id,n=this.scheduler,r=n.actions;this.work=this.state=this.scheduler=null,this.pending=!1,(0,s.P)(r,this),null!=t&&(this.id=this.recycleAsyncId(n,t,null)),this.delay=null,e.prototype.unsubscribe.call(this)}},t}(i),c=n(39639),l=function(){function e(t,n){void 0===n&&(n=e.now),this.schedulerActionCtor=t,this.now=n}return e.prototype.schedule=function(e,t,n){return void 0===t&&(t=0),new this.schedulerActionCtor(this,e).schedule(n,t)},e.now=c.l.now,e}(),u=new(function(e){function t(t,n){void 0===n&&(n=l.now);var r=e.call(this,t,n)||this;return r.actions=[],r._active=!1,r}return(0,r.__extends)(t,e),t.prototype.flush=function(e){var t,n=this.actions;if(this._active){n.push(e);return}this._active=!0;do if(t=e.execute(e.state,e.delay))break;while(e=n.shift());if(this._active=!1,t){for(;e=n.shift();)e.unsubscribe();throw t}},t}(l))(a),d=u},39639:function(e,t,n){"use strict";n.d(t,{l:function(){return r}});var r={now:function(){return(r.delegate||Date).now()},delegate:void 0}},4803:function(e,t,n){"use strict";n.d(t,{z:function(){return i}});var r=n(69703),i={setTimeout:function(e,t){for(var n=[],o=2;o<arguments.length;o++)n[o-2]=arguments[o];var s=i.delegate;return(null==s?void 0:s.setTimeout)?s.setTimeout.apply(s,(0,r.__spreadArray)([e,t],(0,r.__read)(n))):setTimeout.apply(void 0,(0,r.__spreadArray)([e,t],(0,r.__read)(n)))},clearTimeout:function(e){var t=i.delegate;return((null==t?void 0:t.clearTimeout)||clearTimeout)(e)},delegate:void 0}},86398:function(e,t,n){"use strict";n.d(t,{h:function(){return r}});var r="function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"},23027:function(e,t,n){"use strict";n.d(t,{L:function(){return r}});var r="function"==typeof Symbol&&Symbol.observable||"@@observable"},90714:function(e,t,n){"use strict";n.d(t,{jO:function(){return s},yG:function(){return a}});var r=n(40366),i=n(73768);function o(e){return e[e.length-1]}function s(e){return(0,r.m)(o(e))?e.pop():void 0}function a(e){return(0,i.K)(o(e))?e.pop():void 0}},56833:function(e,t,n){"use strict";function r(e,t){if(e){var n=e.indexOf(t);0<=n&&e.splice(n,1)}}n.d(t,{P:function(){return r}})},44514:function(e,t,n){"use strict";function r(e){var t=e(function(e){Error.call(e),e.stack=Error().stack});return t.prototype=Object.create(Error.prototype),t.prototype.constructor=t,t}n.d(t,{d:function(){return r}})},70057:function(e,t,n){"use strict";n.d(t,{O:function(){return s},x:function(){return o}});var r=n(78534),i=null;function o(e){if(r.v.useDeprecatedSynchronousErrorHandling){var t=!i;if(t&&(i={errorThrown:!1,error:null}),e(),t){var n=i,o=n.errorThrown,s=n.error;if(i=null,o)throw s}}else e()}function s(e){r.v.useDeprecatedSynchronousErrorHandling&&i&&(i.errorThrown=!0,i.error=e)}},53605:function(e,t,n){"use strict";function r(e,t,n,r,i){void 0===r&&(r=0),void 0===i&&(i=!1);var o=t.schedule(function(){n(),i?e.add(this.schedule(null,r)):this.unsubscribe()},r);if(e.add(o),!i)return o}n.d(t,{f:function(){return r}})},39638:function(e,t,n){"use strict";function r(e){return e}n.d(t,{y:function(){return r}})},29400:function(e,t,n){"use strict";n.d(t,{z:function(){return r}});var r=function(e){return e&&"number"==typeof e.length&&"function"!=typeof e}},56196:function(e,t,n){"use strict";n.d(t,{D:function(){return i}});var r=n(40366);function i(e){return Symbol.asyncIterator&&(0,r.m)(null==e?void 0:e[Symbol.asyncIterator])}},74677:function(e,t,n){"use strict";function r(e){return e instanceof Date&&!isNaN(e)}n.d(t,{q:function(){return r}})},40366:function(e,t,n){"use strict";function r(e){return"function"==typeof e}n.d(t,{m:function(){return r}})},9161:function(e,t,n){"use strict";n.d(t,{c:function(){return o}});var r=n(23027),i=n(40366);function o(e){return(0,i.m)(e[r.L])}},63624:function(e,t,n){"use strict";n.d(t,{T:function(){return o}});var r=n(86398),i=n(40366);function o(e){return(0,i.m)(null==e?void 0:e[r.h])}},22073:function(e,t,n){"use strict";n.d(t,{t:function(){return i}});var r=n(40366);function i(e){return(0,r.m)(null==e?void 0:e.then)}},23321:function(e,t,n){"use strict";n.d(t,{L:function(){return s},Q:function(){return o}});var r=n(69703),i=n(40366);function o(e){return(0,r.__asyncGenerator)(this,arguments,function(){var t,n,i;return(0,r.__generator)(this,function(o){switch(o.label){case 0:t=e.getReader(),o.label=1;case 1:o.trys.push([1,,9,10]),o.label=2;case 2:return[4,(0,r.__await)(t.read())];case 3:if(i=(n=o.sent()).value,!n.done)return[3,5];return[4,(0,r.__await)(void 0)];case 4:return[2,o.sent()];case 5:return[4,(0,r.__await)(i)];case 6:return[4,o.sent()];case 7:return o.sent(),[3,2];case 8:return[3,10];case 9:return t.releaseLock(),[7];case 10:return[2]}})})}function s(e){return(0,i.m)(null==e?void 0:e.getReader)}},73768:function(e,t,n){"use strict";n.d(t,{K:function(){return i}});var r=n(40366);function i(e){return e&&(0,r.m)(e.schedule)}},43051:function(e,t,n){"use strict";n.d(t,{A:function(){return i},e:function(){return o}});var r=n(40366);function i(e){return(0,r.m)(null==e?void 0:e.lift)}function o(e){return function(t){if(i(t))return t.lift(function(t){try{return e(t,this)}catch(e){this.error(e)}});throw TypeError("Unable to lift unknown Observable type")}}},38265:function(e,t,n){"use strict";function r(){}n.d(t,{Z:function(){return r}})},30803:function(e,t,n){"use strict";n.d(t,{h:function(){return o}});var r=n(78534),i=n(4803);function o(e){i.z.setTimeout(function(){var t=r.v.onUnhandledError;if(t)t(e);else throw e})}},5644:function(e,t,n){"use strict";function r(e){return TypeError("You provided "+(null!==e&&"object"==typeof e?"an invalid object":"'"+e+"'")+" where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.")}n.d(t,{z:function(){return r}})},31015:function(e,t,n){"use strict";n.d(t,{O:function(){return s},u:function(){return o.u}});var r=n(68028),i=n(19386),o=n(94463);function s(e){return new r.E({...e,_sdkVersion:"html-ethers-".concat(i.bq.VERSION)})}},10764:function(e,t,n){"use strict";let r;n.d(t,{$W:function(){return T},F3:function(){return v},GW:function(){return y},H3:function(){return w},LM:function(){return H},Py:function(){return E},U2:function(){return F},Zw:function(){return b},gQ:function(){return g},so:function(){return m},vH:function(){return i}});let i={context:void 0,registry:void 0};Symbol("solid-proxy");let o=Symbol("solid-track");Symbol("solid-dev-component");let s={equals:(e,t)=>e===t},a=N,c={owned:null,cleanups:null,context:null,owner:null};var l=null;let u=null,d=null,h=null,f=null,p=0;function m(e,t){let n=d,r=l,i=0===e.length,o=void 0===t?r:t,s=i?c:{owned:null,cleanups:null,context:o?o.context:null,owner:o};l=s,d=null;try{return x(i?e:()=>e(()=>b(()=>B(s))),!0)}finally{d=n,l=r}}function g(e,t){let n={value:e,observers:null,observerSlots:null,comparator:(t=t?Object.assign({},s,t):s).equals||void 0};return[R.bind(n),e=>("function"==typeof e&&(e=e(u&&u.running&&u.sources.has(n)?n.tValue:n.value)),S(n,e))]}function v(e,t,n){P(O(e,t,!1,1))}function y(e,t,n){a=k;let i=O(e,t,!1,1),o=r&&(l&&l.context&&void 0!==l.context[r.id]?l.context[r.id]:r.defaultValue);o&&(i.suspense=o),n&&n.render||(i.user=!0),f?f.push(i):P(i)}function E(e,t,n){n=n?Object.assign({},s,n):s;let r=O(e,t,!0,0);return r.observers=null,r.observerSlots=null,r.comparator=n.equals||void 0,P(r),R.bind(r)}function b(e){if(null===d)return e();let t=d;d=null;try{return e()}finally{d=t}}function w(e){y(()=>b(e))}function T(e){return null===l||(null===l.cleanups?l.cleanups=[e]:l.cleanups.push(e)),e}let[_,A]=g(!1);function R(){let e=u&&u.running;if(this.sources&&(e?this.tState:this.state)){if((e?this.tState:this.state)===1)P(this);else{let e=h;h=null,x(()=>L(this),!1),h=e}}if(d){let e=this.observers?this.observers.length:0;d.sources?(d.sources.push(this),d.sourceSlots.push(e)):(d.sources=[this],d.sourceSlots=[e]),this.observers?(this.observers.push(d),this.observerSlots.push(d.sources.length-1)):(this.observers=[d],this.observerSlots=[d.sources.length-1])}return e&&u.sources.has(this)?this.tValue:this.value}function S(e,t,n){let r=u&&u.running&&u.sources.has(e)?e.tValue:e.value;if(!e.comparator||!e.comparator(r,t)){if(u){let r=u.running;(r||!n&&u.sources.has(e))&&(u.sources.add(e),e.tValue=t),r||(e.value=t)}else e.value=t;e.observers&&e.observers.length&&x(()=>{for(let t=0;t<e.observers.length;t+=1){let n=e.observers[t],r=u&&u.running;r&&u.disposed.has(n)||((r?n.tState:n.state)||(n.pure?h.push(n):f.push(n),n.observers&&function e(t){let n=u&&u.running;for(let r=0;r<t.observers.length;r+=1){let i=t.observers[r];(n?i.tState:i.state)||(n?i.tState=2:i.state=2,i.pure?h.push(i):f.push(i),i.observers&&e(i))}}(n)),r?n.tState=1:n.state=1)}if(h.length>1e6)throw h=[],Error()},!1)}return t}function P(e){if(!e.fn)return;B(e);let t=p;I(e,u&&u.running&&u.sources.has(e)?e.tValue:e.value,t),u&&!u.running&&u.sources.has(e)&&queueMicrotask(()=>{x(()=>{u&&(u.running=!0),d=l=e,I(e,e.tValue,t),d=l=null},!1)})}function I(e,t,n){let r;let i=l,o=d;d=l=e;try{r=e.fn(t)}catch(t){return e.pure&&(u&&u.running?(e.tState=1,e.tOwned&&e.tOwned.forEach(B),e.tOwned=void 0):(e.state=1,e.owned&&e.owned.forEach(B),e.owned=null)),e.updatedAt=n+1,D(t)}finally{d=o,l=i}(!e.updatedAt||e.updatedAt<=n)&&(null!=e.updatedAt&&"observers"in e?S(e,r,!0):u&&u.running&&e.pure?(u.sources.add(e),e.tValue=r):e.value=r,e.updatedAt=n)}function O(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;arguments.length>4&&arguments[4];let i={fn:e,state:r,updatedAt:null,owned:null,sources:null,sourceSlots:null,cleanups:null,value:t,owner:l,context:l?l.context:null,pure:n};return u&&u.running&&(i.state=0,i.tState=r),null===l||l!==c&&(u&&u.running&&l.pure?l.tOwned?l.tOwned.push(i):l.tOwned=[i]:l.owned?l.owned.push(i):l.owned=[i]),i}function C(e){let t=u&&u.running;if((t?e.tState:e.state)===0)return;if((t?e.tState:e.state)===2)return L(e);if(e.suspense&&b(e.suspense.inFallback))return e.suspense.effects.push(e);let n=[e];for(;(e=e.owner)&&(!e.updatedAt||e.updatedAt<p);){if(t&&u.disposed.has(e))return;(t?e.tState:e.state)&&n.push(e)}for(let r=n.length-1;r>=0;r--){if(e=n[r],t){let t=e,i=n[r+1];for(;(t=t.owner)&&t!==i;)if(u.disposed.has(t))return}if((t?e.tState:e.state)===1)P(e);else if((t?e.tState:e.state)===2){let t=h;h=null,x(()=>L(e,n[0]),!1),h=t}}}function x(e,t){if(h)return e();let n=!1;t||(h=[]),f?n=!0:f=[],p++;try{let t=e();return function(e){let t;if(h&&(N(h),h=null),e)return;if(u){if(u.promises.size||u.queue.size){if(u.running){u.running=!1,u.effects.push.apply(u.effects,f),f=null,A(!0);return}}else{let e=u.sources,n=u.disposed;for(let e of(f.push.apply(f,u.effects),t=u.resolve,f))"tState"in e&&(e.state=e.tState),delete e.tState;u=null,x(()=>{for(let e of n)B(e);for(let t of e){if(t.value=t.tValue,t.owned)for(let e=0,n=t.owned.length;e<n;e++)B(t.owned[e]);t.tOwned&&(t.owned=t.tOwned),delete t.tValue,delete t.tOwned,t.tState=0}A(!1)},!1)}}let n=f;f=null,n.length&&x(()=>a(n),!1),t&&t()}(n),t}catch(e){n||(f=null),h=null,D(e)}}function N(e){for(let t=0;t<e.length;t++)C(e[t])}function k(e){let t,n=0;for(t=0;t<e.length;t++){let r=e[t];r.user?e[n++]=r:C(r)}if(i.context){if(i.count){i.effects||(i.effects=[]),i.effects.push(...e.slice(0,n));return}i.effects&&(e=[...i.effects,...e],n+=i.effects.length,delete i.effects),i.context=void 0}for(t=0;t<n;t++)C(e[t])}function L(e,t){let n=u&&u.running;n?e.tState=0:e.state=0;for(let r=0;r<e.sources.length;r+=1){let i=e.sources[r];if(i.sources){let e=n?i.tState:i.state;1===e?i!==t&&(!i.updatedAt||i.updatedAt<p)&&C(i):2===e&&L(i,t)}}}function B(e){let t;if(e.sources)for(;e.sources.length;){let t=e.sources.pop(),n=e.sourceSlots.pop(),r=t.observers;if(r&&r.length){let e=r.pop(),i=t.observerSlots.pop();n<r.length&&(e.sourceSlots[i]=n,r[n]=e,t.observerSlots[n]=i)}}if(u&&u.running&&e.pure){if(e.tOwned){for(t=e.tOwned.length-1;t>=0;t--)B(e.tOwned[t]);delete e.tOwned}!function e(t,n){if(n||(t.tState=0,u.disposed.add(t)),t.owned)for(let n=0;n<t.owned.length;n++)e(t.owned[n])}(e,!0)}else if(e.owned){for(t=e.owned.length-1;t>=0;t--)B(e.owned[t]);e.owned=null}if(e.cleanups){for(t=e.cleanups.length-1;t>=0;t--)e.cleanups[t]();e.cleanups=null}u&&u.running?e.tState=0:e.state=0}function D(e){throw arguments.length>1&&void 0!==arguments[1]&&arguments[1],e instanceof Error?e:Error("string"==typeof e?e:"Unknown error",{cause:e})}let M=Symbol("fallback");function U(e){for(let t=0;t<e.length;t++)e[t]()}function H(e,t){return b(()=>e(t||{}))}function F(e){return E(function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=[],i=[],s=[],a=0,c=t.length>1?[]:null;return T(()=>U(s)),()=>{let l=e()||[],u,d;return l[o],b(()=>{let e=l.length,t,o,f,p,g,v,y,E,b;if(0===e)0!==a&&(U(s),s=[],r=[],i=[],a=0,c&&(c=[])),n.fallback&&(r=[M],i[0]=m(e=>(s[0]=e,n.fallback())),a=1);else if(0===a){for(d=0,i=Array(e);d<e;d++)r[d]=l[d],i[d]=m(h);a=e}else{for(f=Array(e),p=Array(e),c&&(g=Array(e)),v=0,y=Math.min(a,e);v<y&&r[v]===l[v];v++);for(y=a-1,E=e-1;y>=v&&E>=v&&r[y]===l[E];y--,E--)f[E]=i[y],p[E]=s[y],c&&(g[E]=c[y]);for(t=new Map,o=Array(E+1),d=E;d>=v;d--)b=l[d],u=t.get(b),o[d]=void 0===u?-1:u,t.set(b,d);for(u=v;u<=y;u++)b=r[u],void 0!==(d=t.get(b))&&-1!==d?(f[d]=i[u],p[d]=s[u],c&&(g[d]=c[u]),d=o[d],t.set(b,d)):s[u]();for(d=v;d<e;d++)d in f?(i[d]=f[d],s[d]=p[d],c&&(c[d]=g[d],c[d](d))):i[d]=m(h);i=i.slice(0,a=e),r=l.slice(0)}return i});function h(e){if(s[d]=e,c){let[e,n]=g(d);return c[d]=n,t(l[d],e)}return t(l[d])}}}(()=>e.each,e.children,"fallback"in e&&{fallback:()=>e.fallback}||void 0))}!function(e,t){Symbol("context")}()},53535:function(e,t,n){"use strict";n.d(t,{addEventListener:function(){return u},className:function(){return l},createComponent:function(){return r.LM},delegateEvents:function(){return a},effect:function(){return r.F3},insert:function(){return h},isServer:function(){return v},memo:function(){return r.Py},render:function(){return o},setAttribute:function(){return c},style:function(){return d},template:function(){return s}});var r=n(10764);Object.create(null),Object.create(null);let i="_$DX_DELEGATE";function o(e,t,n){let i,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};return(0,r.so)(r=>{i=r,t===document?e():h(t,e(),t.firstChild?null:void 0,n)},o.owner),()=>{i(),t.textContent=""}}function s(e,t,n){let i;let o=()=>{let t=document.createElement("template");return t.innerHTML=e,n?t.content.firstChild.firstChild:t.content.firstChild},s=t?()=>(0,r.Zw)(()=>document.importNode(i||(i=o()),!0)):()=>(i||(i=o())).cloneNode(!0);return s.cloneNode=s,s}function a(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:window.document,n=t[i]||(t[i]=new Set);for(let r=0,i=e.length;r<i;r++){let i=e[r];n.has(i)||(n.add(i),t.addEventListener(i,f))}}function c(e,t,n){r.vH.context||(null==n?e.removeAttribute(t):e.setAttribute(t,n))}function l(e,t){r.vH.context||(null==t?e.removeAttribute("class"):e.className=t)}function u(e,t,n,r){if(r)Array.isArray(n)?(e["$$".concat(t)]=n[0],e["$$".concat(t,"Data")]=n[1]):e["$$".concat(t)]=n;else if(Array.isArray(n)){let r=n[0];e.addEventListener(t,n[0]=t=>r.call(e,n[1],t))}else e.addEventListener(t,n)}function d(e,t,n){let r,i;if(!t)return n?c(e,"style"):t;let o=e.style;if("string"==typeof t)return o.cssText=t;for(i in"string"==typeof n&&(o.cssText=n=void 0),n||(n={}),t||(t={}),n)null==t[i]&&o.removeProperty(i),delete n[i];for(i in t)(r=t[i])!==n[i]&&(o.setProperty(i,r),n[i]=r);return n}function h(e,t,n,i){if(void 0===n||i||(i=[]),"function"!=typeof t)return p(e,t,i,n);(0,r.F3)(r=>p(e,t(),r,n),i)}function f(e){let t="$$".concat(e.type),n=e.composedPath&&e.composedPath()[0]||e.target;for(e.target!==n&&Object.defineProperty(e,"target",{configurable:!0,value:n}),Object.defineProperty(e,"currentTarget",{configurable:!0,get:()=>n||document}),r.vH.registry&&!r.vH.done&&(r.vH.done=_$HY.done=!0);n;){let r=n[t];if(r&&!n.disabled){let i=n["".concat(t,"Data")];if(void 0!==i?r.call(n,i,e):r.call(n,e),e.cancelBubble)return}n=n._$host||n.parentNode||n.host}}function p(e,t,n,i,o){if(r.vH.context){n||(n=[...e.childNodes]);let t=[];for(let e=0;e<n.length;e++){let r=n[e];8===r.nodeType&&"!$"===r.data.slice(0,2)?r.remove():t.push(r)}n=t}for(;"function"==typeof n;)n=n();if(t===n)return n;let s=typeof t,a=void 0!==i;if(e=a&&n[0]&&n[0].parentNode||e,"string"===s||"number"===s){if(r.vH.context)return n;if("number"===s&&(t=t.toString()),a){let r=n[0];r&&3===r.nodeType?r.data!==t&&(r.data=t):r=document.createTextNode(t),n=g(e,n,i,r)}else n=""!==n&&"string"==typeof n?e.firstChild.data=t:e.textContent=t}else if(null==t||"boolean"===s){if(r.vH.context)return n;n=g(e,n,i)}else if("function"===s)return(0,r.F3)(()=>{let r=t();for(;"function"==typeof r;)r=r();n=p(e,r,n,i)}),()=>n;else if(Array.isArray(t)){let s=[],c=n&&Array.isArray(n);if(function e(t,n,r,i){let o=!1;for(let s=0,a=n.length;s<a;s++){let a=n[s],c=r&&r[s],l;if(null==a||!0===a||!1===a);else if("object"==(l=typeof a)&&a.nodeType)t.push(a);else if(Array.isArray(a))o=e(t,a,c)||o;else if("function"===l){if(i){for(;"function"==typeof a;)a=a();o=e(t,Array.isArray(a)?a:[a],Array.isArray(c)?c:[c])||o}else t.push(a),o=!0}else{let e=String(a);c&&3===c.nodeType&&c.data===e?t.push(c):t.push(document.createTextNode(e))}}return o}(s,t,n,o))return(0,r.F3)(()=>n=p(e,s,n,i,!0)),()=>n;if(r.vH.context){if(!s.length)return n;if(void 0===i)return[...e.childNodes];let t=s[0],r=[t];for(;(t=t.nextSibling)!==i;)r.push(t);return n=r}if(0===s.length){if(n=g(e,n,i),a)return n}else c?0===n.length?m(e,s,i):function(e,t,n){let r=n.length,i=t.length,o=r,s=0,a=0,c=t[i-1].nextSibling,l=null;for(;s<i||a<o;){if(t[s]===n[a]){s++,a++;continue}for(;t[i-1]===n[o-1];)i--,o--;if(i===s){let t=o<r?a?n[a-1].nextSibling:n[o-a]:c;for(;a<o;)e.insertBefore(n[a++],t)}else if(o===a)for(;s<i;)l&&l.has(t[s])||t[s].remove(),s++;else if(t[s]===n[o-1]&&n[a]===t[i-1]){let r=t[--i].nextSibling;e.insertBefore(n[a++],t[s++].nextSibling),e.insertBefore(n[--o],r),t[i]=n[o]}else{if(!l){l=new Map;let e=a;for(;e<o;)l.set(n[e],e++)}let r=l.get(t[s]);if(null!=r){if(a<r&&r<o){let c=s,u=1,d;for(;++c<i&&c<o&&null!=(d=l.get(t[c]))&&d===r+u;)u++;if(u>r-a){let i=t[s];for(;a<r;)e.insertBefore(n[a++],i)}else e.replaceChild(n[a++],t[s++])}else s++}else t[s++].remove()}}}(e,n,s):(n&&g(e),m(e,s));n=s}else if(t.nodeType){if(r.vH.context&&t.parentNode)return n=a?[t]:t;if(Array.isArray(n)){if(a)return n=g(e,n,i,t);g(e,n,null,t)}else null!=n&&""!==n&&e.firstChild?e.replaceChild(t,e.firstChild):e.appendChild(t);n=t}return n}function m(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;for(let r=0,i=t.length;r<i;r++)e.insertBefore(t[r],n)}function g(e,t,n,r){if(void 0===n)return e.textContent="";let i=r||document.createTextNode("");if(t.length){let r=!1;for(let o=t.length-1;o>=0;o--){let s=t[o];if(i!==s){let t=s.parentNode===e;r||o?t&&s.remove():t?e.replaceChild(i,s):e.insertBefore(i,n)}else r=!0}}else e.insertBefore(i,n);return[i]}Symbol();let v=!1},64873:function(e,t,n){"use strict";n.d(t,{ZPm:function(){return ok}});var r,i,o,s,a,c,l,u,d,h,f,p,m,g,v,y,E,b,w={};n.r(w),n.d(w,{dQ:function(){return eK},ci:function(){return ek},bytesToNumberBE:function(){return eU},ty:function(){return eH},eV:function(){return eq},n$:function(){return eV},ql:function(){return ej},hexToBytes:function(){return eM},_t:function(){return ex},tL:function(){return eF},S5:function(){return eG},FF:function(){return eY}});var T={};n.r(T),n.d(T,{secp256k1:function(){return tm}});var _=n(40680),A=n(49035);class R{on(e,t){this._emitter.on(e,t)}once(e,t){this._emitter.once(e,t)}off(e,t){this._emitter.off(e,t)}emit(e,t){this._emitter.emit(e,t)}listenerCount(e){return this._emitter.listenerCount(e)}listeners(e){return this._emitter.listeners(e)}eventNames(){return this._emitter.eventNames()}removeAllListeners(){return this._emitter.removeAllListeners()}setMaxListenerWarningThreshold(e){this._emitter.setMaxListeners(e)}getMaxListeners(){return this._emitter.getMaxListeners()}constructor(){this._emitter=new A.EventEmitter}}(d||(d={})).CONFIG_CHANGE="CONFIG_CHANGE";class S extends R{setConfig(e){for(let t of Object.keys(e))this._triggerConfigChange(t,e[t]);Object.assign(this.config,e)}get handleRevert(){return this.config.handleRevert}set handleRevert(e){this._triggerConfigChange("handleRevert",e),this.config.handleRevert=e}get contractDataInputFill(){return this.config.contractDataInputFill}set contractDataInputFill(e){this._triggerConfigChange("contractDataInputFill",e),this.config.contractDataInputFill=e}get defaultAccount(){return this.config.defaultAccount}set defaultAccount(e){this._triggerConfigChange("defaultAccount",e),this.config.defaultAccount=e}get defaultBlock(){return this.config.defaultBlock}set defaultBlock(e){this._triggerConfigChange("defaultBlock",e),this.config.defaultBlock=e}get transactionSendTimeout(){return this.config.transactionSendTimeout}set transactionSendTimeout(e){this._triggerConfigChange("transactionSendTimeout",e),this.config.transactionSendTimeout=e}get transactionBlockTimeout(){return this.config.transactionBlockTimeout}set transactionBlockTimeout(e){this._triggerConfigChange("transactionBlockTimeout",e),this.config.transactionBlockTimeout=e}get transactionConfirmationBlocks(){return this.config.transactionConfirmationBlocks}set transactionConfirmationBlocks(e){this._triggerConfigChange("transactionConfirmationBlocks",e),this.config.transactionConfirmationBlocks=e}get transactionPollingInterval(){return this.config.transactionPollingInterval}set transactionPollingInterval(e){this._triggerConfigChange("transactionPollingInterval",e),this.config.transactionPollingInterval=e,this.transactionReceiptPollingInterval=e,this.transactionConfirmationPollingInterval=e}get transactionPollingTimeout(){return this.config.transactionPollingTimeout}set transactionPollingTimeout(e){this._triggerConfigChange("transactionPollingTimeout",e),this.config.transactionPollingTimeout=e}get transactionReceiptPollingInterval(){return this.config.transactionReceiptPollingInterval}set transactionReceiptPollingInterval(e){this._triggerConfigChange("transactionReceiptPollingInterval",e),this.config.transactionReceiptPollingInterval=e}get transactionConfirmationPollingInterval(){return this.config.transactionConfirmationPollingInterval}set transactionConfirmationPollingInterval(e){this._triggerConfigChange("transactionConfirmationPollingInterval",e),this.config.transactionConfirmationPollingInterval=e}get blockHeaderTimeout(){return this.config.blockHeaderTimeout}set blockHeaderTimeout(e){this._triggerConfigChange("blockHeaderTimeout",e),this.config.blockHeaderTimeout=e}get enableExperimentalFeatures(){return this.config.enableExperimentalFeatures}set enableExperimentalFeatures(e){this._triggerConfigChange("enableExperimentalFeatures",e),this.config.enableExperimentalFeatures=e}get maxListenersWarningThreshold(){return this.config.maxListenersWarningThreshold}set maxListenersWarningThreshold(e){this._triggerConfigChange("maxListenersWarningThreshold",e),this.setMaxListenerWarningThreshold(e),this.config.maxListenersWarningThreshold=e}get defaultNetworkId(){return this.config.defaultNetworkId}set defaultNetworkId(e){this._triggerConfigChange("defaultNetworkId",e),this.config.defaultNetworkId=e}get defaultChain(){return this.config.defaultChain}set defaultChain(e){if(!(0,A.isNullish)(this.config.defaultCommon)&&!(0,A.isNullish)(this.config.defaultCommon.baseChain)&&e!==this.config.defaultCommon.baseChain)throw new _.KSv(this.config.defaultChain,e);this._triggerConfigChange("defaultChain",e),this.config.defaultChain=e}get defaultHardfork(){return this.config.defaultHardfork}set defaultHardfork(e){if(!(0,A.isNullish)(this.config.defaultCommon)&&!(0,A.isNullish)(this.config.defaultCommon.hardfork)&&e!==this.config.defaultCommon.hardfork)throw new _.uYR(this.config.defaultCommon.hardfork,e);this._triggerConfigChange("defaultHardfork",e),this.config.defaultHardfork=e}get defaultCommon(){return this.config.defaultCommon}set defaultCommon(e){if(!(0,A.isNullish)(this.config.defaultHardfork)&&!(0,A.isNullish)(e)&&!(0,A.isNullish)(e.hardfork)&&this.config.defaultHardfork!==e.hardfork)throw new _.uYR(this.config.defaultHardfork,e.hardfork);if(!(0,A.isNullish)(this.config.defaultChain)&&!(0,A.isNullish)(e)&&!(0,A.isNullish)(e.baseChain)&&this.config.defaultChain!==e.baseChain)throw new _.KSv(this.config.defaultChain,e.baseChain);this._triggerConfigChange("defaultCommon",e),this.config.defaultCommon=e}get defaultTransactionType(){return this.config.defaultTransactionType}set defaultTransactionType(e){this._triggerConfigChange("defaultTransactionType",e),this.config.defaultTransactionType=e}get defaultMaxPriorityFeePerGas(){return this.config.defaultMaxPriorityFeePerGas}set defaultMaxPriorityFeePerGas(e){this._triggerConfigChange("defaultMaxPriorityFeePerGas",e),this.config.defaultMaxPriorityFeePerGas=e}get transactionBuilder(){return this.config.transactionBuilder}set transactionBuilder(e){this._triggerConfigChange("transactionBuilder",e),this.config.transactionBuilder=e}get transactionTypeParser(){return this.config.transactionTypeParser}set transactionTypeParser(e){this._triggerConfigChange("transactionTypeParser",e),this.config.transactionTypeParser=e}_triggerConfigChange(e,t){this.emit(d.CONFIG_CHANGE,{name:e,oldValue:this.config[e],newValue:t})}constructor(e){super(),this.config={handleRevert:!1,defaultAccount:void 0,defaultBlock:"latest",transactionBlockTimeout:50,transactionConfirmationBlocks:24,transactionPollingInterval:1e3,transactionPollingTimeout:75e4,transactionReceiptPollingInterval:void 0,transactionSendTimeout:75e4,transactionConfirmationPollingInterval:void 0,blockHeaderTimeout:10,maxListenersWarningThreshold:100,contractDataInputFill:"data",defaultNetworkId:void 0,defaultChain:"mainnet",defaultHardfork:"london",defaultCommon:void 0,defaultTransactionType:"0x2",defaultMaxPriorityFeePerGas:(0,A.toHex)(25e8),enableExperimentalFeatures:{useSubscriptionWhenCheckingBlockTimeout:!1,useRpcCallSpecification:!1},transactionBuilder:void 0,transactionTypeParser:void 0},this.setConfig(null!=e?e:{})}}var P=n(39152),I=n(19273);class O extends I.EA{static validateClientUrl(e){return"string"==typeof e&&/^http(s)?:\/\//i.test(e)}getStatus(){throw new _.iQ5}supportsSubscriptions(){return!1}request(e,t){var n,r,i,o,s;return r=this,i=void 0,o=void 0,s=function*(){let r=Object.assign(Object.assign({},null===(n=this.httpProviderOptions)||void 0===n?void 0:n.providerOptions),t),i=yield P(this.clientUrl,Object.assign(Object.assign({},r),{method:"POST",headers:Object.assign(Object.assign({},r.headers),{"Content-Type":"application/json"}),body:JSON.stringify(e)}));if(!i.ok)throw new _.VLC((yield i.json()));return yield i.json()},new(o||(o=Promise))(function(e,t){function n(e){try{c(s.next(e))}catch(e){t(e)}}function a(e){try{c(s.throw(e))}catch(e){t(e)}}function c(t){var r;t.done?e(t.value):((r=t.value)instanceof o?r:new o(function(e){e(r)})).then(n,a)}c((s=s.apply(r,i||[])).next())})}on(){throw new _.iQ5}removeListener(){throw new _.iQ5}once(){throw new _.iQ5}removeAllListeners(){throw new _.iQ5}connect(){throw new _.iQ5}disconnect(){throw new _.iQ5}reset(){throw new _.iQ5}reconnect(){throw new _.iQ5}constructor(e,t){if(super(),!O.validateClientUrl(e))throw new _.$PL(e);this.clientUrl=e,this.httpProviderOptions=t}}var C=null,x="undefined"!=typeof WebSocket?WebSocket:"undefined"!=typeof MozWebSocket?MozWebSocket:void 0!==n.g?n.g.WebSocket||n.g.MozWebSocket:window.WebSocket||window.MozWebSocket;class N extends A.SocketProvider{_validateProviderPath(e){return"string"==typeof e&&/^ws(s)?:\/\//i.test(e)}getStatus(){if(this._socketConnection&&!(0,A.isNullish)(this._socketConnection))switch(this._socketConnection.readyState){case this._socketConnection.CONNECTING:return"connecting";case this._socketConnection.OPEN:return"connected"}return"disconnected"}_openSocketConnection(){this._socketConnection=new x(this._socketPath,void 0,this._socketOptions&&0===Object.keys(this._socketOptions).length?void 0:this._socketOptions)}_closeSocketConnection(e,t){var n;null===(n=this._socketConnection)||void 0===n||n.close(e,t)}_sendToSocket(e){var t;if("disconnected"===this.getStatus())throw new _.ZYx;null===(t=this._socketConnection)||void 0===t||t.send(JSON.stringify(e))}_parseResponses(e){return this.chunkResponseParser.parseResponse(e.data)}_addSocketListeners(){var e,t,n,r;null===(e=this._socketConnection)||void 0===e||e.addEventListener("open",this._onOpenHandler),null===(t=this._socketConnection)||void 0===t||t.addEventListener("message",this._onMessageHandler),null===(n=this._socketConnection)||void 0===n||n.addEventListener("close",e=>this._onCloseHandler(e)),null===(r=this._socketConnection)||void 0===r||r.addEventListener("error",this._onErrorHandler)}_removeSocketListeners(){var e,t,n;null===(e=this._socketConnection)||void 0===e||e.removeEventListener("message",this._onMessageHandler),null===(t=this._socketConnection)||void 0===t||t.removeEventListener("open",this._onOpenHandler),null===(n=this._socketConnection)||void 0===n||n.removeEventListener("close",this._onCloseHandler)}_onCloseEvent(e){var t;if(this._reconnectOptions.autoReconnect&&(![1e3,1001].includes(e.code)||!e.wasClean)){this._reconnect();return}this._clearQueues(e),this._removeSocketListeners(),this._onDisconnect(e.code,e.reason),null===(t=this._socketConnection)||void 0===t||t.removeEventListener("error",this._onErrorHandler)}constructor(e,t,n){super(e,t,n)}}let k=e=>I.EA.isWeb3Provider(e),L=e=>"string"!=typeof e&&"request"in e&&"Function"===e.request.constructor.name,B=e=>"string"!=typeof e&&"request"in e&&"AsyncFunction"===e.request.constructor.name,D=e=>"string"!=typeof e&&"send"in e,M=e=>"string"!=typeof e&&"sendAsync"in e,U=e=>e&&(k(e)||B(e)||L(e)||M(e)||D(e)),H=e=>e&&"supportsSubscriptions"in e?e.supportsSubscriptions():!!e&&"string"!=typeof e&&"on"in e;var F=function(e,t,n,r){return new(n||(n=Promise))(function(i,o){function s(e){try{c(r.next(e))}catch(e){o(e)}}function a(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):((t=e.value)instanceof n?t:new n(function(e){e(t)})).then(s,a)}c((r=r.apply(e,t||[])).next())})};(r=h||(h={})).PROVIDER_CHANGED="PROVIDER_CHANGED",r.BEFORE_PROVIDER_CHANGE="BEFORE_PROVIDER_CHANGE";let G={HttpProvider:O,WebsocketProvider:N};class j extends R{static get providers(){return G}get provider(){return this._provider}get providers(){return G}setProvider(e){let t;if(e&&"string"==typeof e&&this.providers){if(/^http(s)?:\/\//i.test(e))t=new this.providers.HttpProvider(e);else if(/^ws(s)?:\/\//i.test(e))t=new this.providers.WebsocketProvider(e);else throw new _.kbX("Can't autodetect provider for \"".concat(e,'"'))}else t=(0,A.isNullish)(e)?void 0:e;return this.emit(h.BEFORE_PROVIDER_CHANGE,this._provider),this._provider=t,this.emit(h.PROVIDER_CHANGED,this._provider),!0}send(e){return F(this,void 0,void 0,function*(){let t=yield this._sendRequest(e);if(A.jsonRpc.isResponseWithResult(t))return t.result;throw new _.VLC(t)})}sendBatch(e){return F(this,void 0,void 0,function*(){return yield this._sendRequest(e)})}_sendRequest(e){return F(this,void 0,void 0,function*(){let{provider:t}=this;if((0,A.isNullish)(t))throw new _.kbX("Provider not available. Use `.setProvider` or `.provider=` to initialize the provider.");let n=A.jsonRpc.isBatchRequest(e)?A.jsonRpc.toBatchPayload(e):A.jsonRpc.toPayload(e);if(k(t)){let e;try{e=yield t.request(n)}catch(t){e=t}return this._processJsonRpcResponse(n,e,{legacy:!1,error:!1})}if(B(t))return t.request(n).then(e=>this._processJsonRpcResponse(n,e,{legacy:!0,error:!1})).catch(e=>this._processJsonRpcResponse(n,e,{legacy:!0,error:!0}));if(L(t))return new Promise((e,r)=>{let i=e=>r(this._processJsonRpcResponse(n,e,{legacy:!0,error:!0})),o=t=>e(this._processJsonRpcResponse(n,t,{legacy:!0,error:!1})),s=t.request(n,(e,t)=>e?i(e):o(t));(0,A.isPromise)(s)&&s.then(o).catch(i)});if(D(t))return new Promise((e,r)=>{t.send(n,(t,i)=>{if(t)return r(this._processJsonRpcResponse(n,t,{legacy:!0,error:!0}));if((0,A.isNullish)(i))throw new _.VLC("",'Got a "nullish" response from provider.');return e(this._processJsonRpcResponse(n,i,{legacy:!0,error:!1}))})});if(M(t))return t.sendAsync(n).then(e=>this._processJsonRpcResponse(n,e,{legacy:!0,error:!1})).catch(e=>this._processJsonRpcResponse(n,e,{legacy:!0,error:!0}));throw new _.kbX("Provider does not have a request or send method to use.")})}_processJsonRpcResponse(e,t,n){let{legacy:r,error:i}=n;if((0,A.isNullish)(t))return this._buildResponse(e,null,i);if(A.jsonRpc.isResponseWithError(t)){if(this.useRpcCallSpecification&&(0,A.isResponseRpcError)(t)){if(_.BEj.get(t.error.code))throw new(_.BEj.get(t.error.code)).error(t);throw new _.lth(t)}if(!j._isReverted(t))throw new _.$D9(t,e)}if(A.jsonRpc.isResponseWithResult(t))return t;if(t instanceof Error)throw j._isReverted(t),t;if(!r&&A.jsonRpc.isBatchRequest(e)&&A.jsonRpc.isBatchResponse(t)||r&&!i&&A.jsonRpc.isBatchRequest(e))return t;if(r&&i&&A.jsonRpc.isBatchRequest(e))throw t;if(r&&!A.jsonRpc.isResponseWithError(t)&&!A.jsonRpc.isResponseWithResult(t))return this._buildResponse(e,t,i);if(A.jsonRpc.isBatchRequest(e)&&!Array.isArray(t))throw new _.VLC(t,"Got normal response for a batch request.");if(!A.jsonRpc.isBatchRequest(e)&&Array.isArray(t))throw new _.VLC(t,"Got batch response for a normal request.");if((A.jsonRpc.isResponseWithError(t)||A.jsonRpc.isResponseWithResult(t))&&!A.jsonRpc.isBatchRequest(e)&&t.id&&e.id!==t.id)throw new _.$D9(t);throw new _.VLC(t,"Invalid response")}static _isReverted(e){let t;if(A.jsonRpc.isResponseWithError(e)?t=e.error:e instanceof Error&&(t=e),null==t?void 0:t.message.includes("revert"))throw new _.KEx(t);return!1}_buildResponse(e,t,n){let r={jsonrpc:"2.0",id:A.jsonRpc.isBatchRequest(e)?e[0].id:"id"in e?e.id:null};return n?Object.assign(Object.assign({},r),{error:t}):Object.assign(Object.assign({},r),{result:t})}constructor(e,t){super(),(0,A.isNullish)(e)||this.setProvider(e),this.useRpcCallSpecification=t}}var q=function(e,t,n,r){return new(n||(n=Promise))(function(i,o){function s(e){try{c(r.next(e))}catch(e){o(e)}}function a(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):((t=e.value)instanceof n?t:new n(function(e){e(t)})).then(s,a)}c((r=r.apply(e,t||[])).next())})};class K{listenToProviderEvents(){let e=this.requestManager.provider;this.requestManager.provider&&("function"!=typeof(null==e?void 0:e.supportsSubscriptions)||(null==e?void 0:e.supportsSubscriptions()))&&"function"==typeof this.requestManager.provider.on&&("function"==typeof this.requestManager.provider.request?this.requestManager.provider.on("message",e=>this.messageListener(e)):e.on("data",e=>this.messageListener(e)))}messageListener(e){var t,n,r;if(!e)throw new _.iXd("Should not call messageListener with no data. Type was");let i=(null===(t=e.params)||void 0===t?void 0:t.subscription)||(null===(n=e.data)||void 0===n?void 0:n.subscription)||(null===(r=e.id)||void 0===r?void 0:r.toString(16));if(i){let t=this._subscriptions.get(i);null==t||t.processSubscriptionData(e)}}subscribe(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:I.YK;return q(this,void 0,void 0,function*(){let r=this.registeredSubscriptions[e];if(!r)throw new _.iXd("Invalid subscription type");let i=new r(null!=t?t:void 0,{subscriptionManager:this,returnFormat:n});return yield this.addSubscription(i),i})}get subscriptions(){return this._subscriptions}addSubscription(e){return q(this,void 0,void 0,function*(){if(!this.requestManager.provider)throw new _.kbX("Provider not available");if(!this.supportsSubscriptions())throw new _.iXd("The current provider does not support subscriptions");if(e.id&&this._subscriptions.has(e.id))throw new _.iXd('Subscription with id "'.concat(e.id,'" already exists'));if(yield e.sendSubscriptionRequest(),(0,A.isNullish)(e.id))throw new _.iXd("Subscription is not subscribed yet.");return this._subscriptions.set(e.id,e),e.id})}removeSubscription(e){return q(this,void 0,void 0,function*(){let{id:t}=e;if((0,A.isNullish)(t))throw new _.iXd("Subscription is not subscribed yet. Or, had already been unsubscribed but not through the Subscription Manager.");if(!this._subscriptions.has(t)&&!this.tolerateUnlinkedSubscription)throw new _.iXd('Subscription with id "'.concat(t.toString(),'" does not exists'));return yield e.sendUnsubscribeRequest(),this._subscriptions.delete(t),t})}unsubscribe(e){return q(this,void 0,void 0,function*(){let t=[];for(let[n,r]of this.subscriptions.entries())(!e||"function"==typeof e&&e({id:n,sub:r}))&&t.push(this.removeSubscription(r));return Promise.all(t)})}clear(){this._subscriptions.clear()}supportsSubscriptions(){return!(0,A.isNullish)(this.requestManager.provider)&&H(this.requestManager.provider)}constructor(e,t,n=!1){this.requestManager=e,this.registeredSubscriptions=t,this.tolerateUnlinkedSubscription=n,this._subscriptions=new Map,this.requestManager.on(h.BEFORE_PROVIDER_CHANGE,()=>q(this,void 0,void 0,function*(){yield this.unsubscribe()})),this.requestManager.on(h.PROVIDER_CHANGED,()=>{this.clear(),this.listenToProviderEvents()}),this.listenToProviderEvents()}}var W=function(e,t,n,r){return new(n||(n=Promise))(function(i,o){function s(e){try{c(r.next(e))}catch(e){o(e)}}function a(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):((t=e.value)instanceof n?t:new n(function(e){e(t)})).then(s,a)}c((r=r.apply(e,t||[])).next())})};class z extends R{get id(){return this._id}get lastBlock(){return this._lastBlock}subscribe(){return W(this,void 0,void 0,function*(){return this._subscriptionManager.addSubscription(this)})}processSubscriptionData(e){var t,n;(null==e?void 0:e.data)?this._processSubscriptionResult(null!==(n=null===(t=null==e?void 0:e.data)||void 0===t?void 0:t.result)&&void 0!==n?n:null==e?void 0:e.data):e&&A.jsonRpc.isResponseWithNotification(e)&&this._processSubscriptionResult(null==e?void 0:e.params.result)}sendSubscriptionRequest(){return W(this,void 0,void 0,function*(){return this._id=yield this._subscriptionManager.requestManager.send({method:"eth_subscribe",params:this._buildSubscriptionParams()}),this.emit("connected",this._id),this._id})}get returnFormat(){return this._returnFormat}get subscriptionManager(){return this._subscriptionManager}resubscribe(){return W(this,void 0,void 0,function*(){yield this.unsubscribe(),yield this.subscribe()})}unsubscribe(){return W(this,void 0,void 0,function*(){this.id&&(yield this._subscriptionManager.removeSubscription(this))})}sendUnsubscribeRequest(){return W(this,void 0,void 0,function*(){yield this._subscriptionManager.requestManager.send({method:"eth_unsubscribe",params:[this.id]}),this._id=void 0})}formatSubscriptionResult(e){return e}_processSubscriptionResult(e){this.emit("data",this.formatSubscriptionResult(e))}_processSubscriptionError(e){this.emit("error",e)}_buildSubscriptionParams(){throw Error("Implement in the child class")}constructor(e,t){var n;super(),this.args=e;let{requestManager:r}=t,{subscriptionManager:i}=t;if(r&&i)throw new _.iXd("Only requestManager or subscriptionManager should be provided at Subscription constructor");if(!r&&!i)throw new _.iXd("Either requestManager or subscriptionManager should be provided at Subscription constructor");r?this._subscriptionManager=new K(r,{},!0):this._subscriptionManager=i,this._returnFormat=null!==(n=null==t?void 0:t.returnFormat)&&void 0!==n?n:I.YK}}var V=n(98065),Z=function(e,t,n,r){return new(n||(n=Promise))(function(i,o){function s(e){try{c(r.next(e))}catch(e){o(e)}}function a(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):((t=e.value)instanceof n?t:new n(function(e){e(t)})).then(s,a)}c((r=r.apply(e,t||[])).next())})};class Y extends I.vy{static getStorage(){let e;try{e=window.localStorage;let t="__storage_test__";return e.setItem(t,t),e.removeItem(t),e}catch(t){return t&&(22===t.code||1014===t.code||"QuotaExceededError"===t.name||"NS_ERROR_DOM_QUOTA_REACHED"===t.name)&&!(0,V.Rw)(e)&&0!==e.length?e:void 0}}create(e){for(let t=0;t<e;t+=1)this.add(this._accountProvider.create());return this}add(e){var t;if("string"==typeof e)return this.add(this._accountProvider.privateKeyToAccount(e));let n=this.length;return this.get(e.address)&&(console.warn("Account ".concat(e.address.toLowerCase()," already exists.")),n=null!==(t=this._addressMap.get(e.address.toLowerCase()))&&void 0!==t?t:n),this._addressMap.set(e.address.toLowerCase(),n),this[n]=e,this}get(e){if("string"==typeof e){let t=this._addressMap.get(e.toLowerCase());return(0,V.Rw)(t)?void 0:this[t]}return this[e]}remove(e){if("string"==typeof e){let t=this._addressMap.get(e.toLowerCase());return!(0,V.Rw)(t)&&(this._addressMap.delete(e.toLowerCase()),this.splice(t,1),!0)}return!!this[e]&&(this.splice(e,1),!0)}clear(){return this._addressMap.clear(),this.length=0,this}encrypt(e,t){return Z(this,void 0,void 0,function*(){return Promise.all(this.map(n=>Z(this,void 0,void 0,function*(){return n.encrypt(e,t)})))})}decrypt(e,t,n){return Z(this,void 0,void 0,function*(){for(let r of yield Promise.all(e.map(e=>Z(this,void 0,void 0,function*(){return this._accountProvider.decrypt(e,t,n)}))))this.add(r);return this})}save(e,t){return Z(this,void 0,void 0,function*(){let n=Y.getStorage();if(!n)throw Error("Local storage not available.");return n.setItem(null!=t?t:this._defaultKeyName,JSON.stringify((yield this.encrypt(e)))),!0})}load(e,t){return Z(this,void 0,void 0,function*(){let n=Y.getStorage();if(!n)throw Error("Local storage not available.");let r=n.getItem(null!=t?t:this._defaultKeyName);return r&&(yield this.decrypt(JSON.parse(r)||[],e)),this})}constructor(){super(...arguments),this._addressMap=new Map,this._defaultKeyName="web3js_wallet"}}var Q=n(46),X=n(30263);let J={web:Q.e};function $(e,t,n){if(!n.startsWith("aes-"))throw Error("AES submodule doesn't support mode ".concat(n));if(16!==t.length)throw Error("AES: wrong IV length");if(n.startsWith("aes-128")&&16!==e.length||n.startsWith("aes-256")&&32!==e.length)throw Error("AES: wrong key length")}async function ee(e,t,n){let r;if(!J.web)throw Error("Browser crypto not available.");if(["aes-128-cbc","aes-256-cbc"].includes(e)&&(r="cbc"),["aes-128-ctr","aes-256-ctr"].includes(e)&&(r="ctr"),!r)throw Error("AES: unsupported mode");return[await J.web.subtle.importKey("raw",t,{name:"AES-".concat(r.toUpperCase()),length:8*t.length},!0,["encrypt","decrypt"]),{name:"aes-".concat(r),iv:n,counter:n,length:128}]}async function et(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"aes-128-ctr",i=!(arguments.length>4)||void 0===arguments[4]||arguments[4];if($(t,n,r),J.web){let[o,s]=await ee(r,t,n),a=await J.web.subtle.encrypt(s,o,e),c=new Uint8Array(a);return i||"aes-cbc"!==s.name||e.length%16||(c=c.slice(0,-16)),c}if(J.node){let o=J.node.createCipheriv(r,t,n);return o.setAutoPadding(i),(0,X.eV)(o.update(e),o.final())}throw Error("The environment doesn't have AES module")}async function en(e,t,n,r){let i=e.slice(-16);for(let e=0;e<16;e++)i[e]^=16^n[e];return(await et(i,t,n,r)).slice(0,16)}async function er(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"aes-128-ctr",i=!(arguments.length>4)||void 0===arguments[4]||arguments[4];if($(t,n,r),J.web){let[o,s]=await ee(r,t,n);if(!i&&"aes-cbc"===s.name){let i=await en(e,t,n,r);e=(0,X.eV)(e,i)}let a=await J.web.subtle.decrypt(s,o,e),c=new Uint8Array(a);if("aes-cbc"===s.name){let i=await et(c,t,n,r);if(!(0,X.hD)(i,e))throw Error("AES: wrong padding")}return c}if(J.node){let o=J.node.createDecipheriv(r,t,n);return o.setAutoPadding(i),(0,X.eV)(o.update(e),o.final())}throw Error("The environment doesn't have AES module")}var ei=n(34374),eo=n(57200);class es extends eo.kb{update(e){return(0,ei.Gg)(this),this.iHash.update(e),this}digestInto(e){(0,ei.Gg)(this),(0,ei.aI)(e,this.outputLen),this.finished=!0,this.iHash.digestInto(e),this.oHash.update(e),this.oHash.digestInto(e),this.destroy()}digest(){let e=new Uint8Array(this.oHash.outputLen);return this.digestInto(e),e}_cloneInto(e){e||(e=Object.create(Object.getPrototypeOf(this),{}));let{oHash:t,iHash:n,finished:r,destroyed:i,blockLen:o,outputLen:s}=this;return e.finished=r,e.destroyed=i,e.blockLen=o,e.outputLen=s,e.oHash=t._cloneInto(e.oHash),e.iHash=n._cloneInto(e.iHash),e}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}constructor(e,t){super(),this.finished=!1,this.destroyed=!1,(0,ei.vp)(e);let n=(0,eo.O0)(t);if(this.iHash=e.create(),"function"!=typeof this.iHash.update)throw Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;let r=this.blockLen,i=new Uint8Array(r);i.set(n.length>r?e.create().update(n).digest():n);for(let e=0;e<i.length;e++)i[e]^=54;this.iHash.update(i),this.oHash=e.create();for(let e=0;e<i.length;e++)i[e]^=106;this.oHash.update(i),i.fill(0)}}let ea=(e,t,n)=>new es(e,t).update(n).digest();function ec(e,t,n,r){var i;let o;let{c:s,dkLen:a,DK:c,PRF:l,PRFSalt:u}=function(e,t,n,r){(0,ei.vp)(e);let{c:i,dkLen:o,asyncTick:s}=(0,eo.U5)({dkLen:32,asyncTick:10},r);if((0,ei.Rx)(i),(0,ei.Rx)(o),(0,ei.Rx)(s),i<1)throw Error("PBKDF2: iterations (c) should be >= 1");let a=(0,eo.O0)(t),c=(0,eo.O0)(n),l=new Uint8Array(o),u=ea.create(e,a),d=u._cloneInto().update(c);return{c:i,dkLen:o,asyncTick:s,DK:l,PRF:u,PRFSalt:d}}(e,t,n,r),d=new Uint8Array(4),h=(0,eo.GL)(d),f=new Uint8Array(l.outputLen);for(let e=1,t=0;t<a;e++,t+=l.outputLen){let n=c.subarray(t,t+l.outputLen);h.setInt32(0,e,!1),(o=u._cloneInto(o)).update(d).digestInto(f),n.set(f.subarray(0,n.length));for(let e=1;e<s;e++){l._cloneInto(o).update(f).digestInto(f);for(let e=0;e<n.length;e++)n[e]^=f[e]}}return i=o,l.destroy(),u.destroy(),i&&i.destroy(),f.fill(0),c}ea.create=(e,t)=>new es(e,t);class el extends eo.kb{update(e){(0,ei.Gg)(this);let{view:t,buffer:n,blockLen:r}=this,i=(e=(0,eo.O0)(e)).length;for(let o=0;o<i;){let s=Math.min(r-this.pos,i-o);if(s===r){let t=(0,eo.GL)(e);for(;r<=i-o;o+=r)this.process(t,o);continue}n.set(e.subarray(o,o+s),this.pos),this.pos+=s,o+=s,this.pos===r&&(this.process(t,0),this.pos=0)}return this.length+=e.length,this.roundClean(),this}digestInto(e){(0,ei.Gg)(this),(0,ei.J8)(e,this),this.finished=!0;let{buffer:t,view:n,blockLen:r,isLE:i}=this,{pos:o}=this;t[o++]=128,this.buffer.subarray(o).fill(0),this.padOffset>r-o&&(this.process(n,0),o=0);for(let e=o;e<r;e++)t[e]=0;!function(e,t,n,r){if("function"==typeof e.setBigUint64)return e.setBigUint64(t,n,r);let i=BigInt(32),o=BigInt(4294967295),s=Number(n>>i&o),a=Number(n&o),c=r?4:0,l=r?0:4;e.setUint32(t+c,s,r),e.setUint32(t+l,a,r)}(n,r-8,BigInt(8*this.length),i),this.process(n,0);let s=(0,eo.GL)(e),a=this.outputLen;if(a%4)throw Error("_sha2: outputLen should be aligned to 32bit");let c=a/4,l=this.get();if(c>l.length)throw Error("_sha2: outputLen bigger than state");for(let e=0;e<c;e++)s.setUint32(4*e,l[e],i)}digest(){let{buffer:e,outputLen:t}=this;this.digestInto(e);let n=e.slice(0,t);return this.destroy(),n}_cloneInto(e){e||(e=new this.constructor),e.set(...this.get());let{blockLen:t,buffer:n,length:r,finished:i,destroyed:o,pos:s}=this;return e.length=r,e.pos=s,e.finished=i,e.destroyed=o,r%t&&e.buffer.set(n),e}constructor(e,t,n,r){super(),this.blockLen=e,this.outputLen=t,this.padOffset=n,this.isLE=r,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(e),this.view=(0,eo.GL)(this.buffer)}}let eu=(e,t,n)=>e&t^~e&n,ed=(e,t,n)=>e&t^e&n^t&n,eh=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),ef=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),ep=new Uint32Array(64);class em extends el{get(){let{A:e,B:t,C:n,D:r,E:i,F:o,G:s,H:a}=this;return[e,t,n,r,i,o,s,a]}set(e,t,n,r,i,o,s,a){this.A=0|e,this.B=0|t,this.C=0|n,this.D=0|r,this.E=0|i,this.F=0|o,this.G=0|s,this.H=0|a}process(e,t){for(let n=0;n<16;n++,t+=4)ep[n]=e.getUint32(t,!1);for(let e=16;e<64;e++){let t=ep[e-15],n=ep[e-2],r=(0,eo.np)(t,7)^(0,eo.np)(t,18)^t>>>3,i=(0,eo.np)(n,17)^(0,eo.np)(n,19)^n>>>10;ep[e]=i+ep[e-7]+r+ep[e-16]|0}let{A:n,B:r,C:i,D:o,E:s,F:a,G:c,H:l}=this;for(let e=0;e<64;e++){let t=l+((0,eo.np)(s,6)^(0,eo.np)(s,11)^(0,eo.np)(s,25))+eu(s,a,c)+eh[e]+ep[e]|0,u=((0,eo.np)(n,2)^(0,eo.np)(n,13)^(0,eo.np)(n,22))+ed(n,r,i)|0;l=c,c=a,a=s,s=o+t|0,o=i,i=r,r=n,n=t+u|0}n=n+this.A|0,r=r+this.B|0,i=i+this.C|0,o=o+this.D|0,s=s+this.E|0,a=a+this.F|0,c=c+this.G|0,l=l+this.H|0,this.set(n,r,i,o,s,a,c,l)}roundClean(){ep.fill(0)}destroy(){this.set(0,0,0,0,0,0,0,0),this.buffer.fill(0)}constructor(){super(64,32,8,!1),this.A=0|ef[0],this.B=0|ef[1],this.C=0|ef[2],this.D=0|ef[3],this.E=0|ef[4],this.F=0|ef[5],this.G=0|ef[6],this.H=0|ef[7]}}let eg=(0,eo.hE)(()=>new em);var ev=n(94248);let[ey,eE]=ev.ZP.split(["0x428a2f98d728ae22","0x7137449123ef65cd","0xb5c0fbcfec4d3b2f","0xe9b5dba58189dbbc","0x3956c25bf348b538","0x59f111f1b605d019","0x923f82a4af194f9b","0xab1c5ed5da6d8118","0xd807aa98a3030242","0x12835b0145706fbe","0x243185be4ee4b28c","0x550c7dc3d5ffb4e2","0x72be5d74f27b896f","0x80deb1fe3b1696b1","0x9bdc06a725c71235","0xc19bf174cf692694","0xe49b69c19ef14ad2","0xefbe4786384f25e3","0x0fc19dc68b8cd5b5","0x240ca1cc77ac9c65","0x2de92c6f592b0275","0x4a7484aa6ea6e483","0x5cb0a9dcbd41fbd4","0x76f988da831153b5","0x983e5152ee66dfab","0xa831c66d2db43210","0xb00327c898fb213f","0xbf597fc7beef0ee4","0xc6e00bf33da88fc2","0xd5a79147930aa725","0x06ca6351e003826f","0x142929670a0e6e70","0x27b70a8546d22ffc","0x2e1b21385c26c926","0x4d2c6dfc5ac42aed","0x53380d139d95b3df","0x650a73548baf63de","0x766a0abb3c77b2a8","0x81c2c92e47edaee6","0x92722c851482353b","0xa2bfe8a14cf10364","0xa81a664bbc423001","0xc24b8b70d0f89791","0xc76c51a30654be30","0xd192e819d6ef5218","0xd69906245565a910","0xf40e35855771202a","0x106aa07032bbd1b8","0x19a4c116b8d2d0c8","0x1e376c085141ab53","0x2748774cdf8eeb99","0x34b0bcb5e19b48a8","0x391c0cb3c5c95a63","0x4ed8aa4ae3418acb","0x5b9cca4f7763e373","0x682e6ff3d6b2b8a3","0x748f82ee5defb2fc","0x78a5636f43172f60","0x84c87814a1f0ab72","0x8cc702081a6439ec","0x90befffa23631e28","0xa4506cebde82bde9","0xbef9a3f7b2c67915","0xc67178f2e372532b","0xca273eceea26619c","0xd186b8c721c0c207","0xeada7dd6cde0eb1e","0xf57d4f7fee6ed178","0x06f067aa72176fba","0x0a637dc5a2c898a6","0x113f9804bef90dae","0x1b710b35131c471b","0x28db77f523047d84","0x32caab7b40c72493","0x3c9ebe0a15c9bebc","0x431d67c49c100d4c","0x4cc5d4becb3e42b6","0x597f299cfc657e2a","0x5fcb6fab3ad6faec","0x6c44198c4a475817"].map(e=>BigInt(e))),eb=new Uint32Array(80),ew=new Uint32Array(80);class eT extends el{get(){let{Ah:e,Al:t,Bh:n,Bl:r,Ch:i,Cl:o,Dh:s,Dl:a,Eh:c,El:l,Fh:u,Fl:d,Gh:h,Gl:f,Hh:p,Hl:m}=this;return[e,t,n,r,i,o,s,a,c,l,u,d,h,f,p,m]}set(e,t,n,r,i,o,s,a,c,l,u,d,h,f,p,m){this.Ah=0|e,this.Al=0|t,this.Bh=0|n,this.Bl=0|r,this.Ch=0|i,this.Cl=0|o,this.Dh=0|s,this.Dl=0|a,this.Eh=0|c,this.El=0|l,this.Fh=0|u,this.Fl=0|d,this.Gh=0|h,this.Gl=0|f,this.Hh=0|p,this.Hl=0|m}process(e,t){for(let n=0;n<16;n++,t+=4)eb[n]=e.getUint32(t),ew[n]=e.getUint32(t+=4);for(let e=16;e<80;e++){let t=0|eb[e-15],n=0|ew[e-15],r=ev.ZP.rotrSH(t,n,1)^ev.ZP.rotrSH(t,n,8)^ev.ZP.shrSH(t,n,7),i=ev.ZP.rotrSL(t,n,1)^ev.ZP.rotrSL(t,n,8)^ev.ZP.shrSL(t,n,7),o=0|eb[e-2],s=0|ew[e-2],a=ev.ZP.rotrSH(o,s,19)^ev.ZP.rotrBH(o,s,61)^ev.ZP.shrSH(o,s,6),c=ev.ZP.rotrSL(o,s,19)^ev.ZP.rotrBL(o,s,61)^ev.ZP.shrSL(o,s,6),l=ev.ZP.add4L(i,c,ew[e-7],ew[e-16]),u=ev.ZP.add4H(l,r,a,eb[e-7],eb[e-16]);eb[e]=0|u,ew[e]=0|l}let{Ah:n,Al:r,Bh:i,Bl:o,Ch:s,Cl:a,Dh:c,Dl:l,Eh:u,El:d,Fh:h,Fl:f,Gh:p,Gl:m,Hh:g,Hl:v}=this;for(let e=0;e<80;e++){let t=ev.ZP.rotrSH(u,d,14)^ev.ZP.rotrSH(u,d,18)^ev.ZP.rotrBH(u,d,41),y=ev.ZP.rotrSL(u,d,14)^ev.ZP.rotrSL(u,d,18)^ev.ZP.rotrBL(u,d,41),E=u&h^~u&p,b=d&f^~d&m,w=ev.ZP.add5L(v,y,b,eE[e],ew[e]),T=ev.ZP.add5H(w,g,t,E,ey[e],eb[e]),_=0|w,A=ev.ZP.rotrSH(n,r,28)^ev.ZP.rotrBH(n,r,34)^ev.ZP.rotrBH(n,r,39),R=ev.ZP.rotrSL(n,r,28)^ev.ZP.rotrBL(n,r,34)^ev.ZP.rotrBL(n,r,39),S=n&i^n&s^i&s,P=r&o^r&a^o&a;g=0|p,v=0|m,p=0|h,m=0|f,h=0|u,f=0|d,({h:u,l:d}=ev.ZP.add(0|c,0|l,0|T,0|_)),c=0|s,l=0|a,s=0|i,a=0|o,i=0|n,o=0|r;let I=ev.ZP.add3L(_,R,P);n=ev.ZP.add3H(I,T,A,S),r=0|I}({h:n,l:r}=ev.ZP.add(0|this.Ah,0|this.Al,0|n,0|r)),({h:i,l:o}=ev.ZP.add(0|this.Bh,0|this.Bl,0|i,0|o)),({h:s,l:a}=ev.ZP.add(0|this.Ch,0|this.Cl,0|s,0|a)),({h:c,l:l}=ev.ZP.add(0|this.Dh,0|this.Dl,0|c,0|l)),({h:u,l:d}=ev.ZP.add(0|this.Eh,0|this.El,0|u,0|d)),({h:h,l:f}=ev.ZP.add(0|this.Fh,0|this.Fl,0|h,0|f)),({h:p,l:m}=ev.ZP.add(0|this.Gh,0|this.Gl,0|p,0|m)),({h:g,l:v}=ev.ZP.add(0|this.Hh,0|this.Hl,0|g,0|v)),this.set(n,r,i,o,s,a,c,l,u,d,h,f,p,m,g,v)}roundClean(){eb.fill(0),ew.fill(0)}destroy(){this.buffer.fill(0),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}constructor(){super(128,64,16,!1),this.Ah=1779033703,this.Al=-205731576,this.Bh=-1150833019,this.Bl=-2067093701,this.Ch=1013904242,this.Cl=-23791573,this.Dh=-1521486534,this.Dl=1595750129,this.Eh=1359893119,this.El=-1377402159,this.Fh=-1694144372,this.Fl=725511199,this.Gh=528734635,this.Gl=-79577749,this.Hh=1541459225,this.Hl=327033209}}let e_=(0,eo.hE)(()=>new eT);function eA(e,t,n,r,i){if(!["sha256","sha512"].includes(i))throw Error("Only sha256 and sha512 are supported");return(0,X.XB)(e),(0,X.XB)(t),ec("sha256"===i?eg:e_,e,t,{c:n,dkLen:r})}let eR=(e,t)=>e<<t|e>>>32-t;function eS(e,t,n,r,i,o){let s=e[t++]^n[r++],a=e[t++]^n[r++],c=e[t++]^n[r++],l=e[t++]^n[r++],u=e[t++]^n[r++],d=e[t++]^n[r++],h=e[t++]^n[r++],f=e[t++]^n[r++],p=e[t++]^n[r++],m=e[t++]^n[r++],g=e[t++]^n[r++],v=e[t++]^n[r++],y=e[t++]^n[r++],E=e[t++]^n[r++],b=e[t++]^n[r++],w=e[t++]^n[r++],T=s,_=a,A=c,R=l,S=u,P=d,I=h,O=f,C=p,x=m,N=g,k=v,L=y,B=E,D=b,M=w;for(let e=0;e<8;e+=2)S^=eR(T+L|0,7),C^=eR(S+T|0,9),L^=eR(C+S|0,13),T^=eR(L+C|0,18),x^=eR(P+_|0,7),B^=eR(x+P|0,9),_^=eR(B+x|0,13),P^=eR(_+B|0,18),D^=eR(N+I|0,7),A^=eR(D+N|0,9),I^=eR(A+D|0,13),N^=eR(I+A|0,18),R^=eR(M+k|0,7),O^=eR(R+M|0,9),k^=eR(O+R|0,13),M^=eR(k+O|0,18),_^=eR(T+R|0,7),A^=eR(_+T|0,9),R^=eR(A+_|0,13),T^=eR(R+A|0,18),I^=eR(P+S|0,7),O^=eR(I+P|0,9),S^=eR(O+I|0,13),P^=eR(S+O|0,18),k^=eR(N+x|0,7),C^=eR(k+N|0,9),x^=eR(C+k|0,13),N^=eR(x+C|0,18),L^=eR(M+D|0,7),B^=eR(L+M|0,9),D^=eR(B+L|0,13),M^=eR(D+B|0,18);i[o++]=s+T|0,i[o++]=a+_|0,i[o++]=c+A|0,i[o++]=l+R|0,i[o++]=u+S|0,i[o++]=d+P|0,i[o++]=h+I|0,i[o++]=f+O|0,i[o++]=p+C|0,i[o++]=m+x|0,i[o++]=g+N|0,i[o++]=v+k|0,i[o++]=y+L|0,i[o++]=E+B|0,i[o++]=b+D|0,i[o++]=w+M|0}function eP(e,t,n,r,i){let o=r+0,s=r+16*i;for(let r=0;r<16;r++)n[s+r]=e[t+(2*i-1)*16+r];for(let r=0;r<i;r++,o+=16,t+=16)eS(n,s,e,t,n,o),r>0&&(s+=16),eS(n,o,e,t+=16,n,s)}function eI(e,t,n,r,i,o,s){return(0,X.XB)(e),(0,X.XB)(t),function(e,t,n){let{N:r,r:i,p:o,dkLen:s,blockSize32:a,V:c,B32:l,B:u,tmp:d,blockMixCb:h}=function(e,t,n){let{N:r,r:i,p:o,dkLen:s,asyncTick:a,maxmem:c,onProgress:l}=(0,eo.U5)({dkLen:32,asyncTick:10,maxmem:1073742848},n);if((0,ei.Rx)(r),(0,ei.Rx)(i),(0,ei.Rx)(o),(0,ei.Rx)(s),(0,ei.Rx)(a),(0,ei.Rx)(c),void 0!==l&&"function"!=typeof l)throw Error("progressCb should be function");let u=128*i,d=u/4;if(r<=1||(r&r-1)!=0||r>=2**(u/8)||r>4294967296)throw Error("Scrypt: N must be larger than 1, a power of 2, less than 2^(128 * r / 8) and less than 2^32");if(o<0||o>(4294967296-1)*32/u)throw Error("Scrypt: p must be a positive integer less than or equal to ((2^32 - 1) * 32) / (128 * r)");if(s<0||s>(4294967296-1)*32)throw Error("Scrypt: dkLen should be positive integer less than or equal to (2^32 - 1) * 32");let h=u*(r+o);if(h>c)throw Error("Scrypt: parameters too large, ".concat(h," (128 * r * (N + p)) > ").concat(c," (maxmem)"));let f=ec(eg,e,t,{c:1,dkLen:u*o}),p=(0,eo.Jq)(f),m=(0,eo.Jq)(new Uint8Array(u*r)),g=(0,eo.Jq)(new Uint8Array(u)),v=()=>{};if(l){let e=2*r*o,t=Math.max(Math.floor(e/1e4),1),n=0;v=()=>{n++,l&&(!(n%t)||n===e)&&l(n/e)}}return{N:r,r:i,p:o,dkLen:s,blockSize32:d,V:m,B32:p,B:f,tmp:g,blockMixCb:v,asyncTick:a}}(e,t,n);for(let e=0;e<o;e++){let t=a*e;for(let e=0;e<a;e++)c[e]=l[t+e];for(let e=0,t=0;e<r-1;e++)eP(c,t,c,t+=a,i),h();eP(c,(r-1)*a,l,t,i),h();for(let e=0;e<r;e++){let e=l[t+a-16]%r;for(let n=0;n<a;n++)d[n]=l[t+n]^c[e*a+n];eP(d,0,l,t,i),h()}}return function(e,t,n,r,i){let o=ec(eg,e,n,{c:1,dkLen:t});return n.fill(0),r.fill(0),i.fill(0),o}(e,s,u,c,d)}(e,t,{N:n,r:i,p:r,dkLen:o,onProgress:s})}BigInt(0);let eO=BigInt(1),eC=BigInt(2);function ex(e){return e instanceof Uint8Array||null!=e&&"object"==typeof e&&"Uint8Array"===e.constructor.name}let eN=Array.from({length:256},(e,t)=>t.toString(16).padStart(2,"0"));function ek(e){if(!ex(e))throw Error("Uint8Array expected");let t="";for(let n=0;n<e.length;n++)t+=eN[e[n]];return t}function eL(e){if("string"!=typeof e)throw Error("hex string expected, got "+typeof e);return BigInt(""===e?"0":"0x".concat(e))}let eB={_0:48,_9:57,_A:65,_F:70,_a:97,_f:102};function eD(e){return e>=eB._0&&e<=eB._9?e-eB._0:e>=eB._A&&e<=eB._F?e-(eB._A-10):e>=eB._a&&e<=eB._f?e-(eB._a-10):void 0}function eM(e){if("string"!=typeof e)throw Error("hex string expected, got "+typeof e);let t=e.length,n=t/2;if(t%2)throw Error("padded hex string expected, got unpadded hex of length "+t);let r=new Uint8Array(n);for(let t=0,i=0;t<n;t++,i+=2){let n=eD(e.charCodeAt(i)),o=eD(e.charCodeAt(i+1));if(void 0===n||void 0===o)throw Error('hex string expected, got non-hex character "'+(e[i]+e[i+1])+'" at index '+i);r[t]=16*n+o}return r}function eU(e){return eL(ek(e))}function eH(e){if(!ex(e))throw Error("Uint8Array expected");return eL(ek(Uint8Array.from(e).reverse()))}function eF(e,t){return eM(e.toString(16).padStart(2*t,"0"))}function eG(e,t){return eF(e,t).reverse()}function ej(e,t,n){let r;if("string"==typeof t)try{r=eM(t)}catch(n){throw Error("".concat(e,' must be valid hex string, got "').concat(t,'". Cause: ').concat(n))}else if(ex(t))r=Uint8Array.from(t);else throw Error("".concat(e," must be hex string or Uint8Array"));let i=r.length;if("number"==typeof n&&i!==n)throw Error("".concat(e," expected ").concat(n," bytes, got ").concat(i));return r}function eq(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];let r=0;for(let e=0;e<t.length;e++){let n=t[e];if(!ex(n))throw Error("Uint8Array expected");r+=n.length}let i=new Uint8Array(r),o=0;for(let e=0;e<t.length;e++){let n=t[e];i.set(n,o),o+=n.length}return i}let eK=e=>(eC<<BigInt(e-1))-eO,eW=e=>new Uint8Array(e),ez=e=>Uint8Array.from(e);function eV(e,t,n){if("number"!=typeof e||e<2)throw Error("hashLen must be a number");if("number"!=typeof t||t<2)throw Error("qByteLen must be a number");if("function"!=typeof n)throw Error("hmacFn must be a function");let r=eW(e),i=eW(e),o=0,s=()=>{r.fill(1),i.fill(0),o=0},a=function(){for(var e=arguments.length,t=Array(e),o=0;o<e;o++)t[o]=arguments[o];return n(i,r,...t)},c=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:eW();i=a(ez([0]),e),r=a(),0!==e.length&&(i=a(ez([1]),e),r=a())},l=()=>{if(o++>=1e3)throw Error("drbg: tried 1000 values");let e=0,n=[];for(;e<t;){let t=(r=a()).slice();n.push(t),e+=r.length}return eq(...n)};return(e,t)=>{let n;for(s(),c(e);!(n=t(l()));)c();return s(),n}}let eZ={bigint:e=>"bigint"==typeof e,function:e=>"function"==typeof e,boolean:e=>"boolean"==typeof e,string:e=>"string"==typeof e,stringOrUint8Array:e=>"string"==typeof e||ex(e),isSafeInteger:e=>Number.isSafeInteger(e),array:e=>Array.isArray(e),field:(e,t)=>t.Fp.isValid(e),hash:e=>"function"==typeof e&&Number.isSafeInteger(e.outputLen)};function eY(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=(t,n,r)=>{let i=eZ[n];if("function"!=typeof i)throw Error('Invalid validator "'.concat(n,'", expected function'));let o=e[t];if((!r||void 0!==o)&&!i(o,e))throw Error("Invalid param ".concat(String(t),"=").concat(o," (").concat(typeof o,"), expected ").concat(n))};for(let[e,n]of Object.entries(t))r(e,n,!1);for(let[e,t]of Object.entries(n))r(e,t,!0);return e}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */let eQ=BigInt(0),eX=BigInt(1),eJ=BigInt(2),e$=BigInt(3),e0=BigInt(4),e1=BigInt(5),e2=BigInt(8);function e3(e,t){let n=e%t;return n>=eQ?n:t+n}function e4(e,t,n){let r=e;for(;t-- >eQ;)r*=r,r%=n;return r}function e5(e,t){if(e===eQ||t<=eQ)throw Error("invert: expected positive integers, got n=".concat(e," mod=").concat(t));let n=e3(e,t),r=t,i=eQ,o=eX,s=eX,a=eQ;for(;n!==eQ;){let e=r/n,t=r%n,c=i-s*e,l=o-a*e;r=n,n=t,i=s,o=a,s=c,a=l}if(r!==eX)throw Error("invert: does not exist");return e3(i,t)}BigInt(9),BigInt(16);let e6=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function e8(e,t){let n=void 0!==t?t:e.toString(2).length;return{nBitLength:n,nByteLength:Math.ceil(n/8)}}function e7(e){if("bigint"!=typeof e)throw Error("field order must be bigint");return Math.ceil(e.toString(2).length/8)}function e9(e){let t=e7(e);return t+Math.ceil(t/2)}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */let te=BigInt(0),tt=BigInt(1);function tn(e){return eY(e.Fp,e6.reduce((e,t)=>(e[t]="function",e),{ORDER:"bigint",MASK:"bigint",BYTES:"isSafeInteger",BITS:"isSafeInteger"})),eY(e,{n:"bigint",h:"bigint",Gx:"field",Gy:"field"},{nBitLength:"isSafeInteger",nByteLength:"isSafeInteger"}),Object.freeze({...e8(e.n,e.nBitLength),...e,p:e.Fp.ORDER})}let{bytesToNumberBE:tr,hexToBytes:ti}=w,to={Err:class extends Error{constructor(e=""){super(e)}},_parseInt(e){let{Err:t}=to;if(e.length<2||2!==e[0])throw new t("Invalid signature integer tag");let n=e[1],r=e.subarray(2,n+2);if(!n||r.length!==n)throw new t("Invalid signature integer: wrong length");if(128&r[0])throw new t("Invalid signature integer: negative");if(0===r[0]&&!(128&r[1]))throw new t("Invalid signature integer: unnecessary leading zero");return{d:tr(r),l:e.subarray(n+2)}},toSig(e){let{Err:t}=to,n="string"==typeof e?ti(e):e;if(!ex(n))throw Error("ui8a expected");let r=n.length;if(r<2||48!=n[0])throw new t("Invalid signature tag");if(n[1]!==r-2)throw new t("Invalid signature: incorrect length");let{d:i,l:o}=to._parseInt(n.subarray(2)),{d:s,l:a}=to._parseInt(o);if(a.length)throw new t("Invalid signature: left bytes after parsing");return{r:i,s}},hexFromSig(e){let t=e=>8&Number.parseInt(e[0],16)?"00"+e:e,n=e=>{let t=e.toString(16);return 1&t.length?"0".concat(t):t},r=t(n(e.s)),i=t(n(e.r)),o=r.length/2,s=i.length/2,a=n(o),c=n(s);return"30".concat(n(s+o+4),"02").concat(c).concat(i,"02").concat(a).concat(r)}},ts=BigInt(0),ta=BigInt(1),tc=(BigInt(2),BigInt(3));BigInt(4);/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */let tl=BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffffc2f"),tu=BigInt("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141"),td=BigInt(1),th=BigInt(2),tf=(e,t)=>(e+t/th)/t,tp=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};if(e<=eQ)throw Error("Expected Field ORDER > 0, got ".concat(e));let{nBitLength:i,nByteLength:o}=e8(e,t);if(o>2048)throw Error("Field lengths over 2048 bytes are not supported");let s=function(e){if(e%e0===e$){let t=(e+eX)/e0;return function(e,n){let r=e.pow(n,t);if(!e.eql(e.sqr(r),n))throw Error("Cannot find square root");return r}}if(e%e2===e1){let t=(e-e1)/e2;return function(e,n){let r=e.mul(n,eJ),i=e.pow(r,t),o=e.mul(n,i),s=e.mul(e.mul(o,eJ),i),a=e.mul(o,e.sub(s,e.ONE));if(!e.eql(e.sqr(a),n))throw Error("Cannot find square root");return a}}return function(e){let t,n,r;let i=(e-eX)/eJ;for(t=e-eX,n=0;t%eJ===eQ;t/=eJ,n++);for(r=eJ;r<e&&function(e,t,n){if(n<=eQ||t<eQ)throw Error("Expected power/modulo > 0");if(n===eX)return eQ;let r=eX;for(;t>eQ;)t&eX&&(r=r*e%n),e=e*e%n,t>>=eX;return r}(r,i,e)!==e-eX;r++);if(1===n){let t=(e+eX)/e0;return function(e,n){let r=e.pow(n,t);if(!e.eql(e.sqr(r),n))throw Error("Cannot find square root");return r}}let o=(t+eX)/eJ;return function(e,s){if(e.pow(s,i)===e.neg(e.ONE))throw Error("Cannot find square root");let a=n,c=e.pow(e.mul(e.ONE,r),t),l=e.pow(s,o),u=e.pow(s,t);for(;!e.eql(u,e.ONE);){if(e.eql(u,e.ZERO))return e.ZERO;let t=1;for(let n=e.sqr(u);t<a&&!e.eql(n,e.ONE);t++)n=e.sqr(n);let n=e.pow(c,eX<<BigInt(a-t-1));c=e.sqr(n),l=e.mul(l,n),u=e.mul(u,c),a=t}return l}}(e)}(e),a=Object.freeze({ORDER:e,BITS:i,BYTES:o,MASK:eK(i),ZERO:eQ,ONE:eX,create:t=>e3(t,e),isValid:t=>{if("bigint"!=typeof t)throw Error("Invalid field element: expected bigint, got ".concat(typeof t));return eQ<=t&&t<e},is0:e=>e===eQ,isOdd:e=>(e&eX)===eX,neg:t=>e3(-t,e),eql:(e,t)=>e===t,sqr:t=>e3(t*t,e),add:(t,n)=>e3(t+n,e),sub:(t,n)=>e3(t-n,e),mul:(t,n)=>e3(t*n,e),pow:(e,t)=>(function(e,t,n){if(n<eQ)throw Error("Expected power > 0");if(n===eQ)return e.ONE;if(n===eX)return t;let r=e.ONE,i=t;for(;n>eQ;)n&eX&&(r=e.mul(r,i)),i=e.sqr(i),n>>=eX;return r})(a,e,t),div:(t,n)=>e3(t*e5(n,e),e),sqrN:e=>e*e,addN:(e,t)=>e+t,subN:(e,t)=>e-t,mulN:(e,t)=>e*t,inv:t=>e5(t,e),sqrt:r.sqrt||(e=>s(a,e)),invertBatch:e=>(function(e,t){let n=Array(t.length),r=t.reduce((t,r,i)=>e.is0(r)?t:(n[i]=t,e.mul(t,r)),e.ONE),i=e.inv(r);return t.reduceRight((t,r,i)=>e.is0(r)?t:(n[i]=e.mul(t,n[i]),e.mul(t,r)),i),n})(a,e),cmov:(e,t,n)=>n?t:e,toBytes:e=>n?eG(e,o):eF(e,o),fromBytes:e=>{if(e.length!==o)throw Error("Fp.fromBytes: expected ".concat(o,", got ").concat(e.length));return n?eH(e):eU(e)}});return Object.freeze(a)}(tl,void 0,void 0,{sqrt:function(e){let t=BigInt(3),n=BigInt(6),r=BigInt(11),i=BigInt(22),o=BigInt(23),s=BigInt(44),a=BigInt(88),c=e*e*e%tl,l=c*c*e%tl,u=e4(l,t,tl)*l%tl,d=e4(u,t,tl)*l%tl,h=e4(d,th,tl)*c%tl,f=e4(h,r,tl)*h%tl,p=e4(f,i,tl)*f%tl,m=e4(p,s,tl)*p%tl,g=e4(m,a,tl)*m%tl,v=e4(g,s,tl)*p%tl,y=e4(v,t,tl)*l%tl,E=e4(y,o,tl)*f%tl,b=e4(E,n,tl)*c%tl,w=e4(b,th,tl);if(!tp.eql(tp.sqr(w),e))throw Error("Cannot find square root");return w}}),tm=function(e,t){let n=t=>(function(e){let t=function(e){let t=tn(e);return eY(t,{hash:"hash",hmac:"function",randomBytes:"function"},{bits2int:"function",bits2int_modN:"function",lowS:"boolean"}),Object.freeze({lowS:!0,...t})}(e),{Fp:n,n:r}=t,i=n.BYTES+1,o=2*n.BYTES+1;function s(e){return e3(e,r)}let{ProjectivePoint:a,normPrivateKeyToScalar:c,weierstrassEquation:l,isWithinCurveOrder:u}=function(e){let t=/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */function(e){let t=tn(e);eY(t,{a:"field",b:"field"},{allowedPrivateKeyLengths:"array",wrapPrivateKey:"boolean",isTorsionFree:"function",clearCofactor:"function",allowInfinityPoint:"boolean",fromBytes:"function",toBytes:"function"});let{endo:n,Fp:r,a:i}=t;if(n){if(!r.eql(i,r.ZERO))throw Error("Endomorphism can only be defined for Koblitz curves that have a=0");if("object"!=typeof n||"bigint"!=typeof n.beta||"function"!=typeof n.splitScalar)throw Error("Expected endomorphism with beta: bigint and splitScalar: function")}return Object.freeze({...t})}(e),{Fp:n}=t,r=t.toBytes||((e,t,r)=>{let i=t.toAffine();return eq(Uint8Array.from([4]),n.toBytes(i.x),n.toBytes(i.y))}),i=t.fromBytes||(e=>{let t=e.subarray(1);return{x:n.fromBytes(t.subarray(0,n.BYTES)),y:n.fromBytes(t.subarray(n.BYTES,2*n.BYTES))}});function o(e){let{a:r,b:i}=t,o=n.sqr(e),s=n.mul(o,e);return n.add(n.add(s,n.mul(e,r)),i)}if(!n.eql(n.sqr(t.Gy),o(t.Gx)))throw Error("bad generator point: equation left != right");function s(e){return"bigint"==typeof e&&ts<e&&e<t.n}function a(e){if(!s(e))throw Error("Expected valid bigint: 0 < bigint < curve.n")}function c(e){let n;let{allowedPrivateKeyLengths:r,nByteLength:i,wrapPrivateKey:o,n:s}=t;if(r&&"bigint"!=typeof e){if(ex(e)&&(e=ek(e)),"string"!=typeof e||!r.includes(e.length))throw Error("Invalid key");e=e.padStart(2*i,"0")}try{n="bigint"==typeof e?e:eU(ej("private key",e,i))}catch(t){throw Error("private key must be ".concat(i," bytes, hex or bigint, not ").concat(typeof e))}return o&&(n=e3(n,s)),a(n),n}let l=new Map;function u(e){if(!(e instanceof d))throw Error("ProjectivePoint expected")}class d{static fromAffine(e){let{x:t,y:r}=e||{};if(!e||!n.isValid(t)||!n.isValid(r))throw Error("invalid affine point");if(e instanceof d)throw Error("projective point not allowed");let i=e=>n.eql(e,n.ZERO);return i(t)&&i(r)?d.ZERO:new d(t,r,n.ONE)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static normalizeZ(e){let t=n.invertBatch(e.map(e=>e.pz));return e.map((e,n)=>e.toAffine(t[n])).map(d.fromAffine)}static fromHex(e){let t=d.fromAffine(i(ej("pointHex",e)));return t.assertValidity(),t}static fromPrivateKey(e){return d.BASE.multiply(c(e))}_setWindowSize(e){this._WINDOW_SIZE=e,l.delete(this)}assertValidity(){if(this.is0()){if(t.allowInfinityPoint&&!n.is0(this.py))return;throw Error("bad point: ZERO")}let{x:e,y:r}=this.toAffine();if(!n.isValid(e)||!n.isValid(r))throw Error("bad point: x or y not FE");let i=n.sqr(r),s=o(e);if(!n.eql(i,s))throw Error("bad point: equation left != right");if(!this.isTorsionFree())throw Error("bad point: not in prime-order subgroup")}hasEvenY(){let{y:e}=this.toAffine();if(n.isOdd)return!n.isOdd(e);throw Error("Field doesn't support isOdd")}equals(e){u(e);let{px:t,py:r,pz:i}=this,{px:o,py:s,pz:a}=e,c=n.eql(n.mul(t,a),n.mul(o,i)),l=n.eql(n.mul(r,a),n.mul(s,i));return c&&l}negate(){return new d(this.px,n.neg(this.py),this.pz)}double(){let{a:e,b:r}=t,i=n.mul(r,tc),{px:o,py:s,pz:a}=this,c=n.ZERO,l=n.ZERO,u=n.ZERO,h=n.mul(o,o),f=n.mul(s,s),p=n.mul(a,a),m=n.mul(o,s);return m=n.add(m,m),u=n.mul(o,a),u=n.add(u,u),c=n.mul(e,u),l=n.mul(i,p),l=n.add(c,l),c=n.sub(f,l),l=n.add(f,l),l=n.mul(c,l),c=n.mul(m,c),u=n.mul(i,u),p=n.mul(e,p),m=n.sub(h,p),m=n.mul(e,m),m=n.add(m,u),u=n.add(h,h),h=n.add(u,h),h=n.add(h,p),h=n.mul(h,m),l=n.add(l,h),p=n.mul(s,a),p=n.add(p,p),h=n.mul(p,m),c=n.sub(c,h),u=n.mul(p,f),u=n.add(u,u),new d(c,l,u=n.add(u,u))}add(e){u(e);let{px:r,py:i,pz:o}=this,{px:s,py:a,pz:c}=e,l=n.ZERO,h=n.ZERO,f=n.ZERO,p=t.a,m=n.mul(t.b,tc),g=n.mul(r,s),v=n.mul(i,a),y=n.mul(o,c),E=n.add(r,i),b=n.add(s,a);E=n.mul(E,b),b=n.add(g,v),E=n.sub(E,b),b=n.add(r,o);let w=n.add(s,c);return b=n.mul(b,w),w=n.add(g,y),b=n.sub(b,w),w=n.add(i,o),l=n.add(a,c),w=n.mul(w,l),l=n.add(v,y),w=n.sub(w,l),f=n.mul(p,b),l=n.mul(m,y),f=n.add(l,f),l=n.sub(v,f),f=n.add(v,f),h=n.mul(l,f),v=n.add(g,g),v=n.add(v,g),y=n.mul(p,y),b=n.mul(m,b),v=n.add(v,y),y=n.sub(g,y),y=n.mul(p,y),b=n.add(b,y),g=n.mul(v,b),h=n.add(h,g),g=n.mul(w,b),l=n.mul(E,l),l=n.sub(l,g),g=n.mul(E,v),f=n.mul(w,f),new d(l,h,f=n.add(f,g))}subtract(e){return this.add(e.negate())}is0(){return this.equals(d.ZERO)}wNAF(e){return f.wNAFCached(this,l,e,e=>{let t=n.invertBatch(e.map(e=>e.pz));return e.map((e,n)=>e.toAffine(t[n])).map(d.fromAffine)})}multiplyUnsafe(e){let r=d.ZERO;if(e===ts)return r;if(a(e),e===ta)return this;let{endo:i}=t;if(!i)return f.unsafeLadder(this,e);let{k1neg:o,k1:s,k2neg:c,k2:l}=i.splitScalar(e),u=r,h=r,p=this;for(;s>ts||l>ts;)s&ta&&(u=u.add(p)),l&ta&&(h=h.add(p)),p=p.double(),s>>=ta,l>>=ta;return o&&(u=u.negate()),c&&(h=h.negate()),h=new d(n.mul(h.px,i.beta),h.py,h.pz),u.add(h)}multiply(e){let r,i;a(e);let{endo:o}=t;if(o){let{k1neg:t,k1:s,k2neg:a,k2:c}=o.splitScalar(e),{p:l,f:u}=this.wNAF(s),{p:h,f:p}=this.wNAF(c);l=f.constTimeNegate(t,l),h=f.constTimeNegate(a,h),h=new d(n.mul(h.px,o.beta),h.py,h.pz),r=l.add(h),i=u.add(p)}else{let{p:t,f:n}=this.wNAF(e);r=t,i=n}return d.normalizeZ([r,i])[0]}multiplyAndAddUnsafe(e,t,n){let r=d.BASE,i=(e,t)=>t!==ts&&t!==ta&&e.equals(r)?e.multiply(t):e.multiplyUnsafe(t),o=i(this,t).add(i(e,n));return o.is0()?void 0:o}toAffine(e){let{px:t,py:r,pz:i}=this,o=this.is0();null==e&&(e=o?n.ONE:n.inv(i));let s=n.mul(t,e),a=n.mul(r,e),c=n.mul(i,e);if(o)return{x:n.ZERO,y:n.ZERO};if(!n.eql(c,n.ONE))throw Error("invZ was invalid");return{x:s,y:a}}isTorsionFree(){let{h:e,isTorsionFree:n}=t;if(e===ta)return!0;if(n)return n(d,this);throw Error("isTorsionFree() has not been declared for the elliptic curve")}clearCofactor(){let{h:e,clearCofactor:n}=t;return e===ta?this:n?n(d,this):this.multiplyUnsafe(t.h)}toRawBytes(){let e=!(arguments.length>0)||void 0===arguments[0]||arguments[0];return this.assertValidity(),r(d,this,e)}toHex(){let e=!(arguments.length>0)||void 0===arguments[0]||arguments[0];return ek(this.toRawBytes(e))}constructor(e,t,r){if(this.px=e,this.py=t,this.pz=r,null==e||!n.isValid(e))throw Error("x required");if(null==t||!n.isValid(t))throw Error("y required");if(null==r||!n.isValid(r))throw Error("z required")}}d.BASE=new d(t.Gx,t.Gy,n.ONE),d.ZERO=new d(n.ZERO,n.ONE,n.ZERO);let h=t.nBitLength,f=function(e,t){let n=(e,t)=>{let n=t.negate();return e?n:t},r=e=>({windows:Math.ceil(t/e)+1,windowSize:2**(e-1)});return{constTimeNegate:n,unsafeLadder(t,n){let r=e.ZERO,i=t;for(;n>te;)n&tt&&(r=r.add(i)),i=i.double(),n>>=tt;return r},precomputeWindow(e,t){let{windows:n,windowSize:i}=r(t),o=[],s=e,a=s;for(let e=0;e<n;e++){a=s,o.push(a);for(let e=1;e<i;e++)a=a.add(s),o.push(a);s=a.double()}return o},wNAF(t,i,o){let{windows:s,windowSize:a}=r(t),c=e.ZERO,l=e.BASE,u=BigInt(2**t-1),d=2**t,h=BigInt(t);for(let e=0;e<s;e++){let t=e*a,r=Number(o&u);o>>=h,r>a&&(r-=d,o+=tt);let s=t+Math.abs(r)-1,f=e%2!=0,p=r<0;0===r?l=l.add(n(f,i[t])):c=c.add(n(p,i[s]))}return{p:c,f:l}},wNAFCached(e,t,n,r){let i=e._WINDOW_SIZE||1,o=t.get(e);return o||(o=this.precomputeWindow(e,i),1!==i&&t.set(e,r(o))),this.wNAF(i,o,n)}}}(d,t.endo?Math.ceil(h/2):h);return{CURVE:t,ProjectivePoint:d,normPrivateKeyToScalar:c,weierstrassEquation:o,isWithinCurveOrder:s}}({...t,toBytes(e,t,r){let i=t.toAffine(),o=n.toBytes(i.x),s=eq;return r?s(Uint8Array.from([t.hasEvenY()?2:3]),o):s(Uint8Array.from([4]),o,n.toBytes(i.y))},fromBytes(e){let t=e.length,r=e[0],s=e.subarray(1);if(t===i&&(2===r||3===r)){let e=eU(s);if(!(ts<e&&e<n.ORDER))throw Error("Point is not on curve");let t=l(e),i=n.sqrt(t);return(1&r)==1!=((i&ta)===ta)&&(i=n.neg(i)),{x:e,y:i}}if(t===o&&4===r)return{x:n.fromBytes(s.subarray(0,n.BYTES)),y:n.fromBytes(s.subarray(n.BYTES,2*n.BYTES))};throw Error("Point of length ".concat(t," was invalid. Expected ").concat(i," compressed bytes or ").concat(o," uncompressed bytes"))}}),d=e=>ek(eF(e,t.nByteLength)),h=(e,t,n)=>eU(e.slice(t,n));class f{static fromCompact(e){let n=t.nByteLength;return new f(h(e=ej("compactSignature",e,2*n),0,n),h(e,n,2*n))}static fromDER(e){let{r:t,s:n}=to.toSig(ej("DER",e));return new f(t,n)}assertValidity(){if(!u(this.r))throw Error("r must be 0 < r < CURVE.n");if(!u(this.s))throw Error("s must be 0 < s < CURVE.n")}addRecoveryBit(e){return new f(this.r,this.s,e)}recoverPublicKey(e){let{r:i,s:o,recovery:c}=this,l=g(ej("msgHash",e));if(null==c||![0,1,2,3].includes(c))throw Error("recovery id invalid");let u=2===c||3===c?i+t.n:i;if(u>=n.ORDER)throw Error("recovery id 2 or 3 invalid");let h=(1&c)==0?"02":"03",f=a.fromHex(h+d(u)),p=e5(u,r),m=s(-l*p),v=s(o*p),y=a.BASE.multiplyAndAddUnsafe(f,m,v);if(!y)throw Error("point at infinify");return y.assertValidity(),y}hasHighS(){return this.s>r>>ta}normalizeS(){return this.hasHighS()?new f(this.r,s(-this.s),this.recovery):this}toDERRawBytes(){return eM(this.toDERHex())}toDERHex(){return to.hexFromSig({r:this.r,s:this.s})}toCompactRawBytes(){return eM(this.toCompactHex())}toCompactHex(){return d(this.r)+d(this.s)}constructor(e,t,n){this.r=e,this.s=t,this.recovery=n,this.assertValidity()}}function p(e){let t=ex(e),n="string"==typeof e,r=(t||n)&&e.length;return t?r===i||r===o:n?r===2*i||r===2*o:e instanceof a}let m=t.bits2int||function(e){let n=eU(e),r=8*e.length-t.nBitLength;return r>0?n>>BigInt(r):n},g=t.bits2int_modN||function(e){return s(m(e))},v=eK(t.nBitLength);function y(e){if("bigint"!=typeof e)throw Error("bigint expected");if(!(ts<=e&&e<v))throw Error("bigint expected < 2^".concat(t.nBitLength));return eF(e,t.nByteLength)}let E={lowS:t.lowS,prehash:!1},b={lowS:t.lowS,prehash:!1};return a.BASE._setWindowSize(8),{CURVE:t,getPublicKey:function(e){let t=!(arguments.length>1)||void 0===arguments[1]||arguments[1];return a.fromPrivateKey(e).toRawBytes(t)},getSharedSecret:function(e,t){let n=!(arguments.length>2)||void 0===arguments[2]||arguments[2];if(p(e))throw Error("first arg must be private key");if(!p(t))throw Error("second arg must be public key");return a.fromHex(t).multiply(c(e)).toRawBytes(n)},sign:function(e,i){let o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:E,{seed:l,k2sig:d}=function(e,i){let o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:E;if(["recovered","canonical"].some(e=>e in o))throw Error("sign() legacy options not supported");let{hash:l,randomBytes:d}=t,{lowS:h,prehash:p,extraEntropy:v}=o;null==h&&(h=!0),e=ej("msgHash",e),p&&(e=ej("prehashed msgHash",l(e)));let b=g(e),w=c(i),T=[y(w),y(b)];if(null!=v){let e=!0===v?d(n.BYTES):v;T.push(ej("extraEntropy",e))}return{seed:eq(...T),k2sig:function(e){let t=m(e);if(!u(t))return;let n=e5(t,r),i=a.BASE.multiply(t).toAffine(),o=s(i.x);if(o===ts)return;let c=s(n*s(b+o*w));if(c===ts)return;let l=(i.x===o?0:2)|Number(i.y&ta),d=c;if(h&&c>r>>ta)d=c>r>>ta?s(-c):c,l^=1;return new f(o,d,l)}}}(e,i,o);return eV(t.hash.outputLen,t.nByteLength,t.hmac)(l,d)},verify:function(e,n,i){var o;let c;let l,u=arguments.length>3&&void 0!==arguments[3]?arguments[3]:b;if(n=ej("msgHash",n),i=ej("publicKey",i),"strict"in u)throw Error("options.strict was renamed to lowS");let{lowS:d,prehash:h}=u;try{if("string"==typeof e||ex(e))try{c=f.fromDER(e)}catch(t){if(!(t instanceof to.Err))throw t;c=f.fromCompact(e)}else if("object"==typeof e&&"bigint"==typeof e.r&&"bigint"==typeof e.s){let{r:t,s:n}=e;c=new f(t,n)}else throw Error("PARSE");l=a.fromHex(i)}catch(e){if("PARSE"===e.message)throw Error("signature must be Signature instance, Uint8Array or hex string");return!1}if(d&&c.hasHighS())return!1;h&&(n=t.hash(n));let{r:p,s:m}=c,v=g(n),y=e5(m,r),E=s(v*y),w=s(p*y),T=null===(o=a.BASE.multiplyAndAddUnsafe(l,E,w))||void 0===o?void 0:o.toAffine();return!!T&&s(T.x)===p},ProjectivePoint:a,Signature:f,utils:{isValidPrivateKey(e){try{return c(e),!0}catch(e){return!1}},normPrivateKeyToScalar:c,randomPrivateKey:()=>{let e=e9(t.n);return function(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=e.length,i=e7(t),o=e9(t);if(r<16||r<o||r>1024)throw Error("expected ".concat(o,"-1024 bytes of input, got ").concat(r));let s=e3(n?eU(e):eH(e),t-eX)+eX;return n?eG(s,i):eF(s,i)}(t.randomBytes(e),t.n)},precompute(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:8,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:a.BASE;return t._setWindowSize(e),t.multiply(BigInt(3)),t}}}})({...e,hash:t,hmac:function(e){for(var n=arguments.length,r=Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];return ea(t,e,(0,eo.eV)(...r))},randomBytes:eo.O6});return Object.freeze({...n(t),create:n})}({a:BigInt(0),b:BigInt(7),Fp:tp,n:tu,Gx:BigInt("55066263022277343669578718895168534326250603453777594175500187360389116729240"),Gy:BigInt("32670510020758816978083085130507043184471273380659243275938904335757337482424"),h:BigInt(1),lowS:!0,endo:{beta:BigInt("0x7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee"),splitScalar:e=>{let t=BigInt("0x3086d221a7d46bcde86c90e49284eb15"),n=-td*BigInt("0xe4437ed6010e88286f547fa90abfe4c3"),r=BigInt("0x114ca50f7a8e2f3f657c1108d9d44cfd8"),i=BigInt("0x100000000000000000000000000000000"),o=tf(t*e,tu),s=tf(-n*e,tu),a=e3(e-o*t-s*r,tu),c=e3(-o*n-s*t,tu),l=a>i,u=c>i;if(l&&(a=tu-a),u&&(c=tu-c),a>i||c>i)throw Error("splitScalar: Endomorphism failed, k="+e);return{k1neg:l,k1:a,k2neg:u,k2:c}}}},eg),tg=(BigInt(0),tm.ProjectivePoint,null!=tm?tm:T),tv=BigInt("0xffffffffffffffff"),ty=BigInt("0xffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff"),tE=tg.CURVE.n/BigInt(2),tb={type:"object",required:["crypto","id","version","address"],properties:{crypto:{type:"object",required:["cipher","ciphertext","cipherparams","kdf","kdfparams","mac"],properties:{cipher:{type:"string"},ciphertext:{type:"string"},cipherparams:{type:"object"},kdf:{type:"string"},kdfparams:{type:"object"},salt:{type:"string"},mac:{type:"string"}}},id:{type:"string"},version:{type:"number"},address:{type:"string"}}};(i=f||(f={}))[i.Mainnet=1]="Mainnet",i[i.Goerli=5]="Goerli",i[i.Sepolia=11155111]="Sepolia",(o=p||(p={})).Chainstart="chainstart",o.Homestead="homestead",o.Dao="dao",o.TangerineWhistle="tangerineWhistle",o.SpuriousDragon="spuriousDragon",o.Byzantium="byzantium",o.Constantinople="constantinople",o.Petersburg="petersburg",o.Istanbul="istanbul",o.MuirGlacier="muirGlacier",o.Berlin="berlin",o.London="london",o.ArrowGlacier="arrowGlacier",o.GrayGlacier="grayGlacier",o.MergeForkIdTransition="mergeForkIdTransition",o.Merge="merge",o.Shanghai="shanghai",o.ShardingForkDev="shardingFork",(s=m||(m={})).ProofOfStake="pos",s.ProofOfWork="pow",s.ProofOfAuthority="poa",(a=g||(g={})).Ethash="ethash",a.Clique="clique",a.Casper="casper",(c=v||(v={})).PolygonMainnet="polygon-mainnet",c.PolygonMumbai="polygon-mumbai",c.ArbitrumRinkebyTestnet="arbitrum-rinkeby-testnet",c.ArbitrumOne="arbitrum-one",c.xDaiChain="x-dai-chain",c.OptimisticKovan="optimistic-kovan",c.OptimisticEthereum="optimistic-ethereum",(l=y||(y={}))[l.Number=0]="Number",l[l.BigInt=1]="BigInt",l[l.Uint8Array=2]="Uint8Array",l[l.PrefixedHexString=3]="PrefixedHexString";let tw=e=>{if("string"!=typeof e)throw Error("[stripHexPrefix] input must be type 'string', received ".concat(typeof e));return(0,V.Lo)(e)?e.slice(2):e},tT=function(e){if(!Number.isSafeInteger(e)||e<0)throw Error("Received an invalid integer type: ".concat(e));return"0x".concat(e.toString(16))};function t_(e){let t=e;if("string"!=typeof t)throw Error("[padToEven] value must be type 'string', received ".concat(typeof t));return t.length%2&&(t="0".concat(t)),t}let tA=function(e){let t=tT(e);return(0,A.hexToBytes)("0x".concat(t_(t.slice(2))))},tR=function(e){var t;if(null==e)return new Uint8Array;if(e instanceof Uint8Array)return e;if((null===(t=null==e?void 0:e.constructor)||void 0===t?void 0:t.name)==="Uint8Array"||Array.isArray(e))return Uint8Array.from(e);if("string"==typeof e){if(!(0,V.A7)(e))throw Error("Cannot convert string to Uint8Array. only supports 0x-prefixed hex strings and this string was given: ".concat(e));return(0,A.hexToBytes)(t_(tw(e)))}if("number"==typeof e)return tR((0,A.numberToHex)(e));if("bigint"==typeof e){if(e<BigInt(0))throw Error("Cannot convert negative bigint to Uint8Array. Given: ".concat(e));let t=e.toString(16);return t.length%2&&(t="0".concat(t)),tR("0x".concat(t))}if(e.toArray)return Uint8Array.from(e.toArray());throw Error("invalid type")};function tS(e){let t=(0,A.bytesToHex)(e);return"0x"===t?BigInt(0):BigInt(t)}let tP=function(e){return new Uint8Array(e).fill(0)},tI=function(e,t,n){let r=tP(t);return n?e.length<t?(r.set(e),r):e.subarray(0,t):e.length<t?(r.set(e,t-e.length),r):e.subarray(-t)};function tO(e){if(!(0,A.isUint8Array)(e))throw Error("This method only supports Uint8Array but input was: ".concat(e))}let tC=function(e,t){return tO(e),tI(e,t,!1)},tx=function(e){return tO(e),function(e){let t=e[0];for(;e.length>0&&"0"===t.toString();)t=(e=e.slice(1))[0];return e}(e)},tN=e=>"0x".concat(e.toString(16));function tk(e){return tx(tR("0x".concat(e.toString(16))))}let tL=function(e,t,n,r,i){let o=t===BigInt(0)||t===BigInt(1)?t:void 0===i?t-BigInt(27):t-(i*BigInt(2)+BigInt(35));if(!(o===BigInt(0)||o===BigInt(1)))throw Error("Invalid signature v value");return new tg.Signature(tS(n),tS(r)).addRecoveryBit(Number(o)).recoverPublicKey(e).toRawBytes(!1).slice(1)};function tB(e,t){if(null===e)return null;if(void 0===e)return;if("string"!=typeof e||(0,V.A7)(e)){if("number"==typeof e&&!Number.isSafeInteger(e))throw Error("The provided number is greater than MAX_SAFE_INTEGER (please use an alternative input type)")}else throw Error("A string must be provided with a 0x-prefix, given: ".concat(e));let n=tR(e);switch(t){case y.Uint8Array:return n;case y.BigInt:return tS(n);case y.Number:{let e=tS(n);if(e>BigInt(Number.MAX_SAFE_INTEGER))throw Error("The provided number is greater than MAX_SAFE_INTEGER (please use an alternative output type)");return Number(e)}case y.PrefixedHexString:return(0,A.bytesToHex)(n);default:throw Error("unknown outputType")}}var tD=n(82188),tM=n(57084),tU=n(68938),tH={name:"goerli",chainId:5,networkId:5,defaultHardfork:"merge",consensus:{type:"poa",algorithm:"clique",clique:{period:15,epoch:3e4}},comment:"Cross-client PoA test network",url:"https://github.com/goerli/testnet",genesis:{timestamp:"0x5c51a607",gasLimit:10485760,difficulty:1,nonce:"0x0000000000000000",extraData:"0x22466c6578692069732061207468696e6722202d204166726900000000000000e0a2bd4258d2768837baa26a28fe71dc079f84c70000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000"},hardforks:[{name:"chainstart",block:0,forkHash:"0xa3f5ab08"},{name:"homestead",block:0,forkHash:"0xa3f5ab08"},{name:"tangerineWhistle",block:0,forkHash:"0xa3f5ab08"},{name:"spuriousDragon",block:0,forkHash:"0xa3f5ab08"},{name:"byzantium",block:0,forkHash:"0xa3f5ab08"},{name:"constantinople",block:0,forkHash:"0xa3f5ab08"},{name:"petersburg",block:0,forkHash:"0xa3f5ab08"},{name:"istanbul",block:1561651,forkHash:"0xc25efa5c"},{name:"berlin",block:4460644,forkHash:"0x757a1c47"},{name:"london",block:5062605,forkHash:"0xb8c6299d"},{"//_comment":"The forkHash will remain same as mergeForkIdTransition is post merge, terminal block: https://goerli.etherscan.io/block/7382818",name:"merge",ttd:"10790000",block:7382819,forkHash:"0xb8c6299d"},{name:"mergeForkIdTransition",block:null,forkHash:null},{name:"shanghai",block:null,forkHash:null}],bootstrapNodes:[],dnsNetworks:["enrtree://AKA3AM6LPBYEUDMVNU3BSVQJ5AD45Y7YPOHJLEF6W26QOE4VTUDPE@all.goerli.ethdisco.net"]},tF={name:"mainnet",chainId:1,networkId:1,defaultHardfork:"merge",consensus:{type:"pow",algorithm:"ethash",ethash:{}},comment:"The Ethereum main chain",url:"https://ethstats.net/",genesis:{gasLimit:5e3,difficulty:17179869184,nonce:"0x0000000000000042",extraData:"0x11bbe8db4e347b4e8c937c1c8370e4b5ed33adb3db69cbdb7a38e1e50b1b82fa"},hardforks:[{name:"chainstart",block:0,forkHash:"0xfc64ec04"},{name:"homestead",block:115e4,forkHash:"0x97c2c34c"},{name:"dao",block:192e4,forkHash:"0x91d1f948"},{name:"tangerineWhistle",block:2463e3,forkHash:"0x7a64da13"},{name:"spuriousDragon",block:2675e3,forkHash:"0x3edd5b10"},{name:"byzantium",block:437e4,forkHash:"0xa00bc324"},{name:"constantinople",block:728e4,forkHash:"0x668db0af"},{name:"petersburg",block:728e4,forkHash:"0x668db0af"},{name:"istanbul",block:9069e3,forkHash:"0x879d6e30"},{name:"muirGlacier",block:92e5,forkHash:"0xe029e991"},{name:"berlin",block:12244e3,forkHash:"0x0eb440f6"},{name:"london",block:12965e3,forkHash:"0xb715077d"},{name:"arrowGlacier",block:13773e3,forkHash:"0x20c327fc"},{name:"grayGlacier",block:1505e4,forkHash:"0xf0afd0e3"},{"//_comment":"The forkHash will remain same as mergeForkIdTransition is post merge, terminal block: https://etherscan.io/block/15537393",name:"merge",ttd:"58750000000000000000000",block:15537394,forkHash:"0xf0afd0e3"},{name:"mergeForkIdTransition",block:null,forkHash:null},{name:"shanghai",block:null,forkHash:null}],bootstrapNodes:[],dnsNetworks:["enrtree://AKA3AM6LPBYEUDMVNU3BSVQJ5AD45Y7YPOHJLEF6W26QOE4VTUDPE@all.mainnet.ethdisco.net"]},tG={name:"sepolia",chainId:11155111,networkId:11155111,defaultHardfork:"merge",consensus:{type:"pow",algorithm:"ethash",ethash:{}},comment:"PoW test network to replace Ropsten",url:"https://github.com/ethereum/go-ethereum/pull/23730",genesis:{timestamp:"0x6159af19",gasLimit:3e7,difficulty:131072,nonce:"0x0000000000000000",extraData:"0x5365706f6c69612c20417468656e732c204174746963612c2047726565636521"},hardforks:[{name:"chainstart",block:0,forkHash:"0xfe3366e7"},{name:"homestead",block:0,forkHash:"0xfe3366e7"},{name:"tangerineWhistle",block:0,forkHash:"0xfe3366e7"},{name:"spuriousDragon",block:0,forkHash:"0xfe3366e7"},{name:"byzantium",block:0,forkHash:"0xfe3366e7"},{name:"constantinople",block:0,forkHash:"0xfe3366e7"},{name:"petersburg",block:0,forkHash:"0xfe3366e7"},{name:"istanbul",block:0,forkHash:"0xfe3366e7"},{name:"muirGlacier",block:0,forkHash:"0xfe3366e7"},{name:"berlin",block:0,forkHash:"0xfe3366e7"},{name:"london",block:0,forkHash:"0xfe3366e7"},{"//_comment":"The forkHash will remain same as mergeForkIdTransition is post merge, terminal block: https://sepolia.etherscan.io/block/1450408",name:"merge",ttd:"17000000000000000",block:1450409,forkHash:"0xfe3366e7"},{name:"mergeForkIdTransition",block:1735371,forkHash:"0xb96cbd13"},{name:"shanghai",block:null,timestamp:"1677557088",forkHash:"0xf7f9bc08"}],bootstrapNodes:[],dnsNetworks:["enrtree://AKA3AM6LPBYEUDMVNU3BSVQJ5AD45Y7YPOHJLEF6W26QOE4VTUDPE@all.sepolia.ethdisco.net"]};let tj={1153:{name:"EIP-1153",number:1153,comment:"Transient Storage",url:"https://eips.ethereum.org/EIPS/eip-1153",status:"Review",minimumHardfork:"chainstart",requiredEIPs:[],gasConfig:{},gasPrices:{tstore:{v:100,d:"Base fee of the TSTORE opcode"},tload:{v:100,d:"Base fee of the TLOAD opcode"}},vm:{},pow:{}},1559:{name:"EIP-1559",number:1559,comment:"Fee market change for ETH 1.0 chain",url:"https://eips.ethereum.org/EIPS/eip-1559",status:"Final",minimumHardfork:"berlin",requiredEIPs:[2930],gasConfig:{baseFeeMaxChangeDenominator:{v:8,d:"Maximum base fee change denominator"},elasticityMultiplier:{v:2,d:"Maximum block gas target elasticity"},initialBaseFee:{v:1e9,d:"Initial base fee on first EIP1559 block"}},gasPrices:{},vm:{},pow:{}},2315:{name:"EIP-2315",number:2315,comment:"Simple subroutines for the EVM",url:"https://eips.ethereum.org/EIPS/eip-2315",status:"Draft",minimumHardfork:"istanbul",gasConfig:{},gasPrices:{beginsub:{v:2,d:"Base fee of the BEGINSUB opcode"},returnsub:{v:5,d:"Base fee of the RETURNSUB opcode"},jumpsub:{v:10,d:"Base fee of the JUMPSUB opcode"}},vm:{},pow:{}},2537:{name:"EIP-2537",number:2537,comment:"BLS12-381 precompiles",url:"https://eips.ethereum.org/EIPS/eip-2537",status:"Draft",minimumHardfork:"chainstart",gasConfig:{},gasPrices:{Bls12381G1AddGas:{v:600,d:"Gas cost of a single BLS12-381 G1 addition precompile-call"},Bls12381G1MulGas:{v:12e3,d:"Gas cost of a single BLS12-381 G1 multiplication precompile-call"},Bls12381G2AddGas:{v:4500,d:"Gas cost of a single BLS12-381 G2 addition precompile-call"},Bls12381G2MulGas:{v:55e3,d:"Gas cost of a single BLS12-381 G2 multiplication precompile-call"},Bls12381PairingBaseGas:{v:115e3,d:"Base gas cost of BLS12-381 pairing check"},Bls12381PairingPerPairGas:{v:23e3,d:"Per-pair gas cost of BLS12-381 pairing check"},Bls12381MapG1Gas:{v:5500,d:"Gas cost of BLS12-381 map field element to G1"},Bls12381MapG2Gas:{v:11e4,d:"Gas cost of BLS12-381 map field element to G2"},Bls12381MultiExpGasDiscount:{v:[[1,1200],[2,888],[3,764],[4,641],[5,594],[6,547],[7,500],[8,453],[9,438],[10,423],[11,408],[12,394],[13,379],[14,364],[15,349],[16,334],[17,330],[18,326],[19,322],[20,318],[21,314],[22,310],[23,306],[24,302],[25,298],[26,294],[27,289],[28,285],[29,281],[30,277],[31,273],[32,269],[33,268],[34,266],[35,265],[36,263],[37,262],[38,260],[39,259],[40,257],[41,256],[42,254],[43,253],[44,251],[45,250],[46,248],[47,247],[48,245],[49,244],[50,242],[51,241],[52,239],[53,238],[54,236],[55,235],[56,233],[57,232],[58,231],[59,229],[60,228],[61,226],[62,225],[63,223],[64,222],[65,221],[66,220],[67,219],[68,219],[69,218],[70,217],[71,216],[72,216],[73,215],[74,214],[75,213],[76,213],[77,212],[78,211],[79,211],[80,210],[81,209],[82,208],[83,208],[84,207],[85,206],[86,205],[87,205],[88,204],[89,203],[90,202],[91,202],[92,201],[93,200],[94,199],[95,199],[96,198],[97,197],[98,196],[99,196],[100,195],[101,194],[102,193],[103,193],[104,192],[105,191],[106,191],[107,190],[108,189],[109,188],[110,188],[111,187],[112,186],[113,185],[114,185],[115,184],[116,183],[117,182],[118,182],[119,181],[120,180],[121,179],[122,179],[123,178],[124,177],[125,176],[126,176],[127,175],[128,174]],d:"Discount gas costs of calls to the MultiExp precompiles with `k` (point, scalar) pair"}},vm:{},pow:{}},2565:{name:"EIP-2565",number:2565,comment:"ModExp gas cost",url:"https://eips.ethereum.org/EIPS/eip-2565",status:"Final",minimumHardfork:"byzantium",gasConfig:{},gasPrices:{modexpGquaddivisor:{v:3,d:"Gquaddivisor from modexp precompile for gas calculation"}},vm:{},pow:{}},2718:{name:"EIP-2718",comment:"Typed Transaction Envelope",url:"https://eips.ethereum.org/EIPS/eip-2718",status:"Final",minimumHardfork:"chainstart",gasConfig:{},gasPrices:{},vm:{},pow:{}},2929:{name:"EIP-2929",comment:"Gas cost increases for state access opcodes",url:"https://eips.ethereum.org/EIPS/eip-2929",status:"Final",minimumHardfork:"chainstart",gasConfig:{},gasPrices:{coldsload:{v:2100,d:"Gas cost of the first read of storage from a given location (per transaction)"},coldaccountaccess:{v:2600,d:"Gas cost of the first read of a given address (per transaction)"},warmstorageread:{v:100,d:"Gas cost of reading storage locations which have already loaded 'cold'"},sstoreCleanGasEIP2200:{v:2900,d:"Once per SSTORE operation from clean non-zero to something else"},sstoreNoopGasEIP2200:{v:100,d:"Once per SSTORE operation if the value doesn't change"},sstoreDirtyGasEIP2200:{v:100,d:"Once per SSTORE operation if a dirty value is changed"},sstoreInitRefundEIP2200:{v:19900,d:"Once per SSTORE operation for resetting to the original zero value"},sstoreCleanRefundEIP2200:{v:4900,d:"Once per SSTORE operation for resetting to the original non-zero value"},call:{v:0,d:"Base fee of the CALL opcode"},callcode:{v:0,d:"Base fee of the CALLCODE opcode"},delegatecall:{v:0,d:"Base fee of the DELEGATECALL opcode"},staticcall:{v:0,d:"Base fee of the STATICCALL opcode"},balance:{v:0,d:"Base fee of the BALANCE opcode"},extcodesize:{v:0,d:"Base fee of the EXTCODESIZE opcode"},extcodecopy:{v:0,d:"Base fee of the EXTCODECOPY opcode"},extcodehash:{v:0,d:"Base fee of the EXTCODEHASH opcode"},sload:{v:0,d:"Base fee of the SLOAD opcode"},sstore:{v:0,d:"Base fee of the SSTORE opcode"}},vm:{},pow:{}},2930:{name:"EIP-2930",comment:"Optional access lists",url:"https://eips.ethereum.org/EIPS/eip-2930",status:"Final",minimumHardfork:"istanbul",requiredEIPs:[2718,2929],gasConfig:{},gasPrices:{accessListStorageKeyCost:{v:1900,d:"Gas cost per storage key in an Access List transaction"},accessListAddressCost:{v:2400,d:"Gas cost per storage key in an Access List transaction"}},vm:{},pow:{}},3198:{name:"EIP-3198",number:3198,comment:"BASEFEE opcode",url:"https://eips.ethereum.org/EIPS/eip-3198",status:"Final",minimumHardfork:"london",gasConfig:{},gasPrices:{basefee:{v:2,d:"Gas cost of the BASEFEE opcode"}},vm:{},pow:{}},3529:{name:"EIP-3529",comment:"Reduction in refunds",url:"https://eips.ethereum.org/EIPS/eip-3529",status:"Final",minimumHardfork:"berlin",requiredEIPs:[2929],gasConfig:{maxRefundQuotient:{v:5,d:"Maximum refund quotient; max tx refund is min(tx.gasUsed/maxRefundQuotient, tx.gasRefund)"}},gasPrices:{selfdestructRefund:{v:0,d:"Refunded following a selfdestruct operation"},sstoreClearRefundEIP2200:{v:4800,d:"Once per SSTORE operation for clearing an originally existing storage slot"}},vm:{},pow:{}},3540:{name:"EIP-3540",number:3540,comment:"EVM Object Format (EOF) v1",url:"https://eips.ethereum.org/EIPS/eip-3540",status:"Review",minimumHardfork:"london",requiredEIPs:[3541],gasConfig:{},gasPrices:{},vm:{},pow:{}},3541:{name:"EIP-3541",comment:"Reject new contracts starting with the 0xEF byte",url:"https://eips.ethereum.org/EIPS/eip-3541",status:"Final",minimumHardfork:"berlin",requiredEIPs:[],gasConfig:{},gasPrices:{},vm:{},pow:{}},3554:{name:"EIP-3554",comment:"Reduction in refunds",url:"Difficulty Bomb Delay to December 1st 2021",status:"Final",minimumHardfork:"muirGlacier",requiredEIPs:[],gasConfig:{},gasPrices:{},vm:{},pow:{difficultyBombDelay:{v:95e5,d:"the amount of blocks to delay the difficulty bomb with"}}},3607:{name:"EIP-3607",number:3607,comment:"Reject transactions from senders with deployed code",url:"https://eips.ethereum.org/EIPS/eip-3607",status:"Final",minimumHardfork:"chainstart",requiredEIPs:[],gasConfig:{},gasPrices:{},vm:{},pow:{}},3651:{name:"EIP-3651",number:3198,comment:"Warm COINBASE",url:"https://eips.ethereum.org/EIPS/eip-3651",status:"Review",minimumHardfork:"london",requiredEIPs:[2929],gasConfig:{},gasPrices:{},vm:{},pow:{}},3670:{name:"EIP-3670",number:3670,comment:"EOF - Code Validation",url:"https://eips.ethereum.org/EIPS/eip-3670",status:"Review",minimumHardfork:"london",requiredEIPs:[3540],gasConfig:{},gasPrices:{},vm:{},pow:{}},3675:{name:"EIP-3675",number:3675,comment:"Upgrade consensus to Proof-of-Stake",url:"https://eips.ethereum.org/EIPS/eip-3675",status:"Final",minimumHardfork:"london",requiredEIPs:[],gasConfig:{},gasPrices:{},vm:{},pow:{}},3855:{name:"EIP-3855",number:3855,comment:"PUSH0 instruction",url:"https://eips.ethereum.org/EIPS/eip-3855",status:"Review",minimumHardfork:"chainstart",requiredEIPs:[],gasConfig:{},gasPrices:{push0:{v:2,d:"Base fee of the PUSH0 opcode"}},vm:{},pow:{}},3860:{name:"EIP-3860",number:3860,comment:"Limit and meter initcode",url:"https://eips.ethereum.org/EIPS/eip-3860",status:"Review",minimumHardfork:"spuriousDragon",requiredEIPs:[],gasConfig:{},gasPrices:{initCodeWordCost:{v:2,d:"Gas to pay for each word (32 bytes) of initcode when creating a contract"}},vm:{maxInitCodeSize:{v:49152,d:"Maximum length of initialization code when creating a contract"}},pow:{}},4345:{name:"EIP-4345",number:4345,comment:"Difficulty Bomb Delay to June 2022",url:"https://eips.ethereum.org/EIPS/eip-4345",status:"Final",minimumHardfork:"london",gasConfig:{},gasPrices:{},vm:{},pow:{difficultyBombDelay:{v:107e5,d:"the amount of blocks to delay the difficulty bomb with"}}},4399:{name:"EIP-4399",number:4399,comment:"Supplant DIFFICULTY opcode with PREVRANDAO",url:"https://eips.ethereum.org/EIPS/eip-4399",status:"Review",minimumHardfork:"london",requiredEIPs:[],gasConfig:{},gasPrices:{},vm:{},pow:{}},5133:{name:"EIP-5133",number:5133,comment:"Delaying Difficulty Bomb to mid-September 2022",url:"https://eips.ethereum.org/EIPS/eip-5133",status:"Draft",minimumHardfork:"grayGlacier",gasConfig:{},gasPrices:{},vm:{},pow:{difficultyBombDelay:{v:114e5,d:"the amount of blocks to delay the difficulty bomb with"}}}},tq={chainstart:{name:"chainstart",comment:"Start of the Ethereum main chain",url:"",status:"",gasConfig:{minGasLimit:{v:5e3,d:"Minimum the gas limit may ever be"},gasLimitBoundDivisor:{v:1024,d:"The bound divisor of the gas limit, used in update calculations"},maxRefundQuotient:{v:2,d:"Maximum refund quotient; max tx refund is min(tx.gasUsed/maxRefundQuotient, tx.gasRefund)"}},gasPrices:{base:{v:2,d:"Gas base cost, used e.g. for ChainID opcode (Istanbul)"},tierStep:{v:[0,2,3,5,8,10,20],d:"Once per operation, for a selection of them"},exp:{v:10,d:"Base fee of the EXP opcode"},expByte:{v:10,d:"Times ceil(log256(exponent)) for the EXP instruction"},sha3:{v:30,d:"Base fee of the SHA3 opcode"},sha3Word:{v:6,d:"Once per word of the SHA3 operation's data"},sload:{v:50,d:"Base fee of the SLOAD opcode"},sstoreSet:{v:2e4,d:"Once per SSTORE operation if the zeroness changes from zero"},sstoreReset:{v:5e3,d:"Once per SSTORE operation if the zeroness does not change from zero"},sstoreRefund:{v:15e3,d:"Once per SSTORE operation if the zeroness changes to zero"},jumpdest:{v:1,d:"Base fee of the JUMPDEST opcode"},log:{v:375,d:"Base fee of the LOG opcode"},logData:{v:8,d:"Per byte in a LOG* operation's data"},logTopic:{v:375,d:"Multiplied by the * of the LOG*, per LOG transaction. e.g. LOG0 incurs 0 * c_txLogTopicGas, LOG4 incurs 4 * c_txLogTopicGas"},create:{v:32e3,d:"Base fee of the CREATE opcode"},call:{v:40,d:"Base fee of the CALL opcode"},callStipend:{v:2300,d:"Free gas given at beginning of call"},callValueTransfer:{v:9e3,d:"Paid for CALL when the value transfor is non-zero"},callNewAccount:{v:25e3,d:"Paid for CALL when the destination address didn't exist prior"},selfdestructRefund:{v:24e3,d:"Refunded following a selfdestruct operation"},memory:{v:3,d:"Times the address of the (highest referenced byte in memory + 1). NOTE: referencing happens on read, write and in instructions such as RETURN and CALL"},quadCoeffDiv:{v:512,d:"Divisor for the quadratic particle of the memory cost equation"},createData:{v:200,d:""},tx:{v:21e3,d:"Per transaction. NOTE: Not payable on data of calls between transactions"},txCreation:{v:32e3,d:"The cost of creating a contract via tx"},txDataZero:{v:4,d:"Per byte of data attached to a transaction that equals zero. NOTE: Not payable on data of calls between transactions"},txDataNonZero:{v:68,d:"Per byte of data attached to a transaction that is not equal to zero. NOTE: Not payable on data of calls between transactions"},copy:{v:3,d:"Multiplied by the number of 32-byte words that are copied (round up) for any *COPY operation and added"},ecRecover:{v:3e3,d:""},sha256:{v:60,d:""},sha256Word:{v:12,d:""},ripemd160:{v:600,d:""},ripemd160Word:{v:120,d:""},identity:{v:15,d:""},identityWord:{v:3,d:""},stop:{v:0,d:"Base fee of the STOP opcode"},add:{v:3,d:"Base fee of the ADD opcode"},mul:{v:5,d:"Base fee of the MUL opcode"},sub:{v:3,d:"Base fee of the SUB opcode"},div:{v:5,d:"Base fee of the DIV opcode"},sdiv:{v:5,d:"Base fee of the SDIV opcode"},mod:{v:5,d:"Base fee of the MOD opcode"},smod:{v:5,d:"Base fee of the SMOD opcode"},addmod:{v:8,d:"Base fee of the ADDMOD opcode"},mulmod:{v:8,d:"Base fee of the MULMOD opcode"},signextend:{v:5,d:"Base fee of the SIGNEXTEND opcode"},lt:{v:3,d:"Base fee of the LT opcode"},gt:{v:3,d:"Base fee of the GT opcode"},slt:{v:3,d:"Base fee of the SLT opcode"},sgt:{v:3,d:"Base fee of the SGT opcode"},eq:{v:3,d:"Base fee of the EQ opcode"},iszero:{v:3,d:"Base fee of the ISZERO opcode"},and:{v:3,d:"Base fee of the AND opcode"},or:{v:3,d:"Base fee of the OR opcode"},xor:{v:3,d:"Base fee of the XOR opcode"},not:{v:3,d:"Base fee of the NOT opcode"},byte:{v:3,d:"Base fee of the BYTE opcode"},address:{v:2,d:"Base fee of the ADDRESS opcode"},balance:{v:20,d:"Base fee of the BALANCE opcode"},origin:{v:2,d:"Base fee of the ORIGIN opcode"},caller:{v:2,d:"Base fee of the CALLER opcode"},callvalue:{v:2,d:"Base fee of the CALLVALUE opcode"},calldataload:{v:3,d:"Base fee of the CALLDATALOAD opcode"},calldatasize:{v:2,d:"Base fee of the CALLDATASIZE opcode"},calldatacopy:{v:3,d:"Base fee of the CALLDATACOPY opcode"},codesize:{v:2,d:"Base fee of the CODESIZE opcode"},codecopy:{v:3,d:"Base fee of the CODECOPY opcode"},gasprice:{v:2,d:"Base fee of the GASPRICE opcode"},extcodesize:{v:20,d:"Base fee of the EXTCODESIZE opcode"},extcodecopy:{v:20,d:"Base fee of the EXTCODECOPY opcode"},blockhash:{v:20,d:"Base fee of the BLOCKHASH opcode"},coinbase:{v:2,d:"Base fee of the COINBASE opcode"},timestamp:{v:2,d:"Base fee of the TIMESTAMP opcode"},number:{v:2,d:"Base fee of the NUMBER opcode"},difficulty:{v:2,d:"Base fee of the DIFFICULTY opcode"},gaslimit:{v:2,d:"Base fee of the GASLIMIT opcode"},pop:{v:2,d:"Base fee of the POP opcode"},mload:{v:3,d:"Base fee of the MLOAD opcode"},mstore:{v:3,d:"Base fee of the MSTORE opcode"},mstore8:{v:3,d:"Base fee of the MSTORE8 opcode"},sstore:{v:0,d:"Base fee of the SSTORE opcode"},jump:{v:8,d:"Base fee of the JUMP opcode"},jumpi:{v:10,d:"Base fee of the JUMPI opcode"},pc:{v:2,d:"Base fee of the PC opcode"},msize:{v:2,d:"Base fee of the MSIZE opcode"},gas:{v:2,d:"Base fee of the GAS opcode"},push:{v:3,d:"Base fee of the PUSH opcode"},dup:{v:3,d:"Base fee of the DUP opcode"},swap:{v:3,d:"Base fee of the SWAP opcode"},callcode:{v:40,d:"Base fee of the CALLCODE opcode"},return:{v:0,d:"Base fee of the RETURN opcode"},invalid:{v:0,d:"Base fee of the INVALID opcode"},selfdestruct:{v:0,d:"Base fee of the SELFDESTRUCT opcode"}},vm:{stackLimit:{v:1024,d:"Maximum size of VM stack allowed"},callCreateDepth:{v:1024,d:"Maximum depth of call/create stack"},maxExtraDataSize:{v:32,d:"Maximum size extra data may be after Genesis"}},pow:{minimumDifficulty:{v:131072,d:"The minimum that the difficulty may ever be"},difficultyBoundDivisor:{v:2048,d:"The bound divisor of the difficulty, used in the update calculations"},durationLimit:{v:13,d:"The decision boundary on the blocktime duration used to determine whether difficulty should go up or not"},epochDuration:{v:3e4,d:"Duration between proof-of-work epochs"},timebombPeriod:{v:1e5,d:"Exponential difficulty timebomb period"},minerReward:{v:"5000000000000000000",d:"the amount a miner get rewarded for mining a block"},difficultyBombDelay:{v:0,d:"the amount of blocks to delay the difficulty bomb with"}}},homestead:{name:"homestead",comment:"Homestead hardfork with protocol and network changes",url:"https://eips.ethereum.org/EIPS/eip-606",status:"Final",gasConfig:{},gasPrices:{delegatecall:{v:40,d:"Base fee of the DELEGATECALL opcode"}},vm:{},pow:{}},dao:{name:"dao",comment:"DAO rescue hardfork",url:"https://eips.ethereum.org/EIPS/eip-779",status:"Final",gasConfig:{},gasPrices:{},vm:{},pow:{}},tangerineWhistle:{name:"tangerineWhistle",comment:"Hardfork with gas cost changes for IO-heavy operations",url:"https://eips.ethereum.org/EIPS/eip-608",status:"Final",gasConfig:{},gasPrices:{sload:{v:200,d:"Once per SLOAD operation"},call:{v:700,d:"Once per CALL operation & message call transaction"},extcodesize:{v:700,d:"Base fee of the EXTCODESIZE opcode"},extcodecopy:{v:700,d:"Base fee of the EXTCODECOPY opcode"},balance:{v:400,d:"Base fee of the BALANCE opcode"},delegatecall:{v:700,d:"Base fee of the DELEGATECALL opcode"},callcode:{v:700,d:"Base fee of the CALLCODE opcode"},selfdestruct:{v:5e3,d:"Base fee of the SELFDESTRUCT opcode"}},vm:{},pow:{}},spuriousDragon:{name:"spuriousDragon",comment:"HF with EIPs for simple replay attack protection, EXP cost increase, state trie clearing, contract code size limit",url:"https://eips.ethereum.org/EIPS/eip-607",status:"Final",gasConfig:{},gasPrices:{expByte:{v:50,d:"Times ceil(log256(exponent)) for the EXP instruction"}},vm:{maxCodeSize:{v:24576,d:"Maximum length of contract code"}},pow:{}},byzantium:{name:"byzantium",comment:"Hardfork with new precompiles, instructions and other protocol changes",url:"https://eips.ethereum.org/EIPS/eip-609",status:"Final",gasConfig:{},gasPrices:{modexpGquaddivisor:{v:20,d:"Gquaddivisor from modexp precompile for gas calculation"},ecAdd:{v:500,d:"Gas costs for curve addition precompile"},ecMul:{v:4e4,d:"Gas costs for curve multiplication precompile"},ecPairing:{v:1e5,d:"Base gas costs for curve pairing precompile"},ecPairingWord:{v:8e4,d:"Gas costs regarding curve pairing precompile input length"},revert:{v:0,d:"Base fee of the REVERT opcode"},staticcall:{v:700,d:"Base fee of the STATICCALL opcode"},returndatasize:{v:2,d:"Base fee of the RETURNDATASIZE opcode"},returndatacopy:{v:3,d:"Base fee of the RETURNDATACOPY opcode"}},vm:{},pow:{minerReward:{v:"3000000000000000000",d:"the amount a miner get rewarded for mining a block"},difficultyBombDelay:{v:3e6,d:"the amount of blocks to delay the difficulty bomb with"}}},constantinople:{name:"constantinople",comment:"Postponed hardfork including EIP-1283 (SSTORE gas metering changes)",url:"https://eips.ethereum.org/EIPS/eip-1013",status:"Final",gasConfig:{},gasPrices:{netSstoreNoopGas:{v:200,d:"Once per SSTORE operation if the value doesn't change"},netSstoreInitGas:{v:2e4,d:"Once per SSTORE operation from clean zero"},netSstoreCleanGas:{v:5e3,d:"Once per SSTORE operation from clean non-zero"},netSstoreDirtyGas:{v:200,d:"Once per SSTORE operation from dirty"},netSstoreClearRefund:{v:15e3,d:"Once per SSTORE operation for clearing an originally existing storage slot"},netSstoreResetRefund:{v:4800,d:"Once per SSTORE operation for resetting to the original non-zero value"},netSstoreResetClearRefund:{v:19800,d:"Once per SSTORE operation for resetting to the original zero value"},shl:{v:3,d:"Base fee of the SHL opcode"},shr:{v:3,d:"Base fee of the SHR opcode"},sar:{v:3,d:"Base fee of the SAR opcode"},extcodehash:{v:400,d:"Base fee of the EXTCODEHASH opcode"},create2:{v:32e3,d:"Base fee of the CREATE2 opcode"}},vm:{},pow:{minerReward:{v:"2000000000000000000",d:"The amount a miner gets rewarded for mining a block"},difficultyBombDelay:{v:5e6,d:"the amount of blocks to delay the difficulty bomb with"}}},petersburg:{name:"petersburg",comment:"Aka constantinopleFix, removes EIP-1283, activate together with or after constantinople",url:"https://eips.ethereum.org/EIPS/eip-1716",status:"Final",gasConfig:{},gasPrices:{netSstoreNoopGas:{v:null,d:"Removed along EIP-1283"},netSstoreInitGas:{v:null,d:"Removed along EIP-1283"},netSstoreCleanGas:{v:null,d:"Removed along EIP-1283"},netSstoreDirtyGas:{v:null,d:"Removed along EIP-1283"},netSstoreClearRefund:{v:null,d:"Removed along EIP-1283"},netSstoreResetRefund:{v:null,d:"Removed along EIP-1283"},netSstoreResetClearRefund:{v:null,d:"Removed along EIP-1283"}},vm:{},pow:{}},istanbul:{name:"istanbul",comment:"HF targeted for December 2019 following the Constantinople/Petersburg HF",url:"https://eips.ethereum.org/EIPS/eip-1679",status:"Final",gasConfig:{},gasPrices:{blake2Round:{v:1,d:"Gas cost per round for the Blake2 F precompile"},ecAdd:{v:150,d:"Gas costs for curve addition precompile"},ecMul:{v:6e3,d:"Gas costs for curve multiplication precompile"},ecPairing:{v:45e3,d:"Base gas costs for curve pairing precompile"},ecPairingWord:{v:34e3,d:"Gas costs regarding curve pairing precompile input length"},txDataNonZero:{v:16,d:"Per byte of data attached to a transaction that is not equal to zero. NOTE: Not payable on data of calls between transactions"},sstoreSentryGasEIP2200:{v:2300,d:"Minimum gas required to be present for an SSTORE call, not consumed"},sstoreNoopGasEIP2200:{v:800,d:"Once per SSTORE operation if the value doesn't change"},sstoreDirtyGasEIP2200:{v:800,d:"Once per SSTORE operation if a dirty value is changed"},sstoreInitGasEIP2200:{v:2e4,d:"Once per SSTORE operation from clean zero to non-zero"},sstoreInitRefundEIP2200:{v:19200,d:"Once per SSTORE operation for resetting to the original zero value"},sstoreCleanGasEIP2200:{v:5e3,d:"Once per SSTORE operation from clean non-zero to something else"},sstoreCleanRefundEIP2200:{v:4200,d:"Once per SSTORE operation for resetting to the original non-zero value"},sstoreClearRefundEIP2200:{v:15e3,d:"Once per SSTORE operation for clearing an originally existing storage slot"},balance:{v:700,d:"Base fee of the BALANCE opcode"},extcodehash:{v:700,d:"Base fee of the EXTCODEHASH opcode"},chainid:{v:2,d:"Base fee of the CHAINID opcode"},selfbalance:{v:5,d:"Base fee of the SELFBALANCE opcode"},sload:{v:800,d:"Base fee of the SLOAD opcode"}},vm:{},pow:{}},muirGlacier:{name:"muirGlacier",comment:"HF to delay the difficulty bomb",url:"https://eips.ethereum.org/EIPS/eip-2384",status:"Final",gasConfig:{},gasPrices:{},vm:{},pow:{difficultyBombDelay:{v:9e6,d:"the amount of blocks to delay the difficulty bomb with"}}},berlin:{name:"berlin",comment:"HF targeted for July 2020 following the Muir Glacier HF",url:"https://eips.ethereum.org/EIPS/eip-2070",status:"Final",eips:[2565,2929,2718,2930]},london:{name:"london",comment:"HF targeted for July 2021 following the Berlin fork",url:"https://github.com/ethereum/eth1.0-specs/blob/master/network-upgrades/mainnet-upgrades/london.md",status:"Final",eips:[1559,3198,3529,3541]},shanghai:{name:"shanghai",comment:"Next feature hardfork after the merge hardfork having withdrawals, warm coinbase, push0, limit/meter initcode",url:"https://github.com/ethereum/execution-specs/blob/master/network-upgrades/mainnet-upgrades/shanghai.md",status:"Final",eips:[3651,3855,3860,4895]},arrowGlacier:{name:"arrowGlacier",comment:"HF to delay the difficulty bomb",url:"https://github.com/ethereum/execution-specs/blob/master/network-upgrades/mainnet-upgrades/arrow-glacier.md",status:"Final",eips:[4345],gasConfig:{},gasPrices:{},vm:{},pow:{}},grayGlacier:{name:"grayGlacier",comment:"Delaying the difficulty bomb to Mid September 2022",url:"https://github.com/ethereum/execution-specs/blob/master/network-upgrades/mainnet-upgrades/gray-glacier.md",status:"Draft",eips:[5133],gasConfig:{},gasPrices:{},vm:{},pow:{}},mergeForkIdTransition:{name:"mergeForkIdTransition",comment:"Pre-merge hardfork to fork off non-upgraded clients",url:"https://eips.ethereum.org/EIPS/eip-3675",status:"Draft",eips:[]},merge:{name:"merge",comment:"Hardfork to upgrade the consensus mechanism to Proof-of-Stake",url:"https://github.com/ethereum/execution-specs/blob/master/network-upgrades/mainnet-upgrades/merge.md",status:"Final",consensus:{type:"pos",algorithm:"casper",casper:{}},eips:[3675,4399]}},{buf:tK}=tU;class tW extends A.EventEmitter{static custom(e){var t;let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=null!==(t=n.baseChain)&&void 0!==t?t:"mainnet",i=Object.assign({},tW._getChainParams(r));if(i.name="custom-chain","string"!=typeof e)return new tW(Object.assign({chain:Object.assign(Object.assign({},i),e)},n));if(e===v.PolygonMainnet)return tW.custom({name:v.PolygonMainnet,chainId:137,networkId:137},n);if(e===v.PolygonMumbai)return tW.custom({name:v.PolygonMumbai,chainId:80001,networkId:80001},n);if(e===v.ArbitrumRinkebyTestnet)return tW.custom({name:v.ArbitrumRinkebyTestnet,chainId:421611,networkId:421611},n);if(e===v.ArbitrumOne)return tW.custom({name:v.ArbitrumOne,chainId:42161,networkId:42161},n);if(e===v.xDaiChain)return tW.custom({name:v.xDaiChain,chainId:100,networkId:100},n);if(e===v.OptimisticKovan)return tW.custom({name:v.OptimisticKovan,chainId:69,networkId:69},Object.assign({hardfork:p.Berlin},n));if(e===v.OptimisticEthereum)return tW.custom({name:v.OptimisticEthereum,chainId:10,networkId:10},Object.assign({hardfork:p.Berlin},n));throw Error("Custom chain ".concat(e," not supported"))}static fromGethGenesis(e,t){var n;let{chain:r,eips:i,genesisHash:o,hardfork:s,mergeForkIdPostMerge:a}=t,c=function(e,t,n){try{if(["config","difficulty","gasLimit","alloc"].some(t=>!(t in e)))throw Error("Invalid format, expected geth genesis fields missing");return void 0!==t&&(e.name=t),function(e){var t,n,r;let i=!(arguments.length>1)||void 0===arguments[1]||arguments[1],{name:o,config:s,difficulty:a,mixHash:c,gasLimit:l,coinbase:u,baseFeePerGas:d}=e,{extraData:h,timestamp:f,nonce:m}=e,g=Number(f),{chainId:v}=s;if(""===h&&(h="0x"),(0,V.Lo)(f)||(f=tT(parseInt(f))),18!==m.length&&(m=(r=m)&&"0x0"!==r?(0,V.Lo)(r)?"0x".concat(tw(r).padStart(16,"0")):"0x".concat(r.padStart(16,"0")):"0x0000000000000000"),s.eip155Block!==s.eip158Block)throw Error("EIP155 block number must equal EIP 158 block number since both are part of SpuriousDragon hardfork and the client only supports activating the full hardfork");let y={name:o,chainId:v,networkId:v,genesis:{timestamp:f,gasLimit:parseInt(l),difficulty:parseInt(a),nonce:m,extraData:h,mixHash:c,coinbase:u,baseFeePerGas:d},hardfork:void 0,hardforks:[],bootstrapNodes:[],consensus:void 0!==s.clique?{type:"poa",algorithm:"clique",clique:{period:null!==(t=s.clique.period)&&void 0!==t?t:s.clique.blockperiodseconds,epoch:null!==(n=s.clique.epoch)&&void 0!==n?n:s.clique.epochlength}}:{type:"pow",algorithm:"ethash",ethash:{}}},E={[p.Homestead]:{name:"homesteadBlock"},[p.Dao]:{name:"daoForkBlock"},[p.TangerineWhistle]:{name:"eip150Block"},[p.SpuriousDragon]:{name:"eip155Block"},[p.Byzantium]:{name:"byzantiumBlock"},[p.Constantinople]:{name:"constantinopleBlock"},[p.Petersburg]:{name:"petersburgBlock"},[p.Istanbul]:{name:"istanbulBlock"},[p.MuirGlacier]:{name:"muirGlacierBlock"},[p.Berlin]:{name:"berlinBlock"},[p.London]:{name:"londonBlock"},[p.MergeForkIdTransition]:{name:"mergeForkBlock",postMerge:i},[p.Shanghai]:{name:"shanghaiTime",postMerge:!0,isTimestamp:!0},[p.ShardingForkDev]:{name:"shardingForkTime",postMerge:!0,isTimestamp:!0}},b=Object.keys(E).reduce((e,t)=>(e[E[t].name]=t,e),{}),w=Object.keys(s).filter(e=>void 0!==b[e]&&void 0!==s[e]&&null!==s[e]);if(y.hardforks=w.map(e=>({name:b[e],block:!0===E[b[e]].isTimestamp||"number"!=typeof s[e]?null:s[e],timestamp:!0===E[b[e]].isTimestamp&&"number"==typeof s[e]?s[e]:void 0})).filter(e=>null!==e.block||void 0!==e.timestamp),y.hardforks.sort((e,t)=>{var n,r;return(null!==(n=e.block)&&void 0!==n?n:1/0)-(null!==(r=t.block)&&void 0!==r?r:1/0)}),y.hardforks.sort((e,t)=>{var n,r;return(null!==(n=e.timestamp)&&void 0!==n?n:g)-(null!==(r=t.timestamp)&&void 0!==r?r:g)}),void 0!==s.terminalTotalDifficulty){let e={name:p.Merge,ttd:s.terminalTotalDifficulty,block:null},t=y.hardforks.findIndex(e=>{var t;return(null===(t=E[e.name])||void 0===t?void 0:t.postMerge)===!0});-1!==t?y.hardforks.splice(t,0,e):y.hardforks.push(e)}let T=y.hardforks.length>0?y.hardforks.slice(-1)[0]:void 0;return y.hardfork=null==T?void 0:T.name,y.hardforks.unshift({name:p.Chainstart,block:0}),y}(e,n)}catch(e){throw Error("Error parsing parameters file: ".concat(e.message))}}(e,r,a),l=new tW({chain:null!==(n=c.name)&&void 0!==n?n:"custom",customChains:[c],eips:i,hardfork:null!=s?s:c.hardfork});return void 0!==o&&l.setForkHashes(o),l}static isSupportedChainId(e){return!!this._getInitializedChains().names[e.toString()]}static _getChainParams(e,t){let n=e,r=this._getInitializedChains(t);if("number"==typeof n||"bigint"==typeof n){if(n=n.toString(),r.names[n]){let e=r.names[n];return r[e]}throw Error("Chain with ID ".concat(n," not supported"))}if(void 0!==r[n])return r[n];throw Error("Chain with name ".concat(n," not supported"))}setChain(e){if("number"==typeof e||"bigint"==typeof e||"string"==typeof e)this._chainParams=tW._getChainParams(e,this._customChains);else if("object"==typeof e){if(this._customChains.length>0)throw Error("Chain must be a string, number, or bigint when initialized with customChains passed in");for(let t of["networkId","genesis","hardforks","bootstrapNodes"])if(!(t in e))throw Error("Missing required chain parameter: ".concat(t));this._chainParams=e}else throw Error("Wrong input format");for(let e of this.hardforks())if(void 0===e.block)throw Error("Hardfork cannot have undefined block number");return this._chainParams}setHardfork(e){let t=!1;for(let n of this.HARDFORK_CHANGES)n[0]===e&&(this._hardfork!==e&&(this._hardfork=e,this.emit("hardforkChanged",e)),t=!0);if(!t)throw Error("Hardfork with name ".concat(e," not supported"))}getHardforkByBlockNumber(e,t,n){let r=tB(e,y.BigInt),i=tB(t,y.BigInt),o=tB(n,y.Number),s=this.hardforks().filter(e=>null!==e.block||null!==e.ttd&&void 0!==e.ttd||void 0!==e.timestamp),a=s.findIndex(e=>null!==e.ttd&&void 0!==e.ttd);if(s.slice(a+1).findIndex(e=>null!==e.ttd&&void 0!==e.ttd)>=0)throw Error("More than one merge hardforks found with ttd specified");let c=s.findIndex(e=>null!==e.block&&e.block>r||void 0!==o&&Number(e.timestamp)>o);if(-1===c)c=s.length;else if(0===c)throw Error("Must have at least one hardfork at block 0");if(void 0===o){let e=s.slice(0,c).reverse().findIndex(e=>null!==e.block||void 0!==e.ttd);c-=e}if(null===s[c-=1].block&&void 0===s[c].timestamp)(null==i||BigInt(s[c].ttd)>i)&&(c-=1);else if(a>=0&&null!=i){if(c>=a&&BigInt(s[a].ttd)>i)throw Error("Maximum HF determined by total difficulty is lower than the block number HF");if(c<a&&BigInt(s[a].ttd)<=i)throw Error("HF determined by block number is lower than the minimum total difficulty HF")}let l=c;for(;c<s.length-1&&s[c].block===s[c+1].block&&s[c].timestamp===s[c+1].timestamp;c+=1);if(o){if(s.slice(0,l).reduce((e,t)=>{var n;return Math.max(Number(null!==(n=t.timestamp)&&void 0!==n?n:"0"),e)},0)>o)throw Error("Maximum HF determined by timestamp is lower than the block number/ttd HF");if(s.slice(c+1).reduce((e,t)=>{var n;return Math.min(Number(null!==(n=t.timestamp)&&void 0!==n?n:o),e)},o)<o)throw Error("Maximum HF determined by block number/ttd is lower than timestamp HF")}return s[c].name}setHardforkByBlockNumber(e,t,n){let r=this.getHardforkByBlockNumber(e,t,n);return this.setHardfork(r),r}_getHardfork(e){for(let t of this.hardforks())if(t.name===e)return t;return null}setEIPs(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];for(let t of e){if(!(t in tj))throw Error("".concat(t," not supported"));let n=this.gteHardfork(tj[t].minimumHardfork);if(!n)throw Error("".concat(t," cannot be activated on hardfork ").concat(this.hardfork(),", minimumHardfork: ").concat(n));if(void 0!==tj[t].requiredEIPs){for(let n of tj[t].requiredEIPs)if(!(e.includes(n)||this.isActivatedEIP(n)))throw Error("".concat(t," requires EIP ").concat(n,", but is not included in the EIP list"))}}this._eips=e}param(e,t){let n;for(let r of this._eips)if(void 0!==(n=this.paramByEIP(e,t,r)))return n;return this.paramByHardfork(e,t,this._hardfork)}paramByHardfork(e,t,n){let r=null;for(let i of this.HARDFORK_CHANGES){if("eips"in i[1])for(let n of i[1].eips){let i=this.paramByEIP(e,t,n);r="bigint"==typeof i?i:r}else{if(void 0===i[1][e])throw Error("Topic ".concat(e," not defined"));void 0!==i[1][e][t]&&(r=i[1][e][t].v)}if(i[0]===n)break}return BigInt(null!=r?r:0)}paramByEIP(e,t,n){if(!(n in tj))throw Error("".concat(n," not supported"));let r=tj[n];if(!(e in r))throw Error("Topic ".concat(e," not defined"));if(void 0!==r[e][t])return BigInt(r[e][t].v)}paramByBlock(e,t,n,r,i){let o=this.getHardforkByBlockNumber(n,r,i);return this.paramByHardfork(e,t,o)}isActivatedEIP(e){if(this.eips().includes(e))return!0;for(let t of this.HARDFORK_CHANGES){let n=t[1];if(this.gteHardfork(n.name)&&"eips"in n&&n.eips.includes(e))return!0}return!1}hardforkIsActiveOnBlock(e,t){let n=tB(t,y.BigInt),r=null!=e?e:this._hardfork,i=this.hardforkBlock(r);return"bigint"==typeof i&&i!==BigInt(0)&&n>=i}activeOnBlock(e){return this.hardforkIsActiveOnBlock(null,e)}hardforkGteHardfork(e,t){let n=null!=e?e:this._hardfork,r=this.hardforks(),i=-1,o=-1,s=0;for(let e of r)e.name===n&&(i=s),e.name===t&&(o=s),s+=1;return i>=o&&-1!==o}gteHardfork(e){return this.hardforkGteHardfork(null,e)}hardforkBlock(e){var t;let n=null!=e?e:this._hardfork,r=null===(t=this._getHardfork(n))||void 0===t?void 0:t.block;return null==r?null:BigInt(r)}hardforkTimestamp(e){var t;let n=null!=e?e:this._hardfork,r=null===(t=this._getHardfork(n))||void 0===t?void 0:t.timestamp;return null==r?null:BigInt(r)}eipBlock(e){for(let t of this.HARDFORK_CHANGES){let n=t[1];if("eips"in n&&n.eips.includes(e))return this.hardforkBlock("number"==typeof t[0]?String(t[0]):t[0])}return null}hardforkTTD(e){var t;let n=null!=e?e:this._hardfork,r=null===(t=this._getHardfork(n))||void 0===t?void 0:t.ttd;return null==r?null:BigInt(r)}isHardforkBlock(e,t){let n=tB(e,y.BigInt),r=null!=t?t:this._hardfork,i=this.hardforkBlock(r);return"bigint"==typeof i&&i!==BigInt(0)&&i===n}nextHardforkBlockOrTimestamp(e){var t,n;let r=null!=e?e:this._hardfork,i=this.hardforks(),o=i.findIndex(e=>e.name===r);if(r===p.Merge&&(o-=1),o<0)return null;let s=null!==(t=i[o].timestamp)&&void 0!==t?t:i[o].block;s=null!=s?Number(s):null;let a=i.slice(o+1).find(e=>{var t;let n=null!==(t=e.timestamp)&&void 0!==t?t:e.block;return n=null!=n?Number(n):null,e.name!==p.Merge&&null!=n&&n!==s});if(void 0===a)return null;let c=null!==(n=a.timestamp)&&void 0!==n?n:a.block;return null==c?null:BigInt(c)}nextHardforkBlock(e){let t=null!=e?e:this._hardfork,n=this.hardforkBlock(t);if(null===n&&t===p.Merge){let e=this.hardforks(),t=e.findIndex(e=>null!==e.ttd&&void 0!==e.ttd);if(t<0)throw Error("Merge hardfork should have been found");n=this.hardforkBlock(e[t-1].name)}return null===n?null:this.hardforks().reduce((e,t)=>{let r=BigInt(null===t.block||void 0!==t.ttd&&null!==t.ttd?0:t.block);return r>n&&null===e?r:e},null)}isNextHardforkBlock(e,t){let n=tB(e,y.BigInt),r=null!=t?t:this._hardfork,i=this.nextHardforkBlock(r);return null!==i&&i===n}_calcForkHash(e,t){let n=new Uint8Array,r=0;for(let t of this.hardforks()){let{block:i,timestamp:o,name:s}=t,a=null!=o?o:i;if("number"==typeof(a=null!==a?Number(a):null)&&0!==a&&a!==r&&s!==p.Merge){let e=(0,A.hexToBytes)(a.toString(16).padStart(16,"0"));n=(0,A.uint8ArrayConcat)(n,e),r=a}if(t.name===e)break}let i=(0,A.uint8ArrayConcat)(t,n);return(0,A.bytesToHex)(tA(tK(i)>>>0))}forkHash(e,t){let n=null!=e?e:this._hardfork,r=this._getHardfork(n);if(null===r||(null==r?void 0:r.block)===null&&(null==r?void 0:r.timestamp)===void 0&&(null==r?void 0:r.ttd)===void 0)throw Error("No fork hash calculation possible for future hardfork");if((null==r?void 0:r.forkHash)!==null&&(null==r?void 0:r.forkHash)!==void 0)return r.forkHash;if(!t)throw Error("genesisHash required for forkHash calculation");return this._calcForkHash(n,t)}hardforkForForkHash(e){let t=this.hardforks().filter(t=>t.forkHash===e);return t.length>=1?t[t.length-1]:null}setForkHashes(e){var t;for(let n of this.hardforks()){let r=null!==(t=n.timestamp)&&void 0!==t?t:n.block;(null===n.forkHash||void 0===n.forkHash)&&(null!=r||void 0!==n.ttd)&&(n.forkHash=this.forkHash(n.name,e))}}genesis(){return this._chainParams.genesis}hardforks(){return this._chainParams.hardforks}bootstrapNodes(){return this._chainParams.bootstrapNodes}dnsNetworks(){return this._chainParams.dnsNetworks}hardfork(){return this._hardfork}chainId(){return BigInt(this._chainParams.chainId)}chainName(){return this._chainParams.name}networkId(){return BigInt(this._chainParams.networkId)}eips(){return this._eips}consensusType(){let e;let t=this.hardfork();for(let n of this.HARDFORK_CHANGES)if("consensus"in n[1]&&(e=n[1].consensus.type),n[0]===t)break;return null!=e?e:this._chainParams.consensus.type}consensusAlgorithm(){let e;let t=this.hardfork();for(let n of this.HARDFORK_CHANGES)if("consensus"in n[1]&&(e=n[1].consensus.algorithm),n[0]===t)break;return null!=e?e:this._chainParams.consensus.algorithm}consensusConfig(){var e;let t;let n=this.hardfork();for(let e of this.HARDFORK_CHANGES)if("consensus"in e[1]&&(t=e[1].consensus[e[1].consensus.algorithm]),e[0]===n)break;return null!==(e=null!=t?t:this._chainParams.consensus[this.consensusAlgorithm()])&&void 0!==e?e:{}}copy(){let e=Object.assign(Object.create(Object.getPrototypeOf(this)),this);return e.removeAllListeners(),e}static _getInitializedChains(e){let t={};for(let[e,n]of Object.entries(f))t[n]=e.toLowerCase();let n={mainnet:tF,goerli:tH,sepolia:tG};if(e)for(let r of e){let{name:e}=r;t[r.chainId.toString()]=e,n[e]=r}return n.names=t,n}constructor(e){var t,n;super(),this._eips=[],this._customChains=null!==(t=e.customChains)&&void 0!==t?t:[],this._chainParams=this.setChain(e.chain),this.DEFAULT_HARDFORK=null!==(n=this._chainParams.defaultHardfork)&&void 0!==n?n:p.Merge,this.HARDFORK_CHANGES=this.hardforks().map(e=>[e.name,tq[e.name]]),this._hardfork=this.DEFAULT_HARDFORK,void 0!==e.hardfork&&this.setHardfork(e.hardfork),e.eips&&this.setEIPs(e.eips)}}(u=E||(E={}))[u.EIP155ReplayProtection=155]="EIP155ReplayProtection",u[u.EIP1559FeeMarket=1559]="EIP1559FeeMarket",u[u.EIP2718TypedTransaction=2718]="EIP2718TypedTransaction",u[u.EIP2930AccessLists=2930]="EIP2930AccessLists";class tz{static zero(){return new tz(tP(20))}equals(e){return(0,A.uint8ArrayEquals)(this.buf,e.buf)}isZero(){return this.equals(tz.zero())}toString(){return(0,A.bytesToHex)(this.buf)}toArray(){return this.buf}static publicToAddress(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=e;if(tO(n),t&&64!==n.length&&(n=tg.ProjectivePoint.fromHex(n).toRawBytes(!1).slice(1)),64!==n.length)throw Error("Expected pubKey to be of length 64");return(0,tD.wn)(n).slice(-20)}constructor(e){if(20!==e.length)throw Error("Invalid address length");this.buf=e}}let tV=(e,t)=>{let n=e.param("vm","maxInitCodeSize");if(n&&BigInt(t)>n)throw Error("the initcode size of this transaction is too large: it is ".concat(t," while the max is ").concat(e.param("vm","maxInitCodeSize")))},tZ=e=>{let t,n;if(0===e.length||Array.isArray(e[0])){n=null!=e?e:[];let r=[];for(let e=0;e<n.length;e+=1){let t=n[e],i=(0,A.bytesToHex)(t[0]),o=[];for(let e=0;e<t[1].length;e+=1)o.push((0,A.bytesToHex)(t[1][e]));let s={address:i,storageKeys:o};r.push(s)}t=r}else{t=e;let r=[];for(let t=0;t<e.length;t+=1){let n=e[t],i=tR(n.address),o=[];for(let e=0;e<n.storageKeys.length;e+=1)o.push(tR(n.storageKeys[e]));r.push([i,o])}n=r}return{AccessListJSON:t,accessList:n}},tY=e=>{for(let t=0;t<e.length;t+=1){let n=e[t],r=n[0],i=n[1];if(void 0!==n[2])throw Error("Access list item cannot have 3 elements. It can only have an address, and an array of storage slots.");if(20!==r.length)throw Error("Invalid EIP-2930 transaction: address length should be 20 bytes");for(let e=0;e<i.length;e+=1)if(32!==i[e].length)throw Error("Invalid EIP-2930 transaction: storage slot length should be 32 bytes")}},tQ=e=>{let t=[];for(let n=0;n<e.length;n+=1){let r=e[n],i={address:(0,A.bytesToHex)(tC(r[0],20)),storageKeys:[]},o=r&&r[1];for(let e=0;e<o.length;e+=1){let t=o[e];i.storageKeys.push((0,A.bytesToHex)(tC(t,32)))}t.push(i)}return t},tX=(e,t)=>{let n=t.param("gasPrices","accessListStorageKeyCost"),r=t.param("gasPrices","accessListAddressCost"),i=0;for(let t=0;t<e.length;t+=1)i+=e[t][1].length;return e.length*Number(r)+i*Number(n)};class tJ{get type(){return this._type}supports(e){return this.activeCapabilities.includes(e)}validate(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=[];return this.getBaseFee()>this.gasLimit&&t.push("gasLimit is too low. given ".concat(this.gasLimit,", need at least ").concat(this.getBaseFee())),this.isSigned()&&!this.verifySignature()&&t.push("Invalid Signature"),e?t:0===t.length}_validateYParity(){let{v:e}=this;if(void 0!==e&&e!==BigInt(0)&&e!==BigInt(1))throw Error(this._errorMsg("The y-parity of the transaction should either be 0 or 1"))}_validateHighS(){let{s:e}=this;if(this.common.gteHardfork("homestead")&&void 0!==e&&e>tE)throw Error(this._errorMsg("Invalid Signature: s-values greater than secp256k1n/2 are considered invalid"))}getBaseFee(){let e=this.common.param("gasPrices","tx"),t=this.getDataFee();if(e&&(t+=e),this.common.gteHardfork("homestead")&&this.toCreationAddress()){let e=this.common.param("gasPrices","txCreation");e&&(t+=e)}return t}getDataFee(){let e=this.common.param("gasPrices","txDataZero"),t=this.common.param("gasPrices","txDataNonZero"),n=BigInt(0);for(let r=0;r<this.data.length;r+=1)0===this.data[r]?n+=e:n+=t;if((void 0===this.to||null===this.to)&&this.common.isActivatedEIP(3860)){let e=BigInt(Math.ceil(this.data.length/32));n+=this.common.param("gasPrices","initCodeWordCost")*e}return n}toCreationAddress(){return void 0===this.to||0===this.to.buf.length}isSigned(){let{v:e,r:t,s:n}=this;return void 0!==e&&void 0!==t&&void 0!==n}verifySignature(){try{let e=this.getSenderPublicKey();return 0!==tx(e).length}catch(e){return!1}}getSenderAddress(){return new tz(tz.publicToAddress(this.getSenderPublicKey()))}sign(e){if(32!==e.length)throw Error(this._errorMsg("Private key must be 32 bytes in length."));let t=!1;0===this.type&&this.common.gteHardfork("spuriousDragon")&&!this.supports(E.EIP155ReplayProtection)&&(this.activeCapabilities.push(E.EIP155ReplayProtection),t=!0);let n=this.getMessageToSign(!0),{v:r,r:i,s:o}=this._ecsign(n,e),s=this._processSignature(r,i,o);if(t){let e=this.activeCapabilities.indexOf(E.EIP155ReplayProtection);e>-1&&this.activeCapabilities.splice(e,1)}return s}_getCommon(e,t){var n,r,i,o;if(void 0!==t){let n=tS(tR(t));if(e){if(e.chainId()!==n)throw Error(this._errorMsg("The chain ID does not match the chain ID of Common"));return e.copy()}return tW.isSupportedChainId(n)?new tW({chain:n,hardfork:this.DEFAULT_HARDFORK}):tW.custom({name:"custom-chain",networkId:n,chainId:n},{baseChain:this.DEFAULT_CHAIN,hardfork:this.DEFAULT_HARDFORK})}if((null==e?void 0:e.copy)&&"function"==typeof(null==e?void 0:e.copy))return e.copy();if(e){let t="function"==typeof e.hardfork?e.hardfork():e.hardfork;return tW.custom({name:"custom-chain",networkId:e.networkId?e.networkId():null!==(r=BigInt(null===(n=e.customChain)||void 0===n?void 0:n.networkId))&&void 0!==r?r:void 0,chainId:e.chainId?e.chainId():null!==(o=BigInt(null===(i=e.customChain)||void 0===i?void 0:i.chainId))&&void 0!==o?o:void 0},{baseChain:this.DEFAULT_CHAIN,hardfork:t||this.DEFAULT_HARDFORK})}return new tW({chain:this.DEFAULT_CHAIN,hardfork:this.DEFAULT_HARDFORK})}_validateCannotExceedMaxInteger(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:256,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];for(let[r,i]of Object.entries(e))switch(t){case 64:if(n){if(void 0!==i&&i>=tv)throw Error(this._errorMsg("".concat(r," cannot equal or exceed MAX_UINT64 (2^64-1), given ").concat(i)))}else if(void 0!==i&&i>tv)throw Error(this._errorMsg("".concat(r," cannot exceed MAX_UINT64 (2^64-1), given ").concat(i)));break;case 256:if(n){if(void 0!==i&&i>=ty)throw Error(this._errorMsg("".concat(r," cannot equal or exceed MAX_INTEGER (2^256-1), given ").concat(i)))}else if(void 0!==i&&i>ty)throw Error(this._errorMsg("".concat(r," cannot exceed MAX_INTEGER (2^256-1), given ").concat(i)));break;default:throw Error(this._errorMsg("unimplemented bits value"))}}static _validateNotArray(e){let t=["nonce","gasPrice","gasLimit","to","value","data","v","r","s","type","baseFee","maxFeePerGas","chainId"];for(let[n,r]of Object.entries(e))if(t.includes(n)&&Array.isArray(r))throw Error("".concat(n," cannot be an array"))}_getSharedErrorPostfix(){let e="";try{e=this.isSigned()?(0,A.bytesToHex)(this.hash()):"not available (unsigned)"}catch(t){e="error"}let t="";try{t=this.isSigned().toString()}catch(t){e="error"}let n="";try{n=this.common.hardfork()}catch(e){n="error"}return"tx type=".concat(this.type," hash=").concat(e," nonce=").concat(this.nonce," value=").concat(this.value," ")+"signed=".concat(t," hf=").concat(n)}_ecsign(e,t,n){let r=tg.sign(e,t),i=r.toCompactRawBytes();return{r:i.subarray(0,32),s:i.subarray(32,64),v:void 0===n?BigInt(r.recovery+27):BigInt(r.recovery+35)+BigInt(n)*BigInt(2)}}static fromSerializedTx(e){arguments.length>1&&void 0!==arguments[1]&&arguments[1]}static fromTxData(e){arguments.length>1&&void 0!==arguments[1]&&arguments[1]}constructor(e,t){var n,r;this.cache={hash:void 0,dataFee:void 0},this.activeCapabilities=[],this.DEFAULT_CHAIN=f.Mainnet,this.DEFAULT_HARDFORK=p.Merge;let{nonce:i,gasLimit:o,to:s,value:a,data:c,v:l,r:u,s:d,type:h}=e;this._type=Number(tS(tR(h))),this.txOptions=t;let m=tR(""===s?"0x":s),g=tR(""===l?"0x":l),v=tR(""===u?"0x":u),y=tR(""===d?"0x":d);this.nonce=tS(tR(""===i?"0x":i)),this.gasLimit=tS(tR(""===o?"0x":o)),this.to=m.length>0?new tz(m):void 0,this.value=tS(tR(""===a?"0x":a)),this.data=tR(""===c?"0x":c),this.v=g.length>0?tS(g):void 0,this.r=v.length>0?tS(v):void 0,this.s=y.length>0?tS(y):void 0,this._validateCannotExceedMaxInteger({value:this.value,r:this.r,s:this.s}),this._validateCannotExceedMaxInteger({gasLimit:this.gasLimit},64),this._validateCannotExceedMaxInteger({nonce:this.nonce},64,!0);let E=void 0===this.to||null===this.to,b=null!==(n=t.allowUnlimitedInitCodeSize)&&void 0!==n&&n,w=null!==(r=t.common)&&void 0!==r?r:this._getCommon();E&&w.isActivatedEIP(3860)&&!b&&tV(w,this.data.length)}}let t$=(0,A.hexToBytes)("2".padStart(2,"0"));class t0 extends tJ{static fromTxData(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return new t0(e,t)}static fromSerializedTx(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!(0,A.uint8ArrayEquals)(e.subarray(0,1),t$))throw Error("Invalid serialized tx input: not an EIP-1559 transaction (wrong tx type, expected: ".concat(2,", received: ").concat((0,A.bytesToHex)(e.subarray(0,1))));let n=tM.yH.decode(e.subarray(1));if(!Array.isArray(n))throw Error("Invalid serialized tx input: must be array");return t0.fromValuesArray(n,t)}static fromValuesArray(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(9!==e.length&&12!==e.length)throw Error("Invalid EIP-1559 transaction. Only expecting 9 values (for unsigned tx) or 12 values (for signed tx).");let[n,r,i,o,s,a,c,l,u,d,h,f]=e;return this._validateNotArray({chainId:n,v:d}),(0,V.jY)({nonce:r,maxPriorityFeePerGas:i,maxFeePerGas:o,gasLimit:s,value:c,v:d,r:h,s:f}),new t0({chainId:tS(n),nonce:r,maxPriorityFeePerGas:i,maxFeePerGas:o,gasLimit:s,to:a,value:c,data:l,accessList:null!=u?u:[],v:void 0!==d?tS(d):void 0,r:h,s:f},t)}getDataFee(){if(this.cache.dataFee&&this.cache.dataFee.hardfork===this.common.hardfork())return this.cache.dataFee.value;let e=super.getDataFee();return e+=BigInt(tX(this.accessList,this.common)),Object.isFrozen(this)&&(this.cache.dataFee={value:e,hardfork:this.common.hardfork()}),e}getUpfrontCost(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:BigInt(0),t=this.maxPriorityFeePerGas,n=this.maxFeePerGas-e;return this.gasLimit*((t<n?t:n)+e)+this.value}raw(){return[tk(this.chainId),tk(this.nonce),tk(this.maxPriorityFeePerGas),tk(this.maxFeePerGas),tk(this.gasLimit),void 0!==this.to?this.to.buf:Uint8Array.from([]),tk(this.value),this.data,this.accessList,void 0!==this.v?tk(this.v):Uint8Array.from([]),void 0!==this.r?tk(this.r):Uint8Array.from([]),void 0!==this.s?tk(this.s):Uint8Array.from([])]}serialize(){let e=this.raw();return(0,A.uint8ArrayConcat)(t$,tM.yH.encode(e))}getMessageToSign(){let e=!(arguments.length>0)||void 0===arguments[0]||arguments[0],t=this.raw().slice(0,9),n=(0,A.uint8ArrayConcat)(t$,tM.yH.encode(t));return e?(0,tD.wn)(n):n}hash(){if(!this.isSigned())throw Error(this._errorMsg("Cannot call hash method if transaction is not signed"));return Object.isFrozen(this)?(this.cache.hash||(this.cache.hash=(0,tD.wn)(this.serialize())),this.cache.hash):(0,tD.wn)(this.serialize())}getMessageToVerifySignature(){return this.getMessageToSign()}getSenderPublicKey(){if(!this.isSigned())throw Error(this._errorMsg("Cannot call this method if transaction is not signed"));let e=this.getMessageToVerifySignature(),{v:t,r:n,s:r}=this;this._validateHighS();try{return tL(e,t+BigInt(27),tk(n),tk(r))}catch(e){throw Error(this._errorMsg("Invalid Signature"))}}_processSignature(e,t,n){let r=Object.assign(Object.assign({},this.txOptions),{common:this.common});return t0.fromTxData({chainId:this.chainId,nonce:this.nonce,maxPriorityFeePerGas:this.maxPriorityFeePerGas,maxFeePerGas:this.maxFeePerGas,gasLimit:this.gasLimit,to:this.to,value:this.value,data:this.data,accessList:this.accessList,v:e-BigInt(27),r:tS(t),s:tS(n)},r)}toJSON(){let e=tQ(this.accessList);return{chainId:tN(this.chainId),nonce:tN(this.nonce),maxPriorityFeePerGas:tN(this.maxPriorityFeePerGas),maxFeePerGas:tN(this.maxFeePerGas),gasLimit:tN(this.gasLimit),to:void 0!==this.to?this.to.toString():void 0,value:tN(this.value),data:(0,A.bytesToHex)(this.data),accessList:e,v:void 0!==this.v?tN(this.v):void 0,r:void 0!==this.r?tN(this.r):void 0,s:void 0!==this.s?tN(this.s):void 0}}errorStr(){return this._getSharedErrorPostfix()+" maxFeePerGas=".concat(this.maxFeePerGas," maxPriorityFeePerGas=").concat(this.maxPriorityFeePerGas)}_errorMsg(e){return"".concat(e," (").concat(this.errorStr(),")")}constructor(e,t={}){var n;super(Object.assign(Object.assign({},e),{type:2}),t),this.DEFAULT_HARDFORK="london";let{chainId:r,accessList:i,maxFeePerGas:o,maxPriorityFeePerGas:s}=e;if(this.common=this._getCommon(t.common,r),this.chainId=this.common.chainId(),!this.common.isActivatedEIP(1559))throw Error("EIP-1559 not enabled on Common");this.activeCapabilities=this.activeCapabilities.concat([1559,2718,2930]);let a=tZ(null!=i?i:[]);if(this.accessList=a.accessList,this.AccessListJSON=a.AccessListJSON,tY(this.accessList),this.maxFeePerGas=tS(tR(""===o?"0x":o)),this.maxPriorityFeePerGas=tS(tR(""===s?"0x":s)),this._validateCannotExceedMaxInteger({maxFeePerGas:this.maxFeePerGas,maxPriorityFeePerGas:this.maxPriorityFeePerGas}),tJ._validateNotArray(e),this.gasLimit*this.maxFeePerGas>ty)throw Error(this._errorMsg("gasLimit * maxFeePerGas cannot exceed MAX_INTEGER (2^256-1)"));if(this.maxFeePerGas<this.maxPriorityFeePerGas)throw Error(this._errorMsg("maxFeePerGas cannot be less than maxPriorityFeePerGas (The total must be the larger of the two)"));this._validateYParity(),this._validateHighS(),(null===(n=null==t?void 0:t.freeze)||void 0===n||n)&&Object.freeze(this)}}let t1=(0,A.hexToBytes)("1".padStart(2,"0"));class t2 extends tJ{static fromTxData(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return new t2(e,t)}static fromSerializedTx(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!(0,A.uint8ArrayEquals)(e.subarray(0,1),t1))throw Error("Invalid serialized tx input: not an EIP-2930 transaction (wrong tx type, expected: ".concat(1,", received: ").concat((0,A.bytesToHex)(e.subarray(0,1))));let n=tM.yH.decode(Uint8Array.from(e.subarray(1)));if(!Array.isArray(n))throw Error("Invalid serialized tx input: must be array");return t2.fromValuesArray(n,t)}static fromValuesArray(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(8!==e.length&&11!==e.length)throw Error("Invalid EIP-2930 transaction. Only expecting 8 values (for unsigned tx) or 11 values (for signed tx).");let[n,r,i,o,s,a,c,l,u,d,h]=e;return this._validateNotArray({chainId:n,v:u}),(0,V.jY)({nonce:r,gasPrice:i,gasLimit:o,value:a,v:u,r:d,s:h}),new t2({chainId:tS(n),nonce:r,gasPrice:i,gasLimit:o,to:s,value:a,data:c,accessList:null!=l?l:[],v:void 0!==u?tS(u):void 0,r:d,s:h},t)}getDataFee(){if(this.cache.dataFee&&this.cache.dataFee.hardfork===this.common.hardfork())return this.cache.dataFee.value;let e=super.getDataFee();return e+=BigInt(tX(this.accessList,this.common)),Object.isFrozen(this)&&(this.cache.dataFee={value:e,hardfork:this.common.hardfork()}),e}getUpfrontCost(){return this.gasLimit*this.gasPrice+this.value}raw(){return[tk(this.chainId),tk(this.nonce),tk(this.gasPrice),tk(this.gasLimit),void 0!==this.to?this.to.buf:Uint8Array.from([]),tk(this.value),this.data,this.accessList,void 0!==this.v?tk(this.v):Uint8Array.from([]),void 0!==this.r?tk(this.r):Uint8Array.from([]),void 0!==this.s?tk(this.s):Uint8Array.from([])]}serialize(){let e=this.raw();return(0,A.uint8ArrayConcat)(t1,tM.yH.encode(e))}getMessageToSign(){let e=!(arguments.length>0)||void 0===arguments[0]||arguments[0],t=this.raw().slice(0,8),n=(0,A.uint8ArrayConcat)(t1,tM.yH.encode(t));return e?(0,tD.wn)(n):n}hash(){if(!this.isSigned())throw Error(this._errorMsg("Cannot call hash method if transaction is not signed"));return Object.isFrozen(this)?(this.cache.hash||(this.cache.hash=(0,tD.wn)(this.serialize())),this.cache.hash):(0,tD.wn)(this.serialize())}getMessageToVerifySignature(){return this.getMessageToSign()}getSenderPublicKey(){if(!this.isSigned())throw Error(this._errorMsg("Cannot call this method if transaction is not signed"));let e=this.getMessageToVerifySignature(),{v:t,r:n,s:r}=this;this._validateHighS();try{return tL(e,t+BigInt(27),tk(n),tk(r))}catch(e){throw Error(this._errorMsg("Invalid Signature"))}}_processSignature(e,t,n){let r=Object.assign(Object.assign({},this.txOptions),{common:this.common});return t2.fromTxData({chainId:this.chainId,nonce:this.nonce,gasPrice:this.gasPrice,gasLimit:this.gasLimit,to:this.to,value:this.value,data:this.data,accessList:this.accessList,v:e-BigInt(27),r:tS(t),s:tS(n)},r)}toJSON(){let e=tQ(this.accessList);return{chainId:tN(this.chainId),nonce:tN(this.nonce),gasPrice:tN(this.gasPrice),gasLimit:tN(this.gasLimit),to:void 0!==this.to?this.to.toString():void 0,value:tN(this.value),data:(0,A.bytesToHex)(this.data),accessList:e,v:void 0!==this.v?tN(this.v):void 0,r:void 0!==this.r?tN(this.r):void 0,s:void 0!==this.s?tN(this.s):void 0}}errorStr(){var e,t;return this._getSharedErrorPostfix()+" gasPrice=".concat(this.gasPrice," accessListCount=").concat(null!==(t=null===(e=this.accessList)||void 0===e?void 0:e.length)&&void 0!==t?t:0)}_errorMsg(e){return"".concat(e," (").concat(this.errorStr(),")")}constructor(e,t={}){var n;super(Object.assign(Object.assign({},e),{type:1}),t),this.DEFAULT_HARDFORK="berlin";let{chainId:r,accessList:i,gasPrice:o}=e;if(this.common=this._getCommon(t.common,r),this.chainId=this.common.chainId(),!this.common.isActivatedEIP(2930))throw Error("EIP-2930 not enabled on Common");this.activeCapabilities=this.activeCapabilities.concat([2718,2930]);let s=tZ(null!=i?i:[]);if(this.accessList=s.accessList,this.AccessListJSON=s.AccessListJSON,tY(this.accessList),this.gasPrice=tS(tR(""===o?"0x":o)),this._validateCannotExceedMaxInteger({gasPrice:this.gasPrice}),tJ._validateNotArray(e),this.gasPrice*this.gasLimit>ty)throw Error(this._errorMsg("gasLimit * gasPrice cannot exceed MAX_INTEGER"));this._validateYParity(),this._validateHighS(),(null===(n=null==t?void 0:t.freeze)||void 0===n||n)&&Object.freeze(this)}}function t3(e,t){let n=Number(e),r=2*Number(t);return n===r+35||n===r+36}class t4 extends tJ{static fromTxData(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return new t4(e,t)}static fromSerializedTx(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=tM.yH.decode(e);if(!Array.isArray(n))throw Error("Invalid serialized tx input. Must be array");return this.fromValuesArray(n,t)}static fromValuesArray(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(6!==e.length&&9!==e.length)throw Error("Invalid transaction. Only expecting 6 values (for unsigned tx) or 9 values (for signed tx).");let[n,r,i,o,s,a,c,l,u]=e;return(0,V.jY)({nonce:n,gasPrice:r,gasLimit:i,value:s,v:c,r:l,s:u}),new t4({nonce:n,gasPrice:r,gasLimit:i,to:o,value:s,data:a,v:c,r:l,s:u},t)}raw(){return[tk(this.nonce),tk(this.gasPrice),tk(this.gasLimit),void 0!==this.to?this.to.buf:Uint8Array.from([]),tk(this.value),this.data,void 0!==this.v?tk(this.v):Uint8Array.from([]),void 0!==this.r?tk(this.r):Uint8Array.from([]),void 0!==this.s?tk(this.s):Uint8Array.from([])]}serialize(){return tM.yH.encode(this.raw())}_getMessageToSign(){let e=[tk(this.nonce),tk(this.gasPrice),tk(this.gasLimit),void 0!==this.to?this.to.buf:Uint8Array.from([]),tk(this.value),this.data];return this.supports(E.EIP155ReplayProtection)&&(e.push(tR(this.common.chainId())),e.push(tx(tR(0))),e.push(tx(tR(0)))),e}getMessageToSign(){let e=!(arguments.length>0)||void 0===arguments[0]||arguments[0],t=this._getMessageToSign();return e?(0,tD.wn)(tM.yH.encode(t)):t}getDataFee(){return this.cache.dataFee&&this.cache.dataFee.hardfork===this.common.hardfork()?this.cache.dataFee.value:(Object.isFrozen(this)&&(this.cache.dataFee={value:super.getDataFee(),hardfork:this.common.hardfork()}),super.getDataFee())}getUpfrontCost(){return this.gasLimit*this.gasPrice+this.value}hash(){if(!this.isSigned())throw Error(this._errorMsg("Cannot call hash method if transaction is not signed"));return Object.isFrozen(this)?(this.cache.hash||(this.cache.hash=(0,tD.wn)(tM.yH.encode(this.raw()))),this.cache.hash):(0,tD.wn)(tM.yH.encode(this.raw()))}getMessageToVerifySignature(){if(!this.isSigned())throw Error(this._errorMsg("This transaction is not signed"));let e=this._getMessageToSign();return(0,tD.wn)(tM.yH.encode(e))}getSenderPublicKey(){let e=this.getMessageToVerifySignature(),{v:t,r:n,s:r}=this;this._validateHighS();try{return tL(e,t,tk(n),tk(r),this.supports(E.EIP155ReplayProtection)?this.common.chainId():void 0)}catch(e){throw Error(this._errorMsg("Invalid Signature"))}}_processSignature(e,t,n){let r=e;this.supports(E.EIP155ReplayProtection)&&(r+=this.common.chainId()*BigInt(2)+BigInt(8));let i=Object.assign(Object.assign({},this.txOptions),{common:this.common});return t4.fromTxData({nonce:this.nonce,gasPrice:this.gasPrice,gasLimit:this.gasLimit,to:this.to,value:this.value,data:this.data,v:r,r:tS(t),s:tS(n)},i)}toJSON(){return{nonce:tN(this.nonce),gasPrice:tN(this.gasPrice),gasLimit:tN(this.gasLimit),to:void 0!==this.to?this.to.toString():void 0,value:tN(this.value),data:(0,A.bytesToHex)(this.data),v:void 0!==this.v?tN(this.v):void 0,r:void 0!==this.r?tN(this.r):void 0,s:void 0!==this.s?tN(this.s):void 0}}_validateTxV(e,t){let n;let r=void 0!==e?Number(e):void 0;if(void 0!==r&&r<37&&27!==r&&28!==r)throw Error("Legacy txs need either v = 27/28 or v >= 37 (EIP-155 replay protection), got v = ".concat(r));if(void 0!==r&&0!==r&&(!t||t.gteHardfork("spuriousDragon"))&&27!==r&&28!==r){if(t){if(!t3(BigInt(r),t.chainId()))throw Error("Incompatible EIP155-based V ".concat(r," and chain id ").concat(t.chainId(),". See the Common parameter of the Transaction constructor to set the chain id."))}else n=BigInt(r-((r-35)%2==0?35:36))/BigInt(2)}return this._getCommon(t,n)}errorStr(){return this._getSharedErrorPostfix()+" gasPrice=".concat(this.gasPrice)}_errorMsg(e){return"".concat(e," (").concat(this.errorStr(),")")}constructor(e,t={}){var n;if(super(Object.assign(Object.assign({},e),{type:0}),t),this.common=this._validateTxV(this.v,t.common),this.gasPrice=tS(tR(""===e.gasPrice?"0x":e.gasPrice)),this.gasPrice*this.gasLimit>ty)throw Error(this._errorMsg("gas limit * gasPrice cannot exceed MAX_INTEGER (2^256-1)"));this._validateCannotExceedMaxInteger({gasPrice:this.gasPrice}),tJ._validateNotArray(e),this.common.gteHardfork("spuriousDragon")&&(this.isSigned()?t3(this.v,this.common.chainId())&&this.activeCapabilities.push(E.EIP155ReplayProtection):this.activeCapabilities.push(E.EIP155ReplayProtection)),(null===(n=null==t?void 0:t.freeze)||void 0===n||n)&&Object.freeze(this)}}let t5=new Map;class t6{static typeToInt(e){return Number(tS(tR(e)))}static registerTransactionType(e,t){let n=t6.typeToInt(e);t5.set(n,t)}static fromTxData(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!("type"in e)||void 0===e.type)return t4.fromTxData(e,t);let n=t6.typeToInt(e.type);if(0===n)return t4.fromTxData(e,t);if(1===n)return t2.fromTxData(e,t);if(2===n)return t0.fromTxData(e,t);let r=t5.get(n);if(null==r?void 0:r.fromTxData)return r.fromTxData(e,t);throw Error("Tx instantiation with type ".concat(n," not supported"))}static fromSerializedData(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!(e[0]<=127))return t4.fromSerializedTx(e,t);switch(e[0]){case 1:return t2.fromSerializedTx(e,t);case 2:return t0.fromSerializedTx(e,t);default:{let n=t5.get(Number(e[0]));if(null==n?void 0:n.fromSerializedTx)return n.fromSerializedTx(e,t);throw Error("TypedTransaction with ID ".concat(e[0]," unknown"))}}}static fromBlockBodyData(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if((0,A.isUint8Array)(e))return this.fromSerializedData(e,t);if(Array.isArray(e))return t4.fromValuesArray(e,t);throw Error("Cannot decode transaction: unknown type input")}constructor(){}}var t8=function(e,t,n,r){return new(n||(n=Promise))(function(i,o){function s(e){try{c(r.next(e))}catch(e){o(e)}}function a(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):((t=e.value)instanceof n?t:new n(function(e){e(t)})).then(s,a)}c((r=r.apply(e,t||[])).next())})};let t7=(e,t)=>{let n;if(!t&&"string"==typeof e&&(0,V.H2)(e)&&66!==e.length)throw new _.T7U;try{n=(0,A.isUint8Array)(e)?e:(0,A.bytesToUint8Array)(e)}catch(e){throw new _.QOl}if(!t&&32!==n.byteLength)throw new _.T7U;return n},t9=e=>{let t=(0,V.H2)(e)?e:(0,A.utf8ToHex)(e),n=(0,A.hexToBytes)(t),r=(0,A.hexToBytes)((0,A.fromUtf8)("\x19Ethereum Signed Message:\n".concat(n.byteLength))),i=(0,A.uint8ArrayConcat)(r,n);return(0,A.sha3Raw)(i)},ne=(e,t)=>{let n=t7(t),r=t9(e),i=tg.sign(r.substring(2),n),o=i.toCompactRawBytes(),s=i.r.toString(16).padStart(64,"0"),a=i.s.toString(16).padStart(64,"0"),c=i.recovery+27;return{message:e,messageHash:r,v:(0,A.numberToHex)(c),r:"0x".concat(s),s:"0x".concat(a),signature:"".concat((0,A.bytesToHex)(o)).concat(c.toString(16))}},nt=(e,t)=>t8(void 0,void 0,void 0,function*(){let n=e.sign((0,A.hexToBytes)(t));if((0,V.Rw)(n.v)||(0,V.Rw)(n.r)||(0,V.Rw)(n.s))throw new _.wJO("Signer Error");let r=n.validate(!0);if(r.length>0){let e="Signer Error ";for(let t of r)e+="".concat(e," ").concat(t,".");throw new _.wJO(e)}let i=(0,A.bytesToHex)(n.serialize()),o=(0,A.sha3Raw)(i);return{messageHash:(0,A.bytesToHex)(n.getMessageToSign(!0)),v:"0x".concat(n.v.toString(16)),r:"0x".concat(n.r.toString(16).padStart(64,"0")),s:"0x".concat(n.s.toString(16).padStart(64,"0")),rawTransaction:i,transactionHash:(0,A.bytesToHex)(o)}}),nn=e=>{if((0,V.Rw)(e))throw new _.F92;let t=t6.fromSerializedData((0,A.hexToBytes)(e));return(0,A.toChecksumAddress)(t.getSenderAddress().toString())},nr=(e,t,n,r,i)=>{if("object"==typeof e){let t="".concat(e.r).concat(e.s.slice(2)).concat(e.v.slice(2));return nr(e.messageHash,t,n)}if("string"==typeof t&&"string"==typeof n&&!(0,V.Rw)(r))return nr(e,"".concat(n).concat(r.slice(2)).concat(t.slice(2)),i);if((0,V.Rw)(t))throw new _.wnZ("signature string undefined");let o=n?e:t9(e),s=parseInt(t.substring(130),16);s>26&&(s-=27);let a=tg.Signature.fromCompact(t.slice(2,130)).addRecoveryBit(s).recoverPublicKey(o.replace("0x","")).toRawBytes(!1),c=(0,A.sha3Raw)(a.subarray(1));return(0,A.toChecksumAddress)("0x".concat(c.slice(-40)))},ni=e=>{let t=t7(e),n=tg.getPublicKey(t,!1),r=(0,A.sha3Raw)(n.slice(1)).slice(-40);return(0,A.toChecksumAddress)("0x".concat(r))},no=(e,t)=>{let n=t7(e);return"0x".concat((0,A.bytesToHex)(tg.getPublicKey(n,t)).slice(4))},ns=(e,t,n)=>t8(void 0,void 0,void 0,function*(){var r,i,o,s,a,c,l;let u,d,h,f;let p=t7(e);if(u=(null==n?void 0:n.salt)?"string"==typeof n.salt?(0,A.hexToBytes)(n.salt):n.salt:(0,A.randomBytes)(32),!((0,V.HD)(t)||(0,A.isUint8Array)(t)))throw new _.nII;let m="string"==typeof t?(0,A.hexToBytes)((0,A.utf8ToHex)(t)):t;if(null==n?void 0:n.iv){if(16!==(d="string"==typeof n.iv?(0,A.hexToBytes)(n.iv):n.iv).length)throw new _.eNY}else d=(0,A.randomBytes)(16);let g=null!==(r=null==n?void 0:n.kdf)&&void 0!==r?r:"scrypt";if("pbkdf2"===g){if((f={dklen:null!==(i=null==n?void 0:n.dklen)&&void 0!==i?i:32,salt:(0,A.bytesToHex)(u).replace("0x",""),c:null!==(o=null==n?void 0:n.c)&&void 0!==o?o:262144,prf:"hmac-sha256"}).c<1e3)throw new _.WqT;h=eA(m,u,f.c,f.dklen,"sha256")}else if("scrypt"===g)f={n:null!==(s=null==n?void 0:n.n)&&void 0!==s?s:8192,r:null!==(a=null==n?void 0:n.r)&&void 0!==a?a:8,p:null!==(c=null==n?void 0:n.p)&&void 0!==c?c:1,dklen:null!==(l=null==n?void 0:n.dklen)&&void 0!==l?l:32,salt:(0,A.bytesToHex)(u).replace("0x","")},h=eI(m,u,f.n,f.p,f.r,f.dklen);else throw new _.PlV;let v=yield et(p,h.slice(0,16),d,"aes-128-ctr"),y=(0,A.bytesToHex)(v).slice(2),E=(0,A.sha3Raw)((0,A.uint8ArrayConcat)(h.slice(16,32),v)).replace("0x","");return{version:3,id:(0,A.uuidV4)(),address:ni(p).toLowerCase().replace("0x",""),crypto:{ciphertext:y,cipherparams:{iv:(0,A.bytesToHex)(d).replace("0x","")},cipher:"aes-128-ctr",kdf:g,kdfparams:f,mac:E}}}),na=(e,t)=>{let n=t7(e,t);return{address:ni(n),privateKey:(0,A.bytesToHex)(n),signTransaction:e=>{throw new _.wJO("Do not have network access to sign the transaction")},sign:e=>ne("string"==typeof e?e:JSON.stringify(e),n),encrypt:(e,t)=>t8(void 0,void 0,void 0,function*(){return ns(n,e,t)})}},nc=()=>{let e=tg.utils.randomPrivateKey();return na("".concat((0,A.bytesToHex)(e)))},nl=(e,t,n)=>t8(void 0,void 0,void 0,function*(){let r;let i="object"==typeof e?e:JSON.parse(n?e.toLowerCase():e);if(V.sC.validateJSONSchema(tb,i),3!==i.version)throw new _.V41;let o="string"==typeof t?(0,A.hexToBytes)((0,A.utf8ToHex)(t)):t;if(V.sC.validate(["bytes"],[o]),"scrypt"===i.crypto.kdf){let e=i.crypto.kdfparams;r=eI(o,"string"==typeof e.salt?(0,A.hexToBytes)(e.salt):e.salt,e.n,e.p,e.r,e.dklen)}else if("pbkdf2"===i.crypto.kdf){let e=i.crypto.kdfparams;r=eA(o,"string"==typeof e.salt?(0,A.hexToBytes)(e.salt):e.salt,e.c,e.dklen,"sha256")}else throw new _.PlV;let s=(0,A.hexToBytes)(i.crypto.ciphertext);if((0,A.sha3Raw)((0,A.uint8ArrayConcat)(r.slice(16,32),s)).replace("0x","")!==i.crypto.mac)throw new _.ePX;return na((yield er((0,A.hexToBytes)(i.crypto.ciphertext),r.slice(0,16),(0,A.hexToBytes)(i.crypto.cipherparams.iv))))});var nu=function(e,t,n,r){return new(n||(n=Promise))(function(i,o){function s(e){try{c(r.next(e))}catch(e){o(e)}}function a(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):((t=e.value)instanceof n?t:new n(function(e){e(t)})).then(s,a)}c((r=r.apply(e,t||[])).next())})};class nd{get requests(){return[...this._requests.values()].map(e=>e.payload)}add(e){let t=A.jsonRpc.toPayload(e),n=new A.Web3DeferredPromise;return this._requests.set(t.id,{payload:t,promise:n}),n}execute(e){var t;return nu(this,void 0,void 0,function*(){if(0===this.requests.length)return Promise.resolve([]);let n=new A.Web3DeferredPromise({timeout:null!==(t=null==e?void 0:e.timeout)&&void 0!==t?t:1e3,eagerStart:!0,timeoutMessage:"Batch request timeout"});return this._processBatchRequest(n).catch(e=>n.reject(e)),n.catch(e=>{e instanceof _.S$e&&this._abortAllRequests("Batch request timeout"),n.reject(e)}),n})}_processBatchRequest(e){var t,n;return nu(this,void 0,void 0,function*(){let r=yield this._requestManager.sendBatch([...this._requests.values()].map(e=>e.payload));if(r.length!==this._requests.size)throw this._abortAllRequests("Invalid batch response"),new _.VLC(r,"Batch request size mismatch the results size. Requests: ".concat(this._requests.size,", Responses: ").concat(r.length));let i=this.requests.map(e=>e.id).map(Number).sort((e,t)=>e-t),o=r.map(e=>e.id).map(Number).sort((e,t)=>e-t);if(JSON.stringify(i)!==JSON.stringify(o))throw this._abortAllRequests("Invalid batch response"),new _.VLC(r,"Batch request mismatch the results. Requests: [".concat(i.join(),"], Responses: [").concat(o.join(),"]"));for(let e of r)A.jsonRpc.isResponseWithResult(e)?null===(t=this._requests.get(e.id))||void 0===t||t.promise.resolve(e.result):A.jsonRpc.isResponseWithError(e)&&(null===(n=this._requests.get(e.id))||void 0===n||n.promise.reject(e.error));e.resolve(r)})}_abortAllRequests(e){for(let{promise:t}of this._requests.values())t.reject(new _.GRi(e))}constructor(e){this._requestManager=e,this._requests=new Map}}class nh extends S{get requestManager(){return this._requestManager}get subscriptionManager(){return this._subscriptionManager}get wallet(){return this._wallet}get accountProvider(){return this._accountProvider}static fromContextObject(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return new this(...t.reverse())}getContextObject(){var e;return{config:this.config,provider:this.provider,requestManager:this.requestManager,subscriptionManager:this.subscriptionManager,registeredSubscriptions:null===(e=this.subscriptionManager)||void 0===e?void 0:e.registeredSubscriptions,providers:this.providers,wallet:this.wallet,accountProvider:this.accountProvider}}use(e){for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];let i=new e(...[...n,this.getContextObject()]);return this.on(d.CONFIG_CHANGE,e=>{i.setConfig({[e.name]:e.newValue})}),i}link(e){this.setConfig(e.config),this._requestManager=e.requestManager,this.provider=e.provider,this._subscriptionManager=e.subscriptionManager,this._wallet=e.wallet,this._accountProvider=e._accountProvider,e.on(d.CONFIG_CHANGE,e=>{this.setConfig({[e.name]:e.newValue})})}registerPlugin(e){if(void 0!==this[e.pluginNamespace])throw new _.zSi(e.pluginNamespace);let t={[e.pluginNamespace]:e};t[e.pluginNamespace].link(this),Object.assign(this,t)}get provider(){return this.currentProvider}set provider(e){this.requestManager.setProvider(e)}get currentProvider(){return this.requestManager.provider}set currentProvider(e){this.requestManager.setProvider(e)}get givenProvider(){return nh.givenProvider}setProvider(e){return this.provider=e,!0}get BatchRequest(){return nd.bind(void 0,this._requestManager)}extend(e){var t;return e.property&&!this[e.property]&&(this[e.property]={}),null===(t=e.methods)||void 0===t||t.forEach(t=>{var n=this;let r=function(){for(var e,r,i,o=arguments.length,s=Array(o),a=0;a<o;a++)s[a]=arguments[a];return e=void 0,r=void 0,i=function*(){return this.requestManager.send({method:t.call,params:s})},new(r||(r=Promise))(function(t,o){function s(e){try{c(i.next(e))}catch(e){o(e)}}function a(e){try{c(i.throw(e))}catch(e){o(e)}}function c(e){var n;e.done?t(e.value):((n=e.value)instanceof r?n:new r(function(e){e(n)})).then(s,a)}c((i=i.apply(n,e||[])).next())})};e.property?this[e.property][t.name]=r:this[t.name]=r}),this}constructor(e){var t;if(super(),this.providers=j.providers,(0,A.isNullish)(e)||"string"==typeof e&&""!==e.trim()||U(e)){this._requestManager=new j(e),this._subscriptionManager=new K(this._requestManager,{});return}let{config:n,provider:r,requestManager:i,subscriptionManager:o,registeredSubscriptions:s,accountProvider:a,wallet:c}=e;this.setConfig(null!=n?n:{}),this._requestManager=null!=i?i:new j(r,null===(t=null==n?void 0:n.enableExperimentalFeatures)||void 0===t?void 0:t.useSubscriptionWhenCheckingBlockTimeout),o?this._subscriptionManager=o:this._subscriptionManager=new K(this.requestManager,null!=s?s:{}),a&&(this._accountProvider=a),c&&(this._wallet=c)}}nh.providers=j.providers;class nf{static isDirect(e){return 34===e.length||35===e.length}isDirect(){return nf.isDirect(this._iban)}static isIndirect(e){return 20===e.length}isIndirect(){return nf.isIndirect(this._iban)}static isValid(e){return/^XE[0-9]{2}(ETH[0-9A-Z]{13}|[0-9A-Z]{30,31})$/.test(e)&&1===nf._mod9710(nf._iso13616Prepare(e))}isValid(){return nf.isValid(this._iban)}static fromBban(e){let t=this._mod9710(this._iso13616Prepare("".concat("XE","00").concat(e))),n="0".concat((98-t).toString()).slice(-2);return new nf("".concat("XE").concat(n).concat(e))}static createIndirect(e){return nf.fromBban("ETH".concat(e.institution).concat(e.identifier))}static fromAddress(e){if(!(0,V.UJ)(e))throw new _.bSi(e);let t=BigInt((0,A.hexToNumber)(e)).toString(36),n=(0,A.leftPad)(t,15);return nf.fromBban(n.toUpperCase())}static toIban(e){return nf.fromAddress(e).toString()}client(){return this.isIndirect()?this._iban.slice(11):""}checksum(){return this._iban.slice(2,4)}institution(){return this.isIndirect()?this._iban.slice(7,11):""}toString(){return this._iban}constructor(e){if(this.toAddress=()=>{if(this.isDirect()){let e=this._iban.slice(4),t=nf._parseInt(e,36),n=(0,A.leftPad)(t,40);return(0,A.toChecksumAddress)(n)}throw Error("Iban is indirect and cannot be converted. Must be length of 34 or 35")},nf.isIndirect(e)||nf.isDirect(e))this._iban=e;else throw Error("Invalid IBAN was provided")}}nf._iso13616Prepare=e=>{let t=e.toUpperCase();return"".concat(t.slice(4)).concat(t.slice(0,4)).split("").map(e=>{let t=e.charCodeAt(0);return t>=65&&t<=90?t-65+10:e}).join("")},nf._parseInt=(e,t)=>[...e].reduce((e,n)=>BigInt(parseInt(n,t))+BigInt(t)*e,BigInt(0)),nf._mod9710=e=>{let t,n=e;for(;n.length>2;)t=n.slice(0,9),n="".concat((parseInt(t,10)%97).toString()).concat(n.slice(t.length));return parseInt(n,10)%97},nf.toAddress=e=>new nf(e).toAddress();var np=function(e,t,n,r){return new(n||(n=Promise))(function(i,o){function s(e){try{c(r.next(e))}catch(e){o(e)}}function a(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):((t=e.value)instanceof n?t:new n(function(e){e(t)})).then(s,a)}c((r=r.apply(e,t||[])).next())})};class nm extends R{then(e,t){return np(this,void 0,void 0,function*(){return this._promise.then(e,t)})}catch(e){return np(this,void 0,void 0,function*(){return this._promise.catch(e)})}finally(e){return np(this,void 0,void 0,function*(){return this._promise.finally(e)})}on(e,t){return super.on(e,t),this}once(e,t){return super.once(e,t),this}constructor(e){super(),this[b]="Promise",this._promise=new Promise(e)}}b=Symbol.toStringTag,n(85190);var ng=function(e,t,n,r){return new(n||(n=Promise))(function(i,o){function s(e){try{c(r.next(e))}catch(e){o(e)}}function a(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):((t=e.value)instanceof n?t:new n(function(e){e(t)})).then(s,a)}c((r=r.apply(e,t||[])).next())})};function nv(e){return ng(this,void 0,void 0,function*(){return e.send({method:"eth_syncing",params:[]})})}function ny(e,t){return ng(this,void 0,void 0,function*(){return V.sC.validate(["hex"],[t]),e.send({method:"eth_sendRawTransaction",params:[t]})})}function nE(e,t,n){return ng(this,void 0,void 0,function*(){return V.sC.validate(["blockNumberOrTag","bool"],[t,n]),e.send({method:"eth_getBlockByNumber",params:[t,n]})})}var nb=function(e,t,n,r){return new(n||(n=Promise))(function(i,o){function s(e){try{c(r.next(e))}catch(e){o(e)}}function a(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):((t=e.value)instanceof n?t:new n(function(e){e(t)})).then(s,a)}c((r=r.apply(e,t||[])).next())})},nw=function(e,t,n,r){return new(n||(n=Promise))(function(i,o){function s(e){try{c(r.next(e))}catch(e){o(e)}}function a(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):((t=e.value)instanceof n?t:new n(function(e){e(t)})).then(s,a)}c((r=r.apply(e,t||[])).next())})};let nT=e=>nw(void 0,void 0,void 0,function*(){return e.send({method:"personal_listAccounts",params:[]})}),n_=(e,t)=>nw(void 0,void 0,void 0,function*(){return e.send({method:"personal_newAccount",params:[t]})}),nA=(e,t,n,r)=>nw(void 0,void 0,void 0,function*(){return e.send({method:"personal_unlockAccount",params:[t,n,r]})}),nR=(e,t)=>nw(void 0,void 0,void 0,function*(){return e.send({method:"personal_lockAccount",params:[t]})}),nS=(e,t,n)=>nw(void 0,void 0,void 0,function*(){return e.send({method:"personal_importRawKey",params:[t,n]})}),nP=(e,t,n)=>nw(void 0,void 0,void 0,function*(){return e.send({method:"personal_sendTransaction",params:[t,n]})}),nI=(e,t,n)=>nw(void 0,void 0,void 0,function*(){return e.send({method:"personal_signTransaction",params:[t,n]})}),nO=(e,t,n,r)=>nw(void 0,void 0,void 0,function*(){return e.send({method:"personal_sign",params:[t,n,r]})}),nC=(e,t,n)=>nw(void 0,void 0,void 0,function*(){return e.send({method:"personal_ecRecover",params:[t,n]})}),nx={type:"object",properties:{accessList:{type:"null"},maxFeePerGas:{type:"null"},maxPriorityFeePerGas:{type:"null"}}},nN={type:"object",properties:{maxFeePerGas:{type:"null"},maxPriorityFeePerGas:{type:"null"}}},nk={type:"object",properties:{gasPrice:{type:"null"}}},nL=(e,t,n)=>{try{V.sC.validateJSONSchema(e,t)}catch(e){if(e instanceof V.X$)throw new _.L25(e.errors,n);throw e}},nB=e=>{var t,n;if(!(0,V.Rw)(e.type)){let t;switch(e.type){case"0x0":t=nx;break;case"0x1":t=nN;break;case"0x2":t=nk;break;default:return(0,A.format)({format:"uint"},e.type,I.pE)}return nL(t,e,e.type),(0,A.format)({format:"uint"},e.type,I.pE)}if(!(0,V.Rw)(e.maxFeePerGas)||!(0,V.Rw)(e.maxPriorityFeePerGas))return nL(nk,e,"0x2"),"0x2";if(!(0,V.Rw)(e.accessList))return nL(nN,e,"0x1"),"0x1";let r=null!==(t=e.hardfork)&&void 0!==t?t:null===(n=e.common)||void 0===n?void 0:n.hardfork;if(!(0,V.Rw)(r)){let t=Object.keys(I.Ut).indexOf(r);if(t>=Object.keys(I.Ut).indexOf("london"))return(0,V.Rw)(e.gasPrice)?"0x2":"0x0";if(t===Object.keys(I.Ut).indexOf("berlin"))return"0x0"}if(!(0,V.Rw)(e.gasPrice))return nL(nx,e,"0x0"),"0x0"},nD=(e,t)=>{var n;return(null!==(n=null==t?void 0:t.transactionTypeParser)&&void 0!==n?n:nB)(e)},nM=e=>e[0]>127?"0x0":(0,A.toHex)(e[0]),nU={type:"array",items:Object.assign({},{type:"object",properties:{address:{format:"address"},storageKeys:{type:"array",items:{format:"bytes32"}}}})},nH={type:"object",properties:{accessList:Object.assign({},nU),gasUsed:{type:"string"}}},nF={type:"string",enum:["goerli","kovan","mainnet","rinkeby","ropsten","sepolia"]},nG={type:"string",enum:["arrowGlacier","berlin","byzantium","chainstart","constantinople","dao","homestead","istanbul","london","merge","muirGlacier","petersburg","shanghai","spuriousDragon","tangerineWhistle"]},nj={type:"object",properties:{from:{format:"address"},to:{oneOf:[{format:"address"},{type:"null"}]},value:{format:"uint"},gas:{format:"uint"},gasPrice:{format:"uint"},effectiveGasPrice:{format:"uint"},type:{format:"uint"},maxFeePerGas:{format:"uint"},maxPriorityFeePerGas:{format:"uint"},accessList:Object.assign({},nU),data:{format:"bytes"},input:{format:"bytes"},nonce:{format:"uint"},chain:Object.assign({},nF),hardfork:Object.assign({},nG),chainId:{format:"uint"},networkId:{format:"uint"},common:{type:"object",properties:{customChain:Object.assign({},{type:"object",properties:{name:{format:"string"},networkId:{format:"uint"},chainId:{format:"uint"}}}),baseChain:Object.assign({},nF),hardfork:Object.assign({},nG)}},gasLimit:{format:"uint"},v:{format:"uint"},r:{format:"bytes32"},s:{format:"bytes32"}}},nq={type:"object",properties:Object.assign(Object.assign({},nj.properties),{blockHash:{format:"bytes32"},blockNumber:{format:"uint"},hash:{format:"bytes32"},transactionIndex:{format:"uint"},from:{format:"address"},to:{oneOf:[{format:"address"},{type:"null"}]},value:{format:"uint"},gas:{format:"uint"},gasPrice:{format:"uint"},effectiveGasPrice:{format:"uint"},type:{format:"uint"},maxFeePerGas:{format:"uint"},maxPriorityFeePerGas:{format:"uint"},accessList:Object.assign({},nU),data:{format:"bytes"},input:{format:"bytes"},nonce:{format:"uint"},gasLimit:{format:"uint"},v:{format:"uint"},r:{format:"bytes32"},s:{format:"bytes32"}})},nK={type:"object",properties:{parentHash:{format:"bytes32"},sha3Uncles:{format:"bytes32"},miner:{format:"bytes"},stateRoot:{format:"bytes32"},transactionsRoot:{format:"bytes32"},receiptsRoot:{format:"bytes32"},logsBloom:{format:"bytes256"},difficulty:{format:"uint"},number:{format:"uint"},gasLimit:{format:"uint"},gasUsed:{format:"uint"},timestamp:{format:"uint"},extraData:{format:"bytes"},mixHash:{format:"bytes32"},nonce:{format:"uint"},totalDifficulty:{format:"uint"},baseFeePerGas:{format:"uint"},size:{format:"uint"},transactions:{oneOf:[{type:"array",items:Object.assign({},nq)},{type:"array",items:{format:"bytes32"}}]},uncles:{type:"array",items:{format:"bytes32"}},hash:{format:"bytes32"}}},nW={type:"object",properties:{author:{format:"bytes32"},hash:{format:"bytes32"},parentHash:{format:"bytes32"},receiptsRoot:{format:"bytes32"},miner:{format:"bytes"},stateRoot:{format:"bytes32"},transactionsRoot:{format:"bytes32"},withdrawalsRoot:{format:"bytes32"},logsBloom:{format:"bytes256"},difficulty:{format:"uint"},totalDifficulty:{format:"uint"},number:{format:"uint"},gasLimit:{format:"uint"},gasUsed:{format:"uint"},timestamp:{format:"uint"},extraData:{format:"bytes"},nonce:{format:"uint"},sha3Uncles:{format:"bytes32"},size:{format:"uint"},baseFeePerGas:{format:"uint"},excessDataGas:{format:"uint"},mixHash:{format:"bytes32"},transactions:{type:"array",items:{format:"bytes32"}},uncles:{type:"array",items:{format:"bytes32"}},withdrawals:{type:"array",items:Object.assign({},{type:"object",properties:{index:{format:"uint"},validatorIndex:{format:"uint"},address:{format:"address"},amount:{format:"uint"}}})}}},nz={type:"object",properties:{removed:{format:"bool"},logIndex:{format:"uint"},transactionIndex:{format:"uint"},transactionHash:{format:"bytes32"},blockHash:{format:"bytes32"},blockNumber:{format:"uint"},address:{format:"address"},data:{format:"bytes"},topics:{type:"array",items:{format:"bytes32"}}}},nV={type:"object",properties:{startingBlock:{format:"string"},currentBlock:{format:"string"},highestBlock:{format:"string"},knownStates:{format:"string"},pulledStates:{format:"string"}}},nZ={type:"object",properties:{transactionHash:{format:"bytes32"},transactionIndex:{format:"uint"},blockHash:{format:"bytes32"},blockNumber:{format:"uint"},from:{format:"address"},to:{format:"address"},cumulativeGasUsed:{format:"uint"},gasUsed:{format:"uint"},effectiveGasPrice:{format:"uint"},contractAddress:{format:"address"},logs:{type:"array",items:Object.assign({},nz)},logsBloom:{format:"bytes"},root:{format:"bytes"},status:{format:"uint"},type:{format:"uint"}}},nY={type:"object",properties:{messageHash:{format:"bytes"},r:{format:"bytes32"},s:{format:"bytes32"},v:{format:"bytes"},message:{format:"bytes"},signature:{format:"bytes"}}},nQ={type:"object",properties:{oldestBlock:{format:"uint"},baseFeePerGas:{type:"array",items:{format:"uint"}},reward:{type:"array",items:{type:"array",items:{format:"uint"}}},gasUsedRatio:{type:"array",items:{type:"number"}}}},nX={type:"object",properties:{balance:{format:"uint"},codeHash:{format:"bytes32"},nonce:{format:"uint"},storageHash:{format:"bytes32"},accountProof:{type:"array",items:{format:"bytes32"}},storageProof:{type:"array",items:Object.assign({},{type:"object",properties:{key:{format:"bytes32"},value:{format:"uint"},proof:{type:"array",items:{format:"bytes32"}}}})}}};function nJ(e){var t,n;let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:I.YK,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{transactionSchema:nq,fillInputAndData:!1},o=(0,A.mergeDeep)({},e);if((0,V.Rw)(null==e?void 0:e.common)||(o.common=Object.assign({},e.common),(0,V.Rw)(null===(t=e.common)||void 0===t?void 0:t.customChain)||(o.common.customChain=Object.assign({},e.common.customChain))),o=(0,A.format)(null!==(n=i.transactionSchema)&&void 0!==n?n:nq,o,r),!(0,V.Rw)(o.data)&&!(0,V.Rw)(o.input)&&(0,A.toHex)(o.data)!==(0,A.toHex)(o.input))throw new _.DT0({data:(0,A.bytesToHex)(o.data),input:(0,A.bytesToHex)(o.input)});return i.fillInputAndData&&((0,V.Rw)(o.data)?(0,V.Rw)(o.input)||(o.data=o.input):o.input=o.data),(0,V.Rw)(o.gasLimit)||(o.gas=o.gasLimit,delete o.gasLimit),o}var n$=function(e,t,n,r){return new(n||(n=Promise))(function(i,o){function s(e){try{c(r.next(e))}catch(e){o(e)}}function a(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):((t=e.value)instanceof n?t:new n(function(e){e(t)})).then(s,a)}c((r=r.apply(e,t||[])).next())})};function n0(e,t){return n$(this,void 0,void 0,function*(){let n=yield function(e){return nb(this,void 0,void 0,function*(){return e.send({method:"net_version",params:[]})})}(e.requestManager);return(0,A.format)({format:"uint"},n,t)})}let n1=e=>n$(void 0,void 0,void 0,function*(){return function(e){return nb(this,void 0,void 0,function*(){return e.send({method:"net_listening",params:[]})})}(e.requestManager)});var n2=function(e,t,n,r){return new(n||(n=Promise))(function(i,o){function s(e){try{c(r.next(e))}catch(e){o(e)}}function a(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):((t=e.value)instanceof n?t:new n(function(e){e(t)})).then(s,a)}c((r=r.apply(e,t||[])).next())})};class n3 extends nh{getId(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:I.YK;return n2(this,void 0,void 0,function*(){return n0(this,e)})}getPeerCount(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:I.YK;return n2(this,void 0,void 0,function*(){return function(e,t){return n$(this,void 0,void 0,function*(){let n=yield function(e){return nb(this,void 0,void 0,function*(){return e.send({method:"net_peerCount",params:[]})})}(e.requestManager);return(0,A.format)({format:"uint"},n,t)})}(this,e)})}isListening(){return n2(this,void 0,void 0,function*(){return n1(this)})}}let n4="ALLEVENTS",n5={name:n4,signature:"",type:"event",inputs:[]},n6={bytes:I.JB.HEX,number:I.vm.NUMBER};var n8=function(e,t,n,r){return new(n||(n=Promise))(function(i,o){function s(e){try{c(r.next(e))}catch(e){o(e)}}function a(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):((t=e.value)instanceof n?t:new n(function(e){e(t)})).then(s,a)}c((r=r.apply(e,t||[])).next())})};function n7(e,t,n){return n8(this,void 0,void 0,function*(){let r=rn(e,t);if(!(0,V.Rw)(r)){if(r.startsWith("-")||0>Number(r)||Number(r)>127)throw new _.rsr(r);if((0,V.Rw)(e.gasPrice)&&("0x0"===r||"0x1"===r))return{gasPrice:yield iA(t,n),maxPriorityFeePerGas:void 0,maxFeePerGas:void 0};if("0x2"===r)return Object.assign({gasPrice:void 0},(yield function(e,t,n){var r,i,o;return n8(this,void 0,void 0,function*(){let s=yield iS(t,t.defaultBlock,!1,n);if((0,V.Rw)(s.baseFeePerGas))throw new _.WTh;if(!(0,V.Rw)(e.gasPrice)){let t=(0,A.format)({format:"uint"},e.gasPrice,n);return{maxPriorityFeePerGas:t,maxFeePerGas:t}}return{maxPriorityFeePerGas:(0,A.format)({format:"uint"},null!==(r=e.maxPriorityFeePerGas)&&void 0!==r?r:t.defaultMaxPriorityFeePerGas,n),maxFeePerGas:(0,A.format)({format:"uint"},null!==(i=e.maxFeePerGas)&&void 0!==i?i:BigInt(s.baseFeePerGas)*BigInt(2)+BigInt(null!==(o=e.maxPriorityFeePerGas)&&void 0!==o?o:t.defaultMaxPriorityFeePerGas),n)}})}(e,t,n)))}})}var n9=function(e,t,n,r){return new(n||(n=Promise))(function(i,o){function s(e){try{c(r.next(e))}catch(e){o(e)}}function a(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):((t=e.value)instanceof n?t:new n(function(e){e(t)})).then(s,a)}c((r=r.apply(e,t||[])).next())})};let re=(e,t,n,r)=>{if(void 0!==n&&e in n&&void 0!==n[e]){if("string"==typeof n[e]&&(0,V.UJ)(n[e]))return n[e];if(!(0,V.H2)(n[e])&&(0,V.hj)(n[e])){if(t.wallet){let r=t.wallet.get((0,A.format)({format:"uint"},n[e],n6));if(!(0,V.Rw)(r))return r.address}throw new _.R_K}throw"from"===e?new _.SBp(n.from):new _.w79(n.to)}if("from"===e){if(!(0,V.Rw)(r))return ni(r);if(!(0,V.Rw)(t.defaultAccount))return t.defaultAccount}},rt=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:I.YK;return n9(void 0,void 0,void 0,function*(){if((0,V.Rw)(t))throw new _.U_d;return iI(e,t,e.defaultBlock,n)})},rn=(e,t)=>{let n=nD(e,t);return(0,V.Rw)(n)?(0,V.Rw)(t.defaultTransactionType)?void 0:(0,A.format)({format:"uint"},t.defaultTransactionType,I.pE):n},rr=e=>n9(void 0,void 0,void 0,function*(){var t;return(null!==(t=e.web3Context.transactionBuilder)&&void 0!==t?t:function(e){var t,n;return n9(this,void 0,void 0,function*(){let r=(0,A.format)(nj,e.transaction,I.YK);if((0,V.Rw)(r.from)&&(r.from=re("from",e.web3Context,void 0,e.privateKey)),(0,V.Rw)(r.nonce)&&(r.nonce=yield rt(e.web3Context,r.from,I.pE)),(0,V.Rw)(r.value)&&(r.value="0x0"),(0,V.Rw)(r.data))(0,V.Rw)(r.input)?r.input="0x":r.input.startsWith("0x")||(r.input="0x".concat(r.input));else{if(!(0,V.Rw)(r.input)&&r.data!==r.input)throw new _.DT0({data:(0,A.bytesToHex)(r.data),input:(0,A.bytesToHex)(r.input)});r.data.startsWith("0x")||(r.data="0x".concat(r.data))}if((0,V.Rw)(r.common)){if(e.web3Context.defaultCommon){let t=e.web3Context.defaultCommon,n=t.customChain.chainId,i=t.customChain.networkId,o=t.customChain.name;r.common=Object.assign(Object.assign({},t),{customChain:{chainId:n,networkId:i,name:o}})}(0,V.Rw)(r.chain)&&(r.chain=e.web3Context.defaultChain),(0,V.Rw)(r.hardfork)&&(r.hardfork=e.web3Context.defaultHardfork)}if((0,V.Rw)(r.chainId)&&(0,V.Rw)(null===(t=r.common)||void 0===t?void 0:t.customChain.chainId)&&(r.chainId=yield ik(e.web3Context,I.pE)),(0,V.Rw)(r.networkId)&&(r.networkId=null!==(n=e.web3Context.defaultNetworkId)&&void 0!==n?n:yield n0(e.web3Context,I.pE)),(0,V.Rw)(r.gasLimit)&&!(0,V.Rw)(r.gas)&&(r.gasLimit=r.gas),r.type=rn(r,e.web3Context),(0,V.Rw)(r.accessList)&&("0x1"===r.type||"0x2"===r.type)&&(r.accessList=[]),e.fillGasPrice&&(r=Object.assign(Object.assign({},r),(yield n7(r,e.web3Context,I.pE)))),(0,V.Rw)(r.gas)&&(0,V.Rw)(r.gasLimit)&&e.fillGasLimit){let t=yield ix(e.web3Context,r,"latest",I.pE);r=Object.assign(Object.assign({},r),{gas:(0,A.format)({format:"uint"},t,I.pE)})}return r})})(Object.assign(Object.assign({},e),{transaction:e.transaction}))});var ri=function(e,t,n,r){return new(n||(n=Promise))(function(i,o){function s(e){try{c(r.next(e))}catch(e){o(e)}}function a(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):((t=e.value)instanceof n?t:new n(function(e){e(t)})).then(s,a)}c((r=r.apply(e,t||[])).next())})};function ro(e,t,n){let r=e.transactionPollingInterval,[i,o]=(0,A.rejectIfConditionAtInterval)(()=>ri(this,void 0,void 0,function*(){let r;try{r=yield iR(e,n6)}catch(e){console.warn("An error happen while trying to get the block number",e);return}let i=r-t;if(i>=e.transactionBlockTimeout)return new _.SvW({starterBlockNumber:t,numberOfBlocks:i,transactionHash:n})}),r);return[o,{clean:()=>{clearInterval(i)}}]}function rs(e,t){var n,r;return ri(this,void 0,void 0,function*(){let{provider:i}=e.requestManager,o=yield iR(e,n6);return(null===(r=(n=i).supportsSubscriptions)||void 0===r?void 0:r.call(n))&&e.enableExperimentalFeatures.useSubscriptionWhenCheckingBlockTimeout?yield function(e,t,n){var r;return ri(this,void 0,void 0,function*(){let i,o,s=!0;function a(r,i){i&&console.warn("error happened at subscription. So revert to polling...",i),o.clean(),s=!1;let[a,c]=ro(e,t,n);o.clean=c.clean,a.catch(e=>r(e))}try{i=yield null===(r=e.subscriptionManager)||void 0===r?void 0:r.subscribe("newHeads"),o={clean:()=>{var t;i.id&&(null===(t=e.subscriptionManager)||void 0===t||t.removeSubscription(i).then(()=>{}).catch(()=>{}))}}}catch(r){return ro(e,t,n)}return[new Promise((r,o)=>{try{i.on("data",r=>{if(s=!1,!(null==r?void 0:r.number))return;let i=Number(BigInt(r.number)-BigInt(t));i>=e.transactionBlockTimeout&&o(new _.SvW({starterBlockNumber:t,numberOfBlocks:i,transactionHash:n}))}),i.on("error",e=>{a(o,e)})}catch(e){a(o,e)}setTimeout(()=>{s&&a(o)},1e3*e.blockHeaderTimeout)}),o]})}(e,o,t):ro(e,o,t)})}function ra(e,t,n){var r,i,o,s;return r=this,i=void 0,o=void 0,s=function*(){let[r,i]=(0,A.rejectIfTimeout)(e.transactionSendTimeout,new _.plQ({numberOfSeconds:e.transactionSendTimeout/1e3,transactionHash:n})),[o,s]=yield rs(e,n);try{return yield Promise.race([t(),i,o])}finally{clearTimeout(r),s.clean()}},new(o||(o=Promise))(function(e,t){function n(e){try{c(s.next(e))}catch(e){t(e)}}function a(e){try{c(s.throw(e))}catch(e){t(e)}}function c(t){var r;t.done?e(t.value):((r=t.value)instanceof o?r:new o(function(e){e(r)})).then(n,a)}c((s=s.apply(r,i||[])).next())})}var rc=function(e,t,n,r){return new(n||(n=Promise))(function(i,o){function s(e){try{c(r.next(e))}catch(e){o(e)}}function a(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):((t=e.value)instanceof n?t:new n(function(e){e(t)})).then(s,a)}c((r=r.apply(e,t||[])).next())})};function rl(e,t,n){var r;return rc(this,void 0,void 0,function*(){let i=null!==(r=e.transactionReceiptPollingInterval)&&void 0!==r?r:e.transactionPollingInterval,[o,s]=(0,A.pollTillDefinedAndReturnIntervalId)(()=>rc(this,void 0,void 0,function*(){try{return iP(e,t,n)}catch(e){console.warn("An error happen while trying to get the transaction receipt",e);return}}),i),[a,c]=(0,A.rejectIfTimeout)(e.transactionPollingTimeout,new _.BhO({numberOfSeconds:e.transactionPollingTimeout/1e3,transactionHash:t})),[l,u]=yield rs(e,t);try{return yield Promise.race([o,c,l])}finally{a&&clearTimeout(a),s&&clearInterval(s),u.clean()}})}let ru=e=>{var t;let{web3Context:n,transactionReceipt:r,transactionPromiEvent:i,returnFormat:o}=e,s=1,a=setInterval(()=>{var e,t,c,l;e=void 0,t=void 0,c=void 0,l=function*(){s>=n.transactionConfirmationBlocks&&clearInterval(a);let e=yield nE(n.requestManager,(0,A.numberToHex)(BigInt(r.blockNumber)+BigInt(s)),!1);(null==e?void 0:e.hash)&&(s+=1,i.emit("confirmation",{confirmations:(0,A.format)({format:"uint"},s,o),receipt:(0,A.format)(nZ,r,o),latestBlockHash:(0,A.format)({format:"bytes32"},e.hash,o)}))},new(c||(c=Promise))(function(n,r){function i(e){try{s(l.next(e))}catch(e){r(e)}}function o(e){try{s(l.throw(e))}catch(e){r(e)}}function s(e){var t;e.done?n(e.value):((t=e.value)instanceof c?t:new c(function(e){e(t)})).then(i,o)}s((l=l.apply(e,t||[])).next())})},null!==(t=n.transactionReceiptPollingInterval)&&void 0!==t?t:n.transactionPollingInterval)};var rd=function(e,t,n,r){return new(n||(n=Promise))(function(i,o){function s(e){try{c(r.next(e))}catch(e){o(e)}}function a(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):((t=e.value)instanceof n?t:new n(function(e){e(t)})).then(s,a)}c((r=r.apply(e,t||[])).next())})};let rh=e=>{let t,{web3Context:n,transactionReceipt:r,transactionPromiEvent:i,returnFormat:o}=e,s=!0;setImmediate(()=>{var e;null===(e=n.subscriptionManager)||void 0===e||e.subscribe("newHeads").then(e=>{e.on("data",a=>rd(void 0,void 0,void 0,function*(){var c;if(s=!1,!(null==a?void 0:a.number)||t===(null==a?void 0:a.parentHash))return;t=null==a?void 0:a.parentHash;let l=BigInt(a.number)-BigInt(r.blockNumber)+BigInt(1);i.emit("confirmation",{confirmations:(0,A.format)({format:"uint"},l,o),receipt:(0,A.format)(nZ,r,o),latestBlockHash:(0,A.format)({format:"bytes32"},a.parentHash,o)}),l>=n.transactionConfirmationBlocks&&(yield null===(c=n.subscriptionManager)||void 0===c?void 0:c.removeSubscription(e))})),e.on("error",()=>rd(void 0,void 0,void 0,function*(){var t;yield null===(t=n.subscriptionManager)||void 0===t?void 0:t.removeSubscription(e),s=!1,ru({web3Context:n,transactionReceipt:r,transactionPromiEvent:i,returnFormat:o})}))}).catch(()=>{s=!1,ru({web3Context:n,transactionReceipt:r,transactionPromiEvent:i,returnFormat:o})})}),setTimeout(()=>{s&&ru({web3Context:n,transactionReceipt:r,transactionPromiEvent:i,returnFormat:o})},1e3*n.blockHeaderTimeout)},rf=e=>!(0,A.isNullish)(e)&&"object"==typeof e&&!(0,A.isNullish)(e.type)&&"error"===e.type,rp=e=>!(0,A.isNullish)(e)&&"object"==typeof e&&!(0,A.isNullish)(e.type)&&"event"===e.type,rm=e=>!(0,A.isNullish)(e)&&"object"==typeof e&&!(0,A.isNullish)(e.type)&&"function"===e.type,rg=e=>!(0,A.isNullish)(e)&&"object"==typeof e&&!(0,A.isNullish)(e.type)&&"constructor"===e.type,rv=e=>"object"==typeof e&&void 0===e.components&&void 0===e.name,ry=e=>e.includes("[]")?{type:"tuple[]",name:e.slice(0,-2)}:{type:"tuple",name:e},rE=e=>{let t=[];for(let n of Object.keys(e)){let r=e[n];"object"==typeof r?t.push(Object.assign(Object.assign({},ry(n)),{components:rE(r)})):t.push({name:n,type:e[n]})}return t},rb=(e,t)=>{let n=[];return t.forEach(t=>{if("object"==typeof t.components){if(!t.type.startsWith("tuple"))throw new _.WFj('Invalid value given "'.concat(t.type,'". Error: components found but type is not tuple.'));let r=t.type.indexOf("["),i=r>=0?t.type.substring(r):"",o=rb(e,t.components);Array.isArray(o)&&e?n.push("tuple(".concat(o.join(","),")").concat(i)):e?n.push("(".concat(o.join(),")")):n.push("(".concat(o.join(","),")").concat(i))}else n.push(t.type)}),n},rw=e=>{var t,n,r,i;return rf(e)||rp(e)||rm(e)?(null===(t=e.name)||void 0===t?void 0:t.includes("("))?e.name:"".concat(null!==(n=e.name)&&void 0!==n?n:"","(").concat(rb(!1,null!==(r=e.inputs)&&void 0!==r?r:[]).join(","),")"):"(".concat(rb(!1,null!==(i=e.inputs)&&void 0!==i?i:[]).join(","),")")},rT=e=>{let t;if("string"!=typeof e&&!rf(e))throw new _.WFj("Invalid parameter value in encodeErrorSignature");return t=e&&("function"==typeof e||"object"==typeof e)?rw(e):e,(0,A.sha3Raw)(t)},r_=e=>{let t;if("string"!=typeof e&&!rp(e))throw new _.WFj("Invalid parameter value in encodeEventSignature");return t=e&&("function"==typeof e||"object"==typeof e)?rw(e):e,(0,A.sha3Raw)(t)};function rA(e,t){let n=e.exec(t);return null==n?void 0:n.groups}var rR=/^bytes([1-9]|1[0-9]|2[0-9]|3[0-2])?$/,rS=/^u?int(8|16|24|32|40|48|56|64|72|80|88|96|104|112|120|128|136|144|152|160|168|176|184|192|200|208|216|224|232|240|248|256)?$/,rP=/^\(.+?\).*?$/,rI=Object.defineProperty,rO=(e,t,n)=>t in e?rI(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,rC=(e,t,n)=>(rO(e,"symbol"!=typeof t?t+"":t,n),n),rx=class extends Error{constructor(e,t={}){var n;let r=t.cause instanceof rx?t.cause.details:(null===(n=t.cause)||void 0===n?void 0:n.message)?t.cause.message:t.details,i=t.cause instanceof rx&&t.cause.docsPath||t.docsPath;super([e||"An error occurred.","",...t.metaMessages?[...t.metaMessages,""]:[],...i?["Docs: https://abitype.dev".concat(i)]:[],...r?["Details: ".concat(r)]:[],"Version: ".concat("abitype","@").concat("0.7.1")].join("\n")),rC(this,"details"),rC(this,"docsPath"),rC(this,"metaMessages"),rC(this,"shortMessage"),rC(this,"name","AbiTypeError"),t.cause&&(this.cause=t.cause),this.details=r,this.docsPath=i,this.metaMessages=t.metaMessages,this.shortMessage=e}};RegExp("^error (?<name>[a-zA-Z0-9_]+)\\((?<parameters>.*?)\\)$"),RegExp("^event (?<name>[a-zA-Z0-9_]+)\\((?<parameters>.*?)\\)$"),RegExp("^function (?<name>[a-zA-Z0-9_]+)\\((?<parameters>.*?)\\)(?: (?<scope>external|public{1}))?(?: (?<stateMutability>pure|view|nonpayable|payable{1}))?(?: returns \\((?<returns>.*?)\\))?$");var rN=RegExp("^struct (?<name>[a-zA-Z0-9_]+) \\{(?<properties>.*?)\\}$");RegExp("^constructor\\((?<parameters>.*?)\\)(?:\\s(?<stateMutability>payable{1}))?$");var rk=new Set(["memory","indexed","storage","calldata"]),rL=new Set(["calldata","memory","storage"]),rB=new Map([["address",{type:"address"}],["bool",{type:"bool"}],["bytes",{type:"bytes"}],["bytes32",{type:"bytes32"}],["int",{type:"int256"}],["int256",{type:"int256"}],["string",{type:"string"}],["uint",{type:"uint256"}],["uint8",{type:"uint8"}],["uint16",{type:"uint16"}],["uint24",{type:"uint24"}],["uint32",{type:"uint32"}],["uint64",{type:"uint64"}],["uint96",{type:"uint96"}],["uint112",{type:"uint112"}],["uint160",{type:"uint160"}],["uint192",{type:"uint192"}],["uint256",{type:"uint256"}],["address owner",{type:"address",name:"owner"}],["address to",{type:"address",name:"to"}],["bool approved",{type:"bool",name:"approved"}],["bytes _data",{type:"bytes",name:"_data"}],["bytes data",{type:"bytes",name:"data"}],["bytes signature",{type:"bytes",name:"signature"}],["bytes32 hash",{type:"bytes32",name:"hash"}],["bytes32 r",{type:"bytes32",name:"r"}],["bytes32 root",{type:"bytes32",name:"root"}],["bytes32 s",{type:"bytes32",name:"s"}],["string name",{type:"string",name:"name"}],["string symbol",{type:"string",name:"symbol"}],["string tokenURI",{type:"string",name:"tokenURI"}],["uint tokenId",{type:"uint256",name:"tokenId"}],["uint8 v",{type:"uint8",name:"v"}],["uint256 balance",{type:"uint256",name:"balance"}],["uint256 tokenId",{type:"uint256",name:"tokenId"}],["uint256 value",{type:"uint256",name:"value"}],["event:address indexed from",{type:"address",name:"from",indexed:!0}],["event:address indexed to",{type:"address",name:"to",indexed:!0}],["event:uint indexed tokenId",{type:"uint256",name:"tokenId",indexed:!0}],["event:uint256 indexed tokenId",{type:"uint256",name:"tokenId",indexed:!0}]]),rD=RegExp("^(?<type>[a-zA-Z0-9_]+?)(?<array>(?:\\[\\d*?\\])+?)?(?:\\s(?<modifier>calldata|indexed|memory|storage{1}))?(?:\\s(?<name>[a-zA-Z0-9_]+))?$"),rM=RegExp("^\\((?<type>.+?)\\)(?<array>(?:\\[\\d*?\\])+?)?(?:\\s(?<modifier>calldata|indexed|memory|storage{1}))?(?:\\s(?<name>[a-zA-Z0-9_]+))?$"),rU=/^u?int$/;function rH(e,t){var n,r,i,o,s,a,c;let l;let u=(s=null==t?void 0:t.type)?"".concat(s,":").concat(e):e;if(rB.has(u))return rB.get(u);let d=rP.test(e),h=rA(d?rM:rD,e);if(!h)throw new rx("Invalid ABI parameter.",{details:e});if(h.name&&("address"===(a=h.name)||"bool"===a||"function"===a||"string"===a||"tuple"===a||rR.test(a)||rS.test(a)||rG.test(a)))throw new rx("Invalid ABI parameter.",{details:e,metaMessages:['"'.concat(h.name,'" is a protected Solidity keyword. More info: https://docs.soliditylang.org/en/latest/cheatsheet.html')]});let f=h.name?{name:h.name}:{},p="indexed"===h.modifier?{indexed:!0}:{},m=null!==(n=null==t?void 0:t.structs)&&void 0!==n?n:{},g={};if(d){l="tuple";let e=function e(t){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;if(""===t){if(""===r)return n;if(0!==i)throw new rx("Unbalanced parentheses.",{metaMessages:['"'.concat(r.trim(),'" has too many ').concat(i>0?"opening":"closing"," parentheses.")],details:'Depth "'.concat(i,'"')});return[...n,r.trim()]}let o=t.length;for(let s=0;s<o;s++){let o=t[s],a=t.slice(s+1);switch(o){case",":return 0===i?e(a,[...n,r.trim()]):e(a,n,"".concat(r).concat(o),i);case"(":return e(a,n,"".concat(r).concat(o),i+1);case")":return e(a,n,"".concat(r).concat(o),i-1);default:return e(a,n,"".concat(r).concat(o),i)}}return[]}(h.type),t=[],n=e.length;for(let r=0;r<n;r++)t.push(rH(e[r],{structs:m}));g={components:t}}else if(h.type in m)l="tuple",g={components:m[h.type]};else if(rU.test(h.type))l="".concat(h.type,"256");else if(l=h.type,(null==t?void 0:t.type)!=="struct"&&!rF(l))throw new rx("Unknown type.",{metaMessages:['Type "'.concat(l,'" is not a valid ABI type.')]});if(h.modifier){if(!(null==t?void 0:null===(i=t.modifiers)||void 0===i?void 0:null===(r=i.has)||void 0===r?void 0:r.call(i,h.modifier)))throw new rx("Invalid ABI parameter.",{details:e,metaMessages:['Modifier "'.concat(h.modifier,'" not allowed').concat((null==t?void 0:t.type)?' in "'.concat(t.type,'" type'):"",".")]});if(rL.has(h.modifier)&&(c=l,!h.array&&"bytes"!==c&&"string"!==c&&"tuple"!==c))throw new rx("Invalid ABI parameter.",{details:e,metaMessages:['Modifier "'.concat(h.modifier,'" not allowed').concat((null==t?void 0:t.type)?' in "'.concat(t.type,'" type'):"","."),'Data location can only be specified for array, struct, or mapping types, but "'.concat(h.modifier,'" was given.')]})}let v={type:"".concat(l).concat(null!==(o=h.array)&&void 0!==o?o:""),...f,...p,...g};return rB.set(u,v),v}function rF(e){return"address"===e||"bool"===e||"function"===e||"string"===e||rR.test(e)||rS.test(e)}var rG=/^(?:after|alias|anonymous|apply|auto|byte|calldata|case|catch|constant|copyof|default|defined|error|event|external|false|final|function|immutable|implements|in|indexed|inline|internal|let|mapping|match|memory|mutable|null|of|override|partial|private|promise|public|pure|reference|relocatable|return|returns|sizeof|static|storage|struct|super|supports|switch|this|true|try|typedef|typeof|var|view|virtual)$/,rj=RegExp("^(?<type>[a-zA-Z0-9_]+?)(?<array>(?:\\[\\d*?\\])+?)?$");function rq(){var e;let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;if((null===(e=globalThis.Buffer)||void 0===e?void 0:e.alloc)!==void 0){let e=globalThis.Buffer.alloc(t);return new Uint8Array(e.buffer,e.byteOffset,e.byteLength)}return new Uint8Array(t)}function rK(e){return e.map(e=>{var t;if(!(0,A.isNullish)(e)&&"object"==typeof e&&!(0,A.isNullish)(e.type)&&"string"==typeof e.type)return e;if("string"==typeof e)return function e(t){var n,r;return Object.assign(Object.assign({},t),{name:null!==(n=t.name)&&void 0!==n?n:"",components:null===(r=t.components)||void 0===r?void 0:r.map(t=>e(t))})}(function(e){let t;if("string"==typeof e)t=rH(e,{modifiers:rk});else{let n=function(e){let t={},n=e.length;for(let r=0;r<n;r++){let n=e[r];if(!rN.test(n))continue;let i=rA(rN,n);if(!i)throw new rx("Invalid struct signature.",{details:n});let o=i.properties.split(";"),s=[],a=o.length;for(let e=0;e<a;e++){let t=o[e].trim();if(!t)continue;let n=rH(t,{type:"struct"});s.push(n)}if(!s.length)throw new rx("Invalid struct signature.",{details:n,metaMessages:["No properties exist."]});t[i.name]=s}let r={},i=Object.entries(t),o=i.length;for(let e=0;e<o;e++){let[n,o]=i[e];r[n]=function e(t,n){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new Set,i=[],o=t.length;for(let a=0;a<o;a++){let o=t[a];if(rP.test(o.type))i.push(o);else{let t=rA(rj,o.type);if(!(null==t?void 0:t.type))throw new rx("Invalid ABI parameter.",{details:JSON.stringify(o,null,2),metaMessages:["ABI parameter type is invalid."]});let{array:a,type:c}=t;if(c in n){var s;if(r.has(c))throw new rx("Circular reference detected.",{metaMessages:['Struct "'.concat(c,'" is a circular reference.')]});i.push({...o,type:"tuple".concat(null!=a?a:""),components:e(null!==(s=n[c])&&void 0!==s?s:[],n,new Set([...r,c]))})}else if(rF(c))i.push(o);else throw new rx("Unknown type.",{metaMessages:['Type "'.concat(c,'" is not a valid ABI type. Perhaps you forgot to include a struct signature?')]})}}return i}(o,t)}return r}(e),r=e.length;for(let i=0;i<r;i++){let r=e[i];if(!rN.test(r)){t=rH(r,{modifiers:rk,structs:n});break}}}if(!t)throw new rx("Failed to parse ABI parameter.",{details:"parseAbiParameter(".concat(JSON.stringify(e,null,2),")"),docsPath:"/api/human.html#parseabiparameter-1"});return t}(e.replace(/tuple/,"")));if(rv(e)){let n=Object.keys(e)[0],r=ry(n);return r.name=null!==(t=r.name)&&void 0!==t?t:"",Object.assign(Object.assign({},r),{components:rE(e[n])})}throw new _.WFj("Invalid abi")})}function rW(e){let t=e.type.lastIndexOf("["),n=e.type.substring(0,t),r=e.type.substring(t),i=-1;if("[]"!==r&&isNaN(i=Number(r.slice(1,-1))))throw new _.WFj("Invalid fixed array size",{size:r});return{param:{type:n,name:"",components:e.components},size:i}}function rz(e){var t,n;return!!("string"===e.type||"bytes"===e.type||e.type.endsWith("[]"))||("tuple"===e.type?null!==(n=null===(t=e.components)||void 0===t?void 0:t.some(rz))&&void 0!==n&&n:!!e.type.endsWith("]")&&rz(rW(e).param))}let rV=new Map,rZ=BigInt(256);for(let e=8;e<=256;e+=8)rV.set("uint".concat(e),{min:BigInt(0),max:rZ-BigInt(1)}),rV.set("int".concat(e),{min:-rZ/BigInt(2),max:rZ/BigInt(2)-BigInt(1)}),rZ*=BigInt(256);rV.set("int",rV.get("int256")),rV.set("uint",rV.get("uint256"));let rY=BigInt(1)<<BigInt(256);function rQ(e,t){let n;try{n=(0,A.toBigInt)(t)}catch(n){throw new _.WFj("provided input is not number value",{type:e.type,value:t,name:e.name})}let r=rV.get(e.type);if(!r)throw new _.WFj("provided abi contains invalid number datatype",{type:e.type});if(n<r.min)throw new _.WFj("provided input is less then minimum for given type",{type:e.type,value:t,name:e.name,minimum:r.min.toString()});if(n>r.max)throw new _.WFj("provided input is greater then maximum for given type",{type:e.type,value:t,name:e.name,maximum:r.max.toString()});return{dynamic:!1,encoded:function(e){let t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:32;return t=e<0?(rY+e).toString(16):e.toString(16),t=(0,A.padLeft)(t,2*n),V.utils.hexToUint8Array(t)}(n)}}function rX(e,t){if(t.length<32)throw new _.WFj("Not enough bytes left to decode",{param:e,bytesLeft:t.length});let n=t.subarray(0,32),r=rV.get(e.type);if(!r)throw new _.WFj("provided abi contains invalid number datatype",{type:e.type});let i=function(e,t){let n=BigInt(V.utils.uint8ArrayToHexString(e));return n<=t?n:n-rY}(n,r.max);if(i<r.min)throw new _.WFj("decoded value is less then minimum for given type",{type:e.type,value:i,name:e.name,minimum:r.min.toString()});if(i>r.max)throw new _.WFj("decoded value is greater then maximum for given type",{type:e.type,value:i,name:e.name,maximum:r.max.toString()});return{result:i,encoded:t.subarray(32),consumed:32}}function rJ(e,t){if("string"==typeof t&&t.length%2!=0&&(t+="0"),!(0,V._t)(t))throw new _.WFj("provided input is not valid bytes value",{type:e.type,value:t,name:e.name});let n=(0,A.bytesToUint8Array)(t),[,r]=e.type.split("bytes");if(r){if(Number(r)>32||1>Number(r))throw new _.WFj("invalid bytes type. Static byte type can have between 1 and 32 bytes",{type:e.type});if(Number(r)<n.length)throw new _.WFj("provided input size is different than type size",{type:e.type,value:t,name:e.name});let i=rq(32);return i.set(n),{dynamic:!1,encoded:i}}let i=rq(32+32*Math.ceil(n.length/32));return i.set(rQ({type:"uint32",name:""},n.length).encoded),i.set(n,32),{dynamic:!0,encoded:i}}function r$(e,t){let[,n]=e.type.split("bytes"),r=Number(n),i=t,o=1,s=0;if(!r){let e=rX({type:"uint32",name:""},i);r=Number(e.result),s+=e.consumed,i=e.encoded,o=Math.ceil(r/32)}if(r>t.length)throw new _.WFj("there is not enough data to decode",{type:e.type,encoded:t,size:r});return{result:(0,A.bytesToHex)(i.subarray(0,r)),encoded:i.subarray(32*o),consumed:s+32*o}}function r0(e){let t=0,n=0,r=[],i=[];for(let n of e)n.dynamic?t+=32:t+=n.encoded.length;for(let o of e)o.dynamic?(r.push(rQ({type:"uint256",name:""},t+n)),i.push(o),n+=o.encoded.length):r.push(o);return(0,A.uint8ArrayConcat)(...r.map(e=>e.encoded),...i.map(e=>e.encoded))}function r1(e,t){if("string"===e.type)return function(e,t){if("string"!=typeof t)throw new _.WFj("invalid input, should be string",{input:t});return rJ({type:"bytes",name:""},(0,A.utf8ToBytes)(t))}(0,t);if("bool"===e.type)return function(e,t){let n;try{n=(0,A.toBool)(t)}catch(n){if(n instanceof _.X6d)throw new _.WFj("provided input is not valid boolean value",{type:e.type,value:t,name:e.name})}return rQ({type:"uint8",name:""},Number(n))}(e,t);if("address"===e.type)return function(e,t){if("string"!=typeof t)throw new _.WFj("address type expects string as input type",{value:t,name:e.name,type:e.type});let n=t.toLowerCase();if(n.startsWith("0x")||(n="0x".concat(n)),!(0,V.UJ)(n))throw new _.WFj("provided input is not valid address",{value:t,name:e.name,type:e.type});let r=V.utils.hexToUint8Array(n),i=rq(32);return i.set(r,12),{dynamic:!1,encoded:i}}(e,t);if("tuple"===e.type)return r3(e,t);if(e.type.endsWith("]"))return function(e,t){if(!Array.isArray(t))throw new _.WFj("Expected value to be array",{abi:e,values:t});let{size:n,param:r}=rW(e),i=t.map(e=>r1(r,e)),o=-1===n,s=i.length>0&&i[0].dynamic;if(!o&&t.length!==n)throw new _.WFj("Given arguments count doesn't match array length",{arrayLength:n,argumentsLength:t.length});if(o||s){let e=r0(i);if(o){let t=rQ({type:"uint256",name:""},i.length).encoded;return{dynamic:!0,encoded:i.length>0?(0,A.uint8ArrayConcat)(t,e):t}}return{dynamic:!0,encoded:e}}return{dynamic:!1,encoded:(0,A.uint8ArrayConcat)(...i.map(e=>e.encoded))}}(e,t);if(e.type.startsWith("bytes"))return rJ(e,t);if(e.type.startsWith("uint")||e.type.startsWith("int"))return rQ(e,t);throw new _.WFj("Unsupported",{param:e,value:t})}function r2(e,t){if("string"===e.type)return function(e,t){let n=r$({type:"bytes",name:""},t);return{result:(0,A.hexToUtf8)(n.result),encoded:n.encoded,consumed:n.consumed}}(0,t);if("bool"===e.type)return function(e,t){let n=rX({type:"uint8",name:""},t);if(n.result>1||n.result<0)throw new _.WFj("Invalid boolean value encoded",{boolBytes:t.subarray(0,32),numberResult:n});return{result:n.result===BigInt(1),encoded:n.encoded,consumed:32}}(0,t);if("address"===e.type)return function(e,t){let n=t.subarray(12,32);if(20!==n.length)throw new _.WFj("Invalid decoding input, not enough bytes to decode address",{bytes:t});let r=V.utils.uint8ArrayToHexString(n);return{result:(0,A.toChecksumAddress)(r),encoded:t.subarray(32),consumed:32}}(0,t);if("tuple"===e.type)return r4(e,t);if(e.type.endsWith("]"))return function(e,t){let{size:n,param:r}=rW(e),i=0,o=[],s=t;if(-1===n){let e=rX({type:"uint32",name:""},t);n=Number(e.result),i=e.consumed,s=e.encoded}if(rz(r)){for(let e=0;e<n;e+=1){let t=rX({type:"uint32",name:""},s.subarray(32*e));i+=t.consumed;let n=r2(r,s.subarray(Number(t.result)));i+=n.consumed,o.push(n.result)}return{result:o,encoded:s.subarray(i),consumed:i}}for(let e=0;e<n;e+=1){let e=r2(r,t.subarray(i));i+=e.consumed,o.push(e.result)}return{result:o,encoded:t.subarray(i),consumed:i}}(e,t);if(e.type.startsWith("bytes"))return r$(e,t);if(e.type.startsWith("uint")||e.type.startsWith("int"))return rX(e,t);throw new _.WFj("Unsupported",{param:e,bytes:t})}function r3(e,t){var n,r,i;let o=!1;if(!Array.isArray(t)&&"object"!=typeof t)throw new _.WFj("param must be either Array or Object",{param:e,input:t});let s=[];for(let a=0;a<(null!==(r=null===(n=e.components)||void 0===n?void 0:n.length)&&void 0!==r?r:0);a+=1){let n;let r=e.components[a];if(Array.isArray(t)){if(a>=t.length)throw new _.WFj("input param length missmatch",{param:e,input:t});n=r1(r,t[a])}else{let o=t[null!==(i=r.name)&&void 0!==i?i:""];if(null==o)throw new _.WFj("missing input defined in abi",{param:e,input:t,paramName:r.name});n=r1(r,o)}n.dynamic&&(o=!0),s.push(n)}return o?{dynamic:!0,encoded:r0(s)}:{dynamic:!1,encoded:(0,A.uint8ArrayConcat)(...s.map(e=>e.encoded))}}function r4(e,t){let n={__length__:0},r=0;if(!e.components)return{result:n,encoded:t,consumed:r};let i=0;for(let[o,s]of e.components.entries()){let e;if(rz(s)){let n=rX({type:"uint32",name:""},t.subarray(r));e=r2(s,t.subarray(Number(n.result))),r+=n.consumed,i+=e.consumed}else e=r2(s,t.subarray(r)),r+=e.consumed;n.__length__+=1,n[o]=e.result,s.name&&""!==s.name&&(n[s.name]=e.result)}return{encoded:t.subarray(r+i),result:n,consumed:r+i}}function r5(e,t){if((null==e?void 0:e.length)!==t.length)throw new _.WFj("Invalid number of values received for given ABI",{expected:null==e?void 0:e.length,received:t.length});let n=rK(e);return V.utils.uint8ArrayToHexString(r3({type:"tuple",name:"",components:n},t).encoded)}let r6=(e,t)=>r5([e],[t]),r8=(e,t,n)=>{try{if(e.length>0&&(!t||"0x"===t||"0X"===t))throw new _.WFj("Returned values aren't valid, did it run Out of Gas? You might also see this error if you are not using the correct ABI for the contract you are retrieving data from, requesting data from a block number that does not exist, or querying a node which is not fully synced.");return function(e,t,n){let r=rK(e);return r4({type:"tuple",name:"",components:r},V.utils.hexToUint8Array(t)).result}(e,"0x".concat(t.replace(/0x/i,"")),0)}catch(e){throw new _.WFj("Parameter decoding error: ".concat(e.message),{internalErr:e})}},r7=(e,t)=>r8(e,t,!1),r9=(e,t)=>r7([e],t)["0"],ie=e=>{let t;if("string"!=typeof e&&!rm(e))throw new _.WFj("Invalid parameter value in encodeFunctionSignature");return t=e&&("function"==typeof e||"object"==typeof e)?rw(e):e,(0,A.sha3Raw)(t).slice(0,10)},it=["bool","string","int","uint","address","fixed","ufixed"],ir=(e,t)=>"string"===e?t:r9(e,t),ii=(e,t,n)=>{let r=Array.isArray(n)?n:[n],i={},o={};for(let[t,n]of e.entries())n.indexed?i[t]=n:o[t]=n;let s=t?r8(Object.values(o),t,!0):{__length__:0},a=r.length-Object.keys(i).length,c=Object.values(i).map((e,t)=>it.some(t=>e.type.startsWith(t))?ir(e.type,r[t+a]):r[t+a]),l={__length__:0},u=0,d=0;for(let[t,n]of e.entries())l[t]="string"===n.type?"":void 0,i[t]&&(l[t]=c[u],u+=1),o[t]&&(l[t]=s[String(d)],d+=1),n.name&&(l[n.name]=l[t]),l.__length__+=1;return l},io=(e,t)=>{if(null==t?void 0:t.data){let n,r,i;try{let o=t.data.slice(0,10),s=e.find(e=>rT(e).startsWith(o));(null==s?void 0:s.inputs)&&(n=s.name,r=rw(s),i=r7([...s.inputs],t.data.substring(10)))}catch(e){console.error(e)}n&&t.setDecodedProperties(n,r,i)}},is=/^\w+/,ia=/^(.*)\[([0-9]*?)]$/,ic=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=t.match(is)[0];return n.includes(r)||!e.types[r]?n:[r,...e.types[r].reduce((t,n)=>[...t,...ic(e,n.type,t).filter(e=>!t.includes(e))],[])]},il=(e,t)=>{let[n,...r]=ic(e,t);return[n,...r.sort()].map(t=>"".concat(t,"(").concat(e.types[t].map(e=>"".concat(e.type," ").concat(e.name)),")")).join("")},iu=(e,t)=>keccak256(il(e,t)),id=(e,t,n)=>keccak256(ip(e,t,n)),ih=(e,t,n)=>{let r=t.match(ia);if(r){let t=r[1],i=Number(r[2])||void 0;if(!Array.isArray(n))throw new AbiError("Cannot encode data: value is not of array type",{data:n});if(i&&n.length!==i)throw new AbiError("Cannot encode data: expected length of ".concat(i,", but got ").concat(n.length),{data:n});let o=n.map(n=>ih(e,t,n)),s=o.map(e=>e[0]),a=o.map(e=>e[1]);return["bytes32",keccak256(encodeParameters(s,a))]}return e.types[t]?["bytes32",id(e,t,n)]:"string"===t||"bytes"===t?["bytes32",keccak256(n)]:[t,n]},ip=(e,t,n)=>{let[r,i]=e.types[t].reduce((t,r)=>{let[i,o]=t;if(isNullish(n[r.name])||isNullish(n[r.name]))throw new AbiError("Cannot encode data: missing data for '".concat(r.name,"'"),{data:n,field:r});let s=n[r.name],[a,c]=ih(e,r.type,s);return[[...i,a],[...o,c]]},[["bytes32"],[iu(e,t)]]);return encodeParameters(r,i)},im=(e,t)=>{var n,r,i,o,s;if(e instanceof _.KEx&&e.cause instanceof _.$4q)return void 0!==t?(io(t.filter(e=>rf(e)),e.cause),{reason:e.cause.message,signature:null===(n=e.cause.data)||void 0===n?void 0:n.slice(0,10),data:null===(r=e.cause.data)||void 0===r?void 0:r.substring(10),customErrorName:e.cause.errorName,customErrorDecodedSignature:e.cause.errorSignature,customErrorArguments:e.cause.errorArgs}):{reason:e.cause.message,signature:null===(i=e.cause.data)||void 0===i?void 0:i.slice(0,10),data:null===(o=e.cause.data)||void 0===o?void 0:o.substring(10)};if(e instanceof _.$D9&&!Array.isArray(null===(s=e.cause)||void 0===s?void 0:s.errors)&&void 0!==e.cause)return e.cause.message;throw e};function ig(e,t,n){var r,i,o,s;let a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:I.YK;return r=this,i=void 0,o=void 0,s=function*(){try{yield iC(e,t,e.defaultBlock,a);return}catch(e){return im(e,n)}},new(o||(o=Promise))(function(e,t){function n(e){try{c(s.next(e))}catch(e){t(e)}}function a(e){try{c(s.throw(e))}catch(e){t(e)}}function c(t){var r;t.done?e(t.value):((r=t.value)instanceof o?r:new o(function(e){e(r)})).then(n,a)}c((s=s.apply(r,i||[])).next())})}function iv(e,t,n,r,i,o){var s,a,c,l;return s=this,a=void 0,c=void 0,l=function*(){let s,a=o;if(void 0===a&&(void 0!==r?a=im(r):e.handleRevert&&void 0!==t&&(a=yield ig(e,t,i))),void 0===a)s=new _.fbB(n);else if("string"==typeof a)s=new _.ydH(a,void 0,n);else if(void 0!==a.customErrorName&&void 0!==a.customErrorDecodedSignature&&void 0!==a.customErrorArguments){let e=a;s=new _.C3x(e.reason,e.customErrorName,e.customErrorDecodedSignature,e.customErrorArguments,e.signature,n,e.data)}else s=new _.ydH(a.reason,a.signature,n,a.data);return s},new(c||(c=Promise))(function(e,t){function n(e){try{i(l.next(e))}catch(e){t(e)}}function r(e){try{i(l.throw(e))}catch(e){t(e)}}function i(t){var i;t.done?e(t.value):((i=t.value)instanceof c?i:new c(function(e){e(i)})).then(n,r)}i((l=l.apply(s,a||[])).next())})}let iy=function(e,t,n){var r,i,o,s,a;let c=arguments.length>3&&void 0!==arguments[3]?arguments[3]:I.YK,l=Object.assign({},e),u=(0,A.format)(nz,t,c);if([n4,"allEvents"].includes(l.name)&&(l=n.find(e=>e.signature===t.topics[0])||{anonymous:!0}),l.inputs=null!==(i=null!==(r=l.inputs)&&void 0!==r?r:e.inputs)&&void 0!==i?i:[],!l.anonymous){let e=0;(null!==(o=l.inputs)&&void 0!==o?o:[]).forEach(t=>{t.indexed&&(e+=1)}),e>0&&(null==t?void 0:t.topics)&&(null==t?void 0:t.topics.length)!==e+1&&(l=Object.assign(Object.assign({},l),{anonymous:!0,inputs:[]}))}let d=l.anonymous?t.topics:(null!==(s=t.topics)&&void 0!==s?s:[]).slice(1);return Object.assign(Object.assign({},u),{returnValues:ii([...null!==(a=l.inputs)&&void 0!==a?a:[]],t.data,d),event:l.name,signature:!l.anonymous&&t.topics&&0!==t.topics.length&&t.topics[0]?t.topics[0]:void 0,raw:{data:t.data,topics:t.topics}})};var iE=function(e,t,n,r){return new(n||(n=Promise))(function(i,o){function s(e){try{c(r.next(e))}catch(e){o(e)}}function a(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):((t=e.value)instanceof n?t:new n(function(e){e(t)})).then(s,a)}c((r=r.apply(e,t||[])).next())})};class ib{getReceiptWithEvents(e){var t,n;let r=Object.assign({},null!=e?e:{});if((null===(t=this.options)||void 0===t?void 0:t.contractAbi)&&r.logs&&r.logs.length>0)for(let e of(r.events={},r.logs)){let t=iy(n5,e,null===(n=this.options)||void 0===n?void 0:n.contractAbi,this.returnFormat);t.event&&(r.events[t.event]=t)}return r}checkRevertBeforeSending(e){return iE(this,void 0,void 0,function*(){if(!1!==this.options.checkRevertBeforeSending){let t=yield ig(this.web3Context,e,this.options.contractAbi);if(void 0!==t)throw yield iv(this.web3Context,e,void 0,void 0,this.options.contractAbi,t)}})}emitSending(e){this.promiEvent.listenerCount("sending")>0&&this.promiEvent.emit("sending",e)}populateGasPrice(e){var t;let{transactionFormatted:n,transaction:r}=e;return iE(this,void 0,void 0,function*(){let e=n;return!(null===(t=this.options)||void 0===t?void 0:t.ignoreGasPricing)&&(0,V.Rw)(n.gasPrice)&&((0,V.Rw)(r.maxPriorityFeePerGas)||(0,V.Rw)(r.maxFeePerGas))&&(e=Object.assign(Object.assign({},n),(yield n7(n,this.web3Context,I.pE)))),e})}signAndSend(e){let{wallet:t,tx:n}=e;return iE(this,void 0,void 0,function*(){if(t){let e=yield t.signTransaction(n);return ra(this.web3Context,()=>iE(this,void 0,void 0,function*(){return ny(this.web3Context.requestManager,e.rawTransaction)}),e.transactionHash)}return ra(this.web3Context,()=>iE(this,void 0,void 0,function*(){return function(e,t){return ng(this,void 0,void 0,function*(){return e.send({method:"eth_sendTransaction",params:[t]})})}(this.web3Context.requestManager,n)}))})}emitSent(e){this.promiEvent.listenerCount("sent")>0&&this.promiEvent.emit("sent",e)}emitTransactionHash(e){this.promiEvent.listenerCount("transactionHash")>0&&this.promiEvent.emit("transactionHash",e)}emitReceipt(e){this.promiEvent.listenerCount("receipt")>0&&this.promiEvent.emit("receipt",e)}handleError(e){var t;let{error:n,tx:r}=e;return iE(this,void 0,void 0,function*(){let e=n;return e instanceof _.KEx&&this.web3Context.handleRevert&&(e=yield iv(this.web3Context,r,void 0,void 0,null===(t=this.options)||void 0===t?void 0:t.contractAbi)),(e instanceof _.$D9||e instanceof _.KEx||e instanceof _.C3x||e instanceof _.fbB||e instanceof _.ydH||e instanceof _.BhO)&&this.promiEvent.listenerCount("error")>0&&this.promiEvent.emit("error",e),e})}emitConfirmation(e){let{receipt:t,transactionHash:n}=e;this.promiEvent.listenerCount("confirmation")>0&&function(e,t,n,r,i){if((0,V.Rw)(n)||(0,V.Rw)(n.blockHash))throw new _.EpQ({receipt:n,blockHash:(0,A.format)({format:"bytes32"},null==n?void 0:n.blockHash,i),transactionHash:(0,A.format)({format:"bytes32"},r,i)});if(!n.blockNumber)throw new _.FnB({receipt:n});t.emit("confirmation",{confirmations:(0,A.format)({format:"uint"},1,i),receipt:(0,A.format)(nZ,n,i),latestBlockHash:(0,A.format)({format:"bytes32"},n.blockHash,i)});let o=e.requestManager.provider;o&&"supportsSubscriptions"in o&&o.supportsSubscriptions()?rh({web3Context:e,transactionReceipt:n,transactionPromiEvent:t,returnFormat:i}):ru({web3Context:e,transactionReceipt:n,transactionPromiEvent:t,returnFormat:i})}(this.web3Context,this.promiEvent,t,n,this.returnFormat)}handleResolve(e){var t,n,r;let{receipt:i,tx:o}=e;return iE(this,void 0,void 0,function*(){if(null===(t=this.options)||void 0===t?void 0:t.transactionResolver)return null===(n=this.options)||void 0===n?void 0:n.transactionResolver(i);if(i.status!==BigInt(0))return i;{let e=yield iv(this.web3Context,o,i,void 0,null===(r=this.options)||void 0===r?void 0:r.contractAbi);throw this.promiEvent.listenerCount("error")>0&&this.promiEvent.emit("error",e),e}})}constructor({options:e,web3Context:t,promiEvent:n,returnFormat:r}){this.options={checkRevertBeforeSending:!0},this.options=e,this.web3Context=t,this.promiEvent=n,this.returnFormat=r}}var iw=function(e,t,n,r){return new(n||(n=Promise))(function(i,o){function s(e){try{c(r.next(e))}catch(e){o(e)}}function a(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):((t=e.value)instanceof n?t:new n(function(e){e(t)})).then(s,a)}c((r=r.apply(e,t||[])).next())})},iT=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&0>t.indexOf(r)&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols)for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)0>t.indexOf(r[i])&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};let i_=e=>iw(void 0,void 0,void 0,function*(){return nv(e.requestManager)});function iA(e,t){return iw(this,void 0,void 0,function*(){let n=yield function(e){return ng(this,void 0,void 0,function*(){return e.send({method:"eth_gasPrice",params:[]})})}(e.requestManager);return(0,A.format)({format:"uint"},n,t)})}function iR(e,t){return iw(this,void 0,void 0,function*(){let n=yield function(e){return ng(this,void 0,void 0,function*(){return e.send({method:"eth_blockNumber",params:[]})})}(e.requestManager);return(0,A.format)({format:"uint"},n,t)})}function iS(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.defaultBlock,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=arguments.length>3?arguments[3]:void 0;return iw(this,void 0,void 0,function*(){let i;if((0,V._t)(t)){let r=(0,A.format)({format:"bytes32"},t,I.pE);i=yield function(e,t,n){return ng(this,void 0,void 0,function*(){return V.sC.validate(["bytes32","bool"],[t,n]),e.send({method:"eth_getBlockByHash",params:[t,n]})})}(e.requestManager,r,n)}else{let r=(0,V.lA)(t)?t:(0,A.format)({format:"uint"},t,I.pE);i=yield nE(e.requestManager,r,n)}return(0,A.format)(nK,i,r)})}function iP(e,t,n){return iw(this,void 0,void 0,function*(){let r=(0,A.format)({format:"bytes32"},t,I.YK),i=yield function(e,t){return ng(this,void 0,void 0,function*(){return V.sC.validate(["bytes32"],[t]),e.send({method:"eth_getTransactionReceipt",params:[t]})})}(e.requestManager,r);return(0,V.Rw)(i)?i:(0,A.format)(nZ,i,n)})}function iI(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:e.defaultBlock,r=arguments.length>3?arguments[3]:void 0;return iw(this,void 0,void 0,function*(){let i=(0,V.lA)(n)?n:(0,A.format)({format:"uint"},n,I.pE),o=yield function(e,t,n){return ng(this,void 0,void 0,function*(){return V.sC.validate(["address","blockNumberOrTag"],[t,n]),e.send({method:"eth_getTransactionCount",params:[t,n]})})}(e.requestManager,t,i);return(0,A.format)({format:"uint"},o,r)})}function iO(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{checkRevertBeforeSending:!0},i=new nm((o,s)=>{setImmediate(()=>{iw(this,void 0,void 0,function*(){let a=new ib({web3Context:e,promiEvent:i,options:r,returnFormat:n}),c=nJ(Object.assign(Object.assign({},t),{from:re("from",e,t),to:re("to",e,t)}),I.pE);try{let r;c=yield a.populateGasPrice({transaction:t,transactionFormatted:c}),yield a.checkRevertBeforeSending(c),a.emitSending(c),e.wallet&&!(0,V.Rw)(c.from)&&(r=e.wallet.get(c.from));let i=yield a.signAndSend({wallet:r,tx:c}),s=(0,A.format)({format:"bytes32"},i,n);a.emitSent(c),a.emitTransactionHash(s);let l=yield rl(e,i,n),u=a.getReceiptWithEvents((0,A.format)(nZ,l,n));a.emitReceipt(u),o((yield a.handleResolve({receipt:u,tx:c}))),a.emitConfirmation({receipt:u,transactionHash:i})}catch(e){s((yield a.handleError({error:e,tx:c})))}})})});return i}function iC(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:e.defaultBlock,r=arguments.length>3?arguments[3]:void 0;return iw(this,void 0,void 0,function*(){let i=(0,V.lA)(n)?n:(0,A.format)({format:"uint"},n,I.pE),o=yield function(e,t,n){return ng(this,void 0,void 0,function*(){return V.sC.validate(["blockNumberOrTag"],[n]),e.send({method:"eth_call",params:[t,n]})})}(e.requestManager,nJ(t,I.pE),i);return(0,A.format)({format:"bytes"},o,r)})}function ix(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:e.defaultBlock,r=arguments.length>3?arguments[3]:void 0;return iw(this,void 0,void 0,function*(){let i=nJ(t,I.pE),o=(0,V.lA)(n)?n:(0,A.format)({format:"uint"},n,I.pE),s=yield function(e,t,n){return ng(this,void 0,void 0,function*(){return V.sC.validate(["blockNumberOrTag"],[n]),e.send({method:"eth_estimateGas",params:[t,n]})})}(e.requestManager,i,o);return(0,A.format)({format:"uint"},s,r)})}function iN(e,t,n){return iw(this,void 0,void 0,function*(){let{toBlock:r,fromBlock:i}=t;(0,V.Rw)(r)||"number"!=typeof r&&"bigint"!=typeof r||(r=(0,A.numberToHex)(r)),(0,V.Rw)(i)||"number"!=typeof i&&"bigint"!=typeof i||(i=(0,A.numberToHex)(i));let o=Object.assign(Object.assign({},t),{fromBlock:i,toBlock:r});return(yield function(e,t){return ng(this,void 0,void 0,function*(){return V.sC.validate(["filter"],[t]),e.send({method:"eth_getLogs",params:[t]})})}(e.requestManager,o)).map(e=>"string"==typeof e?e:(0,A.format)(nz,e,n))})}function ik(e,t){return iw(this,void 0,void 0,function*(){let n=yield function(e){return ng(this,void 0,void 0,function*(){return e.send({method:"eth_chainId",params:[]})})}(e.requestManager);return(0,A.format)({format:"uint"},n,t)})}function iL(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:e.defaultBlock,r=arguments.length>3?arguments[3]:void 0;return iw(this,void 0,void 0,function*(){let i=(0,V.lA)(n)?n:(0,A.format)({format:"uint"},n,I.pE),o=yield function(e,t,n){return ng(this,void 0,void 0,function*(){return V.sC.validate(["blockNumberOrTag"],[n]),e.send({method:"eth_createAccessList",params:[t,n]})})}(e.requestManager,nJ(t,I.pE),i);return(0,A.format)(nH,o,r)})}class iB extends z{_buildSubscriptionParams(){return["logs",this.args]}formatSubscriptionResult(e){return(0,A.format)(nz,e,super.returnFormat)}}class iD extends z{_buildSubscriptionParams(){return["newPendingTransactions"]}formatSubscriptionResult(e){return(0,A.format)({format:"string"},e,super.returnFormat)}}class iM extends z{_buildSubscriptionParams(){return["newHeads"]}formatSubscriptionResult(e){return(0,A.format)(nW,e,super.returnFormat)}}class iU extends z{_buildSubscriptionParams(){return["syncing"]}_processSubscriptionResult(e){if("boolean"==typeof e)this.emit("changed",e);else{let t=Object.fromEntries(Object.entries(e.status).map(e=>{let[t,n]=e;return[t.charAt(0).toLowerCase()+t.substring(1),n]}));this.emit("changed",e.syncing),this.emit("data",(0,A.format)(nV,t,super.returnFormat))}}}var iH=function(e,t,n,r){return new(n||(n=Promise))(function(i,o){function s(e){try{c(r.next(e))}catch(e){o(e)}}function a(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):((t=e.value)instanceof n?t:new n(function(e){e(t)})).then(s,a)}c((r=r.apply(e,t||[])).next())})};let iF={logs:iB,newPendingTransactions:iD,newHeads:iM,syncing:iU,pendingTransactions:iD,newBlockHeaders:iM};class iG extends nh{getProtocolVersion(){return iH(this,void 0,void 0,function*(){return function(e){return ng(this,void 0,void 0,function*(){return e.send({method:"eth_protocolVersion",params:[]})})}(this.requestManager)})}isSyncing(){return iH(this,void 0,void 0,function*(){return nv(this.requestManager)})}getCoinbase(){return iH(this,void 0,void 0,function*(){return function(e){return ng(this,void 0,void 0,function*(){return e.send({method:"eth_coinbase",params:[]})})}(this.requestManager)})}isMining(){return iH(this,void 0,void 0,function*(){return function(e){return ng(this,void 0,void 0,function*(){return e.send({method:"eth_mining",params:[]})})}(this.requestManager)})}getHashrate(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:I.YK;return iH(this,void 0,void 0,function*(){return this.getHashRate(e)})}getHashRate(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:I.YK;return iH(this,void 0,void 0,function*(){return function(e,t){return iw(this,void 0,void 0,function*(){let n=yield function(e){return ng(this,void 0,void 0,function*(){return e.send({method:"eth_hashrate",params:[]})})}(e.requestManager);return(0,A.format)({format:"uint"},n,t)})}(this,e)})}getGasPrice(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:I.YK;return iH(this,void 0,void 0,function*(){return iA(this,e)})}getAccounts(){var e;return iH(this,void 0,void 0,function*(){return(null!==(e=yield function(e){return ng(this,void 0,void 0,function*(){return e.send({method:"eth_accounts",params:[]})})}(this.requestManager))&&void 0!==e?e:[]).map(e=>(0,A.toChecksumAddress)(e))})}getBlockNumber(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:I.YK;return iH(this,void 0,void 0,function*(){return iR(this,e)})}getBalance(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.defaultBlock,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:I.YK;return iH(this,void 0,void 0,function*(){return function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:e.defaultBlock,r=arguments.length>3?arguments[3]:void 0;return iw(this,void 0,void 0,function*(){let i=(0,V.lA)(n)?n:(0,A.format)({format:"uint"},n,I.pE),o=yield function(e,t,n){return ng(this,void 0,void 0,function*(){return V.sC.validate(["address","blockNumberOrTag"],[t,n]),e.send({method:"eth_getBalance",params:[t,n]})})}(e.requestManager,t,i);return(0,A.format)({format:"uint"},o,r)})}(this,e,t,n)})}getStorageAt(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.defaultBlock,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:I.YK;return iH(this,void 0,void 0,function*(){return function(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:e.defaultBlock,i=arguments.length>4?arguments[4]:void 0;return iw(this,void 0,void 0,function*(){let o=(0,A.format)({format:"uint"},n,I.pE),s=(0,V.lA)(r)?r:(0,A.format)({format:"uint"},r,I.pE),a=yield function(e,t,n,r){return ng(this,void 0,void 0,function*(){return V.sC.validate(["address","hex","blockNumberOrTag"],[t,n,r]),e.send({method:"eth_getStorageAt",params:[t,n,r]})})}(e.requestManager,t,o,s);return(0,A.format)({format:"bytes"},a,i)})}(this,e,t,n,r)})}getCode(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.defaultBlock,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:I.YK;return iH(this,void 0,void 0,function*(){return function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:e.defaultBlock,r=arguments.length>3?arguments[3]:void 0;return iw(this,void 0,void 0,function*(){let i=(0,V.lA)(n)?n:(0,A.format)({format:"uint"},n,I.pE),o=yield function(e,t,n){return ng(this,void 0,void 0,function*(){return V.sC.validate(["address","blockNumberOrTag"],[t,n]),e.send({method:"eth_getCode",params:[t,n]})})}(e.requestManager,t,i);return(0,A.format)({format:"bytes"},o,r)})}(this,e,t,n)})}getBlock(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.defaultBlock,t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:I.YK;return iH(this,void 0,void 0,function*(){return iS(this,e,t,n)})}getBlockTransactionCount(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.defaultBlock,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:I.YK;return iH(this,void 0,void 0,function*(){return function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.defaultBlock,n=arguments.length>2?arguments[2]:void 0;return iw(this,void 0,void 0,function*(){let r;if((0,V._t)(t)){let n=(0,A.format)({format:"bytes32"},t,I.pE);r=yield function(e,t){return ng(this,void 0,void 0,function*(){return V.sC.validate(["bytes32"],[t]),e.send({method:"eth_getBlockTransactionCountByHash",params:[t]})})}(e.requestManager,n)}else{let n=(0,V.lA)(t)?t:(0,A.format)({format:"uint"},t,I.pE);r=yield function(e,t){return ng(this,void 0,void 0,function*(){return V.sC.validate(["blockNumberOrTag"],[t]),e.send({method:"eth_getBlockTransactionCountByNumber",params:[t]})})}(e.requestManager,n)}return(0,A.format)({format:"uint"},r,n)})}(this,e,t)})}getBlockUncleCount(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.defaultBlock,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:I.YK;return iH(this,void 0,void 0,function*(){return function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.defaultBlock,n=arguments.length>2?arguments[2]:void 0;return iw(this,void 0,void 0,function*(){let r;if((0,V._t)(t)){let n=(0,A.format)({format:"bytes32"},t,I.pE);r=yield function(e,t){return ng(this,void 0,void 0,function*(){return V.sC.validate(["bytes32"],[t]),e.send({method:"eth_getUncleCountByBlockHash",params:[t]})})}(e.requestManager,n)}else{let n=(0,V.lA)(t)?t:(0,A.format)({format:"uint"},t,I.pE);r=yield function(e,t){return ng(this,void 0,void 0,function*(){return V.sC.validate(["blockNumberOrTag"],[t]),e.send({method:"eth_getUncleCountByBlockNumber",params:[t]})})}(e.requestManager,n)}return(0,A.format)({format:"uint"},r,n)})}(this,e,t)})}getUncle(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.defaultBlock,t=arguments.length>1?arguments[1]:void 0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:I.YK;return iH(this,void 0,void 0,function*(){return function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.defaultBlock,n=arguments.length>2?arguments[2]:void 0,r=arguments.length>3?arguments[3]:void 0;return iw(this,void 0,void 0,function*(){let i;let o=(0,A.format)({format:"uint"},n,I.pE);if((0,V._t)(t)){let n=(0,A.format)({format:"bytes32"},t,I.pE);i=yield function(e,t,n){return ng(this,void 0,void 0,function*(){return V.sC.validate(["bytes32","hex"],[t,n]),e.send({method:"eth_getUncleByBlockHashAndIndex",params:[t,n]})})}(e.requestManager,n,o)}else{let n=(0,V.lA)(t)?t:(0,A.format)({format:"uint"},t,I.pE);i=yield function(e,t,n){return ng(this,void 0,void 0,function*(){return V.sC.validate(["blockNumberOrTag","hex"],[t,n]),e.send({method:"eth_getUncleByBlockNumberAndIndex",params:[t,n]})})}(e.requestManager,n,o)}return(0,A.format)(nK,i,r)})}(this,e,t,n)})}getTransaction(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:I.YK;return iH(this,void 0,void 0,function*(){let n=yield function(e,t,n){return iw(this,void 0,void 0,function*(){let r=(0,A.format)({format:"bytes32"},t,I.YK),i=yield function(e,t){return ng(this,void 0,void 0,function*(){return V.sC.validate(["bytes32"],[t]),e.send({method:"eth_getTransactionByHash",params:[t]})})}(e.requestManager,r);return(0,V.Rw)(i)?i:nJ(i,n,{fillInputAndData:!0})})}(this,e,t);if(!n)throw new _.Vci;return n})}getPendingTransactions(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:I.YK;return iH(this,void 0,void 0,function*(){return function(e,t){return iw(this,void 0,void 0,function*(){return(yield function(e){return ng(this,void 0,void 0,function*(){return e.send({method:"eth_pendingTransactions",params:[]})})}(e.requestManager)).map(e=>nJ(e,t,{fillInputAndData:!0}))})}(this,e)})}getTransactionFromBlock(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.defaultBlock,t=arguments.length>1?arguments[1]:void 0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:I.YK;return iH(this,void 0,void 0,function*(){return function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.defaultBlock,n=arguments.length>2?arguments[2]:void 0,r=arguments.length>3?arguments[3]:void 0;return iw(this,void 0,void 0,function*(){let i;let o=(0,A.format)({format:"uint"},n,I.pE);if((0,V._t)(t)){let n=(0,A.format)({format:"bytes32"},t,I.pE);i=yield function(e,t,n){return ng(this,void 0,void 0,function*(){return V.sC.validate(["bytes32","hex"],[t,n]),e.send({method:"eth_getTransactionByBlockHashAndIndex",params:[t,n]})})}(e.requestManager,n,o)}else{let n=(0,V.lA)(t)?t:(0,A.format)({format:"uint"},t,I.pE);i=yield function(e,t,n){return ng(this,void 0,void 0,function*(){return V.sC.validate(["blockNumberOrTag","hex"],[t,n]),e.send({method:"eth_getTransactionByBlockNumberAndIndex",params:[t,n]})})}(e.requestManager,n,o)}return(0,V.Rw)(i)?i:nJ(i,r,{fillInputAndData:!0})})}(this,e,t,n)})}getTransactionReceipt(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:I.YK;return iH(this,void 0,void 0,function*(){let n=yield iP(this,e,t);if(!n)throw new _.Vci;return n})}getTransactionCount(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.defaultBlock,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:I.YK;return iH(this,void 0,void 0,function*(){return iI(this,e,t,n)})}sendTransaction(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:I.YK,n=arguments.length>2?arguments[2]:void 0;return iO(this,e,t,n)}sendSignedTransaction(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:I.YK,n=arguments.length>2?arguments[2]:void 0;return function(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{checkRevertBeforeSending:!0},i=new nm((o,s)=>{setImmediate(()=>{iw(this,void 0,void 0,function*(){let a=new ib({web3Context:e,promiEvent:i,options:r,returnFormat:n}),c=(0,A.format)({format:"bytes"},t,I.pE),l=t6.fromSerializedData((0,A.bytesToUint8Array)((0,A.hexToBytes)(c))),u=Object.assign(Object.assign({},l.toJSON()),{from:l.getSenderAddress().toString()});try{let{v:t,r,s:i}=u,s=iT(u,["v","r","s"]);yield a.checkRevertBeforeSending(s),a.emitSending(c);let l=yield ra(e,()=>iw(this,void 0,void 0,function*(){return ny(e.requestManager,c)}));a.emitSent(c);let d=(0,A.format)({format:"bytes32"},l,n);a.emitTransactionHash(d);let h=yield rl(e,l,n),f=a.getReceiptWithEvents((0,A.format)(nZ,h,n));a.emitReceipt(f),o((yield a.handleResolve({receipt:f,tx:u}))),a.emitConfirmation({receipt:f,transactionHash:l})}catch(e){s((yield a.handleError({error:e,tx:u})))}})})});return i}(this,e,t,n)}sign(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:I.YK;return iH(this,void 0,void 0,function*(){return function(e,t,n,r){var i;return iw(this,void 0,void 0,function*(){let o=(0,A.format)({format:"bytes"},t,I.YK);if(null===(i=e.wallet)||void 0===i?void 0:i.get(n)){let t=e.wallet.get(n).sign(o);return(0,A.format)(nY,t,r)}if("number"==typeof n)throw new _._J2(t,'RPC method "eth_sign" does not support index signatures');let s=yield function(e,t,n){return ng(this,void 0,void 0,function*(){return V.sC.validate(["address","hex"],[t,n]),e.send({method:"eth_sign",params:[t,n]})})}(e.requestManager,n,o);return(0,A.format)({format:"bytes"},s,r)})}(this,e,t,n)})}signTransaction(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:I.YK;return iH(this,void 0,void 0,function*(){return function(e,t,n){return iw(this,void 0,void 0,function*(){let r=yield function(e,t){return ng(this,void 0,void 0,function*(){return e.send({method:"eth_signTransaction",params:[t]})})}(e.requestManager,nJ(t,I.pE));return(0,V.HD)(r)?function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{fillInputAndData:!1};return{raw:(0,A.format)({format:"bytes"},e,t),tx:nJ(Object.assign(Object.assign({},t6.fromSerializedData((0,A.hexToBytes)(e)).toJSON()),{hash:(0,A.bytesToHex)((0,A.keccak256)((0,A.hexToBytes)(e))),type:nM((0,A.hexToBytes)(e))}),t,{fillInputAndData:n.fillInputAndData})}}(r,n,{fillInputAndData:!0}):{raw:(0,A.format)({format:"bytes"},r.raw,n),tx:nJ(r.tx,n,{fillInputAndData:!0})}})}(this,e,t)})}call(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.defaultBlock,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:I.YK;return iH(this,void 0,void 0,function*(){return iC(this,e,t,n)})}estimateGas(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.defaultBlock,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:I.YK;return iH(this,void 0,void 0,function*(){return ix(this,e,t,n)})}getPastLogs(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:I.YK;return iH(this,void 0,void 0,function*(){return iN(this,e,t)})}getWork(){return iH(this,void 0,void 0,function*(){return function(e){return ng(this,void 0,void 0,function*(){return e.send({method:"eth_getWork",params:[]})})}(this.requestManager)})}submitWork(e,t,n){return iH(this,void 0,void 0,function*(){return function(e,t,n,r){return ng(this,void 0,void 0,function*(){return V.sC.validate(["bytes8","bytes32","bytes32"],[t,n,r]),e.send({method:"eth_submitWork",params:[t,n,r]})})}(this.requestManager,e,t,n)})}requestAccounts(){return iH(this,void 0,void 0,function*(){return function(e){return ng(this,void 0,void 0,function*(){return e.send({method:"eth_requestAccounts",params:[]})})}(this.requestManager)})}getChainId(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:I.YK;return iH(this,void 0,void 0,function*(){return ik(this,e)})}getNodeInfo(){return iH(this,void 0,void 0,function*(){return function(e){return ng(this,void 0,void 0,function*(){return e.send({method:"web3_clientVersion",params:[]})})}(this.requestManager)})}getProof(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.defaultBlock,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:I.YK;return iH(this,void 0,void 0,function*(){return function(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:e.defaultBlock,i=arguments.length>4?arguments[4]:void 0;return iw(this,void 0,void 0,function*(){let o=n.map(e=>(0,A.format)({format:"bytes"},e,I.pE)),s=(0,V.lA)(r)?r:(0,A.format)({format:"uint"},r,I.pE),a=yield function(e,t,n,r){return ng(this,void 0,void 0,function*(){return V.sC.validate(["address","bytes32[]","blockNumberOrTag"],[t,n,r]),e.send({method:"eth_getProof",params:[t,n,r]})})}(e.requestManager,t,o,s);return(0,A.format)(nX,a,i)})}(this,e,t,n,r)})}getFeeHistory(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.defaultBlock,n=arguments.length>2?arguments[2]:void 0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:I.YK;return iH(this,void 0,void 0,function*(){return function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:e.defaultBlock,r=arguments.length>3?arguments[3]:void 0,i=arguments.length>4?arguments[4]:void 0;return iw(this,void 0,void 0,function*(){let o=(0,A.format)({format:"uint"},t,I.pE),s=(0,V.lA)(n)?n:(0,A.format)({format:"uint"},n,I.pE),a=(0,A.format)({type:"array",items:{format:"uint"}},r,n6),c=yield function(e,t,n,r){return ng(this,void 0,void 0,function*(){for(let e of(V.sC.validate(["hex","blockNumberOrTag"],[t,n]),r))V.sC.validate(["number"],[e]);return e.send({method:"eth_feeHistory",params:[t,n,r]})})}(e.requestManager,o,s,a);return(0,A.format)(nQ,c,i)})}(this,e,t,n,r)})}createAccessList(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.defaultBlock,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:I.YK;return iH(this,void 0,void 0,function*(){return iL(this,e,t,n)})}signTypedData(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:I.YK;return iH(this,void 0,void 0,function*(){return function(e,t,n,r,i){return iw(this,void 0,void 0,function*(){let o=yield function(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return ng(this,void 0,void 0,function*(){return V.sC.validate(["address"],[t]),e.send({method:"eth_signTypedData".concat(r?"":"_v4"),params:[t,n]})})}(e.requestManager,t,n,r);return(0,A.format)({format:"bytes"},o,i)})}(this,e,t,n,r)})}subscribe(e,t){var n;let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:I.YK;return iH(this,void 0,void 0,function*(){let i=yield null===(n=this.subscriptionManager)||void 0===n?void 0:n.subscribe(e,t,r);return i instanceof iB&&"logs"===e&&"object"==typeof t&&!(0,A.isNullish)(t.fromBlock)&&Number.isFinite(Number(t.fromBlock))&&setImmediate(()=>{this.getPastLogs(t).then(e=>{for(let t of e)i._processSubscriptionResult(t)}).catch(e=>{i._processSubscriptionError(e)})}),i})}static shouldClearSubscription(e){let{sub:t}=e;return!(t instanceof iU)}clearSubscriptions(){var e;let t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return null===(e=this.subscriptionManager)||void 0===e?void 0:e.unsubscribe(t?iG.shouldClearSubscription:void 0)}constructor(e){if("string"==typeof e||U(e)){super({provider:e,registeredSubscriptions:iF});return}if(e.registeredSubscriptions){super(e);return}super(Object.assign(Object.assign({},e),{registeredSubscriptions:iF}))}}let ij=e=>{if(!(0,V.Rw)(e.common)){if((0,V.Rw)(e.common.customChain))throw new _.DLI;if((0,V.Rw)(e.common.customChain.chainId))throw new _.HW5;if(!(0,V.Rw)(e.chainId)&&e.chainId!==e.common.customChain.chainId)throw new _.JVB({txChainId:e.chainId,customChainId:e.common.customChain.chainId})}},iq=e=>{if(!(0,V.Rw)(e.common)&&!(0,V.Rw)(e.chain)&&!(0,V.Rw)(e.hardfork))throw new _.X6p;if(!(0,V.Rw)(e.chain)&&(0,V.Rw)(e.hardfork)||!(0,V.Rw)(e.hardfork)&&(0,V.Rw)(e.chain))throw new _.Bye({chain:e.chain,hardfork:e.hardfork})},iK=e=>{if(!(0,V.Rw)(e.common)&&!(0,V.Rw)(e.common.baseChain)&&!(0,V.Rw)(e.chain)&&e.chain!==e.common.baseChain)throw new _.Ylw({txChain:e.chain,baseChain:e.common.baseChain})},iW=e=>{if(!(0,V.Rw)(e.common)&&!(0,V.Rw)(e.common.hardfork)&&!(0,V.Rw)(e.hardfork)&&e.hardfork!==e.common.hardfork)throw new _.HcZ({txHardfork:e.hardfork,commonHardfork:e.common.hardfork})},iz=e=>{if((0,V.Rw)(e.gas)||!(0,V.fb)(e.gas)||(0,V.Rw)(e.gasPrice)||!(0,V.fb)(e.gasPrice))throw new _.T6V({gas:e.gas,gasPrice:e.gasPrice});if(!(0,V.Rw)(e.maxFeePerGas)||!(0,V.Rw)(e.maxPriorityFeePerGas))throw new _.bKH({maxFeePerGas:e.maxFeePerGas,maxPriorityFeePerGas:e.maxPriorityFeePerGas})},iV=e=>{if(!(0,V.Rw)(e.gasPrice)&&"0x2"===e.type)throw new _.a8b(e.gasPrice);if("0x0"===e.type||"0x1"===e.type)throw new _.bKH({maxFeePerGas:e.maxFeePerGas,maxPriorityFeePerGas:e.maxPriorityFeePerGas});if((0,V.Rw)(e.maxFeePerGas)||!(0,V.fb)(e.maxFeePerGas)||(0,V.Rw)(e.maxPriorityFeePerGas)||!(0,V.fb)(e.maxPriorityFeePerGas))throw new _.CY5({maxPriorityFeePerGas:e.maxPriorityFeePerGas,maxFeePerGas:e.maxFeePerGas})},iZ=e=>{let t=!(0,V.Rw)(e.gas)||!(0,V.Rw)(e.gasLimit),n=t&&!(0,V.Rw)(e.gasPrice),r=t&&!(0,V.Rw)(e.maxPriorityFeePerGas)&&!(0,V.Rw)(e.maxFeePerGas);if(!n&&!r)throw new _.Bif({gas:e.gas,gasPrice:e.gasPrice,maxPriorityFeePerGas:e.maxPriorityFeePerGas,maxFeePerGas:e.maxFeePerGas});if(n&&r)throw new _.H4O({gas:e.gas,gasPrice:e.gasPrice,maxPriorityFeePerGas:e.maxPriorityFeePerGas,maxFeePerGas:e.maxFeePerGas});(n?iz:iV)(e),(!(0,V.Rw)(e.type)&&e.type>"0x1"?iV:iz)(e)},iY=(e,t)=>{if(!(0,V.Rw)(t)){t(e);return}if("object"!=typeof e||(0,V.Rw)(e))throw new _.FJx(e);ij(e),iq(e),iK(e),iW(e);let n=nJ(e,I.pE);if(iZ(n),(0,V.Rw)(n.nonce)||(0,V.Rw)(n.chainId)||n.nonce.startsWith("-")||n.chainId.startsWith("-"))throw new _.clc({nonce:e.nonce,chainId:e.chainId})},iQ=e=>{var t,n;return{nonce:e.nonce,gasPrice:e.gasPrice,gasLimit:null!==(t=e.gasLimit)&&void 0!==t?t:e.gas,to:e.to,value:e.value,data:null!==(n=e.data)&&void 0!==n?n:e.input,type:e.type,chainId:e.chainId,accessList:e.accessList,maxPriorityFeePerGas:e.maxPriorityFeePerGas,maxFeePerGas:e.maxFeePerGas}},iX=(e,t)=>{var n,r,i,o,s,a,c,l,u,d,h,f,p,m,g,v,y,E;let b;if(((0,V.Rw)(e.chain)||(0,V.Rw)(e.hardfork))&&(0,V.Rw)(e.common))t.defaultCommon?(b=Object.assign({},t.defaultCommon),(0,V.Rw)(b.hardfork)&&(b.hardfork=null!==(n=e.hardfork)&&void 0!==n?n:t.defaultHardfork),(0,V.Rw)(b.baseChain)&&(b.baseChain=t.defaultChain)):b=tW.custom({name:"custom-network",chainId:(0,A.toNumber)(e.chainId),networkId:(0,V.Rw)(e.networkId)?void 0:(0,A.toNumber)(e.networkId),defaultHardfork:null!==(r=e.hardfork)&&void 0!==r?r:t.defaultHardfork},{baseChain:t.defaultChain});else{let n=null!==(a=null!==(s=null===(o=null===(i=null==e?void 0:e.common)||void 0===i?void 0:i.customChain)||void 0===o?void 0:o.name)&&void 0!==s?s:e.chain)&&void 0!==a?a:"custom-network",r=(0,A.toNumber)(null!==(u=null===(l=null===(c=null==e?void 0:e.common)||void 0===c?void 0:c.customChain)||void 0===l?void 0:l.chainId)&&void 0!==u?u:null==e?void 0:e.chainId),w=(0,A.toNumber)(null!==(f=null===(h=null===(d=null==e?void 0:e.common)||void 0===d?void 0:d.customChain)||void 0===h?void 0:h.networkId)&&void 0!==f?f:null==e?void 0:e.networkId),T=null!==(g=null!==(m=null===(p=null==e?void 0:e.common)||void 0===p?void 0:p.hardfork)&&void 0!==m?m:null==e?void 0:e.hardfork)&&void 0!==g?g:t.defaultHardfork,_=null!==(E=null!==(y=null===(v=e.common)||void 0===v?void 0:v.baseChain)&&void 0!==y?y:e.chain)&&void 0!==E?E:t.defaultChain;r&&w&&n&&(b=tW.custom({name:n,chainId:r,networkId:w,defaultHardfork:T},{baseChain:_}))}return{common:b}},iJ=function(e,t,n){var r,i,o,s;let a=arguments.length>3&&void 0!==arguments[3]&&arguments[3],c=!(arguments.length>4)||void 0===arguments[4]||arguments[4];return r=void 0,i=void 0,o=void 0,s=function*(){let r=nJ((yield rr({transaction:e,web3Context:t,privateKey:n,fillGasPrice:a,fillGasLimit:c})),I.pE);return iY(r),t6.fromTxData(iQ(r),iX(r,t))},new(o||(o=Promise))(function(e,t){function n(e){try{c(s.next(e))}catch(e){t(e)}}function a(e){try{c(s.throw(e))}catch(e){t(e)}}function c(t){var r;t.done?e(t.value):((r=t.value)instanceof o?r:new o(function(e){e(r)})).then(n,a)}c((s=s.apply(r,i||[])).next())})},i$=(e,t,n)=>{var r,i;let{address:o}=e,s=null==n?void 0:n.topics,a=null!==(r=null==n?void 0:n.filter)&&void 0!==r?r:{},c={};if((0,A.isNullish)(null==n?void 0:n.fromBlock)||(c.fromBlock=(0,A.format)(nK.properties.number,null==n?void 0:n.fromBlock,{number:I.vm.HEX,bytes:I.JB.HEX})),(0,A.isNullish)(null==n?void 0:n.toBlock)||(c.toBlock=(0,A.format)(nK.properties.number,null==n?void 0:n.toBlock,{number:I.vm.HEX,bytes:I.JB.HEX})),s&&Array.isArray(s))c.topics=[...s];else if(c.topics=[],!t||t.anonymous||[n4,"allEvents"].includes(t.name)||c.topics.push(null!==(i=t.signature)&&void 0!==i?i:r_(rw(t))),![n4,"allEvents"].includes(t.name)&&t.inputs)for(let e of t.inputs){if(!e.indexed)continue;let t=a[e.name];if(!t){c.topics.push(null);continue}Array.isArray(t)?c.topics.push(t.map(t=>r6(e.type,t))):"string"===e.type?c.topics.push((0,A.keccak256)(t)):c.topics.push(r6(e.type,t))}return c.topics.length||delete c.topics,o&&(c.address=o.toLowerCase()),c},i0=(e,t,n)=>{let r;let i=Array.isArray(e.inputs)?e.inputs.length:0;if(e.inputs&&i!==t.length)throw new _.Oht("The number of arguments is not matching the methods required number. You need to pass ".concat(i," arguments."));if(r=e.inputs?r5(Array.isArray(e.inputs)?e.inputs:[],t).replace("0x",""):(function(e){try{let t=function e(t){let n=[];return t.forEach(t=>{if(Array.isArray(t)){let r=e(t);n.push({type:"tuple",components:r,name:""})}else n.push({type:(0,A.toHex)(t,!0)})}),n}(e);return V.utils.uint8ArrayToHexString(r3({type:"tuple",name:"",components:t},e).encoded)}catch(t){throw new _.WFj("Could not infer types from given params",{params:e})}})(t).replace("0x",""),rg(e)){if(!n)throw new _.Oht("The contract has no contract data option set. This is necessary to append the constructor parameters.");return n.startsWith("0x")?"".concat(n).concat(r):"0x".concat(n).concat(r)}return"".concat(ie(e)).concat(r)},i1=(e,t)=>{if("constructor"===e.type)return t;if(!t)return null;let n=t.length>=2?t.slice(2):t;if(!e.outputs)return null;let r=r7([...e.outputs],n);return 1===r.__length__?r[0]:r};class i2 extends z{_buildSubscriptionParams(){return["logs",{address:this.address,topics:this.topics}]}formatSubscriptionResult(e){return iy(this.abi,e,this.jsonInterface,super.returnFormat)}constructor(e,t){super(e,t),this.address=e.address,this.topics=e.topics,this.abi=e.abi,this.jsonInterface=e.jsonInterface}}let i3=(e,t,n,r)=>{var i,o;let s={};return(0,A.isNullish)(e.data)&&"both"!==r||(s.data=i0(t,n,null!==(i=e.data)&&void 0!==i?i:e.input)),(0,A.isNullish)(e.input)&&"both"!==r||(s.input=i0(t,n,null!==(o=e.input)&&void 0!==o?o:e.data)),(0,A.isNullish)(s.input)&&(0,A.isNullish)(s.data)&&(s[r]=i0(t,n)),{data:s.data,input:s.input}},i4=e=>{var t,n,r;let{abi:i,params:o,options:s,contractOptions:a}=e;if(!(null!==(r=null!==(n=null!==(t=null==s?void 0:s.input)&&void 0!==t?t:null==s?void 0:s.data)&&void 0!==n?n:a.input)&&void 0!==r?r:a.data)&&!(null==s?void 0:s.to)&&!a.address)throw new _.Oht("Contract address not specified");if(!(null==s?void 0:s.from)&&!a.from)throw new _.Oht('Contract "from" address not specified');let c=(0,A.mergeDeep)({to:a.address,gas:a.gas,gasPrice:a.gasPrice,from:a.from,input:a.input,maxPriorityFeePerGas:a.maxPriorityFeePerGas,maxFeePerGas:a.maxFeePerGas,data:a.data},s),l=i3(c,i,o,null==s?void 0:s.dataInputFill);return Object.assign(Object.assign({},c),{data:l.data,input:l.input})},i5=e=>{let{abi:t,params:n,options:r,contractOptions:i}=e;if(!(null==r?void 0:r.to)&&!i.address)throw new _.Oht("Contract address not specified");let o=(0,A.mergeDeep)({to:i.address,gas:i.gas,gasPrice:i.gasPrice,from:i.from,input:i.input,maxPriorityFeePerGas:i.maxPriorityFeePerGas,maxFeePerGas:i.maxFeePerGas,data:i.data},r),s=i3(o,t,n,null==r?void 0:r.dataInputFill);return Object.assign(Object.assign({},o),{data:s.data,input:s.input})},i6=e=>{let{abi:t,params:n,options:r,contractOptions:i}=e,o=(0,A.mergeDeep)({to:i.address,gas:i.gas,gasPrice:i.gasPrice,from:i.from,input:i.input,data:i.data},r),s=i3(o,t,n,null==r?void 0:r.dataInputFill);return Object.assign(Object.assign({},o),{data:s.data,input:s.input})},i8=e=>"object"==typeof e&&!(0,A.isNullish)(e)&&0!==Object.keys(e).length&&!(0,A.isContractInitOptions)(e),i7=e=>{let{abi:t,params:n,options:r,contractOptions:i}=e;if(!(null==r?void 0:r.to)&&!i.address)throw new _.Oht("Contract address not specified");if(!(null==r?void 0:r.from)&&!i.from)throw new _.Oht('Contract "from" address not specified');let o=(0,A.mergeDeep)({to:i.address,gas:i.gas,gasPrice:i.gasPrice,from:i.from,input:i.input,maxPriorityFeePerGas:i.maxPriorityFeePerGas,maxFeePerGas:i.maxFeePerGas,data:i.data},r),s=i3(o,t,n,null==r?void 0:r.dataInputFill);return Object.assign(Object.assign({},o),{data:s.data,input:s.input})};var i9=function(e,t,n,r){return new(n||(n=Promise))(function(i,o){function s(e){try{c(r.next(e))}catch(e){o(e)}}function a(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):((t=e.value)instanceof n?t:new n(function(e){e(t)})).then(s,a)}c((r=r.apply(e,t||[])).next())})};let oe={logs:i2,newHeads:iM,newBlockHeaders:iM};class ot extends nh{get events(){return this._events}get methods(){return this._methods}clone(){let e;return e=this.options.address?new ot([...this._jsonInterface,...this._errorsInterface],this.options.address,{gas:this.options.gas,gasPrice:this.options.gasPrice,from:this.options.from,input:this.options.input,data:this.options.data,provider:this.currentProvider,syncWithContext:this.syncWithContext,dataInputFill:this.config.contractDataInputFill},this.getContextObject()):new ot([...this._jsonInterface,...this._errorsInterface],{gas:this.options.gas,gasPrice:this.options.gasPrice,from:this.options.from,input:this.options.input,data:this.options.data,provider:this.currentProvider,syncWithContext:this.syncWithContext,dataInputFill:this.config.contractDataInputFill},this.getContextObject()),this.context&&e.subscribeToContextEvents(this.context),e}deploy(e){var t,n,r,i=this;let o=this._jsonInterface.find(e=>"constructor"===e.type);o||(o={type:"constructor",stateMutability:""});let s=(0,A.format)({format:"bytes"},null!==(t=null==e?void 0:e.input)&&void 0!==t?t:this.options.input,I.YK),a=(0,A.format)({format:"bytes"},null!==(n=null==e?void 0:e.data)&&void 0!==n?n:this.options.data,I.YK);if((!s||"0x"===s.trim())&&(!a||"0x"===a.trim()))throw new _.Oht("contract creation without any data provided.");let c=null!==(r=null==e?void 0:e.arguments)&&void 0!==r?r:[],l=Object.assign(Object.assign({},this.options),{input:s,data:a}),u=null!=s?s:a;return{arguments:c,send:e=>{let t=Object.assign({},e);return this._contractMethodDeploySend(o,c,t,l)},estimateGas:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:I.YK;return i9(i,void 0,void 0,function*(){let n=Object.assign({},e);return this._contractMethodEstimateGas({abi:o,params:c,returnFormat:t,options:n,contractOptions:l})})},encodeABI:()=>i0(o,c,(0,A.format)({format:"bytes"},u,I.YK))}}getPastEvents(e,t,n){var r;return i9(this,void 0,void 0,function*(){let i="string"==typeof e?e:n4,o="string"==typeof e||(0,A.isDataFormat)(e)?(0,A.isDataFormat)(t)?{}:t:e,s=(0,A.isDataFormat)(e)?e:(0,A.isDataFormat)(t)?t:null!=n?n:I.YK,a="allEvents"===i||i===n4?n5:this._jsonInterface.find(e=>"name"in e&&e.name===i);if(!a)throw new _.Oht("Event ".concat(i," not found."));let{fromBlock:c,toBlock:l,topics:u,address:d}=i$(this.options,a,null!=o?o:{}),h=yield iN(this,{fromBlock:c,toBlock:l,topics:u,address:d},s),f=h?h.map(e=>"string"==typeof e?e:iy(a,e,this._jsonInterface,s)):[],p=null!==(r=null==o?void 0:o.filter)&&void 0!==r?r:{},m=Object.keys(p);return m.length>0?f.filter(e=>"string"==typeof e||m.every(t=>{var n;if(Array.isArray(p[t]))return p[t].some(n=>String(e.returnValues[t]).toUpperCase()===String(n).toUpperCase());let r=null===(n=a.inputs)||void 0===n?void 0:n.filter(e=>e.name===t)[0];return null!=r&&!!r.indexed&&"string"===r.type&&(0,A.keccak256)(p[t])===String(e.returnValues[t])||String(e.returnValues[t]).toUpperCase()===String(p[t]).toUpperCase()})):f})}_parseAndSetAddress(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:I.YK;this._address=e?(0,A.toChecksumAddress)((0,A.format)({format:"address"},e,t)):e}_parseAndSetJsonInterface(e){var t,n,r,i,o;let s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:I.YK;this._functions={},this._methods={},this._events={};let a=[],c=e.filter(e=>"error"!==e.type),l=e.filter(e=>rf(e));for(let e of c){let c=Object.assign(Object.assign({},e),{signature:""});if(rm(c)){let e=rw(c),s=ie(e);c.signature=s,t="view"===c.stateMutability,c.constant=null!==(n=void 0!==t?t:"pure"===c.stateMutability)&&void 0!==n?n:c.constant,r="payable"===c.stateMutability,c.payable=void 0!==r?r:c.payable,this._overloadedMethodAbis.set(c.name,[...null!==(i=this._overloadedMethodAbis.get(c.name))&&void 0!==i?i:[],c]);let a=null!==(o=this._overloadedMethodAbis.get(c.name))&&void 0!==o?o:[],u=this._createContractMethod(a,l);this._functions[e]={signature:s,method:u},this._methods[c.name]=this._functions[e].method,this._methods[e]=this._functions[e].method,this._methods[s]=this._functions[e].method}else if(rp(c)){let e=rw(c),t=r_(e),n=this._createContractEvent(c,s);c.signature=t,e in this._events&&"bound"!==c.name||(this._events[e]=n),this._events[c.name]=n,this._events[t]=n}a=[...a,c]}this._events.allEvents=this._createContractEvent(n5,s),this._jsonInterface=[...a],this._errorsInterface=l}_getAbiParams(e,t){var n;try{return V.utils.transformJsonDataToAbiFormat(null!==(n=e.inputs)&&void 0!==n?n:[],t)}catch(t){throw new _.Oht("Invalid parameters for method ".concat(e.name,": ").concat(t.message))}}_createContractMethod(e,t){var n=this;let r=e[e.length-1];return function(){let e;for(var i,o,s=arguments.length,a=Array(s),c=0;c<s;c++)a[c]=arguments[c];let l=null!==(i=n._overloadedMethodAbis.get(r.name))&&void 0!==i?i:[],u=l[0],d=l.filter(e=>{var t;return(null!==(t=e.inputs)&&void 0!==t?t:[]).length===a.length});if(1===l.length||0===d.length)e=n._getAbiParams(u,a),V.sC.validate(null!==(o=r.inputs)&&void 0!==o?o:[],e);else{let t=[];for(let r of d)try{e=n._getAbiParams(r,a),V.sC.validate(r.inputs,e),u=r;break}catch(e){t.push(e)}if(t.length===d.length)throw new V.X$(t)}let h={arguments:e,call:(r,i)=>i9(n,void 0,void 0,function*(){return this._contractMethodCall(u,e,t,r,i)}),send:r=>n._contractMethodSend(u,e,t,r),estimateGas:function(t){let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:I.YK;return i9(n,void 0,void 0,function*(){return this._contractMethodEstimateGas({abi:u,params:e,returnFormat:r,options:t})})},encodeABI:()=>i0(u,e),createAccessList:(r,i)=>i9(n,void 0,void 0,function*(){return this._contractMethodCreateAccessList(u,e,t,r,i)})};return u.stateMutability,h}}_contractMethodCall(e,t,n,r,i){var o;return i9(this,void 0,void 0,function*(){let s=i5({abi:e,params:t,options:Object.assign(Object.assign({},r),{dataInputFill:this.config.contractDataInputFill}),contractOptions:Object.assign(Object.assign({},this.options),{from:null!==(o=this.options.from)&&void 0!==o?o:this.config.defaultAccount})});try{let t=yield iC(this,s,i,I.YK);return i1(e,t)}catch(e){throw e instanceof _.KEx&&io(n,e.cause),e}})}_contractMethodCreateAccessList(e,t,n,r,i){var o;return i9(this,void 0,void 0,function*(){let s=i7({abi:e,params:t,options:Object.assign(Object.assign({},r),{dataInputFill:this.config.contractDataInputFill}),contractOptions:Object.assign(Object.assign({},this.options),{from:null!==(o=this.options.from)&&void 0!==o?o:this.config.defaultAccount})});try{return iL(this,s,i,I.YK)}catch(e){throw e instanceof _.KEx&&io(n,e.cause),e}})}_contractMethodSend(e,t,n,r,i){var o,s;let a=null!=i?i:this.options;a=Object.assign(Object.assign({},a),{input:void 0,from:null!==(s=null!==(o=a.from)&&void 0!==o?o:this.defaultAccount)&&void 0!==s?s:void 0});let c=iO(this,i4({abi:e,params:t,options:Object.assign(Object.assign({},r),{dataInputFill:this.config.contractDataInputFill}),contractOptions:a}),I.YK,{checkRevertBeforeSending:!1,contractAbi:this._jsonInterface});return c.on("error",e=>{e instanceof _.KEx&&io(n,e.cause)}),c}_contractMethodDeploySend(e,t,n,r){var i,o;let s=null!=r?r:this.options;return s=Object.assign(Object.assign({},s),{from:null!==(o=null!==(i=s.from)&&void 0!==i?i:this.defaultAccount)&&void 0!==o?o:void 0}),iO(this,i4({abi:e,params:t,options:Object.assign(Object.assign({},n),{dataInputFill:this.config.contractDataInputFill}),contractOptions:s}),I.YK,{transactionResolver:e=>{if(e.status===BigInt(0))throw new _.Oht("code couldn't be stored",e);let t=this.clone();return t.options.address=e.contractAddress,t},contractAbi:this._jsonInterface,checkRevertBeforeSending:!1})}_contractMethodEstimateGas(e){let{abi:t,params:n,returnFormat:r,options:i,contractOptions:o}=e;return i9(this,void 0,void 0,function*(){return ix(this,i6({abi:t,params:n,options:Object.assign(Object.assign({},i),{dataInputFill:this.config.contractDataInputFill}),contractOptions:null!=o?o:this.options}),I.U1.LATEST,r)})}_createContractEvent(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:I.YK;var n=this;return function(){for(var r,i=arguments.length,o=Array(i),s=0;s<i;s++)o[s]=arguments[s];let{topics:a,fromBlock:c}=i$(n.options,e,o[0]),l=new i2({address:n.options.address,topics:a,abi:e,jsonInterface:n._jsonInterface},{subscriptionManager:n.subscriptionManager,returnFormat:t});return(0,V.Rw)(c)||n.getPastEvents(e.name,{fromBlock:c,topics:a},t).then(e=>{e&&e.forEach(e=>l.emit("data",e))}).catch(e=>{l.emit("error",new _.iXd("Failed to get past events.",e))}),null===(r=n.subscriptionManager)||void 0===r||r.addSubscription(l).catch(e=>{l.emit("error",new _.iXd("Failed to subscribe.",e))}),l}}subscribeToContextEvents(e){let t=this;this.context=e,t.syncWithContext&&e.on(d.CONFIG_CHANGE,e=>{t.setConfig({[e.name]:e.newValue})})}constructor(e,t,n,r,i){var o,s,a;let c;let l=(0,A.isContractInitOptions)(t)?t:(0,A.isContractInitOptions)(n)?n:void 0;if(super(Object.assign(Object.assign({},c=i8(t)?t:i8(n)?n:r),{provider:"object"==typeof t&&"provider"in t?t.provider:"object"==typeof n&&"provider"in n?n.provider:"object"==typeof r&&"provider"in r?r.provider:ot.givenProvider,registeredSubscriptions:oe})),this.syncWithContext=!1,this._functions={},(null==c?void 0:c.wallet)&&(this._wallet=c.wallet),(null==c?void 0:c.accountProvider)&&(this._accountProvider=c.accountProvider),!(0,V.Rw)(l)&&!(0,V.Rw)(l.data)&&!(0,V.Rw)(l.input)&&"both"!==this.config.contractDataInputFill)throw new _._Q_({data:l.data,input:l.input});this._overloadedMethodAbis=new Map;let u=(0,A.isDataFormat)(r)?r:(0,A.isDataFormat)(n)?n:null!=i?i:I.YK,h="string"==typeof t?t:void 0;this.config.contractDataInputFill=null!==(o=null==l?void 0:l.dataInputFill)&&void 0!==o?o:this.config.contractDataInputFill,this._parseAndSetJsonInterface(e,u),(0,V.Rw)(h)||this._parseAndSetAddress(h,u),this.options={address:h,jsonInterface:this._jsonInterface,gas:null!==(s=null==l?void 0:l.gas)&&void 0!==s?s:null==l?void 0:l.gasLimit,gasPrice:null==l?void 0:l.gasPrice,from:null==l?void 0:l.from,input:null==l?void 0:l.input,data:null==l?void 0:l.data},this.syncWithContext=null!==(a=null==l?void 0:l.syncWithContext)&&void 0!==a&&a,c instanceof nh&&this.subscribeToContextEvents(c),Object.defineProperty(this.options,"address",{set:e=>this._parseAndSetAddress(e,u),get:()=>this._address}),Object.defineProperty(this.options,"jsonInterface",{set:e=>this._parseAndSetJsonInterface(e,u),get:()=>this._jsonInterface}),c instanceof nh&&c.on(d.CONFIG_CHANGE,e=>{this.setConfig({[e.name]:e.newValue})})}}var on=ot;let or={addr:"0x3b3b57de",name:"0x691f3431",abi:"0x2203ab56",pubkey:"0xc8690233",text:"0x59d1d43c",contenthash:"0xbc1c58d1"},oi={main:"0x00000000000C2E074eC69A0dFb2997BA6C7d2e1e",goerli:"0x00000000000C2E074eC69A0dFb2997BA6C7d2e1e"},oo={"0x1":"main","0x5":"goerli"},os=[{anonymous:!1,inputs:[{indexed:!0,internalType:"bytes32",name:"node",type:"bytes32"},{indexed:!0,internalType:"bytes32",name:"label",type:"bytes32"},{indexed:!1,internalType:"address",name:"owner",type:"address"}],name:"NewOwner",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"bytes32",name:"node",type:"bytes32"},{indexed:!1,internalType:"address",name:"resolver",type:"address"}],name:"NewResolver",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"bytes32",name:"node",type:"bytes32"},{indexed:!1,internalType:"address",name:"owner",type:"address"}],name:"Transfer",type:"event"},{inputs:[{internalType:"address",name:"owner",type:"address"},{internalType:"address",name:"operator",type:"address"}],name:"isApprovedForAll",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes32",name:"node",type:"bytes32"}],name:"owner",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes32",name:"node",type:"bytes32"}],name:"recordExists",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes32",name:"node",type:"bytes32"}],name:"resolver",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes32",name:"node",type:"bytes32"}],name:"ttl",outputs:[{internalType:"uint64",name:"",type:"uint64"}],stateMutability:"view",type:"function"}],oa=[{anonymous:!1,inputs:[{indexed:!0,internalType:"bytes32",name:"node",type:"bytes32"},{indexed:!1,internalType:"address",name:"a",type:"address"}],name:"AddrChanged",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"bytes32",name:"node",type:"bytes32"},{indexed:!1,internalType:"uint256",name:"coinType",type:"uint256"},{indexed:!1,internalType:"bytes",name:"newAddress",type:"bytes"}],name:"AddressChanged",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"owner",type:"address"},{indexed:!0,internalType:"address",name:"operator",type:"address"},{indexed:!1,internalType:"bool",name:"approved",type:"bool"}],name:"ApprovalForAll",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"bytes32",name:"node",type:"bytes32"},{indexed:!1,internalType:"bytes",name:"hash",type:"bytes"}],name:"ContenthashChanged",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"bytes32",name:"node",type:"bytes32"},{indexed:!1,internalType:"bytes",name:"name",type:"bytes"},{indexed:!1,internalType:"uint16",name:"resource",type:"uint16"},{indexed:!1,internalType:"bytes",name:"record",type:"bytes"}],name:"DNSRecordChanged",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"bytes32",name:"node",type:"bytes32"},{indexed:!1,internalType:"bytes",name:"name",type:"bytes"},{indexed:!1,internalType:"uint16",name:"resource",type:"uint16"}],name:"DNSRecordDeleted",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"bytes32",name:"node",type:"bytes32"}],name:"DNSZoneCleared",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"bytes32",name:"node",type:"bytes32"},{indexed:!1,internalType:"bytes",name:"lastzonehash",type:"bytes"},{indexed:!1,internalType:"bytes",name:"zonehash",type:"bytes"}],name:"DNSZonehashChanged",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"bytes32",name:"node",type:"bytes32"},{indexed:!0,internalType:"bytes4",name:"interfaceID",type:"bytes4"},{indexed:!1,internalType:"address",name:"implementer",type:"address"}],name:"InterfaceChanged",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"bytes32",name:"node",type:"bytes32"},{indexed:!1,internalType:"string",name:"name",type:"string"}],name:"NameChanged",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"bytes32",name:"node",type:"bytes32"},{indexed:!1,internalType:"bytes32",name:"x",type:"bytes32"},{indexed:!1,internalType:"bytes32",name:"y",type:"bytes32"}],name:"PubkeyChanged",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"bytes32",name:"node",type:"bytes32"},{indexed:!0,internalType:"string",name:"indexedKey",type:"string"},{indexed:!1,internalType:"string",name:"key",type:"string"}],name:"TextChanged",type:"event"},{inputs:[{internalType:"bytes32",name:"node",type:"bytes32"},{internalType:"uint256",name:"contentTypes",type:"uint256"}],name:"ABI",outputs:[{internalType:"uint256",name:"",type:"uint256"},{internalType:"bytes",name:"",type:"bytes"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes32",name:"node",type:"bytes32"}],name:"addr",outputs:[{internalType:"address payable",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes32",name:"node",type:"bytes32"},{internalType:"uint256",name:"coinType",type:"uint256"}],name:"addr",outputs:[{internalType:"bytes",name:"",type:"bytes"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes32",name:"node",type:"bytes32"}],name:"contenthash",outputs:[{internalType:"bytes",name:"",type:"bytes"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes32",name:"node",type:"bytes32"},{internalType:"bytes32",name:"name",type:"bytes32"},{internalType:"uint16",name:"resource",type:"uint16"}],name:"dnsRecord",outputs:[{internalType:"bytes",name:"",type:"bytes"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes32",name:"node",type:"bytes32"},{internalType:"bytes32",name:"name",type:"bytes32"}],name:"hasDNSRecords",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes32",name:"node",type:"bytes32"},{internalType:"bytes4",name:"interfaceID",type:"bytes4"}],name:"interfaceImplementer",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"account",type:"address"},{internalType:"address",name:"operator",type:"address"}],name:"isApprovedForAll",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes32",name:"node",type:"bytes32"}],name:"name",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes32",name:"node",type:"bytes32"}],name:"pubkey",outputs:[{internalType:"bytes32",name:"x",type:"bytes32"},{internalType:"bytes32",name:"y",type:"bytes32"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes4",name:"interfaceID",type:"bytes4"}],name:"supportsInterface",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes32",name:"node",type:"bytes32"},{internalType:"string",name:"key",type:"string"}],name:"text",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes32",name:"node",type:"bytes32"}],name:"zonehash",outputs:[{internalType:"bytes",name:"",type:"bytes"}],stateMutability:"view",type:"function"}];var oc=n(85554);let ol=e=>(0,oc.Q6)(e),ou=e=>{let t="";for(let e=0;e<32;e+=1)t+="00";if(e){let n=ol(e).split(".");for(let e=n.length-1;e>=0;e-=1){let r=(0,A.sha3Raw)(n[e]).slice(2);t=(0,A.sha3Raw)("0x".concat(t).concat(r)).slice(2)}}return"0x".concat(t)};var od=function(e,t,n,r){return new(n||(n=Promise))(function(i,o){function s(e){try{c(r.next(e))}catch(e){o(e)}}function a(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):((t=e.value)instanceof n?t:new n(function(e){e(t)})).then(s,a)}c((r=r.apply(e,t||[])).next())})};class oh{getOwner(e){return od(this,void 0,void 0,function*(){try{return this.contract.methods.owner(ou(e)).call()}catch(e){throw Error()}})}getTTL(e){return od(this,void 0,void 0,function*(){try{return this.contract.methods.ttl(ou(e)).call()}catch(e){throw Error()}})}recordExists(e){return od(this,void 0,void 0,function*(){try{return this.contract.methods.recordExists(ou(e)).call()}catch(e){throw Error()}})}getResolver(e){return od(this,void 0,void 0,function*(){try{return this.contract.methods.resolver(ou(e)).call().then(e=>{if("string"==typeof e)return new ot(oa,e,this.context);throw Error()})}catch(e){throw Error()}})}get events(){return this.contract.events}constructor(e,t){this.contract=new ot(os,null!=t?t:oi.main,e),this.context=e}}var of=function(e,t,n,r){return new(n||(n=Promise))(function(i,o){function s(e){try{c(r.next(e))}catch(e){o(e)}}function a(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):((t=e.value)instanceof n?t:new n(function(e){e(t)})).then(s,a)}c((r=r.apply(e,t||[])).next())})};class op{getResolverContractAdapter(e){return of(this,void 0,void 0,function*(){return this.registry.getResolver(e)})}checkInterfaceSupport(e,t){var n,r;return of(this,void 0,void 0,function*(){if((0,A.isNullish)(or[t]))throw new _.UF$(null!==(n=e.options.address)&&void 0!==n?n:"",t);if(!(yield e.methods.supportsInterface(or[t]).call()))throw new _.UF$(null!==(r=e.options.address)&&void 0!==r?r:"",t)})}supportsInterface(e,t){var n;return of(this,void 0,void 0,function*(){let r=yield this.getResolverContractAdapter(e),i=t;if(!(0,V.H2)(i)){if(i=null!==(n=(0,A.sha3)(t))&&void 0!==n?n:"",""===t)throw Error("Invalid interface Id");i=i.slice(0,10)}return r.methods.supportsInterface(i).call()})}getAddress(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:60;return of(this,void 0,void 0,function*(){let n=yield this.getResolverContractAdapter(e);return yield this.checkInterfaceSupport(n,"addr"),n.methods.addr(ou(e),t).call()})}getPubkey(e){return of(this,void 0,void 0,function*(){let t=yield this.getResolverContractAdapter(e);return yield this.checkInterfaceSupport(t,"pubkey"),t.methods.pubkey(ou(e)).call()})}getContenthash(e){return of(this,void 0,void 0,function*(){let t=yield this.getResolverContractAdapter(e);return yield this.checkInterfaceSupport(t,"contenthash"),t.methods.contenthash(ou(e)).call()})}constructor(e){this.registry=e}}var om=function(e,t,n,r){return new(n||(n=Promise))(function(i,o){function s(e){try{c(r.next(e))}catch(e){o(e)}}function a(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):((t=e.value)instanceof n?t:new n(function(e){e(t)})).then(s,a)}c((r=r.apply(e,t||[])).next())})};class og extends nh{getResolver(e){return om(this,void 0,void 0,function*(){return this._registry.getResolver(e)})}recordExists(e){return om(this,void 0,void 0,function*(){return this._registry.recordExists(e)})}getTTL(e){return om(this,void 0,void 0,function*(){return this._registry.getTTL(e)})}getOwner(e){return om(this,void 0,void 0,function*(){return this._registry.getOwner(e)})}getAddress(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:60;return om(this,void 0,void 0,function*(){return this._resolver.getAddress(e,t)})}getPubkey(e){return om(this,void 0,void 0,function*(){return this._resolver.getPubkey(e)})}getContenthash(e){return om(this,void 0,void 0,function*(){return this._resolver.getContenthash(e)})}checkNetwork(){return om(this,void 0,void 0,function*(){let e=Date.now()/1e3;if(!this._lastSyncCheck||e-this._lastSyncCheck>3600){let t=yield i_(this);if(!("boolean"==typeof t&&!t))throw new _.X_Y;this._lastSyncCheck=e}if(this._detectedAddress)return this._detectedAddress;let t=yield n0(this,Object.assign(Object.assign({},I.YK),{number:I.vm.HEX})),n=oi[oo[t]];if(void 0===n)throw new _.ZqO(t);return this._detectedAddress=n,this._detectedAddress})}supportsInterface(e,t){return om(this,void 0,void 0,function*(){return this._resolver.supportsInterface(e,t)})}get events(){return this._registry.events}constructor(e,t){super(null!=t?t:""),this.registryAddress=null!=e?e:oi.main,this._registry=new oh(this.getContextObject(),e),this._resolver=new op(this._registry)}}var ov=function(e,t,n,r){return new(n||(n=Promise))(function(i,o){function s(e){try{c(r.next(e))}catch(e){o(e)}}function a(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):((t=e.value)instanceof n?t:new n(function(e){e(t)})).then(s,a)}c((r=r.apply(e,t||[])).next())})};let oy=e=>ov(void 0,void 0,void 0,function*(){return(yield nT(e)).map(A.toChecksumAddress)}),oE=(e,t)=>ov(void 0,void 0,void 0,function*(){V.sC.validate(["string"],[t]);let n=yield n_(e,t);return(0,A.toChecksumAddress)(n)}),ob=(e,t,n,r)=>ov(void 0,void 0,void 0,function*(){return V.sC.validate(["address","string","uint"],[t,n,r]),nA(e,t,n,r)}),ow=(e,t)=>ov(void 0,void 0,void 0,function*(){return V.sC.validate(["address"],[t]),nR(e,t)}),oT=(e,t,n)=>ov(void 0,void 0,void 0,function*(){return V.sC.validate(["string","string"],[t,n]),nS(e,t,n)}),o_=(e,t,n)=>ov(void 0,void 0,void 0,function*(){return nP(e,nJ(t,I.pE),n)}),oA=(e,t,n)=>ov(void 0,void 0,void 0,function*(){return nI(e,nJ(t,I.pE),n)}),oR=(e,t,n,r)=>ov(void 0,void 0,void 0,function*(){return V.sC.validate(["string","address","string"],[t,n,r]),nO(e,(0,V.H2)(t)?t:(0,A.utf8ToHex)(t),n,r)}),oS=(e,t,n)=>ov(void 0,void 0,void 0,function*(){return V.sC.validate(["string","string"],[t,n]),nC(e,(0,V.H2)(t)?t:(0,A.utf8ToHex)(t),n)});var oP=function(e,t,n,r){return new(n||(n=Promise))(function(i,o){function s(e){try{c(r.next(e))}catch(e){o(e)}}function a(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):((t=e.value)instanceof n?t:new n(function(e){e(t)})).then(s,a)}c((r=r.apply(e,t||[])).next())})};class oI extends nh{getAccounts(){return oP(this,void 0,void 0,function*(){return oy(this.requestManager)})}newAccount(e){return oP(this,void 0,void 0,function*(){return oE(this.requestManager,e)})}unlockAccount(e,t,n){return oP(this,void 0,void 0,function*(){return ob(this.requestManager,e,t,n)})}lockAccount(e){return oP(this,void 0,void 0,function*(){return ow(this.requestManager,e)})}importRawKey(e,t){return oP(this,void 0,void 0,function*(){return oT(this.requestManager,e,t)})}sendTransaction(e,t){return oP(this,void 0,void 0,function*(){return o_(this.requestManager,e,t)})}signTransaction(e,t){return oP(this,void 0,void 0,function*(){return oA(this.requestManager,e,t)})}sign(e,t,n){return oP(this,void 0,void 0,function*(){return oR(this.requestManager,e,t,n)})}ecRecover(e,t){return oP(this,void 0,void 0,function*(){return oS(this.requestManager,e,t)})}}var oO={encodeEventSignature:r_,encodeFunctionCall:(e,t)=>{var n;if(!rm(e))throw new _.WFj("Invalid parameter value in encodeFunctionCall");return"".concat(ie(e)).concat(r5(null!==(n=e.inputs)&&void 0!==n?n:[],null!=t?t:[]).replace("0x",""))},encodeFunctionSignature:ie,encodeParameter:r6,encodeParameters:r5,decodeParameter:r9,decodeParameters:r7,decodeLog:ii},oC=function(e,t,n,r){return new(n||(n=Promise))(function(i,o){function s(e){try{c(r.next(e))}catch(e){o(e)}}function a(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):((t=e.value)instanceof n?t:new n(function(e){e(t)})).then(s,a)}c((r=r.apply(e,t||[])).next())})};let ox=e=>{let t=(t,n)=>oC(void 0,void 0,void 0,function*(){return nt((yield iJ(t,e)),(0,A.format)({format:"bytes"},n,I.pE))}),n=e=>{let n=na(e);return Object.assign(Object.assign({},n),{signTransaction:e=>oC(void 0,void 0,void 0,function*(){return t(e,n.privateKey)})})},r=(e,n,r)=>oC(void 0,void 0,void 0,function*(){var i;let o=yield nl(e,n,null===(i=null==r?void 0:r.nonStrict)||void 0===i||i);return Object.assign(Object.assign({},o),{signTransaction:e=>oC(void 0,void 0,void 0,function*(){return t(e,o.privateKey)})})}),i=()=>{let e=nc();return Object.assign(Object.assign({},e),{signTransaction:n=>oC(void 0,void 0,void 0,function*(){return t(n,e.privateKey)})})},o=new Y({create:i,privateKeyToAccount:n,decrypt:r});return{signTransaction:t,create:i,privateKeyToAccount:n,decrypt:r,recoverTransaction:nn,hashMessage:t9,sign:ne,recover:nr,encrypt:ns,wallet:o,privateKeyToAddress:ni,parseAndValidatePrivateKey:t7,privateKeyToPublicKey:no}};class oN extends nh{constructor(e){var t;!(0,A.isNullish)(e)&&("string"!=typeof e||""!==e.trim())&&("string"==typeof e||U(e)||e.provider)||console.warn("NOTE: web3.js is running without provider. You need to pass a provider in order to interact with the network!");let n={};"string"==typeof e||U(e)?n.provider=e:n=e||{},n.registeredSubscriptions=Object.assign(Object.assign({},iF),null!==(t=n.registeredSubscriptions)&&void 0!==t?t:{}),super(n);let r=ox(this);this._wallet=r.wallet,this._accountProvider=r,this.utils=A;let i=this;class o extends on{constructor(e,t,n,r,o){let s,a;if((0,A.isContractInitOptions)(t)&&(0,A.isContractInitOptions)(n))throw new _.yNx("Should not provide options at both 2nd and 3rd parameters");let c={},l=I.YK;if(!(0,A.isNullish)(t)&&"object"!=typeof t&&"string"!=typeof t)throw new _.yNx;"string"==typeof t&&(s=t),c=(0,A.isContractInitOptions)(t)?t:(0,A.isContractInitOptions)(n)?n:{},a=t instanceof nh?t:n instanceof nh?n:r instanceof nh?r:i.getContextObject(),o?l=o:(0,A.isDataFormat)(n)?l=n:(0,A.isDataFormat)(r)&&(l=r),super(e,s,c,a,l),super.subscribeToContextEvents(i)}}let s=i.use(iG);this.eth=Object.assign(s,{ens:i.use(og,oi.main),Iban:nf,net:i.use(n3),personal:i.use(oI),Contract:o,abi:oO,accounts:r})}}oN.version="4.4.0",oN.utils=A,oN.modules={Web3Eth:iG,Iban:nf,Net:n3,ENS:og,Personal:oI};var ok=oN}}]);